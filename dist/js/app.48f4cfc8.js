(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={app:0},s={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-008cdbce":"17e3ebc6","chunk-49c0afb5":"88b96f4e","chunk-4c8140ba":"3296daad","chunk-6010d55c":"1c8ac690"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-49c0afb5":1,"chunk-4c8140ba":1,"chunk-6010d55c":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-008cdbce":"31d6cfe0","chunk-49c0afb5":"a7a2b275","chunk-4c8140ba":"18345671","chunk-6010d55c":"bddd8f02"}[e]+".css",s=c.p+n,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var l=i[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===n||u===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete r[e],m.parentNode.removeChild(m),a(i)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){r[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,a[1](d)}s[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"069b":function(e,t,a){"use strict";a("dfe9")},"09a8":function(e,t,a){},"0a0f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"footer px-4"},[a("div",{staticClass:"row align-items-center justify-content-lg-between"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"copyright text-default text-lg-right text-muted"},[a("small",[a("b",[e._v("Â© 2021 Avasia Information Systems Inc.")])])])])])])}],s={data:function(){return{year:(new Date).getFullYear()}}},i=s,o=a("2877"),c=Object(o["a"])(i,n,r,!1,null,null,null);t["a"]=c.exports},"0a84f":function(e,t,a){},"0efd":function(e,t,a){"use strict";a("cd1f")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},"13b6":function(e,t,a){"use strict";a("e429")},14:function(e,t){},1493:function(e,t,a){},"18f9":function(e,t,a){},"1de5":function(e,t,a){"use strict";a("cd75")},2:function(e,t){},"22d7":function(e,t,a){"use strict";a("be87")},"22f9":function(e,t,a){"use strict";a("9ab9")},"251d":function(e,t,a){"use strict";a("553d")},2545:function(e,t,a){"use strict";a("09a8")},"2aa4":function(e,t,a){},"2b00":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Department:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.departments,reduce:function(e){return e.departmentUid},label:"departmentName",clearable:!1},model:{value:e.newDepartment,callback:function(t){e.newDepartment=t},expression:"newDepartment"}}),e.$v.newDepartment.$anyDirty&&!e.$v.newDepartment.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBanks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getActivateBankAccounts(e.newBank)}},model:{value:e.newBank,callback:function(t){e.newBank=t},expression:"newBank"}}),e.$v.newBank.$anyDirty&&!e.$v.newBank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==e.activateBankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getCheckSeries(e.newBank,e.newBankAccount)}},model:{value:e.newBankAccount,callback:function(t){e.newBankAccount=t},expression:"newBankAccount"}}),e.$v.newBankAccount.$anyDirty&&!e.$v.newBankAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.checkSeries||""==e.activateBankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Series")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{input:"inputStyle",options:e.checkSeries,reduce:function(e){return e.bankCheckSeriesUid},label:"bankCheckSeries",clearable:!1},on:{input:function(t){return e.getCheckNumber(e.newBank,e.newBankAccount,e.newCheckSeries,"current")}},model:{value:e.newCheckSeries,callback:function(t){e.newCheckSeries=t},expression:"newCheckSeries"}}),e.$v.newCheckSeries.$anyDirty&&!e.$v.newCheckSeries.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==e.checkSeries||""==e.activateBankAccounts||""==e.checkNumbers?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Number")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.checkNumbers,reduce:function(e){return e.checkNumber},label:"checkNumber",clearable:!1},model:{value:e.newCheckNumber,callback:function(t){e.newCheckNumber=t},expression:"newCheckNumber"}}),e.$v.newCheckNumber.$anyDirty&&!e.$v.newCheckNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5"},[""!=e.newCheckNumber?a("base-button",{staticClass:"pl-3 pr-3 pt-2 pb-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.statusCheckNumber(e.newBank,e.newBankAccount,"skip")}}},[e._v("Skip")]):e._e(),""!=e.checkSeries||""!=e.activateBankAccounts||""!=e.checkNumbers?a("base-button",{staticClass:"pt-1 pb-1",attrs:{id:"darkInlineBtn"},on:{click:function(t){return e.getCheckNumber(e.newBank,e.newBankAccount,e.newCheckSeries,"current")}}},[e._v("Current")]):e._e(),""!=e.checkSeries||""!=e.activateBankAccounts||""!=e.checkNumbers?a("base-button",{staticClass:"pt-1 pb-1",attrs:{id:"darkInlineBtn"},on:{click:function(t){return e.getCheckNumber(e.newBank,e.newBankAccount,e.newCheckSeries,"skip")}}},[e._v("Skipped")]):e._e(),""!=e.checkSeries||""!=e.activateBankAccounts||""!=e.checkNumbers?a("base-button",{staticClass:"pt-1 pb-1",attrs:{id:"darkInlineBtn"},on:{click:function(t){return e.getCheckNumber(e.newBank,e.newBankAccount,e.newCheckSeries,"unused")}}},[e._v("Unused")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label",attrs:{for:"checkPayee"}},[a("b",[e._v("Payee:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-9 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.suppliers,reduce:function(e){return e.supplierId},label:"supplier",clearable:!1},on:{input:function(t){return e.clearDesc()}},model:{value:e.newCheckPayee,callback:function(t){e.newCheckPayee=t},expression:"newCheckPayee"}}),e.$v.newCheckPayee.$anyDirty&&!e.$v.newCheckPayee.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-3 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-payee-modal",modifiers:{"new-payee-modal":!0}}],attrs:{block:"",id:"darkBtn",title:"Add Payee"}},[e._v("Add Payee")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newDesc,expression:"newDesc"}],staticClass:"pl-2",attrs:{rows:"4",cols:"60",id:"inputStyle",placeholder:"Description"},domProps:{value:e.newDesc},on:{input:function(t){t.target.composing||(e.newDesc=t.target.value)}}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"date",placeholder:"Check Date"},model:{value:e.newCheckDate,callback:function(t){e.newCheckDate=t},expression:"newCheckDate"}}),e.$v.newCheckDate.$anyDirty&&!e.$v.newCheckDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDays,expression:"dateDays"}],staticClass:"mr-1",attrs:{type:"radio",value:"7"},domProps:{checked:e._q(e.dateDays,"7")},on:{click:function(t){return e.editDate(7)},change:function(t){e.dateDays="7"}}}),a("label",{staticClass:"mr-1"},[e._v("7 Days")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDays,expression:"dateDays"}],staticClass:"mr-1",attrs:{type:"radio",value:"15"},domProps:{checked:e._q(e.dateDays,"15")},on:{click:function(t){return e.editDate(15)},change:function(t){e.dateDays="15"}}}),a("label",{staticClass:"mr-1"},[e._v("15 Days")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDays,expression:"dateDays"}],staticClass:"mr-1",attrs:{type:"radio",value:"30"},domProps:{checked:e._q(e.dateDays,"30")},on:{click:function(t){return e.editDate(30)},change:function(t){e.dateDays="30"}}}),a("label",{staticClass:"mr-1"},[e._v("30 Days")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDays,expression:"dateDays"}],staticClass:"mr-1",attrs:{type:"radio",value:"45"},domProps:{checked:e._q(e.dateDays,"45")},on:{click:function(t){return e.editDate(45)},change:function(t){e.dateDays="45"}}}),a("label",{staticClass:"mr-1"},[e._v("45 Days")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDays,expression:"dateDays"}],staticClass:"mr-1",attrs:{type:"radio",value:""},domProps:{checked:e._q(e.dateDays,"")},on:{click:function(t){return e.editDate("")},change:function(t){e.dateDays=""}}}),a("label",{staticClass:"mr-1"},[e._v("Choose Date")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"amount"}},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-5"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",readonly:""},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("hr"),a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v(" Particulars ")])])]),a("card",{staticClass:"pl-2 pr-2"},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Particular:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-9 pl-5 pb-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.particulars,reduce:function(e){return e.particularId},label:"particular",clearable:!1},model:{value:e.newParticular,callback:function(t){e.newParticular=t},expression:"newParticular"}}),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-3 pr-5 pb-0"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-voucher-particular-modal",modifiers:{"new-voucher-particular-modal":!0}}],attrs:{block:"",id:"darkBtn",title:"Add Payee"}},[e._v("Add Particular")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Reference Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Reference Number"},model:{value:e.newReferenceNumber,callback:function(t){e.newReferenceNumber=t},expression:"newReferenceNumber"}}),e.$v.newReferenceNumber.$anyDirty&&!e.$v.newReferenceNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.newUnitPrice,e.newQuantity,"add")}},model:{value:e.newUnitPrice,callback:function(t){e.newUnitPrice=t},expression:"newUnitPrice"}}),e.$v.newUnitPrice.$anyDirty&&!e.$v.newUnitPrice.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newUnitPrice.$anyDirty&&!e.$v.newUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.newUnitPrice,e.newQuantity,"add")}},model:{value:e.newQuantity,callback:function(t){e.newQuantity=t},expression:"newQuantity"}}),e.$v.newQuantity.$anyDirty&&!e.$v.newQuantity.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newQuantity.$anyDirty&&!e.$v.newQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Amount",readonly:""},model:{value:e.newParticularAmount,callback:function(t){e.newParticularAmount=t},expression:"newParticularAmount"}}),e.$v.newParticularAmount.$anyDirty&&!e.$v.newParticularAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newParticularAmount.$anyDirty&&!e.$v.newParticularAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.types,reduce:function(e){return e.type},label:"type",clearable:!0},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}})],1)]),"Cash Advance"==e.newType?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Cash Advance Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]):e._e(),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},["Cash Advance"==e.newType?a("v-select",{attrs:{id:"inputStyle",options:e.caTypes,reduce:function(e){return e.cashAdvanceTypeId},label:"type",clearable:!1},model:{value:e.newCAType,callback:function(t){e.newCAType=t},expression:"newCAType"}}):e._e()],1)]),a("div",{staticClass:"form-group row mb-0 mt-3"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"}),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-button",{attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")])],1)])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:e.loadError,title:e.particularsTable.title,"sub-title":e.particularsTable.subTitle,data:e.checkParticulars,columns:e.particularsTable.columns},on:{reloadData:e.reloadData},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[e._v(e._s(n.particular))]),a("td",[e._v(e._s(n.description||"------"))]),a("td",[e._v(e._s(n.unitPrice))]),a("td",[e._v(e._s(n.quantity))]),a("td",[e._v(e._s(n.particularAmount))]),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(t){return e.removeParticular(n)}}}):e._e()])]}}])})],1),a("hr"),a("div",{staticClass:"text-center"},[""!=e.activateBankAccounts&&""!=e.checkSeries&&0!=e.checkParticulars.length?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.addCheck(t)}}},[e._v("Save")]):e._e()],1),a("b-modal",{attrs:{size:"md",id:"new-payee-modal",title:"Add Payee",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addPayee(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-payee-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Payee Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Payee"},model:{value:e.newPayee,callback:function(t){e.newPayee=t},expression:"newPayee"}}),e.$v.newPayee.$anyDirty&&!e.$v.newPayee.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPayee.$anyDirty&&!e.$v.newPayee.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("new-check-voucher-particular",{attrs:{id:"new-voucher-particular-modal"},on:{successSubmit:function(t){return e.getVoucherParticulars()}}})],1)},r=[],s=(a("a4d3"),a("e01a"),a("99af"),a("4160"),a("fb6a"),a("a434"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),i=a("5530"),o=a("56d7"),c=a("b5ae"),l=a("c6f8"),u=a("2f62"),d=c["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),m=c["helpers"].regex("alphaNumAndDot",/^[ 0-9â± ,. ]*$/),p=c["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),b=["#","Particular","Description","Unit Price","Quantity","Amount","Actions"],h=a("c1df"),f=new Date,v=a("9f25"),w=a("e966"),C=w.bindWith(",","."),g={name:"new-check",components:{},data:function(){return{banks:[],activateBanks:[],activateBankAccounts:[],departments:[],suppliers:[],checkSeries:[],checkNumbers:[],newCheckNumber:"",newCheckDate:h().format("YYYY-MM-DD"),newAmount:"",newCheckPayee:"",newDesc:"",newDepartment:"",newBank:"",newBankAccount:"",newCheckSeries:"",newPayee:"",loading:!0,loadError:!1,particularsTable:{title:"Particulars Table",subTitle:"",columns:[].concat(b)},checkParticulars:[],requestProcessing:!1,newParticular:"",newDescription:"",newReferenceNumber:"",newUnitPrice:"",newParticularAmount:"",newQuantity:"",totalAmount:"",dateDays:"",types:[{type:"Cash Advance"}],caTypes:[],newType:"",newCAType:""}},validations:{newCheckDate:{required:c["required"]},newCheckNumber:{required:c["required"]},newAmount:{required:c["required"],amountCustomValidator:m},newCheckPayee:{required:c["required"]},newDepartment:{required:c["required"]},newBank:{required:c["required"]},newBankAccount:{required:c["required"]},newCheckSeries:{required:c["required"]},newPayee:{required:c["required"],alphaNumCustomValidator:p},newDesc:{required:c["required"]},newParticular:{required:c["required"]},newReferenceNumber:{alphaNumCustomValidator:p},newUnitPrice:{required:c["required"],amountCustomValidator:m},newParticularAmount:{required:c["required"],amountCustomValidator:m},newQuantity:{required:c["required"],numCustomValidator:d}},computed:Object(i["a"])({},Object(u["b"])({particulars:"VoucherParticulars/allParticulars"})),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getVoucherParticulars(),e.getActivateBanks(),e.getDepartments(),e.getSuppliers(),e.getParticulars(),e.getCATypes();case 6:case"end":return t.stop()}}),t)})))()},methods:{getVoucherParticulars:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$store.dispatch("VoucherParticulars/getAllParticulars");case 3:case"end":return t.stop()}}),t)})))()},getActivateBanks:function(){var e=this,t=o["dbMains"].collection("banks").orderBy("bank","asc");e.activateBanks=[],t.get().then((function(t){t.forEach((function(t){e.activateBanks.push(t.data())})),e.newBank=e.activateBanks[0].bankUid,e.getActivateBankAccounts(e.activateBanks[0].bankUid)}))},getActivateBankAccounts:function(e){var t=this,a=o["dbMains"].collection("bankAccounts").where("bankReference","==",e).orderBy("bankAccountNumber","asc");t.activateBankAccounts=[],a.get().then((function(e){e.forEach((function(e){t.activateBankAccounts.push(e.data())})),t.newBankAccount=t.activateBankAccounts[0].bankAccountUid,t.getCheckSeries(t.newBank,t.newBankAccount)}))},getCheckSeries:function(e,t){var a=this,n=o["dbMains"].collection("bankCheckSeries").where("bankReference","==",e).where("bankAccountReference","==",t).orderBy("bankCheckSeries","asc");a.checkSeries=[],n.get().then((function(e){e.forEach((function(e){a.checkSeries.push(e.data())})),a.newCheckSeries=a.checkSeries[0].bankCheckSeriesUid,a.getCheckNumber(a.newBank,a.newBankAccount,a.newCheckSeries,"current")}))},getCheckNumber:function(e,t,a,n){var r=this,s=o["db"].collection("bankCheckSeriesReports").where("bankReference","==",e).where("bankAccountReference","==",t).where("checkSeriesReference","==",a).where("status","==",n).orderBy("checkNumber","asc");r.checkNumbers=[],r.newCheckNumber="",s.get().then((function(e){e.forEach((function(e){e.exists&&r.checkNumbers.push(e.data())})),0!=r.checkNumbers.length&&(r.newCheckNumber=r.checkNumbers[0].checkNumber)}))},getDepartments:function(){var e=this,t=o["dbUsers"].collection("departments").orderBy("departmentName","asc");e.departments=[],t.get().then((function(t){t.forEach((function(t){e.departments.push(t.data())})),e.newDepartment=e.departments[0].departmentUid}))},getSuppliers:function(){var e=this,t=o["db"].collection("suppliers").orderBy("supplier","asc");e.suppliers=[],t.get().then((function(t){t.forEach((function(t){e.suppliers.push(t.data())})),e.newCheckPayee=e.suppliers[0].supplierId}))},getCATypes:function(){var e=this,t=o["dbExpense"].collection("cashAdvanceTypes");e.caTypes=[],t.get().then((function(t){t.forEach((function(t){e.caTypes.push(t.data())})),e.newCAType=e.caTypes[0].cashAdvanceTypeId}))},cancelNewCheck:function(){this.$router.push("/check/dashboard")},addPayee:function(){var e=this;if(e.requestProcessing=!1,e.$v.newPayee.$touch(),!e.$v.newPayee.$error){var t=null;e.requestProcessing=!0,t=o["db"].collection("suppliers").where("supplier","==",Object(l["a"])(e.newPayee)),t.get().then((function(t){if(t.empty){if(t){var a=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),r=[],s="SID-"+f.getFullYear()+v(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());n.get().then((function(t){t.forEach((function(t){t.exists&&r.push(t.data());try{o["db"].collection("suppliers").doc().set({supplierId:s,supplier:Object(l["a"])(e.newPayee),status:1,userReference:r[0].userId,dateCreated:f,createdBy:a}).then((function(){e.newPayee="",e.$v.newPayee.$reset(),e.requestProcessing=!1,e.$bvModal.hide("new-payee-modal"),e.getSuppliers(),e.$swal({title:"Success",text:"New Payee added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(n){console.log(n)}}))}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Payee already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},getParticulars:function(){var e=this;if(e.loading=!1,localStorage.getItem("checkPart")&&0==e.checkParticulars.length&&(e.checkParticulars=JSON.parse(localStorage.getItem("checkPart"))),0!=e.checkParticulars.length){var t=a("e966"),n=t.bindWith(",","."),r=0,s=0;e.loading=!0,e.loadError=!1;for(var i=0;i<e.checkParticulars.length;i++)e.checkParticulars[i].rowNum=i+1,s=e.checkParticulars[i].particularAmount.replaceAll("â± ",""),r+=parseFloat(s.replaceAll(",",""));e.newAmount="â± "+n(parseFloat(r).toFixed(2)),setTimeout((function(){e.loading=!1}),1500)}else 0==e.checkParticulars&&(e.newAmount="",e.checkParticulars=[])},reloadData:function(){this.getParticulars()},computeAmount:function(e,t,a){e=e.replaceAll("â± ",""),this.newUnitPrice="â± "+e,e=e.replaceAll(",",""),"add"==a?(this.newParticularAmount=e*t,this.newParticularAmount="â± "+C(parseFloat(this.newParticularAmount).toFixed(2))):"update"==a&&(this.edit.particularAmount=e*t)},addParticular:function(){var e=this,t=!0,a="";if(e.requestProcessing=!1,e.$v.newParticular.$touch(),e.$v.newReferenceNumber.$touch(),e.$v.newUnitPrice.$touch(),e.$v.newParticularAmount.$touch(),e.$v.newQuantity.$touch(),e.$v.newParticular.$error||e.$v.newUnitPrice.$error||e.$v.newParticularAmount.$error||e.$v.newQuantity.$error||e.$v.newReferenceNumber.$error||(t=!1),!t){e.requestProcessing=!0,0==e.checkParticulars.length&&(e.checkParticulars=[]);for(var n=0;n<e.particulars.length;n++)e.particulars[n].particularId==e.newParticular&&(a=e.particulars[n].particular);var r={rowNum:"",particularReference:e.newParticular,particular:a,description:e.newDescription,referenceNumber:e.newReferenceNumber,unitPrice:e.newUnitPrice,particularAmount:e.newParticularAmount,quantity:e.newQuantity,type:e.newType,caType:e.newCAType,status:1};e.checkParticulars.push(r),e.$swal({title:"Success",text:"New Particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newParticular="",e.newDescription="",e.newReferenceNumber="",e.newUnitPrice="",e.newParticularAmount="",e.newQuantity="",e.newType="",e.$v.newParticular.$reset(),e.$v.newReferenceNumber.$reset(),e.$v.newUnitPrice.$reset(),e.$v.newParticularAmount.$reset(),e.$v.newQuantity.$reset(),e.$bvModal.hide("add-particular-modal"),e.getParticulars()})),e.requestProcessing=!1}},editDate:function(e){this.newCheckDate=""!=e?h().add(e,"day").format("YYYY-MM-DD"):""},clearDesc:function(){this.$v.newDesc.$reset()},addCheck:function(){var e=this;if(e.requestProcessing=!1,e.$v.newCheckDate.$touch(),e.$v.newCheckNumber.$touch(),e.$v.newAmount.$touch(),e.$v.newCheckPayee.$touch(),e.$v.newDepartment.$touch(),e.$v.newBank.$touch(),e.$v.newBankAccount.$touch(),e.$v.newCheckSeries.$touch(),e.newAmount=e.newAmount.replaceAll(",",""),e.newAmount=e.newAmount.replaceAll("â± ",""),!e.$v.newCheckDate.$error&&!e.$v.newCheckNumber.$error&&!e.$v.newAmount.$error&&!e.$v.newCheckPayee.$error&&!e.$v.newDepartment.$error&&!e.$v.newBank.$error&&!e.$v.newBankAccount.$error&&!e.$v.newCheckSeries.$error){var t=o["db"].collection("suppliers").where("supplierId","==",e.newCheckPayee),a=[];t.get().then((function(t){t.forEach((function(e){a.push(e.data())})),"CASH"==a[0].supplier?(e.$v.newDesc.$touch(),e.$v.newDesc.$error?e.$swal({title:"Error",text:"Description is required",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}):e.newCheck()):e.newCheck()}))}},newCheck:function(){var e=this;console.log(e.checkParticulars),e.requestProcessing=!0,this.$swal({title:"Are you sure?",text:"You want to save this check",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(t){if(t.value){var a=null;a=o["db"].collection("bankChecks").where("bankCheckNumber","==",e.newCheckNumber).where("bankCheckSeriesReference","==",e.newCheckSeries).where("bankReference","==",e.newBank).where("bankAccountReference","==",e.newBankAccount),a.get().then((function(t){if(t.empty){if(t){var a=o["dbMains"].collection("bankCheckSeries").where("bankCheckSeriesUid","==",e.newCheckSeries),n=o["db"].collection("bankChecks").orderBy("voucherDate","desc"),r=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=o["dbUsers"].collection("departments").where("departmentUid","==",e.newDepartment),i=[],c=[],l="",u=[],d=[];a.get().then((function(t){t.forEach((function(e){e.exists&&(c.push(e.data()),l=e.id)})),n.limit(1).get().then((function(t){t.forEach((function(e){e.exists&&u.push(e.data())}));var a=parseInt(c.bankCheckSeries)+99,n="";r.get().then((function(t){t.forEach((function(e){i.push(e.data())})),s.get().then((function(t){t.forEach((function(e){d.push(e.data())}));var r=new Date,s="postdated",c="BCI-"+f.getFullYear()+v(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());0!=u.length?(n=v(parseInt(u[0].voucherNumber.slice(7))+1,5),"100000"==n.toString()&&(n="00001")):n="00001",h(e.newCheckDate).format("YYYY-MM-DD")==h(f).format("YYYY-MM-DD")&&(s="dated");try{o["db"].collection("bankChecks").doc().set({bankCheckUid:c,bankCheckNumber:e.newCheckNumber,bankCheckDate:e.newCheckDate,bankCheckAmount:e.newAmount,checkType:s,voucherNumber:v(r.getMonth()+1)+""+r.getFullYear().toString().slice(2,4)+"-"+d[0].seriesCode+n,voucherDate:r,departmentReference:e.newDepartment,payeeReference:e.newCheckPayee,description:e.newDesc,bankReference:e.newBank,bankAccountReference:e.newBankAccount,bankCheckSeriesReference:e.newCheckSeries,status:3,userReference:i[0].userId,dateCreated:f,dateModified:f,createdBy:i[0].username}).then((function(){a==e.newCheckNumber&&o["dbMains"].collection("bankCheckSeries").doc(l).update({status:0,dateModified:f});for(var t=function(t){var a="BCPI-"+f.getFullYear()+v(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());e.checkParticulars[t].unitPrice=e.checkParticulars[t].unitPrice.replaceAll(",",""),e.checkParticulars[t].unitPrice=e.checkParticulars[t].unitPrice.replaceAll("â± ",""),e.checkParticulars[t].particularAmount=e.checkParticulars[t].particularAmount.replaceAll(",",""),e.checkParticulars[t].particularAmount=e.checkParticulars[t].particularAmount.replaceAll("â± ",""),o["db"].collection("bankCheckParticulars").doc().set({bankCheckParticularsUid:a,particularReference:e.checkParticulars[t].particularReference,particular:e.checkParticulars[t].particular,description:e.checkParticulars[t].description,referenceNumber:e.checkParticulars[t].referenceNumber,unitPrice:e.checkParticulars[t].unitPrice,particularAmount:e.checkParticulars[t].particularAmount,quantity:e.checkParticulars[t].quantity,bankCheckReference:c,userReference:i[0].userId,status:1,dateCreated:f,dateModified:f,createdBy:i[0].username}).then((function(){if("Cash Advance"==e.checkParticulars[t].type){var a="CAI-"+f.getFullYear()+v(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());o["dbExpense"].collection("cashAdvances").doc().set({cashAdvanceId:a,cashAdvanceName:e.checkParticulars[t].particular,cashAdvanceAmount:e.checkParticulars[t].particularAmount,type:"Check",caTypeReference:e.checkParticulars[t].caType,cashAdvanceDate:e.newCheckDate,reference:c,description:e.checkParticulars[t].description,status:1,userReference:i[0].userId,dateCreated:f,dateModified:f})}var n=o["db"].collection("bankCheckSeriesReports").where("checkSeriesReference","==",e.newCheckSeries).where("checkNumber","==",e.newCheckNumber),r="",s=[];n.get().then((function(t){if(t.forEach((function(e){r=e.id,s.push(e.data())})),o["db"].collection("bankCheckSeriesReports").doc(r).update({checkReference:c,status:"used",dateModified:f}),"current"==s[0].status){var a=parseInt(e.newCheckNumber),n=o["db"].collection("bankCheckSeriesReports").where("checkSeriesReference","==",e.newCheckSeries).where("status","==","unused").orderBy("checkNumber","asc").startAfter(a),i="";n.limit(1).get().then((function(e){e.forEach((function(e){i=e.id})),o["db"].collection("bankCheckSeriesReports").doc(i).update({status:"current",dateModified:f})}))}e.newCheckNumber="",e.newCheckDate="",e.newAmount="",e.newCheckPayee="",e.newDesc="",e.checkParticulars=[],e.$v.newCheckDate.$reset(),e.$v.newAmount.$reset(),e.$v.newCheckPayee.$reset(),e.$v.newDepartment.$reset(),e.$v.newBank.$reset(),e.$v.newBankAccount.$reset(),e.$v.newDesc.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New Check added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){if(localStorage.getItem("checkPart")){var t=[];t=JSON.parse(localStorage.getItem("checkPart"));for(var a=0;a<t.length;a++)o["dbExpense"].collection("reimbursements").doc(t[a].reimId).update({checkReference:c,status:3,dateModified:f}).then((function(){localStorage.removeItem("checkPart")}))}e.$router.push("/check/voucher/"+c+"/check")}))}))}))},n=0;n<e.checkParticulars.length;n++)t(n)}))}catch(m){console.log(m),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}))}))}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Check already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}else e.requestProcessing=!1}))},removeParticular:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this Particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&(t.checkParticulars.splice(parseInt(e.rowNum)-1,1),t.$swal({title:"Success",text:"Particular delete successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1,t.getParticulars())}))},statusCheckNumber:function(e,t,a){var n=this;this.$swal({title:"Are you sure?",text:"You want to "+a+" this Check Number",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value){"cancel"==a&&(a="cancelled");var s=o["db"].collection("bankCheckSeriesReports").where("bankReference","==",e).where("bankAccountReference","==",t).where("checkSeriesReference","==",n.newCheckSeries).where("checkNumber","==",n.newCheckNumber),i="",c=[];s.get().then((function(r){r.empty||(r.forEach((function(e){i=e.id,c.push(e.data())})),o["db"].collection("bankCheckSeriesReports").doc(i).update({status:a,dateModified:f}).then((function(){if("current"==c[0].status){var r=parseInt(n.newCheckNumber),s=o["db"].collection("bankCheckSeriesReports").where("checkSeriesReference","==",n.newCheckSeries).where("status","==","unused").orderBy("checkNumber","asc").startAfter(r),i="";s.limit(1).get().then((function(r){r.empty||(r.forEach((function(e){i=e.id})),o["db"].collection("bankCheckSeriesReports").doc(i).update({status:"current",dateModified:f}).then((function(){n.getCheckSeries(e,t),n.requestProcessing=!1,n.$swal({title:"Success",text:"Check number "+a+" successfully",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),n.requestProcessing=!1,n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})))}))}else n.getCheckSeries(e,t),n.requestProcessing=!1,n.$swal({title:"Success",text:"Check number "+a+" successfully",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})))}))}}))}}},k=g,y=(a("4e21"),a("2877")),$=Object(y["a"])(k,n,r,!1,null,null,null);t["default"]=$.exports},3:function(e,t){},"35ba":function(e,t,a){"use strict";a("8107")},"366f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",{staticClass:"pt-4"},[a("vue-good-table",{ref:"bank-account-table",attrs:{columns:e.columns,rows:e.bankAccounts,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"bankAccountName",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bankAccountName"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankAccountName))])]):e._e(),"bankAccountNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankAccountNumber))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"bank"==t.column.field?a("span",e._l(e.banks,(function(n){return a("span",{key:n.bankUid},[n.bankUid==t.row.bankReference?a("span",[e._v(e._s(n.bank))]):e._e()])})),0):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateBankAccountModal(t.row)}}}),a("span",{staticClass:"pointer ml-2 far fa-credit-card",attrs:{id:"sideBarTxt",title:"Account Balance"},on:{click:function(a){return e.openAuthenticationModal(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.bankAccounts.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getBankAccounts(1,"")}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-bank-account-modal",modifiers:{"new-bank-account-modal":!0}}],attrs:{id:"darkBtn"}},[e._v("New Bank Account")])],1)],1),a("b-modal",{attrs:{size:"xl",id:"new-bank-account-modal",title:"New Bank Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addBankAccount(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-bank-account-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Name"},model:{value:e.newAccountName,callback:function(t){e.newAccountName=t},expression:"newAccountName"}}),e.$v.newAccountName.$anyDirty&&!e.$v.newAccountName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAccountName.$anyDirty&&!e.$v.newAccountName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Number"},model:{value:e.newAccountNumber,callback:function(t){e.newAccountNumber=t},expression:"newAccountNumber"}}),e.$v.newAccountNumber.$anyDirty&&!e.$v.newAccountNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAccountNumber.$anyDirty&&!e.$v.newAccountNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Branch:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Person:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Branch"},model:{value:e.newBranch,callback:function(t){e.newBranch=t},expression:"newBranch"}}),e.$v.newBranch.$anyDirty&&!e.$v.newBranch.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newBranch.$anyDirty&&!e.$v.newBranch.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Person"},model:{value:e.newContactPerson,callback:function(t){e.newContactPerson=t},expression:"newContactPerson"}}),e.$v.newContactPerson.$anyDirty&&!e.$v.newContactPerson.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newContactPerson.$anyDirty&&!e.$v.newContactPerson.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date Created:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:e.newContactNumber,callback:function(t){e.newContactNumber=t},expression:"newContactNumber"}}),e.$v.newContactNumber.$anyDirty&&!e.$v.newContactNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newContactNumber.$anyDirty&&!e.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newBankAccountCreated,callback:function(t){e.newBankAccountCreated=t},expression:"newBankAccountCreated"}}),e.$v.newBankAccountCreated.$anyDirty&&!e.$v.newBankAccountCreated.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.banks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},model:{value:e.newBank,callback:function(t){e.newBank=t},expression:"newBank"}}),e.$v.newBank.$anyDirty&&!e.$v.newBank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"xl",id:"update-bank-account-modal",title:"Edit Bank Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateBankAccount(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-bank-account-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Name"},model:{value:e.selectedBankAccount.accountName,callback:function(t){e.$set(e.selectedBankAccount,"accountName",t)},expression:"selectedBankAccount.accountName"}}),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.accountName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.accountName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Number"},model:{value:e.selectedBankAccount.accountNumber,callback:function(t){e.$set(e.selectedBankAccount,"accountNumber",t)},expression:"selectedBankAccount.accountNumber"}}),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.accountNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.accountNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Branch:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Person:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Branch"},model:{value:e.selectedBankAccount.branch,callback:function(t){e.$set(e.selectedBankAccount,"branch",t)},expression:"selectedBankAccount.branch"}}),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.branch.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.branch.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Contact Person"},model:{value:e.selectedBankAccount.contactPerson,callback:function(t){e.$set(e.selectedBankAccount,"contactPerson",t)},expression:"selectedBankAccount.contactPerson"}}),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.contactPerson.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.contactPerson.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date Created:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Contact Number"},model:{value:e.selectedBankAccount.contactNumber,callback:function(t){e.$set(e.selectedBankAccount,"contactNumber",t)},expression:"selectedBankAccount.contactNumber"}}),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.contactNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.contactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",placeholder:"Bank Account Created"},model:{value:e.selectedBankAccount.bankAccountCreated,callback:function(t){e.$set(e.selectedBankAccount,"bankAccountCreated",t)},expression:"selectedBankAccount.bankAccountCreated"}}),e.$v.selectedBankAccount.$anyDirty&&!e.$v.selectedBankAccount.bankAccountCreated.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.banks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},model:{value:e.selectedBankAccount.bank,callback:function(t){e.$set(e.selectedBankAccount,"bank",t)},expression:"selectedBankAccount.bank"}}),e.$v.selectedBankAccount.bank.$anyDirty&&!e.$v.selectedBankAccount.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"auth-modal",title:"Authentication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.adminAuth(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("auth-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Password:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"password",id:"inputStyle"},model:{value:e.checkPassword,callback:function(t){e.checkPassword=t},expression:"checkPassword"}}),e.$v.checkPassword.$anyDirty&&!e.$v.checkPassword.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"account-balance-modal",title:"Account Balance",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateBalance(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("account-balance-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Account Balance:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.accountBalance,callback:function(t){e.accountBalance=t},expression:"accountBalance"}})],1)])])],1)},r=[],s=(a("99af"),a("4160"),a("159b"),a("5530")),i=(a("96cf"),a("1da1")),o=a("56d7"),c=a("b5ae"),l=a("2f62"),u=c["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9. ]*$/),d=c["helpers"].regex("alphaNumAndDot",/^[ A-Za-z. ]*$/),m=c["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),p=["#","Account Name","Account No.","Bank","Actions"],b=a("c1df"),h=new Date,f={name:"bank-accounts",components:{},data:function(){return{columns:[{label:"Account Name",field:"bankAccountName"},{label:"Account No",field:"bankAccountNumber"},{label:"Bank",field:"bank"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,loadError:!1,bankAccountTable:{title:"Bank Accounts Table",subTitle:"",columns:[].concat(p)},bankAccountsCount:0,activateBanks:[],currentPage:1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newAccountName:"",newAccountNumber:"",newBranch:"",newContactPerson:"",newContactNumber:"",newBankAccountCreated:b().format("YYYY-MM-DD"),newBank:"",selectedBankAccount:{id:"",bankUid:null,accountName:"",accountNumber:"",branch:"",contactPerson:"",contactNumber:"",bankAccountCreated:"",bank:""},requestProcessing:!1,checkPassword:"",accountId:"",accountBalance:""}},validations:{newAccountName:{required:c["required"],alphaNumCustomValidator:u},newAccountNumber:{required:c["required"],alphaNumCustomValidator:u},newBranch:{required:c["required"],alphaNumCustomValidator:u},newContactPerson:{required:c["required"],alphaCustomValidator:d},newContactNumber:{required:c["required"],numCustomValidator:m},newBankAccountCreated:{required:c["required"]},newBank:{required:c["required"]},selectedBankAccount:{accountName:{required:c["required"],alphaNumCustomValidator:u},accountNumber:{required:c["required"],alphaNumCustomValidator:u},branch:{required:c["required"],alphaNumCustomValidator:u},contactPerson:{required:c["required"],alphaNumCustomValidator:u},contactNumber:{required:c["required"],numCustomValidator:m},bankAccountCreated:{required:c["required"]},bank:{required:c["required"]}},checkPassword:{required:c["required"]}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=o["dbUsers"].collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getBankAccounts(),e.getBanks();case 2:case"end":return t.stop()}}),t)})))()},computed:Object(s["a"])({},Object(l["b"])({users:"Users/users",bankAccounts:"BankAccounts/bankAccounts",banks:"Banks/bankData",valid:"BankAccounts/valid",error:"BankAccounts/error",validAuth:"Users/valid"})),methods:{closePage:function(){this.$router.push("/check/dashboard")},getBankAccounts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.loading=!0,a.loadError=!1,a.$store.dispatch("BankAccounts/getBankAccounts",{limit:a.limit}),setTimeout((function(){a.loading=!1}),1e3);case 5:case"end":return t.stop()}}),t)})))()},getBanks:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$store.dispatch("Banks/getBankData").then((function(){setTimeout((function(){a.newBank=a.banks[0].bankUid}),1e3)}));case 2:case"end":return t.stop()}}),t)})))()},addBankAccount:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!1,a.$v.newAccountName.$touch(),a.$v.newAccountNumber.$touch(),a.$v.newBranch.$touch(),a.$v.newContactPerson.$touch(),a.$v.newContactNumber.$touch(),a.$v.newBankAccountCreated.$touch(),a.$v.newBank.$touch(),a.$v.newAccountName.$error||a.$v.newAccountNumber.$error||a.$v.newBranch.$error||a.$v.newContactPerson.$error||a.$v.newContactNumber.$error||a.$v.newBankAccountCreated.$error||a.$v.newBank.$error||(a.requestProcessing=!0,n=localStorage.getItem("aisname"),a.$store.dispatch("BankAccounts/checkNewBankAccount",{newAccountNumber:a.newAccountNumber}).then((function(){setTimeout((function(){if(1==a.valid)a.validationMessage(),a.requestProcessing=!1;else if(0==a.valid){var e={bankAccountUid:"",bankAccountName:a.newAccountName,bankAccountNumber:a.newAccountNumber,bankAccountBranch:a.newBranch,contactPerson:a.newContactPerson,contactNumber:a.newContactNumber,accountBalance:"",availableBalance:"",bankAccountDate:b(a.newBankAccountCreated).format("YYYY-MM-DD"),bankReference:a.newBank,createdBy:n,userReference:"",status:1,dateCreated:h,dateModified:h};a.$store.dispatch("BankAccounts/saveBankAccount",e).then((function(){a.requestProcessing=!1,0==a.error?(a.newAccountName="",a.newAccountNumber="",a.newBranch="",a.newContactPerson="",a.newContactNumber="",a.newBankAccountCreated="",a.$v.newAccountName.$reset(),a.$v.newAccountNumber.$reset(),a.$v.newBranch.$reset(),a.$v.newContactPerson.$reset(),a.$v.newContactNumber.$reset(),a.$v.newBankAccountCreated.$reset(),a.$bvModal.hide("new-bank-account-modal"),a.$refs["bank-account-table"].reset(),a.getBanks(),a.getBankAccounts(1,""),a.$swal({title:"Success",text:"New Bank Account added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}))}}),1e3)})));case 10:case"end":return t.stop()}}),t)})))()},validationMessage:function(){var e=this;e.$swal({title:"Invalid",text:"Bank Account Number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},errorMessage:function(){var e=this;e.$swal({title:"Success",text:"New Bank Account added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},openUpdateBankAccountModal:function(e){this.selectedBankAccount={id:e.id,bankAccountUid:e.bankAccountUid,accountName:e.bankAccountName,accountNumber:e.bankAccountNumber,branch:e.bankAccountBranch,contactPerson:e.contactPerson,contactNumber:e.contactNumber,bankAccountCreated:e.bankAccountDate,bank:e.bankReference},this.$bvModal.show("update-bank-account-modal")},updateBankAccount:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!1,a.$v.selectedBankAccount.$touch(),a.$v.selectedBankAccount.$error||(a.requestProcessing=!0,a.$store.dispatch("BankAccounts/checkEditBankAccount",a.selectedBankAccount).then((function(){setTimeout((function(){1==a.valid?(a.requestProcessing=!1,a.validationMessage()):0==a.valid&&a.$store.dispatch("BankAccounts/updateBankAccount",a.selectedBankAccount).then((function(){a.requestProcessing=!1,0==a.error?(a.selectedBankAccount={},a.$v.selectedBankAccount.$reset(),a.$bvModal.hide("update-bank-account-modal"),a.$refs["bank-account-table"].reset(),a.getBankAccounts(1,""),a.$swal({title:"Success",text:"Bank Account updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}))}),1e3)})));case 4:case"end":return t.stop()}}),t)})))()},openAuthenticationModal:function(e){this.accountId=e.id,this.accountBalance=e.accountBalance,this.$bvModal.show("auth-modal")},adminAuth:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$v.checkPassword.$touch(),a.$v.checkPassword.$error||a.$store.dispatch("Users/adminAuthentication",{checkPassword:a.checkPassword}).then((function(){setTimeout((function(){0==a.validAuth?(a.$bvModal.hide("auth-modal"),a.$bvModal.show("account-balance-modal"),a.checkPassword=""):1==a.validAuth?a.$swal({title:"Error",text:"Invalid password.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}):2==a.validAuth&&a.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){a.$bvModal.hide("auth-modal")})),a.$v.checkPassword.$reset()}),1e3)}));case 3:case"end":return t.stop()}}),t)})))()},updateBalance:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!1;try{n={accountId:a.accountId,accountBalance:a.accountBalance.replaceAll(",",""),dateModified:h},a.requestProcessing=!0,a.$store.dispatch("BankAccounts/updateAccountBalance",n).then((function(){setTimeout((function(){0==a.error?(a.accountId="",a.accountBalance="",a.$bvModal.hide("account-balance-modal"),a.$refs["bank-account-table"].reset(),a.getBankAccounts(1,""),a.requestProcessing=!1,a.$swal({title:"Success",text:"Bank Account updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}),1e3)}))}catch(r){console.log(r),a.errorMessage()}case 3:case"end":return t.stop()}}),t)})))()}}},v=f,w=a("2877"),C=Object(w["a"])(v,n,r,!1,null,null,null);t["default"]=C.exports},3949:function(e,t,a){},"397e":function(e,t,a){},"3d93":function(e,t,a){},4:function(e,t){},"41be":function(e,t,a){"use strict";a("95cc")},"438e":function(e,t,a){"use strict";a("dac7")},4400:function(e,t,a){"use strict";a("e215")},"44d2a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",{staticClass:"pt-4"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.checkSeries,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"bankCheckSeries",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bankCheckSeries"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankCheckSeries))])]):e._e(),"bankAccountNumber"==t.column.field?a("span",e._l(e.bankAccounts,(function(n){return a("span",{key:n.bankAccountUid},[n.bankAccountUid==t.row.bankAccountReference?a("span",[e._v(e._s(n.bankAccountNumber))]):e._e()])})),0):e._e(),"bank"==t.column.field?a("span",e._l(e.banks,(function(n){return a("span",{key:n.bankUid},[n.bankUid==t.row.bankReference?a("span",[e._v(e._s(n.bank))]):e._e()])})),0):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"bankCheckSeriesDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.bankCheckSeriesDate,"MMM DD, YYYY")))])]):e._e()])]}}])}),!e.loading&&e.checkSeries.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View: ")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedCheckSeries(1,"")}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-check-series-modal",modifiers:{"new-check-series-modal":!0}}],attrs:{id:"darkBtn"}},[e._v("New Check Series")])],1)],1),a("b-modal",{attrs:{size:"xl",id:"new-check-series-modal",title:"New Check Series",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[""!=e.activateBankAccounts?a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addCheckSeries(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]):e._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-check-series-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Series Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Last Used Check Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Series Number"},model:{value:e.newSeriesNumber,callback:function(t){e.newSeriesNumber=t},expression:"newSeriesNumber"}}),e.$v.newSeriesNumber.$anyDirty&&!e.$v.newSeriesNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSeriesNumber.$anyDirty&&!e.$v.newSeriesNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Last Used Check Number"},model:{value:e.newLastUsed,callback:function(t){e.newLastUsed=t},expression:"newLastUsed"}}),e.$v.newLastUsed.$anyDirty&&!e.$v.newLastUsed.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Series Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",placeholder:"Series Date"},model:{value:e.newSeriesDate,callback:function(t){e.newSeriesDate=t},expression:"newSeriesDate"}}),e.$v.newSeriesDate.$anyDirty&&!e.$v.newSeriesDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBanks,reduce:function(e){return e.bankUid},label:"bank"},on:{input:function(t){return e.getActivateBankAccounts(e.newBank)}},model:{value:e.newBank,callback:function(t){e.newBank=t},expression:"newBank"}}),e.$v.newBank.$anyDirty&&!e.$v.newBank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Account:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==e.activateBankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v(" No Bank Account ")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber"},model:{value:e.newBankAccount,callback:function(t){e.newBankAccount=t},expression:"newBankAccount"}}),e.$v.newBankAccount.$anyDirty&&!e.$v.newBankAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},r=[],s=(a("99af"),a("4160"),a("fb6a"),a("d3b7"),a("25f0"),a("159b"),a("5530")),i=(a("96cf"),a("1da1")),o=a("56d7"),c=a("b5ae"),l=a("2f62"),u=c["helpers"].regex("alphaNumAndDot",/^[ -.0-9 ]*$/),d=c["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),m=["#","Series No.","Account No.","Bank","Series Date"],p=a("c1df"),b=new Date,h=a("9f25"),f={name:"check-series",components:{},data:function(){return{columns:[{label:"Series No",field:"bankCheckSeries"},{label:"Account No",field:"bankAccountNumber"},{label:"Bank",field:"bank"},{label:"Created by",field:"userReference"},{label:"Series Date",field:"bankCheckSeriesDate"}],loading:!0,loadError:!1,checkSeriesTable:{title:"Check Series Table",subTitle:"",columns:[].concat(m)},checkSeriesCount:0,checkSeries:[],banks:[],activateBanks:[],bankAccounts:[],activateBankAccounts:[],currentPage:1,searchTerm:"",searching:!1,newSeriesNumber:"",newLastUsed:"",newSeriesDate:p().format("YYYY-MM-DD"),newBank:"",newBankAccount:"",requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All"}],limit:"20"}},validations:{newSeriesNumber:{required:c["required"],alphaNumCustomValidator:u},newLastUsed:{numCustomValidator:d},newSeriesDate:{required:c["required"]},newBank:{required:c["required"]},newBankAccount:{required:c["required"]}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=o["dbUsers"].collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedCheckSeries(1,""),e.getBanks(),e.getBankAccounts(),e.getActivateBanks();case 4:case"end":return t.stop()}}),t)})))()},computed:Object(s["a"])({},Object(l["b"])({users:"Users/users"})),methods:{closePage:function(){this.$router.push("/check/dashboard")},getPaginatedCheckSeries:function(e,t){var a=this,n=null,r=[],s=[];if(a.loading=!0,a.loadError=!1,a.checkSeries=[],t&&(a.searching=!0),t){var i=o["dbMains"].collection("bankAccounts").where("bankAccountNumber","==",t),c=[];i.get().then((function(t){t.forEach((function(e){c.push(e.data())})),"all"!=a.limit?n=o["dbMains"].collection("bankCheckSeries").where("bankAccountReference","==",c[0].bankAccountUid).orderBy("bankCheckSeries","asc").limit(a.limit):"all"==a.limit&&(n=o["dbMains"].collection("bankCheckSeries").where("bankAccountReference","==",c[0].bankAccountUid).orderBy("bankCheckSeries","asc")),n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data()),s.push(e.id)})),r.sort((function(e,t){return t.dateCreated-e.dateCreated}));for(var n=0;n<r.length;n++)r[n]["rowNum"]=1+n,r[n]["id"]=s[n],r[n].dateCreated=p.unix(r[n].dateCreated.seconds),a.checkSeries.push(r[n]);a.checkSeriesCount=r.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))}))}else"all"!=a.limit?n=o["dbMains"].collection("bankCheckSeries").orderBy("bankCheckSeries","asc").limit(a.limit):"all"==a.limit&&(n=o["dbMains"].collection("bankCheckSeries").orderBy("bankCheckSeries","asc")),n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data()),s.push(e.id)})),r.sort((function(e,t){return t.dateCreated-e.dateCreated}));for(var n=0;n<r.length;n++)r[n]["rowNum"]=1+n,r[n]["id"]=s[n],r[n].dateCreated=p.unix(r[n].dateCreated.seconds),a.checkSeries.push(r[n]);a.checkSeriesCount=r.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))},onPageChange:function(e){var t=this.searchTerm;this.getPaginatedCheckSeries(e,t)},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getPaginatedCheckSeries(1,"")},reloadData:function(){this.searchTerm="",this.searching=!1,this.getPaginatedCheckSeries(1,"")},search:function(){var e=this.searchTerm;e&&this.getPaginatedCheckSeries(1,e)},getBanks:function(){var e=this,t=o["dbMains"].collection("banks").orderBy("bank","asc");e.banks=[],t.get().then((function(t){t.forEach((function(t){e.banks.push(t.data())})),e.newBank=e.banks[0].bankUid}))},getBankAccounts:function(){var e=this,t=o["dbMains"].collection("bankAccounts").orderBy("bankAccountNumber","asc");e.bankAccounts=[],t.get().then((function(t){t.forEach((function(t){e.bankAccounts.push(t.data())}))}))},checkLists:function(){this.$router.push("/bank/check")},getActivateBanks:function(){var e=this,t=o["dbMains"].collection("banks").orderBy("bank","asc");e.activateBanks=[],t.get().then((function(t){t.forEach((function(t){e.activateBanks.push(t.data())})),0!=e.activateBanks.length&&(e.newBank=e.activateBanks[0].bankUid,e.getActivateBankAccounts(e.activateBanks[0].bankUid))}))},getActivateBankAccounts:function(e){var t=this,a=o["dbMains"].collection("bankAccounts").where("bankReference","==",e).orderBy("bankAccountNumber","asc");t.activateBankAccounts=[],a.get().then((function(e){e.forEach((function(e){t.activateBankAccounts.push(e.data())})),0!=t.activateBankAccounts.length&&(t.newBankAccount=t.activateBankAccounts[0].bankAccountUid)}))},addCheckSeries:function(){var e=this;e.requestProcessing=!1,e.$v.newSeriesNumber.$touch(),e.$v.newLastUsed.$touch(),e.$v.newSeriesDate.$touch(),e.$v.newBank.$touch(),e.$v.newBankAccount.$touch(),e.$v.newSeriesNumber.$error||e.$v.newSeriesDate.$error||e.$v.newBank.$error||e.$v.newBankAccount.$error||(e.requestProcessing=!0,this.$swal({title:"Are you sure?",text:"You want to save this check series",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(t){if(t.value){var a=localStorage.getItem("aisname"),n=null,r=e.newSeriesNumber+"00";n=o["dbMains"].collection("bankCheckSeries").where("bankCheckSeries","==",r).where("bankAccountReference","==",e.newBankAccount),n.get().then((function(t){if(t.empty){if(t){var n=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="BCSI-"+b.getFullYear()+h(b.getMonth()+1,2)+b.getDate()+"-"+Math.floor(1e6*Math.random());n.get().then((function(t){t.forEach((function(e){e.exists&&s.push(e.data())}));try{o["dbMains"].collection("bankCheckSeries").doc().set({bankCheckSeriesUid:i,bankCheckSeries:r,lastUsed:e.newLastUsed,bankCheckSeriesDate:p(e.newSeriesDate).format("YYYY-MM-DD").toString(),bankReference:e.newBank,bankAccountReference:e.newBankAccount,createdBy:a,userReference:s[0].userId,status:1,dateCreated:b,dateModified:b}).then((function(){var t=0,a="current",n="BCSRI-"+b.getFullYear()+h(b.getMonth()+1,2)+b.getDate()+"-"+Math.floor(1e6*Math.random()),r=null;if(""!=e.newLastUsed){var c=e.newLastUsed.length-2,l=e.newLastUsed.length;r=parseInt(e.newLastUsed.slice(c,l))+1}for(var u=0;u<=99;u++){t=u,u>0&&null==r||u>=0&&u<r&&null!=r?a="unused":u==r&&null!=r&&(a="current",r=null);var d=e.newSeriesNumber.toString()+h(t).toString();o["db"].collection("bankCheckSeriesReports").doc().set({checkReportId:n,checkNumber:d,status:a,checkSeriesReference:i,bankAccountReference:e.newBankAccount,bankReference:e.newBank,userReference:s[0].userId,dateCreated:b,dateModified:b})}e.newSeriesNumber="",e.newSeriesDate="",e.$v.newSeriesNumber.$reset(),e.$v.newSeriesDate.$reset(),e.requestProcessing=!1,e.$bvModal.hide("new-check-series-modal"),e.getActivateBanks(),e.getPaginatedCheckSeries(1,""),e.$swal({title:"Success",text:"New Series added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(n){console.log(n)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Check Series already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}else e.requestProcessing=!1,e.$bvModal.hide("new-check-series-modal")})))}}},v=f,w=a("2877"),C=Object(w["a"])(v,n,r,!1,null,null,null);t["default"]=C.exports},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="4678"},4995:function(e,t,a){},"4d1c":function(e,t,a){},"4e21":function(e,t,a){"use strict";a("1493")},5:function(e,t){},5319:function(e,t,a){"use strict";a("3d93")},"545d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-3 pointer"},["Used"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"sideBarTxt"},on:{click:function(t){return e.getPaginatedBankChecks(1,"","Used")}}},[e._v("Used")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Cleared"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"sideBarTxt"},on:{click:function(t){return e.getPaginatedBankChecks(1,"","Cleared")}}},[e._v("Cleared")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Cancelled"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"sideBarTxt"},on:{click:function(t){return e.getPaginatedBankChecks(1,"","Cancelled")}}},[e._v("Cancelled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"sideBarTxt"},on:{click:function(t){return e.getPaginatedBankChecks(1,"","All")}}},[e._v("All")])])],1),a("span",{staticClass:"col-2 pt-3 pl-5 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-3 pt-2 text-right"},[a("v-select",{staticStyle:{width:"230px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.reloadData()}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["dateCreated"==e.filter?a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.reloadData()}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e(),"checkDate"==e.filter?a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{type:"month",min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.reloadData()}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e(),"bank"==e.filter?a("v-select",{staticClass:"pt-2",staticStyle:{width:"230px"},attrs:{id:"inputStyle",options:e.banks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1,readonly:""},on:{input:function(t){return e.reloadData()}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}):e._e(),"bankAccount"==e.filter?a("v-select",{staticClass:"pt-2",staticStyle:{width:"230px"},attrs:{id:"inputStyle",options:e.bankAccounts,reduce:function(e){return e.bankAccountUid},label:"account",clearable:!1,readonly:""},on:{input:function(t){return e.reloadData()}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}):e._e()],1)]),a("vue-good-table",{ref:"check-table",attrs:{columns:e.columns,rows:e.bankChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bankCheckNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankCheckNumber))])]):e._e(),"bankCheckAmount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.bankCheckAmount))])]):e._e(),"bankCheckDate"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(t.row.bankCheckDate,"MMM DD, YYYY")))])]):e._e(),"payee"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(t.row.payee))])]):e._e(),"description"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(t.row.description))])]):e._e(),"bank"==t.column.field?a("span",e._l(e.banks,(function(n){return a("span",{key:n.bankUid},[n.bankUid==t.row.bankReference?a("span",[e._v(e._s(n.bank))]):e._e()])})),0):e._e(),"bankAccount"==t.column.field?a("span",e._l(e.bankAccounts,(function(n){return a("span",{key:n.bankAccountUid},[n.bankAccountUid==t.row.bankAccountReference?a("span",[e._v(e._s(n.bankAccountNumber))]):e._e()])})),0):e._e(),"action"==t.column.field?a("span",{staticClass:"text-center"},[2!=t.row.status?a("span",[3==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateCheckModal(t.row)}}}):e._e(),0!=t.row.status?a("router-link",{staticClass:"pointer ml-2 fa fa-print",attrs:{to:"/check/voucher/"+t.row.bankCheckUid+"/check",id:"sideBarTxt",title:"View Print Page"}}):e._e(),3==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-stop-circle",attrs:{id:"sideBarTxt",title:"Disable Check Print"},on:{click:function(a){return e.checkPrinted(t.row,1)}}}):e._e(),1==t.row.status&&"User"!=e.userRole?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable Check Print"},on:{click:function(a){return e.checkPrinted(t.row,3)}}}):e._e(),0!=t.row.status&&3!=t.row.status&&"User"!=e.userRole?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Cancel Check"},on:{click:function(a){return e.cancelCheck(t.row)}}}):e._e(),0==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("CANCELLED")]):e._e(),0==t.row.status&&"User"!=e.userRole?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Return to Used Check"},on:{click:function(a){return e.checkUsedStatus(t.row,1)}}}):e._e()],1):e._e(),2==t.row.status?a("span",[a("span",{attrs:{id:"redTxt"}},[e._v("CLEARED")]),0!=t.row.status?a("router-link",{staticClass:"pointer ml-2 fa fa-print",attrs:{to:"/check/voucher/"+t.row.bankCheckUid+"/check",id:"sideBarTxt",title:"View Print Page"}}):e._e()],1):e._e()]):e._e()])]}}])}),e.bankChecks.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedBankChecks(1,"",e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("b-modal",{attrs:{size:"xl",id:"update-check-modal",title:"Update Check",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100 mt-0"},[a("div",{staticClass:"text-left pl-5"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Particulars")])]),a("div",{staticClass:"table-full-width pb-5 pl-5 pr-5 pt-2"},[a("paper-table",{attrs:{type:"hover",loading:e.loading,loadError:e.loadError,title:e.particularsTable.title,"sub-title":e.particularsTable.subTitle,data:e.particulars,columns:e.particularsTable.columns},on:{reloadData:e.reloadData},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.particular))])]),a("td",[e._v(e._s(n.description||"------"))]),a("td",[e._v(e._s(n.referenceNumber||"------"))]),a("td",[e._v("â± "+e._s(n.particularAmount))]),a("td",{attrs:{align:"right"}},[""!=n.rowNum&&"Administrator"==e.userRole?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(t){return e.openEditParticularModal(n)}}}):e._e(),""!=n.rowNum&&"Administrator"==e.userRole?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(t){return e.removeParticular(n)}}}):e._e()])]}}])})],1),a("div",{staticClass:"text-right pr-5"},["Administrator"==e.userRole?a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.show("add-particular-modal")}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Particular ")]):e._e(),a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateCheck(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-check-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0 pl-5 pr-5"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payee:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0 pl-5 pr-5"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.suppliers,reduce:function(e){return e.supplierId},label:"supplier",clearable:!1},model:{value:e.editCheck.payee,callback:function(t){e.$set(e.editCheck,"payee",t)},expression:"editCheck.payee"}}),e.$v.editCheck.$anyDirty&&!e.$v.editCheck.payee.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"date",placeholder:"Check Date"},model:{value:e.editCheck.checkDate,callback:function(t){e.$set(e.editCheck,"checkDate",t)},expression:"editCheck.checkDate"}}),e.$v.editCheck.$anyDirty&&!e.$v.editCheck.checkDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0 pl-5 pr-5"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Remarks:")])])]),a("div",{staticClass:"form-group row mb-0 pl-5 pr-5"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editCheck.desc,expression:"editCheck.desc"}],staticClass:"pl-3 pr-3 pt-2 pb-2",attrs:{rows:"4",cols:"80",id:"inputStyle",placeholder:"Description"},domProps:{value:e.editCheck.desc},on:{input:function(t){t.target.composing||e.$set(e.editCheck,"desc",t.target.value)}}})])]),a("hr")]),a("b-modal",{attrs:{size:"lg",id:"add-particular-modal",title:"Add Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("add-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 pl-4 col-form-label"},[a("b",[e._v("Particular:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-9 pl-5 pb-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.allParticulars,reduce:function(e){return e.particularId},label:"particular",clearable:!1},model:{value:e.newParticular,callback:function(t){e.newParticular=t},expression:"newParticular"}}),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-3 pr-5 pb-0"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-voucher-particular-modal",modifiers:{"new-voucher-particular-modal":!0}}],attrs:{block:"",id:"darkBtn",title:"Add Payee"}},[e._v("Add Particular")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Description:")])]),a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Reference Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Reference Number"},model:{value:e.newReferenceNumber,callback:function(t){e.newReferenceNumber=t},expression:"newReferenceNumber"}}),e.$v.newReferenceNumber.$anyDirty&&!e.$v.newReferenceNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-3 pl-4 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.newUnitPrice,e.newQuantity,"add")}},model:{value:e.newUnitPrice,callback:function(t){e.newUnitPrice=t},expression:"newUnitPrice"}}),e.$v.newUnitPrice.$anyDirty&&!e.$v.newUnitPrice.required?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e(),e.$v.newUnitPrice.$anyDirty&&!e.$v.newUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.newUnitPrice,e.newQuantity,"add")}},model:{value:e.newQuantity,callback:function(t){e.newQuantity=t},expression:"newQuantity"}}),e.$v.newQuantity.$anyDirty&&!e.$v.newQuantity.required?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e(),e.$v.newQuantity.$anyDirty&&!e.$v.newQuantity.numCustomValidator?a("i",{staticClass:"text-danger"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Amount",readonly:""},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-particular-modal",title:"Update Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 pl-4 col-form-label"},[a("b",[e._v("Particular:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5 pb-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.allParticulars,reduce:function(e){return e.particularId},label:"particular",clearable:!1},model:{value:e.edit.particularReference,callback:function(t){e.$set(e.edit,"particularReference",t)},expression:"edit.particularReference"}}),e.$v.edit.$anyDirty&&!e.$v.edit.particularReference.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Description:")])]),a("label",{staticClass:"col-sm-3 pl-4 col-form-label"},[a("b",[e._v("Reference Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Description"},model:{value:e.edit.description,callback:function(t){e.$set(e.edit,"description",t)},expression:"edit.description"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Reference Number"},model:{value:e.edit.referenceNumber,callback:function(t){e.$set(e.edit,"referenceNumber",t)},expression:"edit.referenceNumber"}}),e.$v.edit.referenceNumber.$anyDirty&&!e.$v.edit.referenceNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-3 pl-4 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.edit.unitPrice,e.edit.quantity,"edit")}},model:{value:e.edit.unitPrice,callback:function(t){e.$set(e.edit,"unitPrice",t)},expression:"edit.unitPrice"}}),e.$v.edit.unitPrice.$anyDirty&&!e.$v.edit.unitPrice.required?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e(),e.$v.edit.unitPrice.$anyDirty&&!e.$v.edit.unitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.edit.unitPrice,e.edit.quantity,"edit")}},model:{value:e.edit.quantity,callback:function(t){e.$set(e.edit,"quantity",t)},expression:"edit.quantity"}}),e.$v.edit.quantity.$anyDirty&&!e.$v.edit.quantity.required?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e(),e.$v.edit.quantity.$anyDirty&&!e.$v.edit.quantity.numCustomValidator?a("i",{staticClass:"text-danger"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 pl-4 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Amount",readonly:""},model:{value:e.edit.amount,callback:function(t){e.$set(e.edit,"amount",t)},expression:"edit.amount"}}),e.$v.edit.amount.$anyDirty&&!e.$v.edit.amount.required?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e(),e.$v.edit.amount.$anyDirty&&!e.$v.edit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("new-check-voucher-particular",{attrs:{id:"new-voucher-particular-modal"},on:{successSubmit:function(t){return e.getVoucherParticulars()}}})],1)},r=[],s=(a("a4d3"),a("e01a"),a("99af"),a("4de4"),a("4160"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),i=a("5530"),o=a("56d7"),c=a("b5ae"),l=a("2f62"),u=["#","Check No.","Amount","Date","Payee","Bank","Account No.","Actions"],d=["#","Particular","Description","Reference Number","Amount","Actions"],m=a("c1df"),p=a("e966"),b=p.bindWith(",","."),h=new Date,f=c["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),v=c["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),w=c["helpers"].regex("alphaNumAndDot",/^[ 0-9â± ,. ]*$/),C=a("9f25"),g={name:"check-list",components:{},data:function(){return{columns:[{label:"Check No",field:"bankCheckNumber"},{label:"Amount",field:"bankCheckAmount"},{label:"Date",field:"bankCheckDate"},{label:"Payee",field:"payee",width:"90px"},{label:"Remarks",field:"description",width:"100px"},{label:"Bank",field:"bank",width:"80px"},{label:"Account No",field:"bankAccount"},{label:"",field:"action",sortable:!1,width:"120px"}],loading:!0,loadError:!1,bankCheckTable:{title:"Bank Checks Table",subTitle:"",columns:[].concat(u)},particularsTable:{title:"Particulars Table",subTitle:"",columns:[].concat(d)},bankChecksCount:0,bankChecks:[],banks:[],activateBanks:[],bankAccounts:[],activateBankAccounts:[],particulars:[],currentPage:1,searchTerm:"",searching:!1,requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",suppliers:[],filters:[{filterId:"dateCreated",filter:"Date Created"},{filterId:"checkDate",filter:"Check Date"},{filterId:"bank",filter:"Bank"},{filterId:"bankAccount",filter:"Bank Account"}],filter:"dateCreated",dateCreated:m().format("YYYY-MM"),maxDate:m().format("YYYY-MM"),listType:"",pageNum:1,bank:"",bankAccount:"",userRole:"",newParticular:"",newDescription:"",newReferenceNumber:"",newUnitPrice:"",newQuantity:"",newAmount:"",editCheck:{checkId:"",checkDate:"",payee:"",desc:""},edit:{particularId:"",particularReference:"",particular:"",description:"",referenceNumber:"",unitPrice:"",quantity:"",amount:""}}},validations:{newParticular:{required:c["required"]},newReferenceNumber:{alphaNumCustomValidator:f},newUnitPrice:{required:c["required"],amountCustomValidator:w},newQuantity:{required:c["required"],numCustomValidator:v},newAmount:{required:c["required"],amountCustomValidator:w},editCheck:{payee:{required:c["required"]},checkDate:{required:c["required"]}},edit:{particularReference:{required:c["required"]},referenceNumber:{alphaNumCustomValidator:f},unitPrice:{required:c["required"],amountCustomValidator:w},quantity:{required:c["required"],numCustomValidator:v},amount:{required:c["required"],amountCustomValidator:w}}},computed:Object(i["a"])({},Object(l["b"])({allParticulars:"VoucherParticulars/allParticulars"})),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getVoucherParticulars(),e.getPaginatedBankChecks(1,"","Used"),e.getBanks(),e.getBankAccounts(),e.getSuppliers(),e.getUserRole();case 6:case"end":return t.stop()}}),t)})))()},methods:{getVoucherParticulars:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$store.dispatch("VoucherParticulars/getAllParticulars");case 3:e.$forceUpdate();case 4:case"end":return t.stop()}}),t)})))()},closePage:function(){this.$router.push("/check/dashboard")},getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=o["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||(t.forEach((function(e){a.push(e.data())})),e.accountId=a[0].userId);var n=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),r=[];n.get().then((function(t){t.empty||(t.forEach((function(e){r.push(e.data())})),e.userRole=r[0].userRole)}))}))},getPaginatedBankChecks:function(e,t,a){var n=this,r=null,s=[],i=[],c=m(n.dateCreated).startOf("month").format("YYYY-MM-DD"),l=m(n.dateCreated).endOf("month").format("YYYY-MM-DD");n.username=localStorage.getItem("aisname"),n.accountName=n.username.toUpperCase();var u=o["dbUsers"].collection("users").where("username","==",n.username),d=[],p="",h="";u.get().then((function(u){u.empty||(u.forEach((function(e){d.push(e.data())})),p=d[0].userId);var f=o["dbUsers"].collection("userRoles").where("userRoleId","==",d[0].userRoleReference),v=[];f.get().then((function(u){if(u.forEach((function(e){v.push(e.data())})),h=v[0].userRole,n.loading=!0,n.loadError=!1,n.bankChecks=[],n.listType=a,n.pageNum=e,t&&(n.searching=!0),t)t=t.toString(),"all"!=n.limit?r=o["db"].collection("bankChecks").where("bankCheckNumber","==",t.toString()).orderBy("dateCreated","desc").limit(n.limit):"all"==n.limit&&(r=o["db"].collection("bankChecks").where("bankCheckNumber","==",t.toString()).orderBy("dateCreated","desc"));else if("Used"==a){if("Administrator"==h||"Manager"==h){if("all"!=n.limit)if("dateCreated"==n.filter){var d=new Date(c),f=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",d).where("dateCreated","<=",f).where("status","in",[1,3]).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var w=new Date(c),C=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",w).where("dateCreated","<=",C).where("status","in",[1,3]).orderBy("dateCreated","desc")}else"checkDate"==n.filter&&(r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("status","in",[1,3]).orderBy("bankCheckDate","desc"))}else if("User"==h)if("all"!=n.limit)if("dateCreated"==n.filter){var g=new Date(c),k=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",g).where("dateCreated","<=",k).where("userReference","==",p).where("status","in",[1,3]).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var y=new Date(c),$=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",y).where("dateCreated","<=",$).where("userReference","==",p).where("status","in",[1,3]).orderBy("dateCreated","desc")}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).where("status","in",[1,3]).orderBy("bankCheckDate","desc"):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).where("status","in",[1,3]).orderBy("bankCheckDate","desc"):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).where("status","in",[1,3]).orderBy("bankCheckDate","desc"))}else if("Cleared"==a){if("Administrator"==h||"Manager"==h){if("all"!=n.limit)if("dateCreated"==n.filter){var _=new Date(c),x=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",_).where("dateCreated","<=",x).where("status","==",2).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("status","==",2).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("status","==",2).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("status","==",2).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var A=new Date(c),D=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",A).where("dateCreated","<=",D).where("status","==",2).orderBy("dateCreated","desc")}else"checkDate"==n.filter&&(r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("status","==",2).orderBy("bankCheckDate","desc"))}else if("User"==h)if("all"!=n.limit)if("dateCreated"==n.filter){var P=new Date(c),N=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",P).where("dateCreated","<=",N).where("userReference","==",p).where("status","==",2).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).where("status","==",2).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).where("status","==",2).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).where("status","==",2).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var T=new Date(c),R=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",T).where("dateCreated","<=",R).where("userReference","==",p).where("status","==",2).orderBy("dateCreated","desc")}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).where("status","==",2).orderBy("bankCheckDate","desc"):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).where("status","==",2).orderBy("bankCheckDate","desc"):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).where("status","==",2).orderBy("bankCheckDate","desc"))}else if("Cancelled"==a){if("Administrator"==h||"Manager"==h){if("all"!=n.limit)if("dateCreated"==n.filter){var I=new Date(c),S=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",I).where("dateCreated","<=",S).where("status","==",0).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("status","==",0).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("status","==",0).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("status","==",0).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var q=new Date(c),B=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",q).where("dateCreated","<=",B).where("status","==",0).orderBy("dateCreated","desc")}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("status","==",0).orderBy("bankCheckDate","desc"):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("status","==",0).orderBy("bankCheckDate","desc"):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("status","==",0).orderBy("bankCheckDate","desc"))}else if("User"==h)if("all"!=n.limit)if("dateCreated"==n.filter){var M=new Date(c),O=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",M).where("dateCreated","<=",O).where("userReference","==",p).where("status","==",0).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).where("status","==",0).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).where("status","==",0).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).where("status","==",0).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var E=new Date(c),F=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",E).where("dateCreated","<=",F).where("userReference","==",p).where("status","==",0).orderBy("dateCreated","desc")}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).where("status","==",0).orderBy("bankCheckDate","desc"):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).where("status","==",0).orderBy("bankCheckDate","desc"):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).where("status","==",0).orderBy("bankCheckDate","desc"))}else if("All"==a)if("Administrator"==h||"Manager"==h){if("all"!=n.limit)if("dateCreated"==n.filter){var Y=new Date(c),V=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",Y).where("dateCreated","<=",V).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var U=new Date(c),j=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",U).where("dateCreated","<=",j).orderBy("dateCreated","desc")}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).orderBy("bankCheckDate","desc"):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).orderBy("bankCheckDate","desc"):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).orderBy("bankCheckDate","desc"))}else if("User"==h)if("all"!=n.limit)if("dateCreated"==n.filter){var W=new Date(c),K=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",W).where("dateCreated","<=",K).where("userReference","==",p).orderBy("dateCreated","desc").limit(n.limit)}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).orderBy("bankCheckDate","desc").limit(n.limit):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).orderBy("bankCheckDate","desc").limit(n.limit):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).orderBy("bankCheckDate","desc").limit(n.limit));else if("all"==n.limit)if("dateCreated"==n.filter){var z=new Date(c),L=new Date(l);r=o["db"].collection("bankChecks").where("dateCreated",">=",z).where("dateCreated","<=",L).where("userReference","==",p).orderBy("dateCreated","desc")}else"checkDate"==n.filter?r=o["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("bankCheckDate","<=",l).where("userReference","==",p).orderBy("bankCheckDate","desc"):"bank"==n.filter?r=o["db"].collection("bankChecks").where("bankReference","==",n.bank).where("userReference","==",p).orderBy("bankCheckDate","desc"):"bankAccount"==n.filter&&(r=o["db"].collection("bankChecks").where("bankAccountReference","==",n.bankAccount).where("userReference","==",p).orderBy("bankCheckDate","desc"));r.get().then((function(t){if(!t.empty){t.forEach((function(e){i.push(e.data()),s.push(e.id)}));var a=o["db"].collection("suppliers"),r=[];a.get().then((function(e){e.forEach((function(e){r.push(e.data())}));for(var t=0;t<i.length;t++){i[t]["rowNum"]=1+t,i[t]["id"]=s[t],i[t]["payee"]="";for(var a=0;a<r.length;a++)i[t].payeeReference==r[a].supplierId&&(i[t].payee=r[a].supplier);i[t].dateCreated=m.unix(i[t].dateCreated.seconds),i[t].bankCheckAmount=b(parseFloat(i[t].bankCheckAmount).toFixed(2)),n.bankChecks.push(i[t])}})),n.bankChecksCount=i.length,n.currentPage=e}setTimeout((function(){n.loading=!1}),1e3)}))}))}))},onPageChange:function(e){var t=this.searchTerm;this.getPaginatedBankChecks(e,t,this.listType)},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getPaginatedBankChecks(1,"",this.listType)},reloadData:function(){this.searchTerm="",this.searching=!1,this.getPaginatedBankChecks(1,"",this.listType)},search:function(){var e=this.searchTerm;e&&this.getPaginatedBankChecks(1,e,this.listType)},getBanks:function(){var e=this,t=o["dbMains"].collection("banks").orderBy("bank","asc");e.banks=[],t.get().then((function(t){t.forEach((function(t){e.banks.push(t.data())})),e.bank=e.banks[0].bankUid}))},getBankAccounts:function(){var e=this,t=o["db"].collection("bankAccounts").orderBy("bankAccountNumber","asc");e.bankAccounts=[],t.get().then((function(t){t.forEach((function(t){e.bankAccounts.push(t.data())}));for(var a=0;a<e.banks.length;a++)for(var n=0;n<e.bankAccounts.length;n++)e.banks[a].bankUid==e.bankAccounts[n].bankReference&&(e.bankAccounts[n]["account"]=e.banks[a].bank+" "+e.bankAccounts[n].bankAccountNumber);e.bankAccount=e.bankAccounts[0].bankAccountUid}))},getSuppliers:function(){var e=this,t=o["db"].collection("suppliers").orderBy("supplier","asc");e.suppliers=[],t.get().then((function(t){t.forEach((function(t){e.suppliers.push(t.data())}))}))},openUpdateCheckModal:function(e){var t=this;t.editCheck.checkId=e.bankCheckUid,t.editCheck.payee=e.payeeReference,t.editCheck.checkDate=e.bankCheckDate,t.editCheck.desc=e.description,t.getParticulars(e.bankCheckUid),t.$bvModal.show("update-check-modal")},updateCheck:function(){var e=this;try{if(e.$v.editCheck.$touch(),!e.$v.editCheck.$error){e.requestProcessing=!0;var t=o["db"].collection("bankChecks").where("bankCheckUid","==",e.editCheck.checkId),a="";t.get().then((function(t){t.forEach((function(e){a=e.id})),o["db"].collection("bankChecks").doc(a).update({payeeReference:e.editCheck.payee,bankCheckDate:e.editCheck.checkDate,description:e.editCheck.desc,dateModified:h}).then((function(){e.requestProcessing=!1,e.getPaginatedBankChecks(e.pageNum,"",e.listType),e.$bvModal.hide("update-check-modal"),e.$v.editCheck.$reset(),e.$refs["check-table"].reset(),e.$swal({title:"Success",text:"Check updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}}catch(n){console.log(n),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},getParticulars:function(e){var t=this,a=o["db"].collection("bankCheckParticulars").where("bankCheckReference","==",e);t.particulars=[],a.get().then((function(e){e.forEach((function(e){t.particulars.push(e.data())})),t.loading=!0,t.loadError=!1;for(var a=0;a<t.particulars.length;a++)t.particulars[a]["rowNum"]=a+1,t.particulars[a].unitPrice=b(parseFloat(t.particulars[a].unitPrice).toFixed(2)),t.particulars[a].particularAmount=b(parseFloat(t.particulars[a].particularAmount).toFixed(2));setTimeout((function(){t.loading=!1}),1500)}))},addParticular:function(){var e=this;if(e.$v.newParticular.$touch(),e.$v.newReferenceNumber.$touch(),e.$v.newUnitPrice.$touch(),e.$v.newQuantity.$touch(),e.$v.newAmount.$touch(),!e.$v.newParticular.$error&&!e.$v.newReferenceNumber.$error&&!e.$v.newUnitPrice.$error&&!e.newQuantity.$error&&!e.$v.newAmount.$error){var t="BCPI-"+h.getFullYear()+C(h.getMonth()+1,2)+h.getDate()+"-"+Math.floor(1e6*Math.random()),a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),n=o["db"].collection("bankChecks").where("bankCheckUid","==",e.editCheck.checkId),r=o["db"].collection("bankCheckParticulars").where("bankCheckReference","==",e.editCheck.checkId),s=[],i="",c=[],l=0;e.requestProcessing=!0,a.get().then((function(a){a.forEach((function(e){s.push(e.data())}));for(var u="",d=0;d<e.allParticulars.length;d++)e.allParticulars[d].particularId==e.newParticular&&(u=e.allParticulars[d].particular);o["db"].collection("bankCheckParticulars").doc().set({bankCheckParticularsUid:t,particularReference:e.newParticular,particular:u,description:e.newDescription,referenceNumber:e.newReferenceNumber,unitPrice:e.newUnitPrice,particularAmount:e.newAmount,quantity:e.newQuantity,bankCheckReference:e.editCheck.checkId,userReference:s[0].userId,status:1,dateCreated:h,dateModified:h,createdBy:s[0].username}).then((function(){n.get().then((function(t){t.forEach((function(e){i=e.id})),r.get().then((function(t){t.forEach((function(e){c.push(e.data())}));for(var a=0;a<c.length;a++)l+=parseFloat(c[a].particularAmount);o["db"].collection("bankChecks").doc(i).update({bankCheckAmount:l.toString(),dateModified:h}).then((function(){e.newParticular="",e.newReferenceNumber="",e.newUnitPrice="",e.newQuantity="",e.newAmount="",e.$v.newParticular.$reset(),e.$v.newReferenceNumber.$reset(),e.$v.newUnitPrice.$reset(),e.$v.newQuantity.$reset(),e.$v.newAmount.$reset(),e.$bvModal.hide("add-particular-modal"),e.requestProcessing=!1,e.getParticulars(e.editCheck.checkId),e.getPaginatedBankChecks(e.pageNum,"",e.listType),e.$swal({title:"Success",text:"New Particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}))}))}))}},openEditParticularModal:function(e){this.edit={checkId:e.bankCheckReference,payee:this.edit.payee,desc:this.edit.desc,checkDate:this.edit.checkDate,particularId:e.bankCheckParticularsUid,particularReference:e.particularReference||"",particular:e.particular,description:e.description||"",referenceNumber:e.referenceNumber,unitPrice:e.unitPrice.replaceAll(",",""),quantity:e.quantity,amount:e.particularAmount.replaceAll(",","")},this.$bvModal.show("update-particular-modal")},computeAmount:function(e,t,a){e=e.replaceAll("â± ",""),e=e.replaceAll(",",""),"add"==a?this.newAmount=parseFloat(e*t).toFixed(2):"edit"==a&&(this.edit.amount=parseFloat(e*t).toFixed(2))},updateParticular:function(){var e=this;try{e.requestProcessing=!0;var t=o["db"].collection("bankCheckParticulars").where("bankCheckParticularsUid","==",e.edit.particularId),a=o["db"].collection("bankChecks").where("bankCheckUid","==",e.editCheck.checkId),n=o["db"].collection("bankCheckParticulars").where("bankCheckReference","==",e.editCheck.checkId),r="",s="",i=[],c=0;t.get().then((function(t){t.forEach((function(e){r=e.id}));for(var l="",u=0;u<e.allParticulars.length;u++)e.allParticulars[u].particularId==e.edit.particularReference&&(l=e.allParticulars[u].particular);o["db"].collection("bankCheckParticulars").doc(r).update({particularReference:e.edit.particularReference,particular:l,description:e.edit.description,referenceNumber:e.edit.referenceNumber,unitPrice:e.edit.unitPrice,quantity:e.edit.quantity,particularAmount:e.edit.amount,dateModified:h}).then((function(){a.get().then((function(t){t.forEach((function(e){s=e.id})),n.get().then((function(t){t.forEach((function(e){i.push(e.data())}));for(var a=0;a<i.length;a++)c+=parseFloat(i[a].particularAmount);o["db"].collection("bankChecks").doc(s).update({bankCheckAmount:c.toString(),dateModified:h}).then((function(){e.requestProcessing=!1,e.getParticulars(e.editCheck.checkId),e.getPaginatedBankChecks(e.pageNum,"",e.listType),e.$bvModal.hide("update-particular-modal"),e.$swal({title:"Success",text:"Particular updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}))}))}))}catch(l){console.log(l),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},removeParticular:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this Particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var n=t;n.requestProcessing=!0;try{var r=o["db"].collection("bankCheckParticulars").where("bankCheckParticularsUid","==",e.bankCheckParticularsUid),s=o["db"].collection("bankCheckParticulars").where("bankCheckReference","==",e.bankCheckReference),i=o["db"].collection("bankChecks").where("bankCheckUid","==",e.bankCheckReference),c=[],l="",u="",d=0;r.get().then((function(e){e.forEach((function(e){l=e.id})),o["db"].collection("bankCheckParticulars").doc(l).delete().then((function(){i.get().then((function(e){e.forEach((function(e){u=e.id})),s.get().then((function(e){e.forEach((function(e){c.push(e.data())}));for(var t=0;t<c.length;t++)d+=parseFloat(c[t].particularAmount);o["db"].collection("bankChecks").doc(u).update({bankCheckAmount:d.toString(),dateModified:h}).then((function(){n.$swal({title:"Success",text:"Particular remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),n.getParticulars(n.editCheck.checkId),n.getPaginatedBankChecks(n.pageNum,"",n.listType)}))}))}))}))}))}catch(m){console.log(m),n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}n.requestProcessing=!1}}))},cancelCheck:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to cancel this Check Number",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var n=t,r="",s=o["db"].collection("bankChecks").where("bankCheckUid","==",e.bankCheckUid);s.get().then((function(t){t.forEach((function(e){r=e.id})),o["db"].collection("bankChecks").doc(r).update({status:0,dateModified:h}).then((function(){var t=o["db"].collection("bankCheckSeriesReports").where("checkSeriesReference","==",e.bankCheckSeriesReference).where("checkNumber","==",e.bankCheckNumber),a="";t.get().then((function(e){e.forEach((function(e){a=e.id})),o["db"].collection("bankCheckSeriesReports").doc(a).update({status:"cancelled",dateModified:h})})).then((function(){n.$refs["check-table"].reset(),n.getPaginatedBankChecks(n.pageNum,"",n.listType)})),n.$swal({title:"Success",text:"Check cancelled",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}}))},checkPrinted:function(e,t){var a=this,n="disable",r="disabled";3==t&&(n="enable",r="enabled"),this.$swal({title:"Are you sure?",text:"You want to  "+n+" the check print",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value){var s=a,i=o["db"].collection("bankChecks").where("bankCheckUid","==",e.bankCheckUid),c="";i.get().then((function(e){e.forEach((function(e){c=e.id})),o["db"].collection("bankChecks").doc(c).update({status:t,dateModified:h}).then((function(){s.$refs["check-table"].reset(),s.$swal({title:"Success",text:"Check print "+r,icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),s.getPaginatedBankChecks(s.pageNum,"",s.listType)})).catch((function(e){console.log(e),s.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}}))},checkUsedStatus:function(e,t){var a=this;this.$swal({title:"Are you sure?",text:"You want to back this Check Number to USED status",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value){var r=a,s="",i=o["db"].collection("bankChecks").where("bankCheckUid","==",e.bankCheckUid);i.get().then((function(a){a.forEach((function(e){s=e.id})),o["db"].collection("bankChecks").doc(s).update({status:t,dateModified:h}).then((function(){var t=o["db"].collection("bankCheckSeriesReports").where("checkSeriesReference","==",e.bankCheckSeriesReference).where("checkNumber","==",e.bankCheckNumber),a="";t.get().then((function(e){e.forEach((function(e){a=e.id})),o["db"].collection("bankCheckSeriesReports").doc(a).update({status:"used",dateModified:h})})).then((function(){r.$refs["check-table"].reset(),r.getPaginatedBankChecks(r.pageNum,"",r.listType)})),r.$swal({title:"Success",text:"Check status changed to used",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),r.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}}))}}},k=g,y=a("2877"),$=Object(y["a"])(k,n,r,!1,null,null,null);t["default"]=$.exports},"553d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"db",(function(){return Mu})),a.d(t,"storage",(function(){return Ou})),a.d(t,"dbMains",(function(){return Eu})),a.d(t,"dbrMains",(function(){return Fu})),a.d(t,"storageMains",(function(){return Yu})),a.d(t,"dbUsers",(function(){return Vu})),a.d(t,"dbExpense",(function(){return Uu})),a.d(t,"expenseStorage",(function(){return ju})),a.d(t,"dbSales",(function(){return Wu})),a.d(t,"salesStorage",(function(){return Ku})),a.d(t,"api",(function(){return zu}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("notifications"),a("router-view")],1)},s=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),o=a("986d"),c=new o["IdleSessionTimeout"](3e5),l=a("c1df"),u={components:{},data:function(){return{}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:c.onTimeOut=function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),e.$router.push("/login"),c.dispose(),self.$bvToast.hide()},c.start(),e.checkToken();case 3:case"end":return t.stop()}}),t)})))()},methods:{showNotification:function(){var e=this,t=null,a=[],n="",r=l().subtract(7,"days").format("YYYY-MM-DD");e.$bvToast.hide(),e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var s=Vu.collection("users").where("username","==",e.username),i="";s.get().then((function(s){s.empty||s.forEach((function(e){i=e.data().userRoleReference}));var o=Vu.collection("userRoles").where("userRoleId","==",i),c="";o.get().then((function(s){s.empty||(s.forEach((function(e){c=e.data().userRole})),"User"!=c&&(t=Uu.collection("billings").where("dueDate",">=",r).where("status","==",1).orderBy("dueDate","desc"),t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));for(var r=0;r<a.length;r++){n=l(a[r].dueDate).format("YYYY-MM-DD")==l().format("YYYY-MM-DD")?"DUE TODAY ("+l(a[r].dueDate).format("MMM DD, YYYY")+")":l(a[r].dueDate).format("YYYY-MM-DD")==l().add(1,"day").format("YYYY-MM-DD")?"DUE TOMORROW ("+l(a[r].dueDate).format("MMM DD, YYYY")+")":l(a[r].dueDate).format("YYYY-MM-DD")<l().format("YYYY-MM-DD")?"OVERDUE ("+l(a[r].dueDate).format("MMM DD, YYYY")+")":"DUE ON "+l(a[r].dueDate).format("dddd")+" : "+l(a[r].dueDate).format("MMM DD, YYYY");var s=e.$createElement,i=s("b",{class:["text-left","mb-0"]},[s("i",{class:"fa fa-exclamation-circle",id:"sideBarTxt"})," "+n]);e.$bvToast.toast(a[r].billing,{title:[i],toaster:"b-toaster-bottom-right",solid:!1,variant:"danger",noAutoHide:!0})}}}))))}))}))},checkToken:function(){var e=this;if(localStorage.getItem("aistoken")){var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[];e.showNotification(),t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("accountKeys").where("userReference","==",a[0].userId),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data())}));var n=a[0].username+""+r[0].secretKey;n!=localStorage.getItem("aistoken")&&(localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),e.$router.push("/login"))}}))}}))}else e.$router.push("/login"),localStorage.removeItem("aisname")}}},d=u,m=(a("034f"),a("2877")),p=Object(m["a"])(d,r,s,!1,null,null,null),b=p.exports,h=(a("d3b7"),a("8c4f")),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-content",attrs:{id:"darkBg"}},[a("base-nav",{staticClass:"navbar-top navbar-horizontal navbar-dark",attrs:{containerClasses:"px-4 container",expand:""}},[a("router-link",{staticClass:"navbar-brand",attrs:{slot:"brand",to:"/"},slot:"brand"})],1),a("div",{staticClass:"header py-7 py-lg-8",attrs:{id:"authBg"}},[a("div",{staticClass:"container mt--8 pb-3"},[a("slide-y-up-transition",{attrs:{mode:"out-in",origin:"center top"}},[a("router-view")],1)],1),e._m(0)])],1)},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",{staticClass:"py-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row align-items-center justify-content-xl-between text-xl-right"},[a("div",{staticClass:"col-xl-12 pl-5 pr-0 pt-4"},[a("div",{staticClass:"copyright text-right text-xl-right text-muted"},[a("small",{staticClass:"text-white"},[e._v("Â© 2021 Avasia Information Systems Inc.")])])])])])])}],w=a("7c76"),C={name:"auth-layout",components:{SlideYUpTransition:w["b"]},data:function(){return{year:(new Date).getFullYear(),showMenu:!1}}},g=C,k=(a("e421"),Object(m["a"])(g,f,v,!1,null,null,null)),y=k.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper pt-0"},[a("nav",{staticClass:"navbar navbar-vertical fixed-left mb-0 pl-0 pr-0 pt-0 pb-0"},[a("sidebar-menu",{attrs:{menu:e.menu,width:"250px",showOneChild:"true"},on:{"toggle-collapse":e.onToggleCollapse},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"mr-0 ml-0 mb-0 pb-0 text-center"},[a("img",{staticClass:"pr-1 mb-0 pb-0 ml-0 pl-0 pt-2",attrs:{src:e.logo,alt:"Avasia",width:e.logoWidth,height:e.logoHeight}})])]},proxy:!0}])})],1),a("div",{staticClass:"main-content",style:e.marginStyle,attrs:{data:e.sidebarBackground}},[a("dashboard-navbar"),a("div",{on:{click:e.toggleSidebar}},[a("fade-transition",{attrs:{duration:200,origin:"center top",mode:"out-in"}},[a("router-view")],1)],1),e.$route.meta.hideFooter?e._e():a("content-footer")],1)])},_=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-nav",{staticClass:"navbar-top navbar-dark",attrs:{id:"navbar-main","show-toggle-button":!1,expand:""}},[a("ul",{staticClass:"navbar-nav ml-auto mt--6"}),a("div",{staticClass:"pl-2 pr-2"},[a("h3",[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/main/home",id:"goldTxt"}},[e._v(" HOME ")])],1)]),a("div",{staticClass:"pl-2 pr-2"},[a("h3",[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/login",id:"goldTxt"},nativeOn:{click:function(t){return e.logout(t)}}},[e._v(" LOGOUT ")])],1)])])},A=[],D={data:function(){return{activeNotifications:!1,showMenu:!1,searchQuery:""}},methods:{toggleSidebar:function(){this.$sidebar.displaySidebar(!this.$sidebar.showSidebar)},hideSidebar:function(){this.$sidebar.displaySidebar(!1)},toggleMenu:function(){this.showMenu=!this.showMenu},logout:function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),this.$router.push("/login"),this.$bvToast.hide()}}},P=D,N=Object(m["a"])(P,x,A,!1,null,null,null),T=N.exports,R=a("0a0f"),I=a("4776"),S=a.n(I),q={components:{DashboardNavbar:T,ContentFooter:R["a"],FadeTransition:w["a"],SidebarMenu:I["SidebarMenu"]},data:function(){return{marginStyle:{"margin-left":"50px !important"},menu:[],sidebarBackground:"vue",username:"",userRole:"",hideMenu:!0,accountName:"",logo:"img/icons/android-chrome-192x192.png",logoWidth:"35px",logoHeight:"55px"}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUsers(),e.getUserRole(),e.checkToken(),e.onToggleCollapse(!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{toggleSidebar:function(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)},onToggleCollapse:function(e){1==e?(this.marginStyle={"margin-left":"50px !important"},this.logo="img/icons/android-chrome-192x192.png",this.logoWidth="35px",this.logoHeight="55px"):0==e&&(this.marginStyle={"margin-left":"250px !important"},this.logo="img/icons/AVASIA-NEW-LOGO_B.png",this.logoWidth="160px",this.logoHeight="65px")},getUsers:function(){var e=this;e.$store.dispatch("Users/getUsers")},checkToken:function(){var e=this;if(localStorage.getItem("aistoken")){var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("accountKeys").where("userReference","==",a[0].userId),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data())}));var n=a[0].username+""+r[0].secretKey;n!=localStorage.getItem("aistoken")&&(localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),e.$router.push("/login"))}}))}}))}else e.$router.push("/login"),localStorage.removeItem("aisname")},getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=Vu.collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference),r=[];n.get().then((function(t){t.empty||(t.forEach((function(e){r.push(e.data())})),e.userRole=r[0].userRole,"Administrator"!=e.userRole&&"Manager"!=e.userRole||(e.hideMenu=!1),e.menu.push({header:!0},{href:"/user/profile",title:"My Account",icon:"fas fa-id-badge",hidden:!1},{title:"Accounts",icon:"fa fa-address-book",hidden:e.hideMenu,child:[{href:"/settings/company/profile",title:"Company Profile"},{href:"/users",title:"Users"}]},{title:"Settings",icon:"fa fa-cogs",hidden:e.hideMenu,child:[{href:"/settings/department",title:"Departments"},{href:"/user/role",title:"User Roles"}]}))}))}))},logout:function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),this.$router.push("/login"),this.$bvToast.hide()}}},B=q,M=(a("83f3"),Object(m["a"])(B,$,_,!1,null,null,null)),O=M.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper pt-0"},[a("nav",{staticClass:"navbar navbar-vertical fixed-left mb-0 pl-0 pr-0 pt-0 pb-0"},[a("sidebar-menu",{attrs:{menu:e.menu,width:"250px",showOneChild:!0},on:{"toggle-collapse":e.onToggleCollapse},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"mr-0 ml-0 mb-0 pb-0 text-center"},[a("img",{staticClass:"pr-1 mb-0 pb-0 ml-0 pl-0 pt-2",attrs:{src:e.logo,alt:"Avasia",width:e.logoWidth,height:e.logoHeight}})])]},proxy:!0}])})],1),a("div",{staticClass:"main-content",style:e.marginStyle,attrs:{data:e.sidebarBackground}},[a("dashboard-navbar"),a("div",{on:{click:e.toggleSidebar}},[a("fade-transition",{attrs:{duration:200,origin:"center top",mode:"out-in"}},[a("router-view")],1),e.$route.meta.hideFooter?e._e():a("content-footer")],1)],1)])},F=[],Y={components:{DashboardNavbar:T,ContentFooter:R["a"],FadeTransition:w["a"],SidebarMenu:I["SidebarMenu"]},data:function(){return{marginStyle:{"margin-left":"50px !important"},menu:[],sidebarBackground:"vue",username:"",userRole:"",accountName:"",hideMenu:!0,logo:"img/icons/android-chrome-192x192.png",logoWidth:"35px",logoHeight:"55px"}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUsers(),e.getUserRole(),e.checkToken(),e.onToggleCollapse(!1),e.getAccoutEquations();case 5:case"end":return t.stop()}}),t)})))()},methods:{toggleSidebar:function(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)},onToggleCollapse:function(e){1==e?(this.marginStyle={"margin-left":"50px !important"},this.logo="img/icons/android-chrome-192x192.png",this.logoWidth="35px",this.logoHeight="55px"):0==e&&(this.marginStyle={"margin-left":"250px !important"},this.logo="img/icons/AVASIA-NEW-LOGO_B.png",this.logoWidth="160px",this.logoHeight="65px")},getUsers:function(){var e=this;e.$store.dispatch("Users/getUsers")},checkToken:function(){var e=this;if(localStorage.getItem("aistoken")){var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("accountKeys").where("userReference","==",a[0].userId),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data())}));var n=a[0].username+""+r[0].secretKey;n!=localStorage.getItem("aistoken")&&(localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),e.$router.push("/login"))}}))}}))}else e.$router.push("/login"),localStorage.removeItem("aisname")},getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=Vu.collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference),r=[];n.get().then((function(t){t.empty||(t.forEach((function(e){r.push(e.data())})),e.userRole=r[0].userRole,"Administrator"!=e.userRole&&"Manager"!=e.userRole||(e.hideMenu=!1),e.menu.push({header:!0},{href:"/accounting/finance/dashboard",title:"Dashboard",icon:"ni ni-tv-2"},{title:"Vouchers",icon:"fas fa-credit-card",child:[{title:"Check Book Writer",href:"/check/dashboard"},{title:"E Transactions",href:"/electronic/transaction"}]},{title:"Banking",icon:"fa fa-university",child:[{title:"Manage Banks",href:"/banks",hidden:e.hideMenu},{title:"Clearing Checks",href:"/banks/clearing/checks"},{title:"Transactions",href:"/transaction/",hidden:e.hideMenu},{title:"Reports",href:"/check/series/report",hidden:e.hideMenu}]},{title:"Purchasing",icon:"fa fa-shopping-bag",child:[{title:"Purchases",href:"/purchases"},{title:"Enterprise",href:"/purchases/enterprise",hidden:e.hideMenu},{title:"Reports",href:"/purchase/reports",hidden:e.hideMenu}]},{title:"Expenditures",icon:"ni ni-money-coins",child:[{title:"Reimbursement",href:"/reimbursement"},{title:"Petty Cash",href:"/petty/cash",hidden:e.hideMenu},{title:"Cash Advance",href:"/expense/cash/advance",hidden:e.hideMenu},{title:"Description/Type",href:"/expense/description",hidden:e.hideMenu},{title:"Reports",href:"/expense/reports",hidden:e.hideMenu}]},{title:"Disbursements",icon:"ni ni-bullet-list-67",child:[{title:"Cash",href:"/cash/disbursement"},{title:"Loan",href:"/loan/disbursement"},{title:"Refund",href:"/refund/disbursement"},{title:"Remittance",href:"/remittance/disbursement"},{title:"Types",href:"/disbursement/type",hidden:e.hideMenu},{title:"Reports",href:"/disbursement/report",hidden:e.hideMenu}]},{title:"Billing",icon:"ni ni-app",child:[{title:"Billings",href:"/billing"},{title:"Billing Type",href:"/billing/types",hidden:e.hideMenu},{title:"Billing Reports",href:"/billing/reports",hidden:e.hideMenu}]},{title:"Accounting",icon:"ni ni-archive-2",hidden:e.hideMenu,child:[{title:"Accounting Equation",href:"/accounting/equation"},{title:"Chart of Accounts",href:"/accounting/chartofaccounts"},{title:"Withholding Tax Code",href:"/accounting/withholding/tax/code"}]},{title:"Settings",icon:"fa fa-cogs",hidden:e.hideMenu,child:[{title:"E Wallets",href:"/ewallet"},{title:"Signatory",href:"/settings/print/signatory"}]}))}))}))},getAccoutEquations:function(){this.$store.dispatch("ChartOfAccounts/getAccountingEquations")},logout:function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),this.$router.push("/login"),this.$bvToast.hide()}}},V=Y,U=(a("99db"),Object(m["a"])(V,E,F,!1,null,null,null)),j=U.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper pt-0"},[a("nav",{staticClass:"navbar navbar-vertical fixed-left mb-0 pl-0 pr-0 pt-0 pb-0"},[a("sidebar-menu",{attrs:{menu:e.menu,width:"250px",showOneChild:"false"},on:{"toggle-collapse":e.onToggleCollapse},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"mr-0 ml-0 mb-0 pb-0 text-center"},[a("img",{staticClass:"pr-1 mb-0 pb-0 ml-0 pl-0 pt-2",attrs:{src:e.logo,alt:"Avasia",width:e.logoWidth,height:e.logoHeight}})])]},proxy:!0}])})],1),a("div",{staticClass:"main-content",style:e.marginStyle,attrs:{data:e.sidebarBackground}},[a("dashboard-navbar"),a("div",{on:{click:e.toggleSidebar}},[a("fade-transition",{attrs:{duration:200,origin:"center top",mode:"out-in"}},[a("router-view")],1),e.$route.meta.hideFooter?e._e():a("content-footer")],1)],1)])},K=[],z={components:{DashboardNavbar:T,ContentFooter:R["a"],FadeTransition:w["a"],SidebarMenu:I["SidebarMenu"]},data:function(){return{marginStyle:{"margin-left":"50px !important"},menu:[],sidebarBackground:"vue",username:"",userRole:"",accountName:"",hideMenu:!0,logo:"img/icons/android-chrome-192x192.png",logoWidth:"35px",logoHeight:"55px"}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole(),e.checkToken(),e.onToggleCollapse(!1);case 3:case"end":return t.stop()}}),t)})))()},methods:{toggleSidebar:function(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)},onToggleCollapse:function(e){1==e?(this.marginStyle={"margin-left":"50px !important"},this.logo="img/icons/android-chrome-192x192.png",this.logoWidth="35px",this.logoHeight="55px"):0==e&&(this.marginStyle={"margin-left":"250px !important"},this.logo="img/icons/AVASIA-NEW-LOGO_B.png",this.logoWidth="160px",this.logoHeight="65px")},checkToken:function(){var e=this;if(localStorage.getItem("aistoken")){var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("accountKeys").where("userReference","==",a[0].userId),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data())}));var n=a[0].username+""+r[0].secretKey;n!=localStorage.getItem("aistoken")&&(localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),e.$router.push("/login"))}}))}}))}else e.$router.push("/login"),localStorage.removeItem("aisname")},getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=Vu.collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference),r=[];n.get().then((function(t){t.empty||(t.forEach((function(e){r.push(e.data())})),e.userRole=r[0].userRole,e.userRole=r[0].userRole,"Administrator"!=e.userRole&&"Manager"!=e.userRole||(e.hideMenu=!1),e.menu.push({header:!0},{title:"Dashboard",icon:"ni ni-tv-2",href:"/technical/dashboard"},{title:"Billing Statements",icon:"ni ni-archive-2",href:"/billing/statements"},{title:"BS Series",icon:"fa fa-bars",href:"/billing/statement/series"},{title:"Companies",icon:"fa fa-industry",href:"/company"},{title:"Service Types",icon:"fa fa-list",href:"/service/type"},{title:"Official Receipt Series",icon:"fa fa-th-list",href:"/official/receipt/series"}))}))}))},logout:function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),this.$router.push("/login"),this.$bvToast.hide()}}},L=z,Q=(a("1de5"),Object(m["a"])(L,W,K,!1,null,null,null)),H=Q.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper pt-0"},[a("nav",{staticClass:"navbar navbar-vertical fixed-left mb-0 pl-0 pr-0 pt-0 pb-0"},[a("sidebar-menu",{attrs:{menu:e.menu,width:"250px",showOneChild:"false"},on:{"toggle-collapse":e.onToggleCollapse},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"mr-0 ml-0 mb-0 pb-0 text-center"},[a("img",{staticClass:"pr-1 mb-0 pb-0 ml-0 pl-0 pt-2",attrs:{src:e.logo,alt:"Avasia",width:e.logoWidth,height:e.logoHeight}})])]},proxy:!0}])})],1),a("div",{staticClass:"main-content",style:e.marginStyle,attrs:{data:e.sidebarBackground}},[a("dashboard-navbar"),a("div",{on:{click:e.toggleSidebar}},[a("fade-transition",{attrs:{duration:200,origin:"center top",mode:"out-in"}},[a("router-view")],1),e.$route.meta.hideFooter?e._e():a("content-footer")],1)],1)])},Z=[],J={components:{DashboardNavbar:T,ContentFooter:R["a"],FadeTransition:w["a"],SidebarMenu:I["SidebarMenu"]},data:function(){return{marginStyle:{"margin-left":"50px !important"},menu:[],sidebarBackground:"vue",username:"",userRole:"",accountName:"",hideMenu:!0,logo:"img/icons/android-chrome-192x192.png",logoWidth:"35px",logoHeight:"55px"}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole(),e.checkToken(),e.onToggleCollapse(!1);case 3:case"end":return t.stop()}}),t)})))()},methods:{toggleSidebar:function(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)},onToggleCollapse:function(e){1==e?(this.marginStyle={"margin-left":"50px !important"},this.logo="img/icons/android-chrome-192x192.png",this.logoWidth="35px",this.logoHeight="55px"):0==e&&(this.marginStyle={"margin-left":"250px !important"},this.logo="img/icons/AVASIA-NEW-LOGO_B.png",this.logoWidth="160px",this.logoHeight="65px")},checkToken:function(){var e=this;if(localStorage.getItem("aistoken")){var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("accountKeys").where("userReference","==",a[0].userId),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data())}));var n=a[0].username+""+r[0].secretKey;n!=localStorage.getItem("aistoken")&&(localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),e.$router.push("/login"))}}))}}))}else e.$router.push("/login"),localStorage.removeItem("aisname")},getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=Vu.collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference),r=[];n.get().then((function(t){t.empty||(t.forEach((function(e){r.push(e.data())})),e.userRole=r[0].userRole,e.userRole=r[0].userRole,"Administrator"!=e.userRole&&"Manager"!=e.userRole||(e.hideMenu=!1),e.menu.push({header:!0},{title:"Purchase Order",icon:"ni ni-money-coins",href:"/sales/purchase/order"},{title:"Clients",icon:"fa fa-suitcase",href:"/sales/clients"},{title:"Distributors",icon:"fa fa-industry",href:"/sales/distributors"},{title:"Product Category",icon:"ni ni-archive-2",href:"/sales/product/category"},{title:"Products",icon:"ni ni-bag-17",href:"/sales/product"}))}))}))},logout:function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),this.$router.push("/login"),this.$bvToast.hide()}}},X=J,ee=(a("22f9"),Object(m["a"])(X,G,Z,!1,null,null,null)),te=ee.exports;n["default"].use(h["a"]);var ae=new h["a"]({linkExactActiveClass:"active",routes:[{path:"/",redirect:"login",component:y,children:[{path:"/login",name:"login",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"41bb"))}}]},{path:"/",redirect:"/main/home",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"3daa"))},children:[{path:"/main/home",name:"Internal Business Process",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"3daa"))}}]},{path:"/accounting/finance/dashboard",component:j,children:[{path:"/accounting/finance/dashboard",name:"Accounting & Finance Dashboard",component:function(){return Promise.all([a.e("chunk-4c8140ba"),a.e("chunk-6010d55c")]).then(a.bind(null,"78b6"))}},{path:"/main/page",name:"Accounting and Finance",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"4385"))}},{path:"/check/book/writer",name:"Check Book Writer",component:function(){return Promise.resolve().then(a.bind(null,"2b00"))}},{path:"/check/dashboard",name:"Check Book Writer",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"4642"))}},{path:"/check/dashboard/:name",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"2129"))}},{path:"/check/voucher/particulars",name:"Check Voucher Particulars",component:function(){return Promise.resolve().then(a.bind(null,"bec7"))}},{path:"/banks",name:"Manage Banks",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"812b"))}},{path:"/bank/accounts",name:"bank accounts",component:function(){return Promise.resolve().then(a.bind(null,"366f"))}},{path:"/bank/check",name:"checks",component:function(){return Promise.resolve().then(a.bind(null,"545d"))}},{path:"/check/series",name:"check series",component:function(){return Promise.resolve().then(a.bind(null,"44d2a"))}},{path:"/bank/check/supplier",name:"suppliers",component:function(){return Promise.resolve().then(a.bind(null,"8aee"))}},{path:"/new/check",name:"new check",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"d694"))}},{path:"/check/voucher/list",name:"Check Voucher",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"a51f"))}},{path:"/check/voucher/:id/:page",name:"Print",component:function(){return Promise.resolve().then(a.bind(null,"8e20"))}},{path:"/transaction/",name:"Transactions",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"f642"))}},{path:"/reconciliation/summary",name:"Bank Reconciliation Summary",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"7157"))}},{path:"/check/series/report",name:"Check Reports",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"cc1e"))}},{path:"/account/transaction",name:"Account Transactions",component:function(){return Promise.resolve().then(a.bind(null,"d141"))}},{path:"/banks/clearing/checks",name:"Clearing Checks",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"8af8"))}},{path:"/reimbursement/",name:"Reimbursements",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"f1d9"))}},{path:"/reimbursement/dashboard/view/:name",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"9238"))}},{path:"/view/reimbursement/:id",name:"View Reimbursement",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"ac8c"))}},{path:"/reimbursement/summary",name:"Reimbursement Summary",component:function(){return Promise.resolve().then(a.bind(null,"d4e0"))}},{path:"/petty/cash",name:"Petty Cash",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"50a4"))}},{path:"/view/petty/cash/:id",name:"View Petty Cash",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"84ad"))}},{path:"/expense/description",name:"Expense Description/Type",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"fdfb"))}},{path:"/expense/cash/advance",name:"Cash Advance",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"cb7a"))}},{path:"/expense/reports",name:"Expenditure Reports",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-6010d55c")]).then(a.bind(null,"b3f1"))}},{path:"/accounting/withholding/tax/code",name:"Withholding Tax Code",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"5c2d"))}},{path:"/accounting/equation",name:"Accounting Equations",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"3bcf"))}},{path:"/accounting/chartofaccounts",name:"Chart of Accounts",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"b04c"))}},{path:"/sales/journal",name:"Sales Journal",component:function(){return Promise.all([a.e("chunk-4c8140ba"),a.e("chunk-6010d55c")]).then(a.bind(null,"d742"))}},{path:"/ewallet",name:"E Wallets",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"eb57"))}},{path:"/electronic/transaction",name:"E Transactions",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-4c8140ba")]).then(a.bind(null,"2c6e"))}},{path:"/view/electronic/transaction/:id",name:"View E Transaction",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"3738"))}},{path:"/disbursement/type",name:"Disbursement Types",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"2f9f"))}},{path:"/cash/disbursement",name:"Cash Disbursements",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"e6e6"))}},{path:"/loan/disbursement",name:"Loan Disbursements",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"e3c7"))}},{path:"/refund/disbursement",name:"Refund Disbursements",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"86e4"))}},{path:"/remittance/disbursement",name:"Remittance Disbursements",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"2404"))}},{path:"/disbursement/report",name:"Disbursement Reports",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-4c8140ba")]).then(a.bind(null,"f45e"))}},{path:"/billing/types",name:"Billing Types",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"15f9"))}},{path:"/billing",name:"Billing Dashboard",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"f1ab"))}},{path:"/billing/reports",name:"Billing Reports",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-49c0afb5")]).then(a.bind(null,"38e7"))}},{path:"/settings/business/section",name:"Business Section",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"4057"))}},{path:"/settings/payment/terms",name:"Payment Terms",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"6ec9"))}},{path:"/settings/print/signatory",name:"Print Signatory",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"488c"))}},{path:"/view/print/signatory/:id",name:"View Print Signatory",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"4e4e"))}},{path:"/purchases/enterprise",name:"Enterprises",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"2394"))}},{path:"/purchases",name:"Purchases",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"8f7a"))}},{path:"/purchase/reports",name:"Purchase Reports",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-49c0afb5")]).then(a.bind(null,"0f39"))}}]},{path:"/user/profile/",component:O,children:[{path:"/user/profile/",name:"My Account",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"f10e"))}},{path:"/users",name:"Users",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"528a"))}},{path:"/new/user",name:"New User",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"d03b"))}},{path:"/view/user/:id",name:"User Account",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"894b"))}},{path:"/user/update/:id",name:"Edit User Account",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"3345"))}},{path:"/user/role",name:"User Role",component:function(){return a.e("chunk-6010d55c").then(a.bind(null,"96ce"))}},{path:"/settings/company/profile",name:"Company Profile",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"e579"))}},{path:"/settings/department",name:"Departments",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"ace6"))}}]},{path:"/technical/dashboard",component:H,children:[{path:"/technical/dashboard",name:"Technical Services Dashboard",component:function(){return Promise.all([a.e("chunk-4c8140ba"),a.e("chunk-6010d55c")]).then(a.bind(null,"5a04"))}},{path:"/technical/main/page",name:"Technical Services",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"86ec"))}},{path:"/billing/statement/series",name:"Billing Statement Series",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"e3a9"))}},{path:"/company",name:"Companies",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"bc02"))}},{path:"/service/type",name:"Service Types",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"ddca"))}},{path:"/official/receipt/series",name:"Official Receipt Series",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"9aff"))}},{path:"/billing/statements",name:"Billing Statements",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-6010d55c")]).then(a.bind(null,"40c2"))}}]},{path:"/sales/clients",component:te,children:[{path:"/sales/clients",name:"Clients",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"a68e"))}},{path:"/sales/distributors",name:"Distributors",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"66b4"))}},{path:"/sales/product/category",name:"Product Category",component:function(){return a.e("chunk-4c8140ba").then(a.bind(null,"0ffd"))}},{path:"/sales/product",name:"Products",component:function(){return a.e("chunk-49c0afb5").then(a.bind(null,"158b"))}},{path:"/sales/purchase/order",name:"Purchase Orders",component:function(){return Promise.all([a.e("chunk-008cdbce"),a.e("chunk-4c8140ba")]).then(a.bind(null,"0580"))}}]}]}),ne=a("2f62"),re=a("c6f8"),se=a("c1df"),ie=new Date,oe=a("9f25"),ce={namespaced:!0,state:{banks:[],errorMessage:0,validationMessage:0,bankData:[]},mutations:{setBanks:function(e,t){e.banks=t},setErrorMessage:function(e,t){e.errorMessage=t},setValidationMessage:function(e,t){e.validationMessage=t},setBankData:function(e,t){e.bankData=t}},actions:{getBanks:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Eu.collection("banks").orderBy("dateCreated","asc").limit(t.limit):"all"==t.limit&&(r=Eu.collection("banks").orderBy("dateCreated","asc")),r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)})),s.sort((function(e,t){return e.bank-t.bank}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=1+t,s[t]["id"]=i[t],s[t].dateCreated=se.unix(s[t].dateCreated.seconds),o.push(s[t]);n("setBanks",o)}}));case 4:case"end":return a.stop()}}),a)})))()},checkBanks:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Eu.collection("banks").where("bank","==",Object(re["a"])(t.newBank)),r.get().then((function(e){e.empty?e&&n("setValidationMessage",0):n("setValidationMessage",1)}));case 4:case"end":return a.stop()}}),a)})))()},saveBank:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="BI-"+ie.getFullYear()+oe(ie.getMonth()+1,2)+ie.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.bankUid=i,t.createdBy=localStorage.getItem("aisname"),t.userReference=s[0].userId,Eu.collection("banks").doc().set(t).then((function(){n("setErrorMessage",0)}))}))}catch(o){console.log(o),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},checkUpdateBanks:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Eu.collection("banks").where("bank","==",Object(re["a"])(t.bank)).where("bankUid","!=",t.bankUid),r.get().then((function(e){e.empty?e&&n("setValidationMessage",0):n("setValidationMessage",1)}));case 4:case"end":return a.stop()}}),a)})))()},updateBanks:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("banks").doc(t.id).update(t).then((function(){n("setErrorMessage",0)}))}catch(r){console.log(r),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},getBankData:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=Eu.collection("banks").orderBy("bank","asc"),r=[],n.get().then((function(e){e.forEach((function(e){r.push(e.data())})),a("setBankData",r)}));case 4:case"end":return t.stop()}}),t)})))()}},getters:{banks:function(e){return e.banks},errorMessage:function(e){return e.errorMessage},validationMessage:function(e){return e.validationMessage},bankData:function(e){return e.bankData}}},le=(a("25f0"),a("c1df")),ue=new Date,de=a("9f25"),me={namespaced:!0,state:{bankAccounts:[],valid:0,error:0,bankAccountData:[],bankRefAccounts:[]},mutations:{setBankAccounts:function(e,t){e.bankAccounts=t},setValidation:function(e,t){e.valid=t},setError:function(e,t){e.error=t},setBankAccountData:function(e,t){e.bankAccountData=t},setBankRefAccount:function(e,t){e.bankRefAccounts=t}},actions:{getBankAccounts:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Eu.collection("bankAccounts").orderBy("dateCreated","asc").limit(t.limit):"all"==t.limit&&(r=Eu.collection("bankAccounts").orderBy("dateCreated","asc")),r.get().then((function(e){if(!e.empty){e.forEach((function(e){i.push(e.data()),o.push(e.id)}));for(var t=0;t<i.length;t++)i[t]["id"]=o[t],i[t].dateCreated=le.unix(i[t].dateCreated.seconds);i.sort((function(e,t){return t.dateCreated-e.dateCreated}));for(var a=0;a<i.length;a++)i[a]["rowNum"]=1+a,s.push(i[a]);n("setBankAccounts",s)}}));case 4:case"end":return a.stop()}}),a)})))()},checkNewBankAccount:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Eu.collection("bankAccounts").where("bankAccountNumber","==",t.newAccountNumber),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 4:case"end":return a.stop()}}),a)})))()},saveBankAccount:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="BAI-"+ue.getFullYear()+de(ue.getMonth()+1,2)+ue.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.bankAccountUid=i,t.userReference=s[0].userId,Eu.collection("bankAccounts").doc().set(t).then((function(){n("setError",0)}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},checkEditBankAccount:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Eu.collection("bankAccounts").where("bankAccountNumber","==",t.accountNumber).where("bankAccountUid","!=",t.bankAccountUid),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 4:case"end":return a.stop()}}),a)})))()},updateBankAccount:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{t.bankAccountDate=le(t.bankAccountCreated).format("YYYY-MM-DD").toString(),Eu.collection("bankAccounts").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},updateAccountBalance:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("bankAccounts").doc(t.accountId).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getBankAccountData:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=Eu.collection("bankAccounts").orderBy("bankAccountNumber","asc"),r=[],n.get().then((function(e){e.forEach((function(e){r.push(e.data())})),a("setBankAccountData",r)}));case 4:case"end":return t.stop()}}),t)})))()},getBankRefAccount:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("bankAccounts").where("bankReference","==",t.bank).orderBy("bankAccountNumber","asc"),s=[],r.get().then((function(e){e.forEach((function(e){s.push(e.data())})),n("setBankRefAccount",s)}));case 4:case"end":return a.stop()}}),a)})))()}},getters:{bankAccounts:function(e){return e.bankAccounts},valid:function(e){return e.valid},error:function(e){return e.error},bankAccountData:function(e){return e.bankAccountData},bankRefAccounts:function(e){return e.bankRefAccounts}}},pe=a("323d"),be={namespaced:!0,state:{valid:0,users:[]},mutations:{setValidation:function(e,t){e.valid=t},setUsers:function(e,t){e.users=t}},actions:{adminAuthentication:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i=[],r.get().then((function(e){if(e.empty)e.empty&&n("setValidation",2);else{e.forEach((function(e){s.push(e.data())}));var a=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference);a.get().then((function(e){e.empty?e.empty&&n("setValidation",2):(e.forEach((function(e){i.push(e.data())})),"Administrator"==i[0].userRole?pe.verify(t.checkPassword,s[0].password)?n("setValidation",0):n("setValidation",1):n("setValidation",2))}))}}));case 4:case"end":return a.stop()}}),a)})))()},getUsers:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=Vu.collection("users"),r=[],n.get().then((function(e){e.empty||(e.forEach((function(e){r.push(e.data())})),a("setUsers",r))}));case 4:case"end":return t.stop()}}),t)})))()}},getters:{valid:function(e){return e.valid},users:function(e){return e.users}}},he=(a("fb6a"),a("c1df")),fe=new Date,ve=a("9f25"),we={namespaced:!0,state:{checkSeries:[],valid:0,error:0},mutations:{setCheckSeries:function(e,t){e.checkSeries=t},setValidation:function(e,t){e.valid=t},setError:function(e,t){e.error=t}},actions:{getCheckSeries:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Eu.collection("bankCheckSeries").orderBy("bankCheckSeries","asc").limit(t.limit):"all"==self.limit&&(r=Eu.collection("bankCheckSeries").orderBy("bankCheckSeries","asc")),r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)})),s.sort((function(e,t){return t.dateCreated-e.dateCreated}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=1+t,s[t]["id"]=i[t],s[t].dateCreated=he.unix(s[t].dateCreated.seconds),o.push(s[t]);n("setCheckSeries",o)}setTimeout((function(){self.loading=!1}),1e3)}));case 4:case"end":return a.stop()}}),a)})))()},checkNewSeries:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=t.newSeriesNumber+"00",r=Eu.collection("bankCheckSeries").where("bankCheckSeries","==",s).where("bankAccountReference","==",t.newBankAccount),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 5:case"end":return a.stop()}}),a)})))()},saveCheckSeries:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="BCSI-"+fe.getFullYear()+ve(fe.getMonth()+1,2)+fe.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.bankCheckSeriesUid=i,t.userReference=s[0].userId,Eu.collection("bankCheckSeries").doc().set(t).then((function(){var e=0,a="current",r="BCSRI-"+fe.getFullYear()+ve(fe.getMonth()+1,2)+fe.getDate()+"-"+Math.floor(1e6*Math.random()),o=null;if(""!=t.newLastUsed){var c=t.newLastUsed.length-2,l=t.newLastUsed.length;o=parseInt(t.newLastUsed.slice(c,l))+1}for(var u=0;u<=99;u++){e=u,u>0&&null==o||u>=0&&u<o&&null!=o?a="unused":u==o&&null!=o&&(a="current",o=null);var d=t.newSeriesNumber.toString()+ve(e).toString();Mu.collection("bankCheckSeriesReports").doc().set({checkReportId:r,checkNumber:d,status:a,checkSeriesReference:i,bankAccountReference:t.newBankAccount,bankReference:t.newBank,userReference:s[0].userId,dateCreated:fe,dateModified:fe})}n("setError",0)}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()}},getters:{checkSeries:function(e){return e.checkSeries},valid:function(e){return e.valid},error:function(e){return e.error}}},Ce=a("c1df"),ge=new Date,ke=a("9f25"),ye={namespaced:!0,state:{checkPayees:[],valid:0,error:0},mutations:{setCheckPayee:function(e,t){e.checkPayees=t},setValidation:function(e,t){e.valid=t},setError:function(e,t){e.error=t}},actions:{getCheckPayee:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Mu.collection("suppliers").orderBy("supplier","asc").limit(t.limit):"all"==t.limit&&(r=Mu.collection("suppliers").orderBy("supplier","asc")),r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)})),s.sort((function(e,t){return e.supplier-t.supplier}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=1+t,s[t]["id"]=i[t],s[t].dateCreated=Ce.unix(s[t].dateCreated.seconds),o.push(s[t]);n("setCheckPayee",o)}}));case 4:case"end":return a.stop()}}),a)})))()},checkNewPayee:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Mu.collection("suppliers").where("supplier","==",Object(re["a"])(t.newSupplier)),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 4:case"end":return a.stop()}}),a)})))()},newCheckPayee:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="SID-"+ge.getFullYear()+ke(ge.getMonth()+1,2)+ge.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data()),t.supplierId=i,t.userReference=s[0].userId,Mu.collection("suppliers").doc().set(t).then((function(){n("setError",0)}))}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},checkEditPayee:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Mu.collection("suppliers").where("supplier","==",Object(re["a"])(t.supplier)).where("supplierId","!=",t.supplierId),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 4:case"end":return a.stop()}}),a)})))()},updateCheckPayee:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Mu.collection("suppliers").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()}},getters:{checkPayees:function(e){return e.checkPayees},valid:function(e){return e.valid},error:function(e){return e.error}}},$e=new Date,_e=a("9f25"),xe={namespaced:!0,state:{valid:0,error:0,clients:[],distributors:[],distributor:[]},mutations:{setValidation:function(e,t){e.valid=t},setError:function(e,t){e.error=t},setClients:function(e,t){e.clients=t},setDistributors:function(e,t){e.distributors=t},setDistributor:function(e,t){e.distributor=t}},actions:{checkClient:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,1==t.validate?r=Wu.collection("clients").where("clientName","==",Object(re["a"])(t.newClient)):2==t.validate&&""!=t.newTinNumber?r=Wu.collection("clients").where("tin","==",t.newTinNumber):3==t.validate&&""!=t.newContactNumber?r=Wu.collection("clients").where("contactNumber","==",t.newContactNumber):4==t.validate&&""!=t.newEmailAddress&&(r=Wu.collection("clients").where("email","==",t.newEmailAddress)),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 4:case"end":return a.stop()}}),a)})))()},newClient:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="SCI-"+$e.getFullYear()+_e($e.getMonth()+1,2)+$e.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.clientId=i,t.userReference=s[0].userId,Wu.collection("clients").doc().set(t).then((function(){n("setError",0)}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getClients:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Wu.collection("clients").where("status","==",t.stat).orderBy("clientName","asc").limit(self.limit):"all"==self.limit&&(r=Wu.collection("clients").where("status","==",t.stat).orderBy("clientName","asc")),r.get().then((function(e){if(e.empty)n("setClients",s);else{e.forEach((function(e){i.push(e.data()),o.push(e.id)}));for(var t=0;t<i.length;t++)i[t]["id"]=o[t],s.push(i[t]);n("setClients",s)}}));case 4:case"end":return a.stop()}}),a)})))()},checkEditClient:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,1==t.validate?r=Wu.collection("clients").where("clientName","==",Object(re["a"])(t.clientName)).where("clientId","!=",t.clientId):2==t.validate&&""!=t.tin?r=Wu.collection("clients").where("tin","==",t.tin).where("clientId","!=",t.clientId):3==t.validate&&""!=t.contactNumber?r=Wu.collection("clients").where("contactNumber","==",t.contactNumber).where("clientId","!=",t.clientId):4==t.validate&&""!=t.email&&(r=Wu.collection("clients").where("email","==",t.email).where("clientId","!=",t.clientId)),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 4:case"end":return a.stop()}}),a)})))()},editClient:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Wu.collection("clients").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},clientStatus:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Wu.collection("clients").doc(t.id).update({status:t.stat,dateModified:$e}).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},checkDistributor:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,1==t.validate?r=Eu.collection("distributors").where("distributorName","==",Object(re["a"])(t.newDistributor)):2==t.validate&&""!=t.newTinNumber?r=Eu.collection("distributors").where("tin","==",t.newTinNumber):3==t.validate&&""!=t.newContactNumber?r=Eu.collection("distributors").where("contactNumber","==",t.newContactNumber):4==t.validate&&""!=t.newEmailAddress&&(r=Eu.collection("distributors").where("email","==",t.newEmailAddress)),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 4:case"end":return a.stop()}}),a)})))()},newDistributor:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="SDI-"+$e.getFullYear()+_e($e.getMonth()+1,2)+$e.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.distributorId=i,t.userReference=s[0].userId,Eu.collection("distributors").doc().set(t).then((function(){n("setError",0)}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getDistributors:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Eu.collection("distributors").where("status","==",t.stat).orderBy("distributorName","asc").limit(self.limit):"all"==self.limit&&(r=Eu.collection("distributors").where("status","==",t.stat).orderBy("distributorName","asc")),r.get().then((function(e){if(e.empty)n("setDistributors",s);else{e.forEach((function(e){i.push(e.data()),o.push(e.id)}));for(var t=0;t<i.length;t++)i[t]["id"]=o[t],s.push(i[t]);n("setDistributors",s)}}));case 4:case"end":return a.stop()}}),a)})))()},checkEditDistributor:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,1==t.validate?r=Eu.collection("distributors").where("distributorName","==",Object(re["a"])(t.distributorName)).where("distributorId","!=",t.distributorId):2==t.validate&&""!=t.tin?r=Wu.collection("distributors").where("tin","==",t.tin).where("distributorId","!=",t.distributorId):3==t.validate&&""!=t.contactNumber?r=Wu.collection("clients").where("contactNumber","==",t.contactNumber).where("distributorId","!=",t.distributorId):4==t.validate&&""!=t.email&&(r=Wu.collection("clients").where("email","==",t.email).where("distributorId","!=",t.distributorId)),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 4:case"end":return a.stop()}}),a)})))()},editDistributor:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("distributors").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},distributorStatus:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("distributors").doc(t.id).update({status:t.stat,dateModified:$e}).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getDistributor:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=[],r=Eu.collection("distributors").where("status","==",1),r.get().then((function(e){e.forEach((function(e){n.push(e.data())})),a("setDistributor",n)}));case 4:case"end":return t.stop()}}),t)})))()}},getters:{valid:function(e){return e.valid},error:function(e){return e.error},clients:function(e){return e.clients},distributors:function(e){return e.distributors},distributor:function(e){return e.distributor}}},Ae=new Date,De=a("9f25"),Pe=a("e966"),Ne=Pe.bindWith(",","."),Te={namespaced:!0,state:{valid:0,error:0,categories:[],products:[],category:[],product:[]},mutations:{setValidation:function(e,t){e.valid=t},setError:function(e,t){e.error=t},setCategories:function(e,t){e.categories=t},setCategory:function(e,t){e.category=t},setProducts:function(e,t){e.products=t},setProduct:function(e,t){e.product=t}},actions:{checkCategory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Wu.collection("productCategories").where("category","==",Object(re["a"])(t.newCategory)),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 3:case"end":return a.stop()}}),a)})))()},newCategory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="SPCI-"+Ae.getFullYear()+De(Ae.getMonth()+1,2)+Ae.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.productCategoryId=i,t.userReference=s[0].userId,Wu.collection("productCategories").doc().set(t).then((function(){n("setError",0)}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getCategories:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Wu.collection("productCategories").where("status","==",t.stat).orderBy("category","asc").limit(self.limit):"all"==self.limit&&(r=Wu.collection("productCategories").where("status","==",t.stat).orderBy("category","asc")),r.get().then((function(e){if(e.empty)n("setCategories",s);else{e.forEach((function(e){i.push(e.data()),o.push(e.id)}));for(var t=0;t<i.length;t++)i[t]["id"]=o[t],s.push(i[t]);n("setCategories",s)}}));case 4:case"end":return a.stop()}}),a)})))()},checkEditCategory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Wu.collection("productCategories").where("category","==",Object(re["a"])(t.category)).where("productCategoryId","!=",t.productCategoryId),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 3:case"end":return a.stop()}}),a)})))()},editCategory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Wu.collection("productCategories").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},categoryStatus:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Wu.collection("productCategories").doc(t.id).update({status:t.stat,dateModified:Ae}).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getCategory:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=[],r=Wu.collection("productCategories").where("status","==",1),r.get().then((function(e){e.forEach((function(e){n.push(e.data())})),a("setCategory",n)}));case 4:case"end":return t.stop()}}),t)})))()},checkProduct:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Wu.collection("products").where("productName","==",Object(re["a"])(t.newProduct)),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 3:case"end":return a.stop()}}),a)})))()},newProduct:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="SPI-"+Ae.getFullYear()+De(Ae.getMonth()+1,2)+Ae.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.productId=i,t.userReference=s[0].userId,Wu.collection("products").doc().set(t).then((function(){n("setError",0)}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getProducts:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Wu.collection("products").where("status","==",t.stat).orderBy("productName","asc").limit(self.limit):"all"==self.limit&&(r=Wu.collection("products").where("status","==",t.stat).orderBy("productName","asc")),r.get().then((function(e){if(e.empty)n("setProducts",s);else{e.forEach((function(e){i.push(e.data()),o.push(e.id)}));var t=Wu.collection("productCategories"),a=Eu.collection("distributors"),r=[],c=[];t.get().then((function(e){e.forEach((function(e){r.push(e.data())})),a.get().then((function(e){e.forEach((function(e){c.push(e.data())}));for(var t=0;t<i.length;t++){i[t]["id"]=o[t],i[t]["category"]="",i[t]["distributor"]="",i[t].price=Ne(i[t].price);for(var a=0;a<r.length;a++)i[t].categoryReference==r[a].productCategoryId&&(i[t].category=r[a].category);for(var l=0;l<c.length;l++)i[t].distributorReference==c[l].distributorId&&(i[t].distributor=c[l].distributorName);s.push(i[t])}n("setProducts",s)}))}))}}));case 4:case"end":return a.stop()}}),a)})))()},checkEditProduct:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Wu.collection("products").where("productName","==",Object(re["a"])(t.product)).where("productId","!=",t.productId),null!=r?r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)})):n("setValidation",0);case 3:case"end":return a.stop()}}),a)})))()},editProduct:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Wu.collection("products").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},productStatus:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Wu.collection("products").doc(t.id).update({status:t.stat,dateModified:Ae}).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getProduct:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Wu.collection("products").where("distributorReference","==",t.distributor),s=[],r.get().then((function(e){e.forEach((function(e){s.push(e.data())})),n("setProduct",s)}));case 4:case"end":return a.stop()}}),a)})))()}},getters:{valid:function(e){return e.valid},error:function(e){return e.error},categories:function(e){return e.categories},category:function(e){return e.category},products:function(e){return e.products},product:function(e){return e.product}}},Re=(a("b680"),new Date),Ie=a("9f25"),Se=a("e966"),qe=Se.bindWith(",","."),Be={namespaced:!0,state:{error:0,purhaseOrders:[]},mutations:{setError:function(e,t){e.error=t},setPurchaseOrder:function(e,t){e.purchaseOrders=t}},actions:{newPurchaseOrder:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Wu.collection("purchaseOrders").orderBy("dateCreated","desc"),s=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),i=[],o=[],r.limit(1).get().then((function(e){e.forEach((function(e){e.exists&&o.push(e.data())}));var a="";s.get().then((function(e){e.forEach((function(e){i.push(e.data())}));var r=new Date;a=0!=o.length?o[0].poNumber.slice(3,5)!=r.getMonth()+1?"0001":Ie(parseInt(o[0].poNumber.slice(5))+1,4):"0001",t.poNumber=r.getFullYear().toString().slice(2,4)+"-"+Ie(r.getMonth()+1)+a,t.userReference=i[0].userId,Wu.collection("purchaseOrders").doc().set(t).then((function(){n("setError",0)}))}))}))}catch(c){n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},newPurchaseOrderItem:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="POII-"+Re.getFullYear()+Ie(Re.getMonth()+1,2)+Re.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){s.push(e.data())})),t.purchaseOrderItemId=i,t.userReference=s[0].userId,Wu.collection("purchaseOrderItems").doc().set(t).then((function(){n("setError",0)}))}))}catch(o){n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getPurchaseOrders:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"Pending"==t.type?"all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",1).orderBy("poDate","desc").limit(t.limit):"all"==t.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",1).orderBy("poDate","desc")):"Sent"==t.type?"all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",2).orderBy("poDate","desc").limit(t.limit):"all"==t.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",2).orderBy("poDate","desc")):"Delivered"==t.type?"all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",3).orderBy("poDate","desc").limit(t.limit):"all"==t.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",3).orderBy("poDate","desc")):"Done"==t.type?"all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",4).orderBy("poDate","desc").limit(t.limit):"all"==t.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",4).orderBy("poDate","desc")):"Reject"==t.type?"all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",5).orderBy("poDate","desc").limit(t.limit):"all"==self.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",5).orderBy("poDate","desc")):"Cancel"==t.type?"all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",0).orderBy("poDate","desc").limit(t.limit):"all"==t.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).where("status","==",0).orderBy("poDate","desc")):"All"==t.type&&("all"!=t.limit?r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).orderBy("poDate","desc").limit(t.limit):"all"==t.limit&&(r=Wu.collection("purchaseOrders").where("poDate",">=",t.start).where("poDate","<=",t.end).orderBy("poDate","desc"))),r.get().then((function(e){if(!e.empty){e.forEach((function(e){i.push(e.data()),s.push(e.id)}));for(var t=0;t<i.length;t++)i[t]["rowNum"]=1+t,i[t]["id"]=s[t],i[t].totalAmount=qe(parseFloat(i[t].totalAmount.replaceAll(",","")).toFixed(2)),o.push(i[t]);n("setPurchaseOrder",o)}}));case 4:case"end":return a.stop()}}),a)})))()}},getters:{error:function(e){return e.error},purchaseOrders:function(e){return e.purchaseOrders}}},Me=(a("b0c0"),a("7ff6")),Oe=a("ac3f"),Ee=a("c1df"),Fe=new Date,Ye=a("9f25"),Ve={namespaced:!0,state:{errorMessage:0,validationMessage:0,signatoryTypes:[],signatoryType:[],signatories:[],signatoryTypeId:"",checkVoucherSignatory:[]},mutations:{setErrorMessage:function(e,t){e.errorMessage=t},setValidationMessage:function(e,t){e.validationMessage=t},setSignatoryTypes:function(e,t){e.signatoryTypes=t},setSignatoryType:function(e,t){e.signatoryType=t},setSignatories:function(e,t){e.signatories=t},setSignatoryTypeId:function(e,t){e.signatoryTypeId=t},setCheckVoucherSignatory:function(e,t){e.checkVoucherSignatory=t}},actions:{checkSignatoryType:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatoryTypes").where("type","==",Object(Me["a"])(t.newType)),r.get().then((function(e){e.empty?e&&n("setValidationMessage",0):n("setValidationMessage",1)}));case 3:case"end":return a.stop()}}),a)})))()},saveSignatoryType:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="STI-"+Fe.getFullYear()+Ye(Fe.getMonth()+1,2)+Fe.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.printSignatoryId=i,t.createdBy=localStorage.getItem("aisname"),t.userReference=s[0].userId,Eu.collection("printSignatoryTypes").doc().set(t).then((function(){n("setErrorMessage",0)}))}))}catch(o){console.log(o),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},getSignatoryTypes:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Eu.collection("printSignatoryTypes").orderBy("dateCreated","asc").limit(t.limit):"all"==t.limit&&(r=Eu.collection("printSignatoryTypes").orderBy("dateCreated","asc")),r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)})),s.sort((function(e,t){return e.type-t.type}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=1+t,s[t]["id"]=i[t],s[t].dateCreated=Ee.unix(s[t].dateCreated.seconds),o.push(s[t]);n("setSignatoryTypes",o)}}));case 4:case"end":return a.stop()}}),a)})))()},checkUpdateSignatoryType:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatoryTypes").where("type","==",Object(Me["a"])(t.type)).where("printSignatoryTypeId","==",t.printSignatoryTypeId),r.get().then((function(e){e.empty?e&&n("setValidationMessage",0):n("setValidationMessage",1)}));case 3:case"end":return a.stop()}}),a)})))()},updateSignatoryType:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("printSignatoryTypes").doc(t.id).update(t).then((function(){n("setErrorMessage",0)}))}catch(r){console.log(r),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},getSignatoryType:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatoryTypes").where("printSignatoryId","==",t.id),s=[],i=[],o=[],r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=1+t,s[t]["id"]=i[t],o.push(s[t]);n("setSignatoryType",o[0])}}));case 4:case"end":return a.stop()}}),a)})))()},getSignatoryTypeId:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatoryTypes").where("type","==",Object(Me["a"])(t.name)),s="",r.get().then((function(e){e.empty||(e.forEach((function(e){s=e.data().printSignatoryId})),n("setSignatoryTypeId",s))}));case 4:case"end":return a.stop()}}),a)})))()},getSignatories:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatories").where("signatoryTypeReference","==",t.id).orderBy("orderNumber","asc"),s=[],i=[],o=[],n("setSignatories",o),r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=t+1,s[t]["id"]=i[t],o.push(s[t]);n("setSignatories",o)}}));case 5:case"end":return a.stop()}}),a)})))()},checkSignatory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatories").where("label","==",Object(Oe["a"])(t.newLabelName)),r.get().then((function(e){e.empty?e&&n("setValidationMessage",0):n("setValidationMessage",1)}));case 3:case"end":return a.stop()}}),a)})))()},saveSignatory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="PSI-"+Fe.getFullYear()+Ye(Fe.getMonth()+1,2)+Fe.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data())})),t.signatoryId=i,t.createdBy=localStorage.getItem("aisname"),t.userReference=s[0].userId,Eu.collection("printSignatories").doc().set(t).then((function(){n("setErrorMessage",0)}))}))}catch(o){console.log(o),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},checkUpdateSignatory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatories").where("label","==",Object(Oe["a"])(t.label)).where("signatoryType","!=",t.signatoryId),r.get().then((function(e){e.empty?e&&n("setValidationMessage",0):n("setValidationMessage",1)}));case 3:case"end":return a.stop()}}),a)})))()},updateSignatory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("printSignatories").doc(t.id).update(t).then((function(){n("setErrorMessage",0)}))}catch(r){console.log(r),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},deleteSignatory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Eu.collection("printSignatories").doc(t.id).delete().then((function(){n("setErrorMessage")}))}catch(r){console.log(r),n("setErrorMessage",1)}case 2:case"end":return a.stop()}}),a)})))()},getSignatory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("printSignatories").where("signatoryTypeReference","==",t.id).orderBy("orderNumber","asc"),s=[],i=[],o=[],r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)}));for(var a=0;a<s.length;a++)s[a]["rowNum"]=a+1,s[a]["id"]=i[a],o.push(s[a]);"Check Voucher"==Object(Me["a"])(t.name)&&n("setCheckVoucherSignatory",o)}}));case 4:case"end":return a.stop()}}),a)})))()}},getters:{errorMessage:function(e){return e.errorMessage},validationMessage:function(e){return e.validationMessage},signatoryTypes:function(e){return e.signatoryTypes},signatoryType:function(e){return e.signatoryType},signatories:function(e){return e.signatories},signatoryTypeId:function(e){return e.signatoryTypeId},checkVoucherSignatory:function(e){return e.checkVoucherSignatory}}},Ue=a("c1df"),je=new Date,We=a("9f25"),Ke={namespaced:!0,state:{voucherParticulars:[],valid:0,error:0,allParticulars:[]},mutations:{setVoucherParticular:function(e,t){e.voucherParticulars=t},setValidation:function(e,t){e.valid=t},setError:function(e,t){e.error=t},setAllParticulars:function(e,t){e.allParticulars=t}},actions:{getVoucherParticular:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,s=[],i=[],o=[],"all"!=t.limit?r=Mu.collection("checkVoucherParticulars").orderBy("particular","asc").limit(t.limit):"all"==t.limit&&(r=Mu.collection("checkVoucherParticulars").orderBy("particular","asc")),r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data()),i.push(e.id)})),s.sort((function(e,t){return e.particular-t.particular}));for(var t=0;t<s.length;t++)s[t]["rowNum"]=1+t,s[t]["id"]=i[t],s[t].dateCreated=Ue.unix(s[t].dateCreated.seconds),o.push(s[t]);n("setVoucherParticular",o)}}));case 4:case"end":return a.stop()}}),a)})))()},checkVoucherNewParticular:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Mu.collection("checkVoucherParticulars").where("particular","==",Object(re["a"])(t.newParticular)),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 4:case"end":return a.stop()}}),a)})))()},newVoucherParticular:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{r=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),s=[],i="CVPID-"+je.getFullYear()+We(je.getMonth()+1,2)+je.getDate()+"-"+Math.floor(1e6*Math.random()),r.get().then((function(e){e.forEach((function(e){e.exists&&s.push(e.data()),t.particularId=i,t.userReference=s[0].userId,Mu.collection("checkVoucherParticulars").doc().set(t).then((function(){n("setError",0)}))}))}))}catch(o){console.log(o),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},checkEditParticular:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=null,r=Mu.collection("checkVoucherParticulars").where("particular","==",Object(re["a"])(t.particular)).where("particularId","!=",t.particularId),r.get().then((function(e){e.empty?e&&n("setValidation",0):n("setValidation",1)}));case 4:case"end":return a.stop()}}),a)})))()},updateVoucherParticular:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit;try{Mu.collection("checkVoucherParticulars").doc(t.id).update(t).then((function(){n("setError",0)}))}catch(r){console.log(r),n("setError",1)}case 2:case"end":return a.stop()}}),a)})))()},getAllParticulars:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=Mu.collection("checkVoucherParticulars").orderBy("particular","asc"),r=[],s=[],n.get().then((function(e){if(!e.empty){e.forEach((function(e){r.push(e.data()),s.push(e.id)})),r.sort((function(e,t){return e.particular-t.particular}));for(var t=0;t<r.length;t++)r[t]["rowNum"]=1+t,r[t]["id"]=s[t],r[t].dateCreated=Ue.unix(r[t].dateCreated.seconds);a("setAllParticulars",r)}}));case 4:case"end":return t.stop()}}),t)})))()}},getters:{voucherParticulars:function(e){return e.voucherParticulars},valid:function(e){return e.valid},error:function(e){return e.error},allParticulars:function(e){return e.allParticulars}}},ze={namespaced:!0,state:{accountEquations:[],coas:[]},mutations:{setAccountEquations:function(e,t){e.accountEquations=t},setCoas:function(e,t){e.coas=t}},actions:{getAccountingEquations:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=Eu.collection("accountEquations").orderBy("code","asc"),r=[],n.get().then((function(e){e.forEach((function(e){r.push(e.data())})),a("setAccountEquations",r)}));case 4:case"end":return t.stop()}}),t)})))()},getCoas:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,r=Eu.collection("chartOfAccounts").where("accountEquationReference","==",t.equationId).where("status","==",1),s=[],r.get().then((function(e){e.forEach((function(e){s.push(e.data())})),n("setCoas",s)}));case 4:case"end":return a.stop()}}),a)})))()}},getters:{accountEquations:function(e){return e.accountEquations},coas:function(e){return e.coas}}};n["default"].use(ne["a"]);var Le=new ne["a"].Store({state:{},mutations:{},actions:{},modules:{Banks:ce,BankAccounts:me,Users:be,CheckSeries:we,CheckPayees:ye,Sales:xe,Products:Te,PurchaseOrders:Be,PrintSignatory:Ve,VoucherParticulars:Ke,ChartOfAccounts:ze}}),Qe=a("9483");Object(Qe["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});a("4d1c"),a("a4d4");var He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.tag,{tag:"component",staticClass:"badge",class:["badge-"+e.type,e.rounded?"badge-pill":"",e.circle&&"badge-circle"]},[e._t("default",[e.icon?a("i",{class:e.icon}):e._e()])],2)},Ge=[],Ze={name:"badge",props:{tag:{type:String,default:"span",description:"Html tag to use for the badge."},rounded:{type:Boolean,default:!1,description:"Whether badge is of pill type"},circle:{type:Boolean,default:!1,description:"Whether badge is circle"},icon:{type:String,default:"",description:"Icon name. Will be overwritten by slot if slot is used"},type:{type:String,default:"default",description:"Badge type (primary|info|danger|default|warning|success)"}}},Je=Ze,Xe=Object(m["a"])(Je,He,Ge,!1,null,null,null),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fade-transition",[e.visible?a("div",{staticClass:"alert",class:["alert-"+e.type,{"alert-dismissible":e.dismissible}],attrs:{role:"alert"}},[e.dismissible?[e._t("default",[e.icon?a("span",{staticClass:"alert-inner--icon"},[a("i",{class:e.icon})]):e._e(),e.$slots.text?a("span",{staticClass:"alert-inner--text"},[e._t("text")],2):e._e()]),e._t("dismiss-icon",[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:e.dismissAlert}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã")])])])]:e._t("default",[e.icon?a("span",{staticClass:"alert-inner--icon"},[a("i",{class:e.icon})]):e._e(),e.$slots.text?a("span",{staticClass:"alert-inner--text"},[e._t("text")],2):e._e()])],2):e._e()])},at=[],nt={name:"base-alert",components:{FadeTransition:w["a"]},props:{type:{type:String,default:"default",description:"Alert type"},icon:{type:String,default:"",description:"Alert icon. Will be overwritten by default slot"},dismissible:{type:Boolean,default:!1,description:"Whether alert is closes when clicking"}},data:function(){return{visible:!0}},methods:{dismissAlert:function(){this.visible=!1}}},rt=nt,st=Object(m["a"])(rt,tt,at,!1,null,null,null),it=st.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.tag,{tag:"component",staticClass:"btn",class:e.classes,attrs:{type:"button"===e.tag?e.nativeType:""},on:{click:e.handleClick}},[e.$slots.icon||e.icon&&e.$slots.default?a("span",{staticClass:"btn-inner--icon"},[e._t("icon",[a("i",{class:e.icon})])],2):e._e(),e.$slots.default?e._e():a("i",{class:e.icon}),e.$slots.icon||e.icon&&e.$slots.default?a("span",{staticClass:"btn-inner--text"},[e._t("default",[e._v(e._s(e.text))])],2):e._e(),e.$slots.icon||e.icon?e._e():e._t("default")],2)},ct=[],lt=a("ade3"),ut={name:"base-button",props:{tag:{type:String,default:"button",description:"Button tag (default -> button)"},type:{type:String,default:"default",description:"Button type (e,g primary, danger etc)"},size:{type:String,default:"",description:"Button size lg|sm"},textColor:{type:String,default:"",description:"Button text color (e.g primary, danger etc)"},nativeType:{type:String,default:"button",description:"Button native type (e.g submit,button etc)"},icon:{type:String,default:"",description:"Button icon"},text:{type:String,default:"",description:"Button text in case not provided via default slot"},outline:{type:Boolean,default:!1,description:"Whether button style is outline"},rounded:{type:Boolean,default:!1,description:"Whether button style is rounded"},iconOnly:{type:Boolean,default:!1,description:"Whether button contains only an icon"},block:{type:Boolean,default:!1,description:"Whether button is of block type"}},computed:{classes:function(){var e=[{"btn-block":this.block},{"rounded-circle":this.rounded},{"btn-icon-only":this.iconOnly},Object(lt["a"])({},"text-".concat(this.textColor),this.textColor),{"btn-icon":this.icon||this.$slots.icon},this.type&&!this.outline?"btn-".concat(this.type):"",this.outline?"btn-outline-".concat(this.type):""];return this.size&&e.push("btn-".concat(this.size)),e}},methods:{handleClick:function(e){this.$emit("click",e)}}},dt=ut,mt=Object(m["a"])(dt,ot,ct,!1,null,null,null),pt=mt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-control custom-checkbox",class:{disabled:e.disabled,"form-check-inline":e.inline}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"custom-control-input",attrs:{id:e.cbId,type:"checkbox",disabled:e.disabled},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:function(t){var a=e.model,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);n.checked?i<0&&(e.model=a.concat([s])):i>-1&&(e.model=a.slice(0,i).concat(a.slice(i+1)))}else e.model=r}}}),a("label",{staticClass:"custom-control-label",attrs:{for:e.cbId}},[e._t("default",[e.inline?a("span"):e._e()])],2)])},ht=[];function ft(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var vt={name:"base-checkbox",model:{prop:"checked"},props:{checked:{type:[Array,Boolean],description:"Whether checkbox is checked"},disabled:{type:Boolean,description:"Whether checkbox is disabled"},inline:{type:Boolean,description:"Whether checkbox is inline"}},data:function(){return{cbId:"",touched:!1}},computed:{model:{get:function(){return this.checked},set:function(e){this.touched||(this.touched=!0),this.$emit("input",e)}}},mounted:function(){this.cbId=ft()}},wt=vt,Ct=Object(m["a"])(wt,bt,ht,!1,null,null,null),gt=Ct.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group",class:[{"input-group":e.hasIcon},{"has-danger":e.error},{focused:e.focused},{"has-label":e.label||e.$slots.label},{"has-success":!0===e.valid},{"has-danger":!1===e.valid}]},[e._t("label",[e.label?a("label",{staticClass:"form-control-label",class:e.labelClasses},[e._v(" "+e._s(e.label)+" "),e.required?a("span",[e._v("*")]):e._e()]):e._e()]),e.addonLeftIcon||e.$slots.addonLeft?a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._t("addonLeft",[a("i",{class:e.addonLeftIcon})])],2)]):e._e(),e._t("default",[a("input",e._g(e._b({staticClass:"form-control",class:[{"is-valid":!0===e.valid},{"is-invalid":!1===e.valid},e.inputClasses],attrs:{"aria-describedby":"addon-right addon-left"},domProps:{value:e.value}},"input",e.$attrs,!1),e.listeners))],null,e.slotData),e.addonRightIcon||e.$slots.addonRight?a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[e._t("addonLeft",[a("i",{class:e.addonRightIcon})])],2)]):e._e(),e._t("infoBlock"),e._t("helpBlock",[e.error?a("div",{staticClass:"text-danger invalid-feedback",class:{"mt-2":e.hasIcon},staticStyle:{display:"block"}},[e._v(e._s(e.error)+" ")]):e._e()])],2)},yt=[],$t=(a("a9e3"),a("5530")),_t={inheritAttrs:!1,name:"base-input",props:{required:{type:Boolean,description:"Whether input is required (adds an asterix *)"},valid:{type:Boolean,description:"Whether is valid",default:void 0},label:{type:String,description:"Input label (text before input)"},error:{type:String,description:"Input error (below input)"},labelClasses:{type:String,description:"Input label css classes"},inputClasses:{type:String,description:"Input css classes"},value:{type:[String,Number],description:"Input value"},addonRightIcon:{type:String,description:"Addon right icon"},addonLeftIcon:{type:String,description:"Addont left icon"}},data:function(){return{focused:!1}},computed:{listeners:function(){return Object($t["a"])(Object($t["a"])({},this.$listeners),{},{input:this.updateValue,focus:this.onFocus,blur:this.onBlur})},slotData:function(){return Object($t["a"])({focused:this.focused},this.listeners)},hasIcon:function(){var e=this.$slots,t=e.addonRight,a=e.addonLeft;return void 0!==t||void 0!==a||void 0!==this.addonRightIcon||void 0!==this.addonLeftIcon}},methods:{updateValue:function(e){var t=e.target.value;this.$emit("input",t)},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)}}},xt=_t,At=Object(m["a"])(xt,kt,yt,!1,null,null,null),Dt=At.exports,Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.tag,{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropDown,expression:"closeDropDown"}],tag:"component",staticClass:"dropdown",class:[{show:e.isOpen},{dropdown:"down"===e.direction},{dropup:"up"===e.direction}],attrs:{"aria-haspopup":"true","aria-expanded":e.isOpen},on:{click:e.toggleDropDown}},[e._t("title",[a("a",{staticClass:"dropdown-toggle nav-link row",class:{"no-caret":e.hideArrow},staticStyle:{color:"#ffff"},attrs:{"data-toggle":"dropdown"}},[a("i",{staticClass:"col-sm-2",class:e.icon}),a("span",{staticClass:"no-icon col-sm-8"},[e._v(e._s(e.title))])])]),a("ul",{ref:"menu",staticClass:"dropdown-menu",class:[{"dropdown-menu-right":"right"===e.position},{show:e.isOpen},e.menuClasses],attrs:{id:"sideBarBg"}},[e._t("default")],2)],2)},Nt=[],Tt={name:"base-dropdown",props:{direction:{type:String,default:"down"},title:{type:String,description:"Dropdown title"},icon:{type:String,description:"Icon for dropdown title"},position:{type:String,description:"Position of dropdown menu (e.g right|left)"},menuClasses:{type:[String,Object],description:"Dropdown menu classes"},hideArrow:{type:Boolean,description:"Whether dropdown arrow should be hidden"},appendToBody:{type:Boolean,default:!0,description:"Whether dropdown should be appended to document body"},tag:{type:String,default:"li",description:"Dropdown html tag (e.g div, li etc)"}},data:function(){return{isOpen:!1}},methods:{toggleDropDown:function(){this.isOpen=!this.isOpen,this.$emit("change",this.isOpen)},closeDropDown:function(){this.isOpen=!1,this.$emit("change",this.isOpen)}}},Rt=Tt,It=(a("f364"),Object(m["a"])(Rt,Pt,Nt,!1,null,null,null)),St=It.exports,qt=function(){var e,t=this,a=t.$createElement,n=t._self._c||a;return n("nav",{staticClass:"navbar",class:[{"navbar-expand-md":t.expand},{"navbar-transparent":t.transparent},(e={},e["bg-"+t.type]=t.type,e)]},[n("div",{class:t.containerClasses},[t._t("brand",[n("router-link",{staticClass:"h4 mb-0 text-white text-uppercase d-none d-lg-inline-block",attrs:{to:t.$route.path}},[t._v(" "+t._s(t.$route.name))])]),t.showToggleButton?n("navbar-toggle-button",{attrs:{toggled:t.toggled,target:t.contentId},nativeOn:{click:function(e){e.stopPropagation(),t.toggled=!t.toggled}}},[n("span",{staticClass:"navbar-toggler-icon"})]):t._e(),n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"collapse navbar-collapse",class:{show:t.toggled},attrs:{id:t.contentId}},[t._t("default",null,{closeMenu:t.closeMenu})],2)],2)])},Bt=[],Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":e.target,"aria-controls":e.target,"aria-expanded":e.toggled,"aria-label":"Toggle navigation"}},[e._t("default",[a("span"),a("span")])],2)},Ot=[],Et={props:{target:{type:[String,Number],description:"Button target element"},toggled:{type:Boolean,default:!1,description:"Whether button is toggled"}}},Ft=Et,Yt=Object(m["a"])(Ft,Mt,Ot,!1,null,null,null),Vt=Yt.exports,Ut={name:"base-nav",components:{NavbarToggleButton:Vt},props:{type:{type:String,default:"",description:"Navbar type (e.g default, primary etc)"},title:{type:String,default:"",description:"Title of navbar"},contentId:{type:[String,Number],default:Math.random().toString(),description:"Explicit id for the menu. By default it's a generated random number"},containerClasses:{type:[String,Object,Array],default:"container-fluid"},transparent:{type:Boolean,default:!1,description:"Whether navbar is transparent"},expand:{type:Boolean,default:!1,description:"Whether navbar should contain `navbar-expand-lg` class"},showToggleButton:{type:Boolean,default:!0}},data:function(){return{toggled:!1}},methods:{closeMenu:function(){this.toggled=!1}}},jt=Ut,Wt=Object(m["a"])(jt,qt,Bt,!1,null,null,null),Kt=Wt.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"pagination",class:[e.size&&"pagination-"+e.size,e.align&&"justify-content-"+e.align]},[a("li",{staticClass:"page-item prev-page",class:{disabled:1===e.value}},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Previous"},on:{click:e.prevPage}},[e._m(0)])]),e._l(e.range(e.minPage,e.maxPage),(function(t){return a("li",{key:t,staticClass:"page-item",class:{active:e.value===t}},[a("a",{staticClass:"page-link",on:{click:function(a){return e.changePage(t)}}},[e._v(e._s(t))])])})),a("li",{staticClass:"page-item next-page",class:{disabled:e.value===e.totalPages}},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Next"},on:{click:e.nextPage}},[e._m(1)])])],2)},Lt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fa fa-angle-left",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}})])}],Qt={name:"base-pagination",props:{pageCount:{type:Number,default:0,description:"Pagination page count. This should be specified in combination with perPage"},perPage:{type:Number,default:0,description:"Pagination per page. Should be specified with total or pageCount"},total:{type:Number,default:0,description:"Can be specified instead of pageCount. The page count in this case will be total/perPage"},value:{type:Number,default:1,description:"Pagination value"},size:{type:String,default:"",description:"Pagination size"},align:{type:String,default:"",description:"Pagination alignment (e.g center|start|end)"}},computed:{totalPages:function(){return this.pageCount>0?this.pageCount:this.total>0?Math.ceil(this.total/this.perPage):1},pagesToDisplay:function(){return this.totalPages>0&&this.totalPages<this.defaultPagesToDisplay?this.totalPages:this.defaultPagesToDisplay},minPage:function(){if(this.value>=this.pagesToDisplay){var e=Math.floor(this.pagesToDisplay/2),t=e+this.value;return t>this.totalPages?this.totalPages-this.pagesToDisplay+1:this.value-e}return 1},maxPage:function(){if(this.value>=this.pagesToDisplay){var e=Math.floor(this.pagesToDisplay/2),t=e+this.value;return t<this.totalPages?t:this.totalPages}return this.pagesToDisplay}},data:function(){return{defaultPagesToDisplay:5}},methods:{range:function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a},changePage:function(e){this.$emit("input",e)},nextPage:function(){this.value<this.totalPages&&this.$emit("input",this.value+1)},prevPage:function(){this.value>1&&this.$emit("input",this.value-1)}},watch:{perPage:function(){this.$emit("input",1)},total:function(){this.$emit("input",1)}}},Ht=Qt,Gt=Object(m["a"])(Ht,zt,Lt,!1,null,null,null),Zt=Gt.exports,Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"progress-wrapper"},[e.$slots.label||e.label||e.$slots.percentage||e.showPercentage?a("div",{staticClass:"progress-info"},[e.$slots.label||e.label?a("div",{staticClass:"progress-label"},[a("span",[e._t("label",[e._v(e._s(e.label))])],2)]):e._e(),e.$slots.percentage||e.showPercentage?a("div",{staticClass:"progress-percentage"},[e._t("percentage",[e._v(e._s(e.value)+" %")])],2):e._e()]):e._e(),a("div",{staticClass:"progress",style:"height: "+e.height+"px"},[a("div",{staticClass:"progress-bar",class:e.computedClasses,style:"width: "+e.value+"%;",attrs:{role:"progressbar","aria-valuenow":e.value,"aria-valuemin":"0","aria-valuemax":"100"}})])])},Xt=[],ea={name:"base-progress",props:{striped:{type:Boolean,description:"Whether progress is striped"},animated:{type:Boolean,description:"Whether progress is animated (works only with `striped` prop together)"},showPercentage:{type:Boolean,default:!0,description:"Whether progress bar should show percentage value"},height:{type:Number,default:3,description:"Progress line height"},label:{type:String,default:"",description:"Progress label"},type:{type:String,default:"default",description:"Progress type (e.g danger, primary etc)"},value:{type:Number,default:0,validator:function(e){return e>=0&&e<=100},description:"Progress value"}},computed:{computedClasses:function(){return[{"progress-bar-striped":this.striped},{"progress-bar-animated":this.animated},Object(lt["a"])({},"bg-".concat(this.type),this.type)]}}},ta=ea,aa=Object(m["a"])(ta,Jt,Xt,!1,null,null,null),na=aa.exports,ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-control custom-radio",class:[e.inlineClass,{disabled:e.disabled}]},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"custom-control-input",attrs:{id:e.cbId,type:"radio",disabled:e.disabled},domProps:{value:e.name,checked:e._q(e.model,e.name)},on:{change:function(t){e.model=e.name}}}),a("label",{staticClass:"custom-control-label",attrs:{for:e.cbId}},[e._t("default")],2)])},sa=[],ia={name:"base-radio",props:{name:{type:[String,Number],description:"Radio label"},disabled:{type:Boolean,description:"Whether radio is disabled"},value:{type:[String,Boolean],description:"Radio value"},inline:{type:Boolean,description:"Whether radio is inline"}},data:function(){return{cbId:""}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},inlineClass:function(){return this.inline?"form-check-inline":""}},mounted:function(){this.cbId=ft()}},oa=ia,ca=Object(m["a"])(oa,ra,sa,!1,null,null,null),la=ca.exports,ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-slider-container"},[a("div",{ref:"slider",staticClass:"input-slider",class:["slider-"+e.type],attrs:{disabled:e.disabled}})])},da=[],ma=(a("a623"),a("e9fa")),pa=a.n(ma),ba={name:"base-slider",props:{value:{type:[String,Array,Number],description:"Slider value"},disabled:{type:Boolean,description:"Whether slider is disabled"},range:{type:Object,default:function(){return{min:0,max:100}},description:"Slider range (defaults to 0-100)"},type:{type:String,default:"",description:"Slider type (e.g primary, danger etc)"},options:{type:Object,default:function(){return{}},description:"noUiSlider options"}},computed:{connect:function(){return Array.isArray(this.value)||[!0,!1]}},data:function(){return{slider:null}},methods:{createSlider:function(){var e=this;pa.a.create(this.$refs.slider,Object($t["a"])({start:this.value,connect:this.connect,range:this.range},this.options));var t=this.$refs.slider.noUiSlider;t.on("slide",(function(){var a=t.get();a!==e.value&&e.$emit("input",a)}))}},mounted:function(){this.createSlider()},watch:{value:function(e,t){var a=this.$refs.slider.noUiSlider,n=a.get();e!==t&&n!==e&&(Array.isArray(n)&&Array.isArray(e)?t.length===e.length&&t.every((function(t,a){return t===e[a]}))&&a.set(e):a.set(e))}}},ha=ba,fa=Object(m["a"])(ha,ua,da,!1,null,null,null),va=fa.exports,wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"custom-toggle"},[a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:function(t){var a=e.model,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);n.checked?i<0&&(e.model=a.concat([s])):i>-1&&(e.model=a.slice(0,i).concat(a.slice(i+1)))}else e.model=r}}},"input",e.$attrs,!1),e.$listeners)),a("span",{staticClass:"custom-toggle-slider rounded-circle"})])},Ca=[],ga={name:"base-switch",inheritAttrs:!1,props:{value:{type:Boolean,default:!1,description:"Switch value"}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},ka=ga,ya=Object(m["a"])(ka,wa,Ca,!1,null,null,null),$a=ya.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"table tablesorter",class:e.tableClass},[a("thead",{class:e.theadClasses},[a("tr",[e._t("columns",e._l(e.columns,(function(t){return a("th",{key:t},[e._v(" "+e._s(t))])})),{columns:e.columns})],2)]),a("tbody",{class:e.tbodyClasses},e._l(e.data,(function(t,n){return a("tr",{key:n},[e._t("default",e._l(e.colsWithValue(t),(function(n,r){return a("td",{key:r},[e._v(" "+e._s(e.itemValue(t,n))+" ")])})),{row:t,index:n})],2)})),0)])},xa=[],Aa=(a("4de4"),{name:"base-table",props:{columns:{type:Array,default:function(){return[]},description:"Table columns"},data:{type:Array,default:function(){return[]},description:"Table data"},type:{type:String,default:"",description:"Whether table is striped or hover type"},theadClasses:{type:String,default:"",description:"<thead> css classes"},tbodyClasses:{type:String,default:"",description:"<tbody> css classes"}},computed:{tableClass:function(){return this.type&&"table-".concat(this.type)},colsWithValue:function(){var e=this;return function(t){return e.columns.filter((function(a){return e.hasValue(t,a)}))}}},methods:{hasValue:function(e,t){return"undefined"!==e[t.toLowerCase()]},itemValue:function(e,t){return e[t.toLowerCase()]}}}),Da=Aa,Pa=Object(m["a"])(Da,_a,xa,!1,null,null,null),Na=Pa.exports,Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header",attrs:{id:"darkBg"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"header-body"},[e._t("default")],2)])])},Ra=[],Ia={name:"base-header"},Sa=Ia,qa=(a("da78"),Object(m["a"])(Sa,Ta,Ra,!1,null,null,null)),Ba=qa.exports,Ma=function(){var e,t,a,n=this,r=n.$createElement,s=n._self._c||r;return s("div",{staticClass:"card",class:[{"card-lift--hover":n.hover},{shadow:n.shadow},(e={},e["shadow-"+n.shadowSize]=n.shadowSize,e),(t={},t["bg-gradient-"+n.gradient]=n.gradient,t),(a={},a["bg-"+n.type]=n.type,a)]},[n.$slots.header?s("div",{staticClass:"card-header",class:n.headerClasses},[n._t("header")],2):n._e(),n.noBody?n._e():s("div",{staticClass:"card-body",class:n.bodyClasses},[n._t("default")],2),n.noBody?n._t("default"):n._e(),n.$slots.footer?s("div",{staticClass:"card-footer",class:n.footerClasses},[n._t("footer")],2):n._e()],2)},Oa=[],Ea={name:"card",props:{type:{type:String,description:"Card type"},gradient:{type:String,description:"Card background gradient type (warning,danger etc)"},hover:{type:Boolean,description:"Whether card should move on hover"},shadow:{type:Boolean,description:"Whether card has shadow"},shadowSize:{type:String,description:"Card shadow size"},noBody:{type:Boolean,default:!1,description:"Whether card should have wrapper body class"},bodyClasses:{type:[String,Object,Array],description:"Card body css classes"},headerClasses:{type:[String,Object,Array],description:"Card header css classes"},footerClasses:{type:[String,Object,Array],description:"Card footer css classes"}}},Fa=Ea,Ya=Object(m["a"])(Fa,Ma,Oa,!1,null,null,null),Va=Ya.exports,Ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",{staticClass:"card-stats",attrs:{"show-footer-line":!0}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._t("default",[e.title?a("h5",{staticClass:"card-title text-uppercase text-muted mb-0"},[e._v(" "+e._s(e.title))]):e._e(),e.subTitle?a("span",{staticClass:"h2 font-weight-bold mb-0 pl-2"},[e._v(" "+e._s(e.subTitle))]):e._e()])],2),e.$slots.icon||e.icon?a("div",{staticClass:"col-auto"},[e._t("icon",[a("div",{staticClass:"icon icon-shape text-white rounded-circle shadow",class:["bg-"+e.type,e.iconClasses]},[a("i",{class:e.icon})])])],2):e._e()]),a("p",{staticClass:"mt-3 mb-0 text-sm"},[e._t("footer")],2)])},ja=[],Wa={name:"stats-card",components:{Card:Va},props:{type:{type:String,default:"primary"},icon:String,title:String,subTitle:String,iconClasses:[String,Array]}},Ka=Wa,za=Object(m["a"])(Ka,Ua,ja,!1,null,null,null),La=za.exports,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SlideYUpTransition",{attrs:{duration:e.animationDuration}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"modal fade",class:[{"show d-block":e.show},{"d-none":!e.show},{"modal-mini":"mini"===e.type}],attrs:{tabindex:"-1",role:"dialog","aria-hidden":!e.show},on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal(t)}}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",class:[{"modal-notice":"notice"===e.type},e.modalClasses]},[a("div",{staticClass:"modal-content",class:[e.gradient?"bg-gradient-"+e.gradient:"",e.modalContentClasses]},[e.$slots.header?a("div",{staticClass:"modal-header",class:[e.headerClasses]},[e._t("header"),e._t("close-button",[e.showClose?a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.closeModal}},[a("span",{attrs:{"aria-hidden":!e.show}},[e._v("Ã")])]):e._e()])],2):e._e(),a("div",{staticClass:"modal-body",class:e.bodyClasses},[e._t("default")],2),e.$slots.footer?a("div",{staticClass:"modal-footer",class:e.footerClasses},[e._t("footer")],2):e._e()])])])])},Ha=[],Ga=(a("c975"),{name:"modal",components:{SlideYUpTransition:w["b"]},props:{show:Boolean,showClose:{type:Boolean,default:!0},type:{type:String,default:"",validator:function(e){var t=["","notice","mini"];return-1!==t.indexOf(e)},description:'Modal type (notice|mini|"") '},modalClasses:{type:[Object,String],description:"Modal dialog css classes"},modalContentClasses:{type:[Object,String],description:"Modal dialog content css classes"},gradient:{type:String,description:"Modal gradient type (danger, primary etc)"},headerClasses:{type:[Object,String],description:"Modal Header css classes"},bodyClasses:{type:[Object,String],description:"Modal Body css classes"},footerClasses:{type:[Object,String],description:"Modal Footer css classes"},animationDuration:{type:Number,default:500,description:"Modal transition duration"}},methods:{closeModal:function(){this.$emit("update:show",!1),this.$emit("close")}},watch:{show:function(e){var t=document.body.classList;e?t.add("modal-open"):t.remove("modal-open")}}}),Za=Ga,Ja=(a("22d7"),Object(m["a"])(Za,Qa,Ha,!1,null,null,null)),Xa=Ja.exports,en=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"tab-pane fade",class:{"active show":e.active},attrs:{id:e.id||e.label,"aria-expanded":e.active}},[e._t("default")],2)},tn=[],an={name:"tab-pane",props:["label","id","title"],inject:["addTab","removeTab"],data:function(){return{active:!1}},mounted:function(){this.addTab(this)},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.removeTab(this)}},nn=an,rn=Object(m["a"])(nn,en,tn,!1,null,null,null),sn=rn.exports,on=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.layoutComponent,{tag:"component"},[a("template",{slot:"nav"},[a("div",{staticClass:"nav-wrapper"},[a("ul",{staticClass:"nav",class:[e.type?"nav-pills-"+e.type:"",e.pills?"nav-pills":"nav-tabs",{"nav-pills-icons":e.icons},{"nav-fill":e.fill},{"nav-pills-circle":e.circle},{"justify-content-center":e.centered},e.tabNavClasses],attrs:{role:"tablist"}},e._l(e.tabs,(function(t){return a("li",{key:t.id||t.title,staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:t.active},attrs:{"data-toggle":"tab",role:"tab",href:"#"+(t.id||t.title),"aria-selected":t.active},on:{click:function(a){return a.preventDefault(),e.activateTab(t)}}},[a("tab-item-content",{attrs:{tab:t}})],1)])})),0)])]),a("div",{staticClass:"tab-content",class:[e.tabContentClasses],attrs:{slot:"content"},slot:"content"},[e._t("default",null,null,e.slotData)],2)],2)},cn=[],ln=(a("7db0"),a("c740"),a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("nav"),e._t("content")],2)}),un=[],dn={},mn=Object(m["a"])(dn,ln,un,!1,null,null,null),pn=mn.exports,bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"nav-tabs-navigation"},[a("div",{staticClass:"nav-tabs-wrapper"},[e._t("nav")],2)]),a("div",[e._t("content")],2)])},hn=[],fn={name:"tabs-layout"},vn=fn,wn=Object(m["a"])(vn,bn,hn,!1,null,null,null),Cn=wn.exports,gn={name:"tabs",components:{TabsLayout:Cn,PillsLayout:pn,TabItemContent:{props:["tab"],render:function(e){return e("div",[this.tab.$slots.title||this.tab.title])}}},props:{type:{type:String,default:"",validator:function(e){var t=["","primary","info","success","warning","danger"];return-1!==t.indexOf(e)},description:"Tabs type (primary|info|danger|default|warning|success)"},pills:{type:Boolean,default:!0,description:"Whether tabs are pills"},circle:{type:Boolean,default:!1,description:"Whether tabs are circle"},fill:{type:Boolean,default:!0,description:"Whether to fill each tab"},activeTab:{type:String,default:"",description:"Default active tab name"},tabNavWrapperClasses:{type:[String,Object],default:"",description:"Tab Nav wrapper (div) css classes"},tabNavClasses:{type:[String,Object],default:"",description:"Tab Nav (ul) css classes"},tabContentClasses:{type:[String,Object],default:"",description:"Tab content css classes"},icons:{type:Boolean,description:"Whether tabs should be of icon type (small no text)"},centered:{type:Boolean,description:"Whether tabs are centered"},value:{type:String,description:"Initial value (active tab)"}},provide:function(){return{addTab:this.addTab,removeTab:this.removeTab}},data:function(){return{tabs:[],activeTabIndex:0}},computed:{layoutComponent:function(){return this.pills?"pills-layout":"tabs-layout"},slotData:function(){return{activeTabIndex:this.activeTabIndex,tabs:this.tabs}}},methods:{findAndActivateTab:function(e){var t=this.tabs.find((function(t){return t.title===e}));t&&this.activateTab(t)},activateTab:function(e){this.handleClick&&this.handleClick(e),this.deactivateTabs(),e.active=!0,this.activeTabIndex=this.tabs.findIndex((function(e){return e.active}))},deactivateTabs:function(){this.tabs.forEach((function(e){e.active=!1}))},addTab:function(e){this.activeTab===e.name&&(e.active=!0),this.tabs.push(e)},removeTab:function(e){var t=this.tabs,a=t.indexOf(e);a>-1&&t.splice(a,1)}},mounted:function(){var e=this;this.$nextTick((function(){e.value?e.findAndActivateTab(e.value):e.tabs.length>0&&e.activateTab(e.tabs[0])}))},watch:{value:function(e){this.findAndActivateTab(e)}}},kn=gn,yn=Object(m["a"])(kn,on,cn,!1,null,null,null),$n=yn.exports,_n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-1"},[0==e.searchTotalPage?void 0:[a("ul",{staticClass:"pagination pull-right"},[a("li",{staticClass:"page-item"},[a("button",{staticClass:"page-link",class:{"disabled-page-link":e.isInFirstPage},attrs:{disabled:e.isInFirstPage},on:{click:e.onClickPreviousPage}},[a("i",{staticClass:"fa fa-angle-left text-dark",attrs:{"aria-hidden":"true"}})])]),a("li",{staticClass:"page-item"},[a("button",{staticClass:"page-link",class:{"disabled-page-link":e.isInLastPage},attrs:{disabled:e.isInLastPage},on:{click:e.onClickNextPage}},[a("i",{staticClass:"fa fa-angle-right text-dark",attrs:{"aria-hidden":"true"}})])])])]],2)},xn=[],An={name:"pagination",props:{maxVisibleButtons:{type:Number,required:!1,default:3},totalPages:{type:Number,required:!0},currentPage:{type:Number,required:!0},dividePageNum:{type:Number,default:10},searching:{type:Boolean,default:!1},searchTotalPage:Array},computed:{total:function(){return Math.ceil(this.totalPages/this.dividePageNum)},isInFirstPage:function(){return 1===this.currentPage},isInLastPage:function(){return this.currentPage===this.total},startPage:function(){return 1===this.currentPage?1:this.currentPage===this.total?this.total-this.maxVisibleButtons+2:this.currentPage-1},endPage:function(){return Math.min(this.startPage+this.maxVisibleButtons-1,this.total)},pages:function(){for(var e=[],t=this.startPage;t<=this.endPage;t+=1)e.push({name:t,isDisabled:t===this.currentPage});return e}},methods:{onClickFirstPage:function(){this.$emit("pagechanged",1)},onClickPreviousPage:function(){this.$emit("pagechanged",this.currentPage-1)},onClickPage:function(e){this.$emit("pagechanged",e)},onClickNextPage:function(){this.$emit("pagechanged",this.currentPage+1)},onClickLastPage:function(){this.$emit("pagechanged",this.total)},isPageActive:function(e){return this.currentPage===e}}},Dn=An,Pn=(a("5eaf"),Object(m["a"])(Dn,_n,xn,!1,null,null,null)),Nn=Pn.exports,Tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table",class:e.tableClass},[a("thead",[e._t("columns",e._l(e.columns,(function(t,n){return a("th",{key:t,style:[n==e.columns.length-1?{"text-align":"right"}:{}]},[e._v(" "+e._s(t))])})))],2),!e.loading&&e.data.length?a("tbody",e._l(e.data,(function(t,n){return a("tr",{key:n,class:{inactive:!t.status}},[e._t("default",e._l(e.columns,(function(n,r){return a("td",{key:r},[e._v(" "+e._s(t))])})),{row:t})],2)})),0):e._e(),e.loading||e.loadError||e.data.length?e._e():a("tbody",[a("tr",[a("td",{attrs:{colspan:e.columns.length,align:"center"}},[e._v(" No records found.")])])]),e.loading?a("tbody",[a("tr",[a("td",{attrs:{align:"center",colspan:e.columns.length}},[a("i",{staticClass:"fa fa-spinner fa-spin"})])])]):e._e(),!e.loading&&e.loadError?a("tbody",[a("tr",[a("td",{attrs:{align:"center",colspan:e.columns.length}},[a("a",{staticClass:"pointer",on:{click:e.reloadData}},[e._v("Unable to fetch data. Click to try again.")])])])]):e._e()])])},Rn=[],In={name:"paper-table",props:{columns:Array,data:Array,loading:{type:Boolean,default:!0},search:{type:Boolean,default:!0},loadError:{type:Boolean,default:!1},placeholder:{type:String,default:"Search"},type:{type:String,default:"striped"},title:{type:String,default:""},subTitle:{type:String,default:""}},computed:{tableClass:function(){return"table-".concat(this.type)}},mounted:function(){},methods:{reloadData:function(){this.$emit("reloadData")},hasValue:function(e,t){return"undefined"!==e[t.toLowerCase()]},itemValue:function(e,t){return e[t.toLowerCase()]}}},Sn=In,qn=(a("2545"),Object(m["a"])(Sn,Tn,Rn,!1,null,null,null)),Bn=qn.exports,Mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row pb-2"},[a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",type:"success"},nativeOn:{click:function(t){return e.bankList(t)}}},[e._v("Bank")])],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",type:"default"},nativeOn:{click:function(t){return e.bankAccountList(t)}}},[e._v("Bank Account")])],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",type:"primary"},nativeOn:{click:function(t){return e.checkSeriesList(t)}}},[e._v("Check Series")])],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",type:"info"},nativeOn:{click:function(t){return e.supplierList(t)}}},[e._v("Suppliers")])],1)])},On=[],En={name:"check-button",methods:{checkList:function(){this.$router.push("/bank/check")},checkSeriesList:function(){this.$router.push("/check/series")},supplierList:function(){this.$router.push("/bank/check/supplier")},bankList:function(){this.$router.push("/banks")},bankAccountList:function(){this.$router.push("/bank/accounts")}}},Fn=En,Yn=Object(m["a"])(Fn,Mn,On,!1,null,null,null),Vn=Yn.exports,Un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row pb-2"},[a("div",{staticClass:"col-sm-6"},[a("base-button",{attrs:{block:"",id:"redBtn"},nativeOn:{click:function(t){return e.accountSummary(t)}}},[e._v(" Reconciliation Summary")])],1),a("div",{staticClass:"col-sm-6"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.authentication-modal",modifiers:{"authentication-modal":!0}}],attrs:{block:"",id:"goldBtn"}},[e._v(" Reconciliation Checking")])],1)])},jn=[],Wn={name:"recon-button",methods:{accountSummary:function(){this.$router.push("/reconciliation/summary")}}},Kn=Wn,zn=Object(m["a"])(Kn,Un,jn,!1,null,null,null),Ln=zn.exports,Qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundB"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-2 text-left"},[a("i",{class:e.icon,staticStyle:{"font-size":"30px"},attrs:{id:"redTxt"}})]),a("div",{staticClass:"col-sm-10"},[a("h4",{staticClass:"text-right",attrs:{id:"darkTxt"}},[e._v(e._s(e.title))])])]),a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8 text-left pl-4 pt-3",attrs:{id:"whiteTxt"}},[a("h4",[a("b",[e._v(e._s(e.subTitle))])])]),a("div",{staticClass:"col-sm-4 text-left pt-3",attrs:{id:"darkTxt"}},[a("small",[a("b",[e._v("COST")])])])]),[a("footer",[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8 pl-5 text-left",attrs:{id:"darkTxt"}},[a("h5",[a("b",[e._v(e._s(e.footerText))])])]),a("div",{staticClass:"col-sm-4 text-left",attrs:{id:"darkTxt"}},[a("small",[a("b",[e._v("QTY")])])])])])]],2)},Hn=[],Gn={name:"card-widget",components:{Card:Va},props:{icon:String,title:String,subTitle:String,footerText:String}},Zn=Gn,Jn=Object(m["a"])(Zn,Qn,Hn,!1,null,null,null),Xn=Jn.exports,er=a("2b00"),tr=a("545d"),ar=a("8e20"),nr=a("366f"),rr=a("44d2a"),sr=a("8aee"),ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"row pt-2 mb-1"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Bank:")])]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Number:")])])]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBanks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getActivateBankAccounts(e.bank)}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}),e.$v.bank.$anyDirty&&!e.$v.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.activateBankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getAccountFunds(1,"")}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}),e.$v.bankAccount.$anyDirty&&!e.$v.bankAccount.required?a("i",{staticClass:"text-danger"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Balance: ")])])]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6 pl-5 pr-5"},[e._v("â± "+e._s(e.bankAccountBalance))])])]),a("hr"),a("div",{staticClass:"row mb-0 pt-2"},[a("span",{staticClass:"col-2 pt-2 pl-2 text-right"},[a("b",[e._v("Date Range:")])]),a("span",{staticClass:"col-sm-3 pl-0"},[a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{id:"inputStyle",type:"date",min:"1997-01-01"},on:{input:function(t){return e.getAccountFunds(1,"")}},model:{value:e.transDateStart,callback:function(t){e.transDateStart=t},expression:"transDateStart"}})],1),a("span",{staticClass:"col-sm-3 pl-0"},[a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{id:"inputStyle",type:"date",min:"1997-01-01"},on:{input:function(t){return e.getAccountFunds(1,"")}},model:{value:e.transDateEnd,callback:function(t){e.transDateEnd=t},expression:"transDateEnd"}})],1)]),a("div",{staticClass:"table-full-width pt-2"},[a("vue-good-table",{ref:"account-deposit-table",attrs:{columns:e.columns,rows:e.accountFunds,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"transactionDate",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["transactionDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.transactionDate,"MMM DD, YYYY")))])]):e._e(),"description"==t.column.field?a("span",[a("span",{attrs:{id:"description"}},[e._v(e._s(t.row.description))])]):e._e(),"paymentType"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.paymentType))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.amount))])]):e._e(),"referenceNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.referenceNumber))])]):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return e.openEditAccountFundModal(t.row)}}}),a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"}),a("div",{staticClass:"col-sm-3"},[e.accountFunds.length>0?a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.printAccountFund()}}},[e._v("Print")]):e._e()],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.openAddAuthModal()}}},[e._v("Add Deposit")])],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.accountTransView()}}},[e._v("Account Transaction")])],1)])],1),a("b-modal",{attrs:{size:"lg",id:"add-fund-modal",title:"Add Account Deposit",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addFund(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("add-fund-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newTransDate,callback:function(t){e.newTransDate=t},expression:"newTransDate"}}),e.$v.newTransDate.$anyDirty&&!e.$v.newTransDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTypes,reduce:function(e){return e.typeId},label:"type",clearable:!1},model:{value:e.newPaymentType,callback:function(t){e.newPaymentType=t},expression:"newPaymentType"}}),e.$v.newPaymentType.$anyDirty&&!e.$v.newPaymentType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newDesc,expression:"newDesc"}],staticClass:"pl-2",attrs:{rows:"2",cols:"45",id:"inputStyle",placeholder:"Description"},domProps:{value:e.newDesc},on:{input:function(t){t.target.composing||(e.newDesc=t.target.value)}}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Reference Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Reference Number"},model:{value:e.newRefNumber,callback:function(t){e.newRefNumber=t},expression:"newRefNumber"}}),e.$v.newRefNumber.$anyDirty&&!e.$v.newRefNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newRefNumber.$anyDirty&&!e.$v.newRefNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-fund-modal",title:"Edit Account Deposit",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateFund(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-fund-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.edit.transDate,callback:function(t){e.$set(e.edit,"transDate",t)},expression:"edit.transDate"}}),e.$v.edit.transDate.$anyDirty&&!e.$v.edit.transDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTypes,reduce:function(e){return e.typeId},label:"type",clearable:!1},model:{value:e.edit.paymentType,callback:function(t){e.$set(e.edit,"paymentType",t)},expression:"edit.paymentType"}}),e.$v.edit.paymentType.$anyDirty&&!e.$v.edit.paymentType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.desc,expression:"edit.desc"}],staticClass:"pl-2",attrs:{rows:"2",cols:"45",id:"inputStyle",placeholder:"Description"},domProps:{value:e.edit.desc},on:{input:function(t){t.target.composing||e.$set(e.edit,"desc",t.target.value)}}}),e.$v.edit.desc.$anyDirty&&!e.$v.edit.desc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.edit.amount,callback:function(t){e.$set(e.edit,"amount",t)},expression:"edit.amount"}}),e.$v.edit.amount.$anyDirty&&!e.$v.edit.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.amount.$anyDirty&&!e.$v.edit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Reference Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Reference Number"},model:{value:e.edit.refNumber,callback:function(t){e.$set(e.edit,"refNumber",t)},expression:"edit.refNumber"}}),e.$v.edit.refNumber.$anyDirty&&!e.$v.edit.refNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.refNumber.$anyDirty&&!e.$v.edit.refNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addAttachments()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Attachment ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("attachment-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e.loadAttachment?a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12 text-center"},[a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}})],1)])]):e._e(),e.attachments.length>0&&!e.loadAttachment?a("card",{attrs:{shadow:""}},[e.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},e._l(e.attachments,(function(t){return a("span",{key:t.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return e.removeAttachment(t.name)}}})]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:t.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:t.url}})])])])])})),0):e._e()]):e._e(),0!=e.attachments.length||e.loadAttachment?e._e():a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("h2",{staticClass:"text-center"},[e._v("NO ATTACHMENT")])])])])],1),a("b-modal",{attrs:{size:"md",id:"auth-deposit-modal",title:"Authentication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addDepositAuth()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("auth-deposit-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Password:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"password",id:"inputStyle"},model:{value:e.addDepositPassword,callback:function(t){e.addDepositPassword=t},expression:"addDepositPassword"}}),e.$v.addDepositPassword.$anyDirty&&!e.$v.addDepositPassword.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)])},or=[],cr=(a("a4d3"),a("e01a"),a("99af"),a("b5ae")),lr=a("4627"),ur=a("add5"),dr=a.n(ur),mr=a("c1df"),pr=a("e966"),br=pr.bindWith(",","."),hr=["#","Transaction Date","Decscription","Type","Amount","Reference No.","Actions"],fr=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9,. ]*$/),vr=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),wr=new Date,Cr=a("9f25"),gr=a("323d"),kr={name:"bank-account-fund",components:{},data:function(){return{columns:[{label:"Transaction Date",field:"transactionDate"},{label:"Description",field:"description"},{label:"Type",field:"paymentType"},{label:"Amount",field:"amount"},{label:"Reference No.",field:"referenceNumber"},{label:"",field:"action",sortable:!1,width:"100px"}],activateBanks:[],bank:"",activateBankAccounts:[],bankAccount:"",transDateStart:mr().startOf("week").format("YYYY-MM-DD"),transDateEnd:mr().endOf("week").format("YYYY-MM-DD"),loading:!1,loadError:!1,searchTerm:"",searching:!1,accountFundTable:{title:"Account Funds",subTitle:"",columns:[].concat(hr)},accountFunds:[],accountFundsCount:0,currentPage:1,requestProcessing:!1,newTransDate:mr().format("YYYY-MM-DD"),paymentTypes:[{typeId:"CASH",type:"Cash"},{typeId:"CHECK",type:"Check"},{typeId:"TRANSFER",type:"Transfer"}],newPaymentType:"CASH",newDesc:"",newAmount:"",newRefNumber:"",addDepositPassword:"",edit:{id:"",fundId:"",transDate:"",paymentType:"",desc:"",amount:"",oldAmount:"",refNumber:""},attachment:"",attachmentData:null,attachments:[],accountFundId:"",uploadValue:0,loadAttachment:!0,printFunds:[],bankAccountBalance:"",type:""}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getActivateBanks(),e.getAccountFunds(1,"");case 2:case"end":return t.stop()}}),t)})))()},validations:{bank:{required:cr["required"]},bankAccount:{required:cr["required"]},newTransDate:{required:cr["required"]},newPaymentType:{required:cr["required"]},newDesc:{required:cr["required"]},newAmount:{required:cr["required"],amountCustomValidator:fr},newRefNumber:{required:cr["required"],alphaNumCustomValidator:vr},addDepositPassword:{required:cr["required"]},edit:{transDate:{required:cr["required"]},paymentType:{required:cr["required"]},desc:{required:cr["required"]},amount:{required:cr["required"],amountCustomValidator:fr},refNumber:{required:cr["required"],alphaNumCustomValidator:vr}}},methods:{accountTransView:function(){this.$router.push("/account/transaction")},closePage:function(){this.$router.push("/check/dashboard")},getActivateBanks:function(){var e=this,t=Eu.collection("banks").orderBy("bank","asc");e.activateBanks=[],t.get().then((function(t){t.forEach((function(t){e.activateBanks.push(t.data())})),e.bank=e.activateBanks[0].bankUid,e.getActivateBankAccounts(e.activateBanks[0].bankUid)}))},getActivateBankAccounts:function(e){var t=this,a=Eu.collection("bankAccounts").where("bankReference","==",e);t.activateBankAccounts=[],t.bankAccount="",a.get().then((function(e){e.forEach((function(e){t.activateBankAccounts.push(e.data())})),0!=t.activateBankAccounts.length&&(t.bankAccount=t.activateBankAccounts[0].bankAccountUid),t.getAccountFunds(1,"")}))},getAccountFunds:function(e,t){var a=this,n=[];if(a.accountFunds=[],a.printFunds=[],a.$v.bank.$touch(),a.$v.bankAccount.$touch(),!a.$v.bank.$error&&!a.$v.bankAccount.$error){var r=[],s=[],i=null,o=mr(a.transDateStart).format("YYYY-MM-DD"),c=mr(a.transDateEnd).format("YYYY-MM-DD"),l=Eu.collection("bankAccounts").where("bankAccountUid","==",a.bankAccount);l.get().then((function(e){e.forEach((function(e){s.push(e.data())})),""!=s[0].accountBalance&&s[0].accountBalance>0?a.bankAccountBalance=br(parseFloat(s[0].accountBalance).toFixed(2)):a.bankAccountBalance="----------"})),t&&(a.searching=!0),t?(t=t.toString(),i=Eu.collection("bankAccountFunds").where("referenceNumber","==",t).orderBy("transactionDate","desc")):i=Eu.collection("bankAccountFunds").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("transactionDate",">=",o).where("transactionDate","<=",c).orderBy("transactionDate","desc"),i.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data()),a.printFunds.push(e.data()),n.push(e.id)}));for(var s=0;s<r.length;s++)r[s]["id"]=n[s],r[s].amount=br(parseFloat(r[s].amount).toFixed(2));r.sort((function(e,t){return t.transactionDate-e.transactionDate}));for(var i=0;i<r.length;i++)r[i]["rowNum"]=i+1,a.accountFunds.push(r[i]);a.accountFundsCount=r.length,a.currentPage=e,setTimeout((function(){a.loading=!1}),1e3)}}))}a.loading=!1},onPageChange:function(e){var t=this.searchTerm;this.getAccountFunds(e,t)},search:function(){var e=this.searchTerm;e&&this.getAccountFunds(1,e)},reloadData:function(){this.searchTerm="",this.searching=!1,this.getAccountFunds(1,"")},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getAccountFunds(1,"")},openAddAuthModal:function(){this.$bvModal.show("auth-deposit-modal"),this.type="add"},addDepositAuth:function(){var e=this,t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[],n=[];t.get().then((function(t){if(t.empty)t.empty&&e.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$bvModal.hide("auth-deposit-modal"),e.addDepositPassword="",e.type=""}));else{t.forEach((function(e){a.push(e.data())}));var r=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference);r.get().then((function(t){t.empty?t.empty&&e.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$bvModal.hide("auth-deposit-modal"),e.addDepositPassword="",e.type=""})):(t.forEach((function(e){n.push(e.data())})),"Administrator"==n[0].userRole?gr.verify(e.addDepositPassword,a[0].password)?("add"==e.type?e.$bvModal.show("add-fund-modal"):"update"==e.type?e.$bvModal.show("edit-fund-modal"):"attachment"==e.type&&e.$bvModal.show("attachment-modal"),e.$bvModal.hide("auth-deposit-modal"),e.addDepositPassword="",e.type=""):e.$swal({title:"Error",text:"Invalid password.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.addDepositPassword=""})):e.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$bvModal.hide("auth-deposit-modal"),e.addDepositPassword="",e.type=""})))}))}}))},addFund:function(){var e=this;if(e.requestProcessing=!1,e.$v.newTransDate.$touch(),e.$v.newPaymentType.$touch(),e.$v.newDesc.$touch(),e.$v.newAmount.$touch(),e.$v.newRefNumber.$touch(),e.$v.bank.$touch(),e.$v.bankAccount.$touch(),!e.$v.newTransDate.$error&&!e.$v.newPaymentType.$error&&!e.$v.newDesc.$error&&!e.$v.newAmount.$error&&!e.$v.newRefNumber.$error&&!e.$v.bank.$error&&!e.$v.bankAccount.$error){e.requestProcessing=!0;var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[],n="",r=0,s=0,i="AFI-"+wr.getFullYear()+Cr(wr.getMonth()+1,2)+wr.getDate()+"-"+Math.floor(1e6*Math.random()),o=Eu.collection("bankAccounts").where("bankAccountUid","==",e.bankAccount);t.get().then((function(t){t.forEach((function(t){t.exists&&a.push(t.data());try{Eu.collection("bankAccountFunds").doc().set({bankAccountFundId:i,transactionDate:e.newTransDate,paymentType:e.newPaymentType,description:e.newDesc,amount:e.newAmount,referenceNumber:Object(re["a"])(e.newRefNumber),bankReference:e.bank,bankAccountReference:e.bankAccount,userReference:a[0].userId,status:1,dateCreated:wr,dateModified:wr}).then((function(){o.get().then((function(t){t.forEach((function(e){n=e.id,r=parseFloat(e.data().accountBalance.replaceAll(",",""))})),s=r+parseFloat(e.newAmount.replaceAll(",","")),Eu.collection("bankAccounts").doc(n).update({accountBalance:parseFloat(s).toFixed(2),dateModified:wr}).then((function(){e.bankAccountBalance=s>0?br(parseFloat(s).toFixed(2)):"----------",e.newAmount=""}))})),e.newTransDate=mr().format("YYYY-MM-DD"),e.newPaymentType="CASH",e.newDesc="",e.newRefNumber="",e.$v.newTransDate.$reset(),e.$v.newPaymentType.$reset(),e.$v.newDesc.$reset(),e.$v.newAmount.$reset(),e.$v.newRefNumber.$reset(),e.requestProcessing=!1,e.$bvModal.hide("add-fund-modal"),e.$refs["account-deposit-table"].reset(),e.getAccountFunds(1,""),e.$swal({title:"Success",text:"Account fund added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(c){console.log(c),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}))}},openEditAccountFundModal:function(e){this.edit={id:e.id,fundId:e.bankAccountFundId,transDate:e.transactionDate,paymentType:e.paymentType,desc:e.description,amount:e.amount,oldAmount:e.amount,refNumber:e.referenceNumber},this.$bvModal.show("auth-deposit-modal"),this.type="update"},updateFund:function(){var e=this;if(e.requestProcessing=!1,e.$v.edit.$touch(),e.$v.bank.$touch(),e.$v.bankAccount.$touch(),!e.$v.edit.$error){e.edit.amount=parseFloat(e.edit.amount.replaceAll(",",""));try{var t="",a="",n=0,r=e.edit.oldAmount,s=Eu.collection("bankAccounts").where("bankAccountUid","==",e.bankAccount);Eu.collection("bankAccountFunds").doc(e.edit.id).update({transactionDate:e.edit.transDate,paymentType:e.edit.paymentType,description:e.edit.desc,amount:parseFloat(e.edit.amount).toFixed(2).toString(),referenceNumber:Object(re["a"])(e.edit.refNumber),dateModified:wr}).then((function(){s.get().then((function(s){s.forEach((function(e){t=e.id,a=parseFloat(e.data().accountBalance.replaceAll(",",""))})),a-=parseFloat(r.replaceAll(",","")),n=a+e.edit.amount,Eu.collection("bankAccounts").doc(t).update({accountBalance:parseFloat(n).toFixed(2),dateModified:wr}).then((function(){e.bankAccountBalance=n>0?br(parseFloat(n).toFixed(2)):"----------"}))})).then((function(){e.edit={}})),e.$v.edit.$reset(),e.$bvModal.hide("edit-fund-modal"),e.requestProcessing=!1,e.$refs["account-deposit-table"].reset(),e.getAccountFunds(1,""),e.$swal({title:"Success",text:"Account fund updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(i){console.log(i),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},openAttachments:function(e){this.accountFundId=e.bankAccountFundId,this.$bvModal.show("auth-deposit-modal"),this.getAttachments(this.accountFundId),this.type="attachment"},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(e){var t=this,a={maxSizeMB:1,useWebWorker:!0};t.uploadValue=0,t.attachment=null,t.attachments=[],t.attachmentData=e.target.files[0],Object(lr["a"])(t.attachmentData,a).then((function(e){t.attachmentData=e,t.onUpload(t.attachmentData)}))},onUpload:function(e){var t=this,a=Ou.ref("bankAccountFund/"+t.accountFundId+"/"+e.name).put(e);t.attachment=null,a.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadValue=100,t.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.getAttachments(t.accountFundId)}))},getAttachments:function(e){var t=this,a=0,n=Ou.ref("bankAccountFund/"+e);t.loadAttachment=!0,t.attachments=[],n.listAll().then((function(n){n.items.forEach((function(n){Ou.ref("bankAccountFund/"+e+"/"+n.name).getDownloadURL().then((function(e){a+=1,t.attachments.push({rowNum:a,name:n.name,url:e,path:n.fullPath,status:1})}))}))})).catch((function(e){console.log(e)})),setTimeout((function(){t.loadAttachment=!1}),5e3)},removeAttachment:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var n=Ou.ref("bankAccountFund/"+t.accountFundId+"/"+e);n.delete().then((function(){t.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.getAttachments(t.accountFundId)})).catch((function(e){console.log(e),t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}}))},printAccountFund:function(){var e=this,t="",a="",n="",r="";"all"!=e.filter&&(r="<h5>Date Range: "+mr(e.transDateStart).format("MMM DD, YYYY")+" to "+mr(e.transDateEnd).format("MMM DD, YYYY")+"</h5>");for(var s=0;s<e.printFunds.length;s++)e.printFunds[s].amount="â± "+br(parseFloat(e.printFunds[s].amount).toFixed(2));for(var i=0;i<e.activateBanks.length;i++)e.activateBanks[i].bankUid==e.bank&&(t=e.activateBanks[i].bank);for(var o=0;o<e.activateBankAccounts.length;o++)e.activateBankAccounts[o].bankAccountUid==e.bankAccount&&(a=e.activateBankAccounts[o].bankAccountNumber,n=e.activateBankAccounts[o].bankAccountName);dr()({printable:e.printFunds,properties:[{field:"transactionDate",displayName:"Transaction Date"},{field:"description",displayName:"Description"},{field:"paymentType",displayName:"Type"},{field:"amount",displayName:"Amount"},{field:"referenceNumber",displayName:"Reference No."}],type:"json",header:"<h2>"+t+" ACCOUNT FUNDS</h2><h4>Account: "+a+" ("+n+")</h4>"+r,style:'td {text-align: center;} body {font-family: "Calibri";}',documentTitle:t+" Account Funds"})}}},yr=kr,$r=Object(m["a"])(yr,ir,or,!1,null,null,null),_r=$r.exports,xr=a("d141"),Ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"row pt-2 mb-1"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Bank:")])]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Number:")])])]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBanks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getActivateBankAccounts(e.bank)}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}),e.$v.bank.$anyDirty&&!e.$v.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.activateBankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getAccountWithdrawals(1,"")}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}),e.$v.bankAccount.$anyDirty&&!e.$v.bankAccount.required?a("i",{staticClass:"text-danger"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Balance: ")])])]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6 pl-5 pr-5"},[e._v("â± "+e._s(e.bankAccountBalance))])])]),a("div",{staticClass:"row mb-0 pt-2"},[a("span",{staticClass:"col-2 pt-2 pl-2 text-right"},[a("b",[e._v("Date Range:")])]),a("span",{staticClass:"col-sm-3 pl-0"},[a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{id:"inputStyle",type:"date",min:"1997-01-01"},on:{input:function(t){return e.getAccountWithdrawals(1,"")}},model:{value:e.transDateStart,callback:function(t){e.transDateStart=t},expression:"transDateStart"}})],1),a("span",{staticClass:"col-sm-3 pl-0"},[a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{id:"inputStyle",type:"date",min:"1997-01-01"},on:{input:function(t){return e.getAccountWithdrawals(1,"")}},model:{value:e.transDateEnd,callback:function(t){e.transDateEnd=t},expression:"transDateEnd"}})],1)]),a("div",{staticClass:"table-full-width pt-2"},[a("vue-good-table",{ref:"withdrawal-table",attrs:{columns:e.columns,rows:e.accountWithdrawals,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"transactionDate",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["transactionDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.transactionDate,"MMM DD, YYYY")))])]):e._e(),"description"==t.column.field?a("span",[a("span",{attrs:{id:"description"}},[e._v(e._s(t.row.description))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.amount))])]):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return e.openEditAccountWithdrawalModal(t.row)}}}),a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"}),a("div",{staticClass:"col-sm-3"},[e.accountWithdrawals.length>0?a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.printAccountWithdrawal()}}},[e._v("Print")]):e._e()],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.openAddAuthModal()}}},[e._v("Add Withdrawal")])],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.accountTransView()}}},[e._v("Account Transaction")])],1)])],1),a("b-modal",{attrs:{size:"lg",id:"add-withdrawal-modal",title:"Add Account Withdrawal",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addWithdrawal(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("add-withdrawal-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newTransDate,callback:function(t){e.newTransDate=t},expression:"newTransDate"}}),e.$v.newTransDate.$anyDirty&&!e.$v.newTransDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newDesc,expression:"newDesc"}],staticClass:"pl-2",attrs:{rows:"2",cols:"45",id:"inputStyle",placeholder:"Description"},domProps:{value:e.newDesc},on:{input:function(t){t.target.composing||(e.newDesc=t.target.value)}}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Reference Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Reference Number"},model:{value:e.newRefNumber,callback:function(t){e.newRefNumber=t},expression:"newRefNumber"}}),e.$v.newRefNumber.$anyDirty&&!e.$v.newRefNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newRefNumber.$anyDirty&&!e.$v.newRefNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-withdrawal-modal",title:"Edit Account Withdrawal",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateWithdrawal(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-withdrawal-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.edit.transDate,callback:function(t){e.$set(e.edit,"transDate",t)},expression:"edit.transDate"}}),e.$v.edit.transDate.$anyDirty&&!e.$v.edit.transDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.desc,expression:"edit.desc"}],staticClass:"pl-2",attrs:{rows:"2",cols:"45",id:"inputStyle",placeholder:"Description"},domProps:{value:e.edit.desc},on:{input:function(t){t.target.composing||e.$set(e.edit,"desc",t.target.value)}}}),e.$v.edit.desc.$anyDirty&&!e.$v.edit.desc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Reference Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.edit.amount,callback:function(t){e.$set(e.edit,"amount",t)},expression:"edit.amount"}}),e.$v.edit.amount.$anyDirty&&!e.$v.edit.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.amount.$anyDirty&&!e.$v.edit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Reference Number"},model:{value:e.edit.refNumber,callback:function(t){e.$set(e.edit,"refNumber",t)},expression:"edit.refNumber"}}),e.$v.edit.refNumber.$anyDirty&&!e.$v.edit.refNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.refNumber.$anyDirty&&!e.$v.edit.refNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addAttachments()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Attachment ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("attachment-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e.attachments.length>0?a("card",{attrs:{shadow:""}},[e.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},e._l(e.attachments,(function(t){return a("span",{key:t.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return e.removeAttachment(t.name)}}})]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:t.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:t.url}})])])])])})),0):e._e()]):e._e()],1),a("b-modal",{attrs:{size:"md",id:"auth-withdrawal-modal",title:"Authentication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addWithdrawalAuth()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("auth-withdrawal-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Password:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"password",id:"inputStyle"},model:{value:e.withdrawalPassword,callback:function(t){e.withdrawalPassword=t},expression:"withdrawalPassword"}}),e.$v.withdrawalPassword.$anyDirty&&!e.$v.withdrawalPassword.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)])},Dr=[],Pr=a("c1df"),Nr=a("e966"),Tr=Nr.bindWith(",","."),Rr=["#","Transaction Date","Decscription","Amount","Reference No.","Actions"],Ir=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9,. ]*$/),Sr=cr["helpers"].regex("alphaNumAndDot",/^[ -.A-Za-z0-9 ]*$/),qr=new Date,Br=a("9f25"),Mr=a("323d"),Or={name:"bank-account-withdrawal",components:{},data:function(){return{columns:[{label:"Transaction Date",field:"transactionDate"},{label:"Description",field:"description"},{label:"Amount",field:"amount"},{label:"",field:"action",sortable:!1,width:"100px"}],activateBanks:[],bank:"",activateBankAccounts:[],bankAccount:"",transDateStart:Pr().startOf("week").format("YYYY-MM-DD"),transDateEnd:Pr().endOf("week").format("YYYY-MM-DD"),loading:!1,loadError:!1,searchTerm:"",searching:!1,accountWithdrawalTable:{title:"Account Withdrawals",subTitle:"",columns:[].concat(Rr)},accountWithdrawals:[],accountWithdrawalsCount:0,currentPage:1,newTransDate:Pr().format("YYYY-MM-DD"),newDesc:"",newAmount:"",newRefNumber:"",requestProcessing:!1,edit:{id:"",withdrawalId:"",transDate:"",desc:"",amount:"",oldAmount:"",refNumber:""},attachment:"",attachmentData:null,attachments:[],accountWithdrawalId:"",uploadValue:0,printWithdrawals:[],bankAccountBalance:"",withdrawalPassword:"",type:""}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getActivateBanks(),e.getAccountWithdrawals(1,"");case 2:case"end":return t.stop()}}),t)})))()},validations:{bank:{required:cr["required"]},bankAccount:{required:cr["required"]},newTransDate:{required:cr["required"]},newDesc:{required:cr["required"]},newAmount:{required:cr["required"],amountCustomValidator:Ir},newRefNumber:{required:cr["required"],alphaNumCustomValidator:Sr},edit:{transDate:{required:cr["required"]},desc:{required:cr["required"]},amount:{required:cr["required"],amountCustomValidator:Ir},refNumber:{required:cr["required"],alphaNumCustomValidator:Sr}},withdrawalPassword:{required:cr["required"]}},methods:{accountTransView:function(){this.$router.push("/account/transaction")},closePage:function(){this.$router.push("/check/dashboard")},getActivateBanks:function(){var e=this,t=Eu.collection("banks").orderBy("bank","asc");e.activateBanks=[],t.get().then((function(t){t.forEach((function(t){e.activateBanks.push(t.data())})),e.bank=e.activateBanks[0].bankUid,e.getActivateBankAccounts(e.activateBanks[0].bankUid)}))},getActivateBankAccounts:function(e){var t=this,a=Eu.collection("bankAccounts").where("bankReference","==",e);t.activateBankAccounts=[],t.bankAccount="",a.get().then((function(e){e.forEach((function(e){t.activateBankAccounts.push(e.data())})),0!=t.activateBankAccounts.length&&(t.bankAccount=t.activateBankAccounts[0].bankAccountUid),t.getAccountWithdrawals(1,"")}))},getAccountWithdrawals:function(e,t){var a=this,n=[];if(a.accountWithdrawals=[],a.printWithdrawals=[],a.$v.bank.$touch(),a.$v.bankAccount.$touch(),!a.$v.bank.$error&&!a.$v.bankAccount.$error){var r=[],s=[],i=null,o=Pr(a.transDateStart).format("YYYY-MM-DD"),c=Pr(a.transDateEnd).format("YYYY-MM-DD"),l=Eu.collection("bankAccounts").where("bankAccountUid","==",a.bankAccount);l.get().then((function(e){e.forEach((function(e){s.push(e.data())})),""!=s[0].accountBalance&&s[0].accountBalance>0?a.bankAccountBalance=Tr(parseFloat(s[0].accountBalance).toFixed(2)):a.bankAccountBalance="----------"})),t&&(a.searching=!0),t?(t=t.toString(),i=Eu.collection("bankAccountWithdrawals").where("referenceNumber","==",t).orderBy("transactionDate","desc")):i=Eu.collection("bankAccountWithdrawals").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("transactionDate",">=",o).where("transactionDate","<=",c).orderBy("transactionDate","desc"),i.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data()),a.printWithdrawals.push(e.data()),n.push(e.id)}));for(var s=0;s<r.length;s++)r[s]["id"]=n[s],r[s].amount=Tr(parseFloat(r[s].amount).toFixed(2));r.sort((function(e,t){return t.transactionDate-e.transactionDate}));for(var i=0;i<r.length;i++)r[i]["rowNum"]=i+1;for(var o=10*(e-1),c=10*e,l=o;l<c;l++)r[l]&&a.accountWithdrawals.push(r[l]);a.accountWithdrawalsCount=r.length,a.currentPage=e,setTimeout((function(){a.loading=!1}),1e3)}}))}a.loading=!1},onPageChange:function(e){var t=this.searchTerm;this.getAccountWithdrawals(e,t)},search:function(){var e=this.searchTerm;e&&this.getAccountWithdrawals(1,e)},reloadData:function(){this.searchTerm="",this.searching=!1,this.getAccountWithdrawals(1,"")},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getAccountWithdrawals(1,"")},openAddAuthModal:function(){this.$bvModal.show("auth-withdrawal-modal"),this.type="add"},addWithdrawalAuth:function(){var e=this,t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[],n=[];t.get().then((function(t){if(t.empty)t.empty&&e.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$bvModal.hide("auth-withdrawal-modal"),e.withdrawalPassword="",e.type=""}));else{t.forEach((function(e){a.push(e.data())}));var r=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference);r.get().then((function(t){t.empty?t.empty&&e.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$bvModal.hide("auth-withdrawal-modal"),e.withdrawalPassword="",e.type=""})):(t.forEach((function(e){n.push(e.data())})),"Administrator"==n[0].userRole?Mr.verify(e.withdrawalPassword,a[0].password)?("add"==e.type?e.$bvModal.show("add-withdrawal-modal"):"update"==e.type?e.$bvModal.show("edit-withdrawal-modal"):"attachment"==e.type&&e.$bvModal.show("attachment-modal"),e.$bvModal.hide("auth-withdrawal-modal"),e.withdrawalPassword="",e.type=""):e.$swal({title:"Error",text:"Invalid password.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.withdrawalPassword=""})):e.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$bvModal.hide("auth-withdrawal-modal-modal"),e.withdrawalPassword="",e.type=""})))}))}}))},addWithdrawal:function(){var e=this;if(e.requestProcessing=!1,e.$v.newTransDate.$touch(),e.$v.newDesc.$touch(),e.$v.newAmount.$touch(),e.$v.newRefNumber.$touch(),e.$v.bank.$touch(),e.$v.bankAccount.$touch(),!e.$v.newTransDate.$error&&!e.$v.newDesc.$error&&!e.$v.newAmount.$error&&!e.$v.newRefNumber.$error&&!e.$v.bank.$error&&!e.$v.bankAccount.$error){e.requestProcessing=!0;var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[],n="",r="",s=0,i="AWI-"+qr.getFullYear()+Br(qr.getMonth()+1,2)+qr.getDate()+"-"+Math.floor(1e6*Math.random()),o=Eu.collection("bankAccounts").where("bankAccountUid","==",e.bankAccount);t.get().then((function(t){t.forEach((function(t){t.exists&&a.push(t.data());try{Eu.collection("bankAccountWithdrawals").doc().set({bankAccountWithdrawalId:i,transactionDate:e.newTransDate,description:e.newDesc,amount:e.newAmount,referenceNumber:Object(re["a"])(e.newRefNumber),bankReference:e.bank,bankAccountReference:e.bankAccount,userReference:a[0].userId,status:1,dateCreated:qr,dateModified:qr}).then((function(){o.get().then((function(t){t.forEach((function(e){n=e.id,r=parseFloat(e.data().accountBalance.replaceAll(",",""))})),s=r>0&&r>=parseFloat(e.newAmount.replaceAll(",",""))?r-parseFloat(e.newAmount.replaceAll(",","")):r,Eu.collection("bankAccounts").doc(n).update({accountBalance:parseFloat(s).toFixed(2),dateModified:qr}).then((function(){e.bankAccountBalance=s>0?Tr(parseFloat(s).toFixed(2)):"----------",e.newAmount=""}))})),e.newTransDate=Pr().format("YYYY-MM-DD"),e.newDesc="",e.newRefNumber="",e.$v.newTransDate.$reset(),e.$v.newDesc.$reset(),e.$v.newAmount.$reset(),e.$v.newRefNumber.$reset(),e.requestProcessing=!1,e.$bvModal.hide("add-withdrawal-modal"),e.$refs["withdrawal-table"].reset(),e.getAccountWithdrawals(1,""),e.$swal({title:"Success",text:"Account withdrawal added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(c){console.log(c),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}))}},openEditAccountWithdrawalModal:function(e){this.edit={id:e.id,withdrawId:e.bankAccountWithdrawalId,transDate:e.transactionDate,desc:e.description,amount:e.amount,oldAmount:e.amount,refNumber:e.referenceNumber},this.$bvModal.show("auth-withdrawal-modal"),this.type="update"},updateWithdrawal:function(){var e=this;if(e.requestProcessing=!1,e.$v.edit.$touch(),e.$v.bank.$touch(),e.$v.bankAccount.$touch(),!e.$v.edit.$error){e.edit.amount=parseFloat(e.edit.amount.replaceAll(",",""));try{var t="",a="",n=0,r=Eu.collection("bankAccounts").where("bankAccountUid","==",e.bankAccount);Eu.collection("bankAccountWithdrawals").doc(e.edit.id).update({transactionDate:e.edit.transDate,description:e.edit.desc,amount:parseFloat(e.edit.amount).toFixed(2).toString(),referenceNumber:Object(re["a"])(e.edit.refNumber),dateModified:qr}).then((function(){r.get().then((function(r){r.forEach((function(e){t=e.id,a=parseFloat(e.data().accountBalance.replaceAll(",",""))})),a+=parseFloat(e.edit.oldAmount.replaceAll(",","")),n=a-e.edit.amount,Eu.collection("bankAccounts").doc(t).update({accountBalance:parseFloat(n).toFixed(2),dateModified:qr}).then((function(){e.bankAccountBalance=n>0?Tr(parseFloat(n).toFixed(2)):"----------",e.edit={}}))})),e.$v.edit.$reset(),e.$bvModal.hide("edit-withdrawal-modal"),e.requestProcessing=!1,e.$refs["withdrawal-table"].reset(),e.getAccountWithdrawals(1,""),e.$swal({title:"Success",text:"Account withdrawal updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(s){console.log(s),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},openAttachments:function(e){this.accountWithdrawalId=e.bankAccountWithdrawalId,this.$bvModal.show("auth-withdrawal-modal"),this.getAttachments(this.accountWithdrawalId),this.type="attachment"},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(e){var t=this,a={maxSizeMB:1,useWebWorker:!0};t.uploadValue=0,t.attachment=null,t.attachments=[],t.attachmentData=e.target.files[0],Object(lr["a"])(t.attachmentData,a).then((function(e){t.attachmentData=e,t.onUpload(t.attachmentData)}))},onUpload:function(e){var t=this,a=Ou.ref("bankAccountWithdrawal/"+t.accountWithdrawalId+"/"+e.name).put(e);t.attachment=null,a.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadValue=100,t.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.getAttachments(t.accountWithdrawalId)}))},getAttachments:function(e){var t=this,a=0,n=Ou.ref("bankAccountWithdrawal/"+e);t.requestProcessing=!1,t.attachments=[],n.listAll().then((function(n){n.items.forEach((function(n){Ou.ref("bankAccountWithdrawal/"+e+"/"+n.name).getDownloadURL().then((function(e){a+=1,t.attachments.push({rowNum:a,name:n.name,url:e,path:n.fullPath,status:1})}))}))})).catch((function(e){console.log(e)}))},removeAttachment:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var n=Ou.ref("bankAccountWithdrawal/"+t.accountWithdrawalId+"/"+e);n.delete().then((function(){t.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.getAttachments(t.accountWithdrawalId)})).catch((function(e){console.log(e),t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}}))},printAccountWithdrawal:function(){var e=this,t="",a="",n="",r="";"all"!=e.filter&&(r="<h5>Date Range: "+Pr(e.transDateStart).format("MMM DD, YYYY")+" to "+Pr(e.transDateEnd).format("MMM DD, YYYY")+"</h5>");for(var s=0;s<e.printWithdrawals.length;s++)e.printWithdrawals[s].amount="â± "+Tr(parseFloat(e.printWithdrawals[s].amount).toFixed(2));for(var i=0;i<e.activateBanks.length;i++)e.activateBanks[i].bankUid==e.bank&&(t=e.activateBanks[i].bank);for(var o=0;o<e.activateBankAccounts.length;o++)e.activateBankAccounts[o].bankAccountUid==e.bankAccount&&(a=e.activateBankAccounts[o].bankAccountNumber,n=e.activateBankAccounts[o].bankAccountName);dr()({printable:e.printWithdrawals,properties:[{field:"transactionDate",displayName:"Transaction Date"},{field:"description",displayName:"Description"},{field:"amount",displayName:"Amount"},{field:"referenceNumber",displayName:"Reference No."}],type:"json",header:"<h2>"+t+" ACCOUNT WITHDRAWALS</h2><h4>Account: "+a+" ("+n+")</h4>"+r,style:'td {text-align: center;} body {font-family: "Calibri";}',documentTitle:t+" Account Funds"})}}},Er=Or,Fr=Object(m["a"])(Er,Ar,Dr,!1,null,null,null),Yr=Fr.exports,Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Department:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Employee:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.departments,reduce:function(e){return e.departmentUid},label:"departmentName",clearable:!1},model:{value:e.newDepartment,callback:function(t){e.newDepartment=t},expression:"newDepartment"}}),e.$v.newDepartment.$anyDirty&&!e.$v.newDepartment.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.names,reduce:function(e){return e.userId},label:"name",clearable:!1},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}),e.$v.newName.$anyDirty&&!e.$v.newName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),"0.00"!=e.totalAmount||0!=e.totalAmount?a("hr"):e._e(),"0.00"!=e.totalAmount||0!=e.totalAmount?a("div",{staticClass:"form-group row mb-2 mt-2 pt-2"},[a("div",{staticClass:"col-sm-12 pr-8 pl-5"},["0.00"!=e.totalItems||0!=e.totalItems?a("b",[e._v("Total Items Amount:")]):e._e(),"0.00"!=e.totalItems||0!=e.totalItems?a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(" â± "+e._s(e.totalItems))]):e._e(),a("br"),"0.00"!=e.totalTrans||0!=e.totalTrans?a("b",[e._v("Total Transportation Amount:")]):e._e(),"0.00"!=e.totalTrans||0!=e.totalTrans?a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(" â± "+e._s(e.totalTrans))]):e._e(),"0.00"!=e.totalAmount||0!=e.totalAmount?a("h5",{staticClass:"text-right"},[a("b",[e._v("Total Amount:")]),a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(" â± "+e._s(e.totalAmount)+" ")])]):e._e()])]):e._e(),a("hr"),a("div",{staticClass:"form-group row mb-2 mt-2 pt-2"},[a("div",{staticClass:"col-sm-3 pl-5"},[a("base-button",{attrs:{block:"",id:"darkBtn"},on:{click:function(t){return e.openReimItemModal(e.desc)}}},[e._v("Add Item for")])],1),a("div",{staticClass:"col-sm-6"},[a("v-select",{attrs:{id:"inputStyle",options:e.descriptions,reduce:function(e){return e.reimbursementDescId},label:"description",clearable:!1},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}}),e.$v.desc.$anyDirty&&!e.$v.desc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2"},[a("span",{staticClass:"pointer",attrs:{id:"sideBarTxt"},on:{click:function(t){return e.$bvModal.show("new-reim-desc-modal")}}},[e._v("Add Description")])])]),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Items")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:e.loadError,title:e.reimItemsTable.title,"sub-title":e.reimItemsTable.subTitle,data:e.reimItems,columns:e.reimItemsTable.columns},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[e._v(e._s(e._f("moment")(n.date,"MMM DD, YYYY")))]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.particular))])]),a("td",[e._v("â± "+e._s(n.amount))]),a("td",e._l(e.descriptions,(function(t){return a("span",{key:t.reimbursementDescId},[t.reimbursementDescId==n.desc?a("span",[e._v(e._s(t.description))]):e._e()])})),0),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(t){return e.openUpdateItemModal(n)}}}):e._e(),""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(t){return e.removeItem(n)}}}):e._e()])]}}])})],1),e.items.length?a("hr"):e._e(),e.items.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[e._v(e._s(e.items[e.items.length-1].rowNum)+" of "+e._s(e.reimItemsCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:e.items,totalPages:e.reimItemsCount,currentPage:e.currentPage},on:{pagechanged:e.onPageChange}})],1):e._e(),a("hr"),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Transportation")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:e.loadError,title:e.transReimsTable.title,"sub-title":e.transReimsTable.subTitle,data:e.transReims,columns:e.transReimsTable.columns},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[e._v(e._s(e._f("moment")(n.date,"MMM DD, YYYY")))]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.mode))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.from))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.to))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.purpose))])]),a("td",[e._v("â± "+e._s(n.amount))]),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(t){return e.openUpdateTransModal(n)}}}):e._e(),""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(t){return e.removeTrans(n)}}}):e._e()])]}}])})],1),e.trans.length?a("hr"):e._e(),e.trans.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[e._v(e._s(e.trans[e.trans.length-1].rowNum)+" of "+e._s(e.transReimsCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:e.trans,totalPages:e.transReimsCount,currentPage:e.currentTransPage},on:{pagechanged:e.onTransPageChange}})],1):e._e(),a("hr"),a("div",{staticClass:"text-center"},["0.00"!=e.totalAmount||0!=e.totalAmount?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.addReimbursement(t)}}},[e._v("Save")]):e._e()],1),a("b-modal",{attrs:{size:"md",id:"new-reim-desc-modal",title:"New Reimbursement Description",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addReimDesc(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-reim-desc-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.newDesc,callback:function(t){e.newDesc=t},expression:"newDesc"}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-reim-item-modal",title:"New Reimbursement Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addReimItem()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-reim-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Item:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.newDate,callback:function(t){e.newDate=t},expression:"newDate"}}),e.$v.newDate.$anyDirty&&!e.$v.newDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:e.newParticular,callback:function(t){e.newParticular=t},expression:"newParticular"}}),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-reim-item-modal",title:"Edit Reimbursement Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateReimItem()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-reim-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Item:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.editItem.date,callback:function(t){e.$set(e.editItem,"date",t)},expression:"editItem.date"}}),e.$v.editItem.$anyDirty&&!e.$v.editItem.date.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:e.editItem.particular,callback:function(t){e.$set(e.editItem,"particular",t)},expression:"editItem.particular"}}),e.$v.editItem.$anyDirty&&!e.$v.editItem.particular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editItem.$anyDirty&&!e.$v.editItem.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.editItem.amount,callback:function(t){e.$set(e.editItem,"amount",t)},expression:"editItem.amount"}}),e.$v.editItem.$anyDirty&&!e.$v.editItem.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editItem.$anyDirty&&!e.$v.editItem.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-trans-reim-modal",title:"New Transportation Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addTransReim(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-trans-reim-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Mode of Transportation:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.newTransDate,callback:function(t){e.newTransDate=t},expression:"newTransDate"}}),e.$v.newTransDate.$anyDirty&&!e.$v.newTransDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Mode of Transportation"},model:{value:e.newMode,callback:function(t){e.newMode=t},expression:"newMode"}}),e.$v.newMode.$anyDirty&&!e.$v.newMode.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newMode.$anyDirty&&!e.$v.newMode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("From:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("To:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newFrom,expression:"newFrom"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:e.newFrom},on:{input:function(t){t.target.composing||(e.newFrom=t.target.value)}}}),e.$v.newFrom.$anyDirty&&!e.$v.newFrom.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newFrom.$anyDirty&&!e.$v.newFrom.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newTo,expression:"newTo"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:e.newTo},on:{input:function(t){t.target.composing||(e.newTo=t.target.value)}}}),e.$v.newTo.$anyDirty&&!e.$v.newTo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTo.$anyDirty&&!e.$v.newTo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Purpose:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newPurpose,expression:"newPurpose"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Purpose"},domProps:{value:e.newPurpose},on:{input:function(t){t.target.composing||(e.newPurpose=t.target.value)}}}),e.$v.newPurpose.$anyDirty&&!e.$v.newPurpose.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPurpose.$anyDirty&&!e.$v.newPurpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newTransAmount,callback:function(t){e.newTransAmount=t},expression:"newTransAmount"}}),e.$v.newTransAmount.$anyDirty&&!e.$v.newTransAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTransAmount.$anyDirty&&!e.$v.newTransAmount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-trans-reim-modal",title:"Edit Transportation Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateTransReim(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-trans-reim-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Mode of Transportation:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.editTrans.date,callback:function(t){e.$set(e.editTrans,"date",t)},expression:"editTrans.date"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.date.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Mode of Transportation"},model:{value:e.editTrans.mode,callback:function(t){e.$set(e.editTrans,"mode",t)},expression:"editTrans.mode"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.mode.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.mode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("From:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("To:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTrans.from,expression:"editTrans.from"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:e.editTrans.from},on:{input:function(t){t.target.composing||e.$set(e.editTrans,"from",t.target.value)}}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.from.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.from.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTrans.to,expression:"editTrans.to"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:e.editTrans.to},on:{input:function(t){t.target.composing||e.$set(e.editTrans,"to",t.target.value)}}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.to.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.to.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Purpose:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Purpose"},model:{value:e.editTrans.purpose,callback:function(t){e.$set(e.editTrans,"purpose",t)},expression:"editTrans.purpose"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.purpose.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.purpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.editTrans.amount,callback:function(t){e.$set(e.editTrans,"amount",t)},expression:"editTrans.amount"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.amount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},Ur=[],jr=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ,. ]*$/),Wr=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),Kr=["#","Date","Particular","Amount","Description","Actions"],zr=["#","Date","Mode","From","To","Purpose","Amount","Actions"],Lr=a("c1df"),Qr=new Date,Hr=a("9f25"),Gr=a("e966"),Zr=Gr.bindWith(",","."),Jr={name:"new-reimbursement-admin",components:{},data:function(){return{departments:[],companies:[],names:[],descriptions:[],items:[],reimItems:[],trans:[],transReims:[],newDepartment:"",newName:"",newCompany:"",newProcessDate:"",newMonthOf:"",requestProcessing:!1,desc:"",newDesc:"",newDate:Lr().format("YYYY-MM-DD"),newParticular:"",newAmount:"",newTransDate:Lr().format("YYYY-MM-DD"),processMaxDate:Lr().format("YYYY-MM-DD"),newMode:"",newFrom:"",newTo:"",newPurpose:"",newTransAmount:"",loading:!0,loadError:!1,reimItemsTable:{title:"Reimbursement Items Table",subTitle:"",columns:[].concat(Kr)},reimItemsCount:0,currentPage:1,transReimsTable:{title:"Transportation Reimbursement Table",subTitle:"",columns:[].concat(zr)},transReimsCount:0,currentTransPage:1,editItem:{id:"",date:"",particular:"",amount:""},editTrans:{id:"",date:"",mode:"",from:"",on:"",purpose:"",amount:""},totalItems:"0.00",totalTrans:"0.00",totalAmount:"0.00"}},validations:{newDepartment:{required:cr["required"]},newName:{required:cr["required"]},desc:{required:cr["required"]},newDesc:{alphaNumCustomValidator:Wr,required:cr["required"]},newDate:{required:cr["required"]},newParticular:{alphaNumCustomValidator:Wr,required:cr["required"]},newAmount:{amountCustomValidator:jr,required:cr["required"]},newTransDate:{required:cr["required"]},newMode:{alphaNumCustomValidator:Wr,required:cr["required"]},newFrom:{alphaNumCustomValidator:Wr,required:cr["required"]},newTo:{alphaNumCustomValidator:Wr,required:cr["required"]},newPurpose:{alphaNumCustomValidator:Wr,required:cr["required"]},newTransAmount:{alphaNumCustomValidator:Wr,required:cr["required"]},editItem:{date:{required:cr["required"]},particular:{alphaNumCustomValidator:Wr,required:cr["required"]},amount:{amountCustomValidator:jr,required:cr["required"]}},editTrans:{date:{required:cr["required"]},mode:{alphaNumCustomValidator:Wr,required:cr["required"]},from:{alphaNumCustomValidator:Wr,required:cr["required"]},to:{alphaNumCustomValidator:Wr,required:cr["required"]},purpose:{alphaNumCustomValidator:Wr,required:cr["required"]},amount:{alphaNumCustomValidator:Wr,required:cr["required"]}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDepartments(),e.getNames(),e.getCompanies(),e.getDescriptions(),e.getReimItems(1),e.getTransReim(1),e.getTotalAmount();case 7:case"end":return t.stop()}}),t)})))()},methods:{getDepartments:function(){var e=this,t=Vu.collection("departments").orderBy("departmentName","asc");e.departments=[],t.get().then((function(t){t.forEach((function(t){e.departments.push(t.data())})),e.newDepartment=e.departments[0].departmentUid}))},getNames:function(){var e=this,t=Vu.collection("users").where("status","==",1).orderBy("lastname","asc");e.names=[],t.get().then((function(t){t.forEach((function(t){e.names.push(t.data())}));for(var a=0;a<e.names.length;a++)e.names[a]["name"]=e.names[a].lastname+", "+e.names[a].firstname;e.newName=e.names[0].userId}))},getCompanies:function(){var e=this,t=Eu.collection("companies").orderBy("companyName","asc");e.companies=[],t.get().then((function(t){t.forEach((function(t){e.companies.push(t.data())}))}))},getDescriptions:function(){var e=this,t=Eu.collection("reimbursementDescriptions").where("status","==",1).orderBy("description","asc");e.descriptions=[],t.get().then((function(t){t.forEach((function(t){e.descriptions.push(t.data())})),e.desc=e.descriptions[0].reimbursementDescId}))},addReimDesc:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDesc.$touch(),!e.$v.newDesc.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("reimbursementDescriptions").where("description","==",Object(re["a"])(e.newDesc)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="RDI-"+Qr.getFullYear()+Hr(Qr.getMonth()+1,2)+Qr.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("reimbursementDescriptions").doc().set({reimbursementDescId:r,description:Object(re["a"])(e.newDesc),userReference:n[0].userId,status:1,dateCreated:Qr,dateModified:Qr}).then((function(){e.newDesc="",e.requestProcessing=!1,e.$v.newDesc.$reset(),e.$bvModal.hide("new-reim-desc-modal"),e.getDescriptions(),e.$swal({title:"Success",text:"New reimbursement description added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Reimbursement description already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openReimItemModal:function(e){var t=this,a=Eu.collection("reimbursementDescriptions").where("reimbursementDescId","==",e),n=[];a.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"TRANSPORTATION"==n[0].description||"TRANSPORTATIONS"==n[0].description?t.$bvModal.show("new-trans-reim-modal"):t.$bvModal.show("new-reim-item-modal")}))},addReimItem:function(){var e=this;if(e.$v.newDate.$touch(),e.$v.newParticular.$touch(),e.$v.newAmount.$touch(),!e.$v.newDate.$error&&!e.$v.newParticular.$error&&!e.$v.newAmount.$error){e.requestProcessing=!0,0==e.items.length&&(e.items=[]);var t={rowNum:e.items.length+1,date:e.newDate,particular:e.newParticular,amount:Zr(parseFloat(e.newAmount).toFixed(2)),desc:e.desc};e.items.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newDate=Lr().format("YYYY-MM-DD"),e.newParticular="",e.newAmount="",e.$v.newDate.$reset(),e.$v.newParticular.$reset(),e.$v.newAmount.$reset(),e.$bvModal.hide("new-reim-item-modal"),e.getReimItems(1)})),e.requestProcessing=!1}},addTransReim:function(){var e=this;if(e.$v.newTransDate.$touch(),e.$v.newMode.$touch(),e.$v.newFrom.$touch(),e.$v.newTo.$touch(),e.$v.newPurpose.$touch(),e.$v.newTransAmount.$touch(),!e.$v.newTransDate.$error&&!e.$v.newMode.$error&&!e.$v.newFrom.$error&&!e.$v.newTo.$error&&!e.$v.newPurpose.$error&&!e.$v.newTransAmount.$error){e.requestProcessing=!0,0==e.trans.length&&(e.trans=[]);var t={rowNum:e.trans.length+1,date:e.newTransDate,mode:e.newMode,from:e.newFrom,to:e.newTo,purpose:e.newPurpose,amount:Zr(parseFloat(e.newTransAmount).toFixed(2)),desc:e.desc};e.trans.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newTransDate=Lr().format("YYYY-MM-DD"),e.newMode="",e.newFrom="",e.newTo="",e.newPurpose="",e.newTransAmount="",e.$v.newTransDate.$reset(),e.$v.newMode.$reset(),e.$v.newFrom.$reset(),e.$v.newTo.$reset(),e.$v.newPurpose.$reset(),e.$v.newTransAmount.$reset(),e.$bvModal.hide("new-trans-reim-modal"),e.getTransReim(1)})),e.requestProcessing=!1}},getReimItems:function(e){var t=this,a=10*(e-1),n=10*e,r=0;t.reimItems=[];for(var s=a;s<n;s++)t.items[s]&&t.reimItems.push(t.items[s]);for(var i=0;i<t.items.length;i++)r+=parseFloat(t.items[i].amount.replaceAll(",",""));t.totalItems=Zr(parseFloat(r).toFixed(2)),t.reimItemsCount=t.items.length,t.currentPage=e,t.getTotalAmount()},onPageChange:function(e){this.getReimItems(e)},getTransReim:function(e){var t=this,a=10*(e-1),n=10*e,r=0;t.transReims=[];for(var s=a;s<n;s++)t.trans[s]&&t.transReims.push(t.trans[s]);for(var i=0;i<t.trans.length;i++)r+=parseFloat(t.trans[i].amount.replaceAll(",",""));t.totalTrans=Zr(parseFloat(r).toFixed(2)),t.transReimsCount=t.trans.length,t.currentTransPage=e,t.getTotalAmount()},onTransPageChange:function(e){this.getTransReim(e)},openUpdateItemModal:function(e){this.editItem={id:e.rowNum,date:e.date,particular:e.particular,amount:e.amount},this.$bvModal.show("update-reim-item-modal")},updateReimItem:function(){var e=this;if(e.$v.editItem.$touch(),!e.$v.editItem.$error){e.requestProcessing=!1;var t=parseInt(e.editItem.id)-1;e.items[t].date=e.editItem.date,e.items[t].particular=e.editItem.particular,e.items[t].amount=e.editItem.amount,e.$swal({title:"Success",text:"Item updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$v.editItem.$reset(),e.$bvModal.hide("update-reim-item-modal"),e.getReimItems(1)})),e.requestProcessing=!1}},removeItem:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this reimbursement item",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var n=parseInt(e.rowNum)-1;t.items.splice(n,1),t.$swal({title:"Success",text:"Item removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var e=0;e<t.items.length;e++)t.items[e].rowNum=e+1;t.getReimItems(1)}))}}))},openUpdateTransModal:function(e){this.editTrans={id:e.rowNum,date:e.date,mode:e.mode,from:e.from,to:e.to,purpose:e.purpose,amount:e.amount},this.$bvModal.show("update-trans-reim-modal")},updateTransReim:function(){var e=this;if(e.$v.editTrans.$touch(),!e.$v.editTrans.$error){e.requestProcessing=!1;var t=parseInt(e.editTrans.id)-1;e.trans[t].date=e.editTrans.date,e.trans[t].mode=e.editTrans.mode,e.trans[t].from=e.editTrans.from,e.trans[t].to=e.editTrans.to,e.trans[t].purpose=e.editTrans.purpose,e.trans[t].amount=e.editTrans.amount,e.$swal({title:"Success",text:"Transportation updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$v.editItem.$reset(),e.$bvModal.hide("update-trans-reim-modal"),e.getTransReim(1)})),e.requestProcessing=!1}},removeTrans:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this transportation",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var n=parseInt(e.rowNum)-1;t.trans.splice(n,1),t.$swal({title:"Success",text:"Transportation removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var e=0;e<t.trans.length;e++)t.trans[e].rowNum=e+1;t.getTransReim(1),t.getTotalAmount()}))}}))},getTotalAmount:function(){var e=this,t=0,a=e.totalItems.replaceAll(",",""),n=e.totalTrans.replaceAll(",","");t=parseFloat(a)+parseFloat(n),e.totalAmount=Zr(parseFloat(t).toFixed(2))},addReimbursement:function(){var e=this;if(e.$v.newDepartment.$touch(),e.$v.newName.$touch(),!e.$v.newDepartment.$error&&!e.$v.newName.$error){e.requestProcessing=!0;var t=Uu.collection("reimbursements").orderBy("voucherDate","desc"),a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r=[];t.limit(1).get().then((function(t){t.forEach((function(e){e.exists&&r.push(e.data())}));var s="";a.get().then((function(t){t.forEach((function(e){n.push(e.data())}));var a=new Date,i="RI-"+Qr.getFullYear()+Hr(Qr.getMonth()+1,2)+Qr.getDate()+"-"+Math.floor(1e6*Math.random());0!=r.length?(s=Hr(parseInt(r[0].voucherNumber.slice(7))+1,5),"100000"==s.toString()&&(s="00001")):s="00001",Uu.collection("reimbursements").doc().set({reimbursementId:i,processDate:e.newProcessDate,monthOf:e.newMonthOf,totalAmount:e.totalAmount,voucherDate:a,voucherNumber:Hr(a.getMonth()+1)+""+a.getFullYear().toString().slice(2,4)+s,receivedDate:"",remarks:"",checkReference:"",companyReference:e.newCompany,departmentReference:e.newDepartment,nameReference:e.newName,status:1,userReference:n[0].userId,dateCreated:Qr,dateModified:Qr}).then((function(){if(0!=e.items.length)for(var t=0;t<e.items.length;t++){var a="RII-"+Qr.getFullYear()+Hr(Qr.getMonth()+1,2)+Qr.getDate()+"-"+Math.floor(1e6*Math.random());Uu.collection("reimbursementItems").doc().set({reimburseItemId:a,date:e.items[t].date,amount:e.items[t].amount,particular:e.items[t].particular,reimbursementReference:i,descriptionReference:e.items[t].desc,status:1,userReference:n[0].userId,dateCreated:Qr,dateModified:Qr})}if(0!=e.trans.length)for(var r=0;r<e.trans.length;r++){var s="RTI-"+Qr.getFullYear()+Hr(Qr.getMonth()+1,2)+Qr.getDate()+"-"+Math.floor(1e6*Math.random());Uu.collection("reimbursementItems").doc().set({reimburseItemId:s,date:e.trans[r].date,amount:e.trans[r].amount,from:e.trans[r].from,to:e.trans[r].to,transportationMode:e.trans[r].mode,purpose:e.trans[r].purpose,reimbursementReference:i,descriptionReference:e.trans[r].desc,status:1,userReference:n[0].userId,dateCreated:Qr,dateModified:Qr})}e.newDepartment="",e.newCompany="",e.newName="",e.newProcessDate="",e.newMonthOf="",e.items=[],e.trans=[],e.$v.newDepartment.$reset(),e.$v.newName.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New Reimbursement added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/reimbursement/"+i)}))}))}))}))}}}},Xr=Jr,es=(a("fce0"),Object(m["a"])(Xr,Vr,Ur,!1,null,null,null)),ts=es.exports,as=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",["0.00"!=e.totalAmount||0!=e.totalAmount?a("div",{staticClass:"form-group row mb-2 mt-2 pt-2"},[a("div",{staticClass:"col-sm-12 pr-8 pl-5"},["0.00"!=e.totalItems||0!=e.totalItems?a("b",[e._v("Total Items Amount:")]):e._e(),"0.00"!=e.totalItems||0!=e.totalItems?a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(" â± "+e._s(e.totalItems))]):e._e(),a("br"),"0.00"!=e.totalTrans||0!=e.totalTrans?a("b",[e._v("Total Transportation Amount:")]):e._e(),"0.00"!=e.totalTrans||0!=e.totalTrans?a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(" â± "+e._s(e.totalTrans))]):e._e(),"0.00"!=e.totalAmount||0!=e.totalAmount?a("h5",{staticClass:"text-right"},[a("b",[e._v("Total Amount:")]),a("span",{staticStyle:{"text-decoration":"underline"}},[e._v(" â± "+e._s(e.totalAmount)+" ")])]):e._e()])]):e._e(),a("hr"),a("div",{staticClass:"form-group row mb-2 mt-2 pt-2"},[a("div",{staticClass:"col-sm-3 pl-5"},[a("base-button",{attrs:{block:"",id:"darkBtn"},on:{click:function(t){return e.openReimItemModal(e.desc)}}},[e._v("Add Item for")])],1),a("div",{staticClass:"col-sm-6"},[a("v-select",{attrs:{id:"inputStyle",options:e.descriptions,reduce:function(e){return e.reimbursementDescId},label:"description",clearable:!1},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}}),e.$v.desc.$anyDirty&&!e.$v.desc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2"},[a("span",{staticClass:"pointer",attrs:{id:"sideBarTxt"},on:{click:function(t){return e.$bvModal.show("new-reim-desc-modal")}}},[e._v("Add Description")])])]),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Reimbursement Items")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:e.loadError,title:e.reimItemsTable.title,"sub-title":e.reimItemsTable.subTitle,data:e.reimItems,columns:e.reimItemsTable.columns},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(e._f("moment")(n.date,"MMM DD, YYYY")))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.particular))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v("â± "+e._s(n.amount))])]),a("td",e._l(e.descriptions,(function(t){return a("span",{key:t.reimbursementDescId},[t.reimbursementDescId==n.desc?a("span",{attrs:{id:"particular"}},[e._v(e._s(t.description))]):e._e()])})),0),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(t){return e.openUpdateItemModal(n)}}}):e._e(),""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(t){return e.removeItem(n)}}}):e._e()])]}}])})],1),e.items.length?a("hr"):e._e(),e.items.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[e._v(e._s(e.items[e.items.length-1].rowNum)+" of "+e._s(e.reimItemsCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:e.items,totalPages:e.reimItemsCount,currentPage:e.currentPage},on:{pagechanged:e.onPageChange}})],1):e._e(),a("hr"),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Transportation Reimbursement")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:e.loadError,title:e.transReimsTable.title,"sub-title":e.transReimsTable.subTitle,data:e.transReims,columns:e.transReimsTable.columns},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(e._f("moment")(n.date,"MMM DD, YYYY")))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.mode))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.from))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.to))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v(e._s(n.purpose))])]),a("td",[a("span",{attrs:{id:"particular"}},[e._v("â± "+e._s(n.amount))])]),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(t){return e.openUpdateTransModal(n)}}}):e._e(),""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(t){return e.removeTrans(n)}}}):e._e()])]}}])})],1),e.trans.length?a("hr"):e._e(),e.trans.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[e._v(e._s(e.trans[e.trans.length-1].rowNum)+" of "+e._s(e.transReimsCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:e.trans,totalPages:e.transReimsCount,currentPage:e.currentTransPage},on:{pagechanged:e.onTransPageChange}})],1):e._e(),a("hr"),a("div",{staticClass:"text-center"},["0.00"!=e.totalAmount||0!=e.totalAmount?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.addReimbursement(t)}}},[e._v("Save")]):e._e()],1),a("b-modal",{attrs:{size:"md",id:"new-reim-desc-modal",title:"New Reimbursement Description",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addReimDesc(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-reim-desc-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.newDesc,callback:function(t){e.newDesc=t},expression:"newDesc"}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-reim-item-modal",title:"New Reimbursement Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addReimItem()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-reim-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Item:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.newDate,callback:function(t){e.newDate=t},expression:"newDate"}}),e.$v.newDate.$anyDirty&&!e.$v.newDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:e.newParticular,callback:function(t){e.newParticular=t},expression:"newParticular"}}),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-reim-item-modal",title:"Edit Reimbursement Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateReimItem()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-reim-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Item:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.editItem.date,callback:function(t){e.$set(e.editItem,"date",t)},expression:"editItem.date"}}),e.$v.editItem.$anyDirty&&!e.$v.editItem.date.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:e.editItem.particular,callback:function(t){e.$set(e.editItem,"particular",t)},expression:"editItem.particular"}}),e.$v.editItem.$anyDirty&&!e.$v.editItem.particular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editItem.$anyDirty&&!e.$v.editItem.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.editItem.amount,callback:function(t){e.$set(e.editItem,"amount",t)},expression:"editItem.amount"}}),e.$v.editItem.$anyDirty&&!e.$v.editItem.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editItem.$anyDirty&&!e.$v.editItem.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-trans-reim-modal",title:"New Transportation Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addTransReim(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-trans-reim-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Mode of Transportation:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.newTransDate,callback:function(t){e.newTransDate=t},expression:"newTransDate"}}),e.$v.newTransDate.$anyDirty&&!e.$v.newTransDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Mode of Transportation"},model:{value:e.newMode,callback:function(t){e.newMode=t},expression:"newMode"}}),e.$v.newMode.$anyDirty&&!e.$v.newMode.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newMode.$anyDirty&&!e.$v.newMode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("From:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("To:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newFrom,expression:"newFrom"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:e.newFrom},on:{input:function(t){t.target.composing||(e.newFrom=t.target.value)}}}),e.$v.newFrom.$anyDirty&&!e.$v.newFrom.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newFrom.$anyDirty&&!e.$v.newFrom.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newTo,expression:"newTo"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:e.newTo},on:{input:function(t){t.target.composing||(e.newTo=t.target.value)}}}),e.$v.newTo.$anyDirty&&!e.$v.newTo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTo.$anyDirty&&!e.$v.newTo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Purpose:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newPurpose,expression:"newPurpose"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Purpose"},domProps:{value:e.newPurpose},on:{input:function(t){t.target.composing||(e.newPurpose=t.target.value)}}}),e.$v.newPurpose.$anyDirty&&!e.$v.newPurpose.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPurpose.$anyDirty&&!e.$v.newPurpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newTransAmount,callback:function(t){e.newTransAmount=t},expression:"newTransAmount"}}),e.$v.newTransAmount.$anyDirty&&!e.$v.newTransAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTransAmount.$anyDirty&&!e.$v.newTransAmount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-trans-reim-modal",title:"Edit Transportation Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateTransReim(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-trans-reim-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Mode of Transportation:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.processMaxDate},model:{value:e.editTrans.date,callback:function(t){e.$set(e.editTrans,"date",t)},expression:"editTrans.date"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.date.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Mode of Transportation"},model:{value:e.editTrans.mode,callback:function(t){e.$set(e.editTrans,"mode",t)},expression:"editTrans.mode"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.mode.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.mode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("From:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("To:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTrans.from,expression:"editTrans.from"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:e.editTrans.from},on:{input:function(t){t.target.composing||e.$set(e.editTrans,"from",t.target.value)}}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.from.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.from.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTrans.to,expression:"editTrans.to"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:e.editTrans.to},on:{input:function(t){t.target.composing||e.$set(e.editTrans,"to",t.target.value)}}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.to.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.to.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Purpose:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTrans.purpose,expression:"editTrans.purpose"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Purpose"},domProps:{value:e.editTrans.purpose},on:{input:function(t){t.target.composing||e.$set(e.editTrans,"purpose",t.target.value)}}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.purpose.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.purpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.editTrans.amount,callback:function(t){e.$set(e.editTrans,"amount",t)},expression:"editTrans.amount"}}),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editTrans.$anyDirty&&!e.$v.editTrans.amount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},ns=[],rs=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ,. ]*$/),ss=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),is=["#","Date","Particular","Amount","Description","Actions"],os=["#","Date","Mode","From","To","Purpose","Amount","Actions"],cs=a("c1df"),ls=new Date,us=a("9f25"),ds=a("e966"),ms=ds.bindWith(",","."),ps={name:"new-reimbursement-user",components:{},data:function(){return{departments:[],names:[],companies:[],descriptions:[],items:[],reimItems:[],trans:[],transReims:[],newCompany:"",newProcessDate:"",newMonthOf:"",requestProcessing:!1,desc:"",newDesc:"",newDate:cs().format("YYYY-MM-DD"),newParticular:"",newAmount:"",newTransDate:cs().format("YYYY-MM-DD"),processMaxDate:cs().format("YYYY-MM-DD"),newMode:"",newFrom:"",newTo:"",newPurpose:"",newTransAmount:"",loading:!0,loadError:!1,reimItemsTable:{title:"Reimbursement Items Table",subTitle:"",columns:[].concat(is)},reimItemsCount:0,currentPage:1,transReimsTable:{title:"Transportation Reimbursement Table",subTitle:"",columns:[].concat(os)},transReimsCount:0,currentTransPage:1,editItem:{id:"",date:"",particular:"",amount:""},editTrans:{id:"",date:"",mode:"",from:"",on:"",purpose:"",amount:""},totalItems:"0.00",totalTrans:"0.00",totalAmount:"0.00"}},validations:{newDepartment:{required:cr["required"]},newName:{required:cr["required"]},newProcessDate:{required:cr["required"]},newMonthOf:{required:cr["required"]},desc:{required:cr["required"]},newDesc:{alphaNumCustomValidator:ss,required:cr["required"]},newDate:{required:cr["required"]},newParticular:{alphaNumCustomValidator:ss,required:cr["required"]},newAmount:{amountCustomValidator:rs,required:cr["required"]},newTransDate:{required:cr["required"]},newMode:{alphaNumCustomValidator:ss,required:cr["required"]},newFrom:{alphaNumCustomValidator:ss,required:cr["required"]},newTo:{alphaNumCustomValidator:ss,required:cr["required"]},newPurpose:{alphaNumCustomValidator:ss,required:cr["required"]},newTransAmount:{alphaNumCustomValidator:ss,required:cr["required"]},editItem:{date:{required:cr["required"]},particular:{alphaNumCustomValidator:ss,required:cr["required"]},amount:{amountCustomValidator:rs,required:cr["required"]}},editTrans:{date:{required:cr["required"]},mode:{alphaNumCustomValidator:ss,required:cr["required"]},from:{alphaNumCustomValidator:ss,required:cr["required"]},to:{alphaNumCustomValidator:ss,required:cr["required"]},purpose:{alphaNumCustomValidator:ss,required:cr["required"]},amount:{alphaNumCustomValidator:ss,required:cr["required"]}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDepartments(),e.getNames(),e.getCompanies(),e.getDescriptions(),e.getReimItems(1),e.getTransReim(1),e.getTotalAmount();case 7:case"end":return t.stop()}}),t)})))()},methods:{getDepartments:function(){var e=this,t=Vu.collection("departments").orderBy("departmentName","asc");e.departments=[],t.get().then((function(t){t.forEach((function(t){e.departments.push(t.data())})),e.newDepartment=e.departments[0].departmentUid}))},getNames:function(){var e=this,t=Vu.collection("users").orderBy("lastname","asc");e.names=[],t.get().then((function(t){t.forEach((function(t){e.names.push(t.data())}));for(var a=0;a<e.names.length;a++)e.names[a]["name"]=e.names[a].lastname+", "+e.names[a].firstname;e.newName=e.names[0].userId}))},getCompanies:function(){var e=this,t=Eu.collection("companies").orderBy("companyName","asc");e.companies=[],t.get().then((function(t){t.forEach((function(t){e.companies.push(t.data())}))}))},getDescriptions:function(){var e=this,t=Eu.collection("reimbursementDescriptions").where("status","==",1).orderBy("description","asc");e.descriptions=[],t.get().then((function(t){t.forEach((function(t){e.descriptions.push(t.data())})),e.desc=e.descriptions[0].reimbursementDescId}))},addReimDesc:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDesc.$touch(),!e.$v.newDesc.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("reimbursementDescriptions").where("description","==",Object(re["a"])(e.newDesc)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="RDI-"+ls.getFullYear()+us(ls.getMonth()+1,2)+ls.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("reimbursementDescriptions").doc().set({reimbursementDescId:r,description:Object(re["a"])(e.newDesc),userReference:n[0].userId,status:1,dateCreated:ls,dateModified:ls}).then((function(){e.newDesc="",e.requestProcessing=!1,e.$v.newDesc.$reset(),e.$bvModal.hide("new-reim-desc-modal"),e.getDescriptions(),e.$swal({title:"Success",text:"New reimbursement description added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Reimbursement description already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openReimItemModal:function(e){var t=this,a=Eu.collection("reimbursementDescriptions").where("reimbursementDescId","==",e),n=[];a.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"TRANSPORTATION"==n[0].description||"TRANSPORTATIONS"==n[0].description?t.$bvModal.show("new-trans-reim-modal"):t.$bvModal.show("new-reim-item-modal")}))},addReimItem:function(){var e=this;if(e.$v.newDate.$touch(),e.$v.newParticular.$touch(),e.$v.newAmount.$touch(),!e.$v.newDate.$error&&!e.$v.newParticular.$error&&!e.$v.newAmount.$error){e.requestProcessing=!0,0==e.items.length&&(e.items=[]);var t={rowNum:e.items.length+1,date:e.newDate,particular:e.newParticular,amount:ms(parseFloat(e.newAmount).toFixed(2)),desc:e.desc};e.items.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newDate=cs().format("YYYY-MM-DD"),e.newParticular="",e.newAmount="",e.$v.newDate.$reset(),e.$v.newParticular.$reset(),e.$v.newAmount.$reset(),e.$bvModal.hide("new-reim-item-modal"),e.getReimItems(1)})),e.requestProcessing=!1}},addTransReim:function(){var e=this;if(e.$v.newTransDate.$touch(),e.$v.newMode.$touch(),e.$v.newFrom.$touch(),e.$v.newTo.$touch(),e.$v.newPurpose.$touch(),e.$v.newTransAmount.$touch(),!e.$v.newTransDate.$error&&!e.$v.newMode.$error&&!e.$v.newFrom.$error&&!e.$v.newTo.$error&&!e.$v.newPurpose.$error&&!e.$v.newTransAmount.$error){e.requestProcessing=!0,0==e.trans.length&&(e.trans=[]);var t={rowNum:e.trans.length+1,date:e.newTransDate,mode:e.newMode,from:e.newFrom,to:e.newTo,purpose:e.newPurpose,amount:ms(parseFloat(e.newTransAmount).toFixed(2)),desc:e.desc};e.trans.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newTransDate=cs().format("YYYY-MM-DD"),e.newMode="",e.newFrom="",e.newTo="",e.newPurpose="",e.newTransAmount="",e.$v.newTransDate.$reset(),e.$v.newMode.$reset(),e.$v.newFrom.$reset(),e.$v.newTo.$reset(),e.$v.newPurpose.$reset(),e.$v.newTransAmount.$reset(),e.$bvModal.hide("new-trans-reim-modal"),e.getTransReim(1)})),e.requestProcessing=!1}},getReimItems:function(e){var t=this,a=10*(e-1),n=10*e,r=0;t.reimItems=[];for(var s=a;s<n;s++)t.items[s]&&t.reimItems.push(t.items[s]);for(var i=0;i<t.items.length;i++)r+=parseFloat(t.items[i].amount.replaceAll(",",""));t.totalItems=ms(parseFloat(r).toFixed(2)),t.reimItemsCount=t.items.length,t.currentPage=e,t.getTotalAmount()},onPageChange:function(e){this.getReimItems(e)},getTransReim:function(e){var t=this,a=10*(e-1),n=10*e,r=0;t.transReims=[];for(var s=a;s<n;s++)t.trans[s]&&t.transReims.push(t.trans[s]);for(var i=0;i<t.trans.length;i++)r+=parseFloat(t.trans[i].amount.replaceAll(",",""));t.totalTrans=ms(parseFloat(r).toFixed(2)),t.transReimsCount=t.trans.length,t.currentTransPage=e,t.getTotalAmount()},onTransPageChange:function(e){this.getTransReim(e)},openUpdateItemModal:function(e){this.editItem={id:e.rowNum,date:e.date,particular:e.particular,amount:e.amount},this.$bvModal.show("update-reim-item-modal")},updateReimItem:function(){var e=this;if(e.$v.editItem.$touch(),!e.$v.editItem.$error){e.requestProcessing=!1;var t=parseInt(e.editItem.id)-1;e.items[t].date=e.editItem.date,e.items[t].particular=e.editItem.particular,e.items[t].amount=e.editItem.amount,e.$swal({title:"Success",text:"Item updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$v.editItem.$reset(),e.$bvModal.hide("update-reim-item-modal"),e.getReimItems(1)})),e.requestProcessing=!1}},removeItem:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this reimbursement item",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var n=parseInt(e.rowNum)-1;t.items.splice(n,1),t.$swal({title:"Success",text:"Item removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var e=0;e<t.items.length;e++)t.items[e].rowNum=e+1;t.getReimItems(1)}))}}))},openUpdateTransModal:function(e){this.editTrans={id:e.rowNum,date:e.date,mode:e.mode,from:e.from,to:e.to,purpose:e.purpose,amount:e.amount},this.$bvModal.show("update-trans-reim-modal")},updateTransReim:function(){var e=this;if(e.$v.editTrans.$touch(),!e.$v.editTrans.$error){e.requestProcessing=!1;var t=parseInt(e.editTrans.id)-1;e.trans[t].date=e.editTrans.date,e.trans[t].mode=e.editTrans.mode,e.trans[t].from=e.editTrans.from,e.trans[t].to=e.editTrans.to,e.trans[t].purpose=e.editTrans.purpose,e.trans[t].amount=e.editTrans.amount,e.$swal({title:"Success",text:"Transportation updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$v.editItem.$reset(),e.$bvModal.hide("update-trans-reim-modal"),e.getTransReim(1)})),e.requestProcessing=!1}},removeTrans:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this transportation",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var n=parseInt(e.rowNum)-1;t.trans.splice(n,1),t.$swal({title:"Success",text:"Transportation removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var e=0;e<t.trans.length;e++)t.trans[e].rowNum=e+1;t.getTransReim(1),t.getTotalAmount()}))}}))},getTotalAmount:function(){var e=this,t=0,a=e.totalItems.replaceAll(",",""),n=e.totalTrans.replaceAll(",","");t=parseFloat(a)+parseFloat(n),e.totalAmount=ms(parseFloat(t).toFixed(2))},addReimbursement:function(){var e=this;if(e.$v.newDepartment.$touch(),e.$v.newName.$touch(),!e.$v.newDepartment.$error&&!e.$v.newName.$error){e.requestProcessing=!0;var t=Uu.collection("reimbursements").orderBy("voucherDate","desc"),a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r=[];t.limit(1).get().then((function(t){t.forEach((function(e){e.exists&&r.push(e.data())}));var s="";a.get().then((function(t){t.forEach((function(e){n.push(e.data())}));var a=new Date,i="RI-"+ls.getFullYear()+us(ls.getMonth()+1,2)+ls.getDate()+"-"+Math.floor(1e6*Math.random());0!=r.length?(s=us(parseInt(r[0].voucherNumber.slice(7))+1,5),"100000"==s.toString()&&(s="00001")):s="00001",Uu.collection("reimbursements").doc().set({reimbursementId:i,processDate:e.newProcessDate,monthOf:e.newMonthOf,totalAmount:e.totalAmount,voucherDate:a,voucherNumber:us(a.getMonth()+1)+""+a.getFullYear().toString().slice(2,4)+s,receivedDate:"",remarks:"",checkReference:"",companyReference:e.newCompany,departmentReference:n[0].departmentReference,nameReference:n[0].userId,status:1,userReference:n[0].userId,dateCreated:ls,dateModified:ls}).then((function(){if(0!=e.items.length)for(var t=0;t<e.items.length;t++){var a="RII-"+ls.getFullYear()+us(ls.getMonth()+1,2)+ls.getDate()+"-"+Math.floor(1e6*Math.random());Uu.collection("reimbursementItems").doc().set({reimburseItemId:a,date:e.items[t].date,amount:e.items[t].amount,particular:e.items[t].particular,reimbursementReference:i,descriptionReference:e.items[t].desc,status:1,userReference:n[0].userId,dateCreated:ls,dateModified:ls})}if(0!=e.trans.length)for(var r=0;r<e.trans.length;r++){var s="RTI-"+ls.getFullYear()+us(ls.getMonth()+1,2)+ls.getDate()+"-"+Math.floor(1e6*Math.random());Uu.collection("reimbursementItems").doc().set({reimburseItemId:s,date:e.trans[r].date,amount:e.trans[r].amount,from:e.trans[r].from,to:e.trans[r].to,transportationMode:e.trans[r].mode,purpose:e.trans[r].purpose,reimbursementReference:i,descriptionReference:e.trans[r].desc,status:1,userReference:n[0].userId,dateCreated:ls,dateModified:ls})}e.newDepartment="",e.newName="",e.newProcessDate=cs().format("YYYY-MM-DD"),e.newMonthOf=cs().format("YYYY-MM"),e.items=[],e.trans=[],e.$v.newDepartment.$reset(),e.$v.newName.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New Reimbursement added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/reimbursement/"+i)}))}))}))}))}}}},bs=ps,hs=(a("5319"),Object(m["a"])(bs,as,ns,!1,null,null,null)),fs=hs.exports,vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-5 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{staticClass:"bg-default"}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"For Approval")}}},[e._v("For Approval")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{staticClass:"bg-default"}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Approved")}}},[e._v("Approved")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{staticClass:"bg-default"}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"All")}}},[e._v("All")])])],1),a("span",{staticClass:"col-2 pt-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pt-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.reloadData()}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==e.filter?a("base-input",{staticClass:"pt-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.reloadData()}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e(),"name"==e.filter?a("v-select",{staticClass:"pt-2",staticStyle:{width:"230px"},attrs:{id:"inputStyle",options:e.names,reduce:function(e){return e.userId},label:"fullName",clearable:!1},on:{input:function(t){return e.reloadData()}},model:{value:e.filterName,callback:function(t){e.filterName=t},expression:"filterName"}}):e._e()],1)]),a("vue-good-table",{attrs:{columns:e.columns,rows:e.reimbursements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["name"==t.column.field?a("span",e._l(e.names,(function(n){return a("span",{key:n.userId},[n.userId==e.row.nameReference?a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/reimbursement/"+t.row.reimbursementId,id:"sideBarTxt",title:"View Reimbursement"}},[e._v(e._s(n.firstname)+" "+e._s(n.lastname))])],1):e._e()])})),0):e._e(),"totalAmount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.totalAmount))])]):e._e(),"dateCreated"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(t.row.dateCreated,"MMM DD, YYYY")))])]):e._e(),"processDate"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(""==t.row.processDate?"---------":t.row.processDate,"MMM DD, YYYY")))])]):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("FOR APPROVAL")]):e._e(),2==t.row.status|3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("APPROVED")]):e._e()]):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-up",attrs:{id:"sideBarTxt",title:"Approved"},on:{click:function(a){return e.openApprovedModal(t.row,2)}}}):e._e(),2==t.row.status|3==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-adjust",attrs:{id:"sideBarTxt",title:"For Approval"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e()]):e._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),e.reimbursements.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedReimbursements(1,"",e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("b-modal",{attrs:{size:"md",id:"approved-modal",title:"Approved Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.changeStatus(e.edit,2)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Approved ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("approved-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Process Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"date",placeholder:"Process Date"},model:{value:e.edit.processDate,callback:function(t){e.$set(e.edit,"processDate",t)},expression:"edit.processDate"}}),e.$v.edit.$anyDirty&&!e.$v.edit.processDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},ws=[],Cs=["#","Name","Total Amount","Date Created","Process Date","Status","Actions"],gs=a("c1df"),ks=a("e966"),ys=ks.bindWith(",","."),$s=new Date,_s={name:"admin-reim-list",components:{},data:function(){return{columns:[{label:"Name",field:"name"},{label:"Total Amount",field:"totalAmount"},{label:"Date Created",field:"processDate"},{label:"Status",field:"status"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,loadError:!1,reimbursementTable:{title:"Reimbursements Table",subTitle:"",columns:[].concat(Cs)},reimbursementsCount:0,reimbursements:[],names:[],currentPage:1,searching:!1,requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"},{filterId:"name",filter:"Name"}],filter:"month",filterName:"",dateCreated:gs().format("YYYY-MM"),maxDate:gs().format("YYYY-MM"),listType:"",pageNum:1,edit:{id:"",processDate:"",monthOf:""}}},validations:{edit:{processDate:{required:cr["required"]}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedReimbursements(1,"For Approval"),e.getNames();case 2:case"end":return t.stop()}}),t)})))()},methods:{closePage:function(){this.$router.push("/reimbursement")},getNames:function(){var e=this,t=Vu.collection("users").where("status","==",1),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));for(var n=0;n<a.length;n++)a[n]["fullName"]=a[n].firstname+" "+a[n].lastname,e.names.push(a[n]);e.filterName=e.names[0].userId}}))},getPaginatedReimbursements:function(e,t){var a=this,n=null,r=[],s=[],i=gs(a.dateCreated).startOf("month").format("YYYY-MM-DD"),o=gs(a.dateCreated).endOf("month").format("YYYY-MM-DD"),c=new Date(i),l=new Date(o);a.loading=!0,a.loadError=!1,a.reimbursements=[],a.listType=t,a.pageNum=e,"For Approval"==t?"all"!=a.limit?"month"==a.filter?n=Uu.collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",l).where("status","==",1).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(n=Uu.collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",1).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?n=Uu.collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",l).where("status","==",1).orderBy("dateCreated","desc"):"name"==a.filter&&(n=Uu.collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",1).orderBy("dateCreated","desc"))):"Approved"==t?"all"!=a.limit?"month"==a.filter?n=Uu.collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",l).where("status","in",[2,3]).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(n=Uu.collection("reimbursements").where("nameReference","==",a.filterName).where("status","in",[2,3]).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?n=Uu.collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",l).where("status","in",[2,3]).orderBy("dateCreated","desc"):"name"==a.filter&&(n=Uu.collection("reimbursements").where("nameReference","==",a.filterName).where("status","in",[2,3]).orderBy("dateCreated","desc"))):"All"==t&&("all"!=a.limit?"month"==a.filter?n=Uu.collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",l).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(n=Uu.collection("reimbursements").where("nameReference","==",a.filterName).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?n=Uu.collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",l).orderBy("dateCreated","desc"):"name"==a.filter&&(n=Uu.collection("reimbursements").where("nameReference","==",a.filterName).orderBy("dateCreated","desc")))),n.get().then((function(t){if(!t.empty){t.forEach((function(e){s.push(e.data()),r.push(e.id)}));for(var n=0;n<s.length;n++)s[n]["rowNum"]=1+n,s[n]["id"]=r[n],s[n].totalAmount=ys(parseFloat(s[n].totalAmount.replaceAll(",","")).toFixed(2)),s[n].dateCreated=gs.unix(s[n].dateCreated.seconds),a.reimbursements.push(s[n]);a.reimbursementsCount=s.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))},onPageChange:function(e){this.getPaginatedReimbursements(e,this.listType)},resetData:function(){this.getPaginatedReimbursements(1,this.listType)},reloadData:function(){this.getPaginatedReimbursements(1,this.listType)},openApprovedModal:function(e){var t=this,a="",n="";a=""==e.processDate?gs().format("YYYY-MM-DD"):e.processDate,n=""==e.monthOf?gs().format("YYYY-MM"):e.monthOf,t.edit={id:e.id,processDate:a,monthOf:n},t.$bvModal.show("approved-modal")},changeStatus:function(e,t){var a=this,n="";1==t?(n="For Approval",e.processDate="",e.monthOf=""):2==t&&(n="Approved"),a.$swal({title:"Are you sure?",text:"You want to change the reimbursement status to "+n,icon:"warning",showCancelButton:!0,confirmButtonColor:"#096b85",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value)try{Uu.collection("reimbursements").doc(e.id).update({processDate:e.processDate,monthOf:e.monthOf,status:t,dateModified:$s}).then((function(){a.$swal({title:"Success",text:"Reimbursement change status to "+n+".",icon:"success",confirmButtonColor:"#096b85",confirmButtonText:"OK"}).then((function(){a.getPaginatedReimbursements(1,n),a.$bvModal.hide("approved-modal"),a.$router.go(0)}))}))}catch(s){console.log(s),a.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#096b85",confirmButtonText:"OK"})}}))}}},xs=_s,As=Object(m["a"])(xs,vs,ws,!1,null,null,null),Ds=As.exports,Ps=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-2 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"For Approval")}}},[e._v("For Approval")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Approved")}}},[e._v("Approved")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Processed")}}},[e._v("Processed")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Received")}}},[e._v("Received")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Rejected")}}},[e._v("Rejected")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"All")}}},[e._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-7"}),a("span",{staticClass:"col-2 pb-2 pl-5 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-3 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.reloadData()}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}})],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.reimbursements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["name"==t.column.field?a("span",e._l(e.names,(function(n){return a("span",{key:n.userId},[n.userId==t.row.nameReference?a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/reimbursement/"+t.row.reimbursementId,id:"sideBarTxt",title:"View Reimbursement"}},[e._v(e._s(n.firstname)+" "+e._s(n.lastname))])],1):e._e()])})),0):e._e(),"totalAmount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.totalAmount))])]):e._e(),"processDate"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(""==t.row.processDate?"---------":t.row.processDate,"MMM DD, YYYY")))])]):e._e(),"company"==t.column.field?a("span",[e._l(e.companies,(function(n){return a("span",{key:n.companyId},[n.companyId==t.row.companyReference?a("span",[e._v(e._s(n.companyName))]):e._e()])})),""==t.row.companyReference||void 0==t.row.companyReference?a("span",[e._v("----------")]):e._e()],2):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("FOR APPROVAL")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("APPROVED")]):e._e(),3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("PROCESSED")]):e._e(),4==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("RECEIVED")]):e._e(),0==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("REJECTED")]):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),e.reimbursements.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedReimbursements(1,e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e()])},Ns=[],Ts=["#","Name","Total Amount","Process Date","Status"],Rs=a("c1df"),Is=a("e966"),Ss=Is.bindWith(",","."),qs={name:"user-reim-list",components:{},data:function(){return{columns:[{label:"Name",field:"name"},{label:"Total Amount",field:"totalAmount"},{label:"Process Date",field:"processDate"},{label:"Company",field:"company"},{label:"Status",field:"status"}],companies:[],loading:!0,loadError:!1,reimbursementTable:{title:"Reimbursements Table",subTitle:"",columns:[].concat(Ts)},reimbursementsCount:0,reimbursements:[],names:[],currentPage:1,searching:!1,requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",dateCreated:Rs().format("YYYY-MM"),maxDate:Rs().format("YYYY-MM"),listType:"",pageNum:1}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedReimbursements(1,"For Approval"),e.getNames(),e.getCompanies();case 3:case"end":return t.stop()}}),t)})))()},methods:{closePage:function(){this.$router.push("/reimbursement")},getNames:function(){var e=this,t=Vu.collection("users"),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));for(var n=0;n<a.length;n++)a[n]["fullName"]=a[n].firstname+" "+a[n].lastname,e.names.push(a[n]);e.filterName=e.names[0].userId}}))},getCompanies:function(){var e=this,t=Eu.collection("companies");t.get().then((function(t){t.empty||t.forEach((function(t){e.companies.push(t.data())}))}))},getPaginatedReimbursements:function(e,t){var a=this,n=null,r=[],s=[],i=null,o=[],c=Rs(a.dateCreated).startOf("month").format("YYYY-MM-DD"),l=Rs(a.dateCreated).endOf("month").format("YYYY-MM-DD"),u=new Date(c),d=new Date(l);a.loading=!0,a.loadError=!1,a.reimbursements=[],a.listType=t,a.pageNum=e,i=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),i.get().then((function(i){i.forEach((function(e){o.push(e.data())})),"For Approval"==t?"all"!=a.limit?n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",1).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc").limit(a.limit):"all"==a.limit&&(n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",1).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc")):"Approved"==t?"all"!=a.limit?n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",2).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc").limit(a.limit):"all"==a.limit&&(n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",2).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc")):"Processed"==t?"all"!=a.limit?n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",3).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc").limit(a.limit):"all"==a.limit&&(n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",3).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc")):"Received"==t?"all"!=a.limit?n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",4).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc").limit(a.limit):"all"==a.limit&&(n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",4).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc")):"Rejected"==t?"all"!=a.limit?n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",0).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc").limit(a.limit):"all"==a.limit&&(n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("status","==",0).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc")):"All"==t&&("all"!=a.limit?n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc").limit(a.limit):"all"==a.limit&&(n=Uu.collection("reimbursements").where("dateCreated",">=",u).where("dateCreated","<=",d).where("nameReference","==",o[0].userId).orderBy("dateCreated","desc"))),n.get().then((function(t){if(!t.empty){t.forEach((function(e){s.push(e.data()),r.push(e.id)}));for(var n=0;n<s.length;n++)s[n]["rowNum"]=1+n,s[n]["id"]=r[n],s[n].totalAmount=Ss(parseFloat(s[n].totalAmount.replaceAll(",","")).toFixed(2)),a.reimbursements.push(s[n]);a.reimbursementsCount=s.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))}))},onPageChange:function(e){this.getPaginatedReimbursements(e,this.listType)},resetData:function(){this.getPaginatedReimbursements(1,this.listType)},reloadData:function(){this.getPaginatedReimbursements(1,this.listType)}}},Bs=qs,Ms=Object(m["a"])(Bs,Ps,Ns,!1,null,null,null),Os=Ms.exports,Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Distributors:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.distributors,reduce:function(e){return e.distributorId},label:"distributorName",clearable:!1},model:{value:e.newDistributor,callback:function(t){e.newDistributor=t},expression:"newDistributor"}}),e.$v.newDistributor.$anyDirty&&!e.$v.newDistributor.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:" col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-distributor-modal",modifiers:{"add-distributor-modal":!0}}],attrs:{block:"",id:"darkBtn"}},[e._v("Add")])],1),a("div",{staticClass:" col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"date",placeholder:"Date"},model:{value:e.newDate,callback:function(t){e.newDate=t},expression:"newDate"}}),e.$v.newDate.$anyDirty&&!e.$v.newDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("CR Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:" col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"CR Number"},model:{value:e.newCRNumber,callback:function(t){e.newCRNumber=t},expression:"newCRNumber"}}),e.$v.newCRNumber.$anyDirty&&!e.$v.newCRNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newCRNumber.$anyDirty&&!e.$v.newCRNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:" col-sm-4 pl-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"Check Number"},on:{input:e.clearCheck},model:{value:e.newCheckNumber,callback:function(t){e.newCheckNumber=t},expression:"newCheckNumber"}}),e.$v.newCheckNumber.$anyDirty&&!e.$v.newCheckNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newCheckNumber.$anyDirty&&!e.$v.newCheckNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:" col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.choose-check-number-modal",modifiers:{"choose-check-number-modal":!0}}],attrs:{block:"",id:"darkBtn"}},[e._v("Choose")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:" col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"Payment Amount",readonly:""},model:{value:e.newPaymentAmount,callback:function(t){e.newPaymentAmount=t},expression:"newPaymentAmount"}}),e.$v.newPaymentAmount.$anyDirty&&!e.$v.newPaymentAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPaymentAmount.$anyDirty&&!e.$v.newPaymentAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("hr"),a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Particulars")])])]),a("card",{staticClass:"pl-2 pr-2 shadow"},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("PO Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"PO Number"},model:{value:e.newPONumber,callback:function(t){e.newPONumber=t},expression:"newPONumber"}}),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Invoice Number"},model:{value:e.newInvoiceNumber,callback:function(t){e.newInvoiceNumber=t},expression:"newInvoiceNumber"}}),e.$v.newInvoiceNumber.$anyDirty&&!e.$v.newInvoiceNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newInvoiceNumber.$anyDirty&&!e.$v.newInvoiceNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"date",id:"inputStyle",placeholder:"Invoice Date"},model:{value:e.newInvoiceDate,callback:function(t){e.newInvoiceDate=t},expression:"newInvoiceDate"}}),e.$v.newInvoiceDate.$anyDirty&&!e.$v.newInvoiceDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Invoice Amount"},model:{value:e.newInvoiceAmount,callback:function(t){e.newInvoiceAmount=t},expression:"newInvoiceAmount"}}),e.$v.newInvoiceAmount.$anyDirty&&!e.$v.newInvoiceAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newInvoiceAmount.$anyDirty&&!e.$v.newInvoiceAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Withholding Tax:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.wths,reduce:function(e){return e.withholdingTaxCodeId},label:"withholdingTaxCode",clearable:!1},model:{value:e.newWTH,callback:function(t){e.newWTH=t},expression:"newWTH"}}),e.$v.newWTH.$anyDirty&&!e.$v.newWTH.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-button",{attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")])],1)])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:e.loadError,title:e.particularsTable.title,"sub-title":e.particularsTable.subTitle,data:e.particulars,columns:e.particularsTable.columns},on:{reloadData:e.reloadData},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[e._v(e._s(n.poNumber))]),a("td",[e._v(e._s(n.invoiceNumber))]),a("td",[e._v(e._s(n.invoiceDate))]),a("td",[e._v("â± "+e._s(n.invoiceAmount))]),a("td",[e._v(e._s(n.wht))]),a("td",[e._v("â± "+e._s(n.amountPaid))]),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(t){return e.removeParticular(n)}}}):e._e()])]}}])})],1),a("hr"),a("div",{staticClass:"text-center"},[""!=e.distributors&&""!=e.particulars&&0!=e.wths.length?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.addPaymentAdvice(t)}}},[e._v("Save")]):e._e()],1),a("b-modal",{attrs:{size:"lg",id:"add-distributor-modal",title:"New Distributor",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addDistributor(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("add-distributor-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Distributor Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Tin Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Distributor Name"},model:{value:e.newDistriName,callback:function(t){e.newDistriName=t},expression:"newDistriName"}}),e.$v.newDistriName.$anyDirty&&!e.$v.newDistriName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDistriName.$anyDirty&&!e.$v.newDistriName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:e.newTinNumber,callback:function(t){e.newTinNumber=t},expression:"newTinNumber"}}),e.$v.newTinNumber.$anyDirty&&!e.$v.newTinNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTinNumber.$anyDirty&&!e.$v.newTinNumber.tinNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Address:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:e.newAddress},on:{input:function(t){t.target.composing||(e.newAddress=t.target.value)}}}),e.$v.newAddress.$anyDirty&&!e.$v.newAddress.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])])]),a("b-modal",{attrs:{size:"lg",id:"choose-check-number-modal",title:"Choose Check Number",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.chooseCheckNumber(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" OK ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("choose-check-number-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Account:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.banks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getBankAccounts(e.bank)}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}),e.$v.bank.$anyDirty&&!e.$v.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getCheckSeries(e.bank,e.bankAccount)}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}),e.$v.bankAccount.$anyDirty&&!e.$v.bankAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==e.checkSeries||""==e.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Series")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{input:"inputStyle",options:e.checkSeries,reduce:function(e){return e.bankCheckSeriesUid},label:"bankCheckSeries",clearable:!1},on:{input:function(t){return e.getCheckNumber(e.bank,e.bankAccount,e.series,"used")}},model:{value:e.series,callback:function(t){e.series=t},expression:"series"}}),e.$v.series.$anyDirty&&!e.$v.series.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.checkSeries||""==e.bankAccounts||""==e.checkNumbers?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Number")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.checkNumbers,reduce:function(e){return e.checkNumber},label:"checkNumber",clearable:!1},model:{value:e.checkNumber,callback:function(t){e.checkNumber=t},expression:"checkNumber"}}),e.$v.checkNumber.$anyDirty&&!e.$v.checkNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},Fs=[],Ys=a("c1df"),Vs=cr["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),Us=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),js=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9â± ,. ]*$/),Ws=cr["helpers"].regex("alphaNumAndDot",/^[ -. 0-9 ]*$/),Ks=["#","PO Number","Invoice No.","Invoice Date","Invoice Amount","WHT","Amount Paid","Actions"],zs=new Date,Ls=a("9f25"),Qs=a("e966"),Hs=Qs.bindWith(",","."),Gs={name:"new-payment-advice",components:{},data:function(){return{distributors:[],newDistributor:"",newDate:Ys().format("YYYY-MM-DD"),newCRNumber:"",newCheckNumber:"",newCheckReference:"",newPaymentAmount:"",newPONumber:"",newInvoiceNumber:"",newInvoiceDate:Ys().format("YYYY-MM-DD"),newInvoiceAmount:"",wths:[],newWTH:"",loading:!0,loadError:!1,particularsTable:{title:"Particulars Table",subTitle:"",columns:[].concat(Ks)},particulars:[],requestProcessing:!1,newDistriName:"",newTinNumber:"",newAddress:"",banks:[],bank:"",bankAccounts:[],bankAccount:"",checkSeries:[],series:"",checkNumbers:[],checkNumber:""}},validations:{newDistributor:{required:cr["required"]},newDate:{required:cr["required"]},newCRNumber:{required:cr["required"],alphaNumCustomValidator:Vs},newCheckNumber:{required:cr["required"],numCustomValidator:Us},newPaymentAmount:{required:cr["required"],amountCustomValidator:js},newPONumber:{required:cr["required"],alphaNumCustomValidator:Vs},newInvoiceNumber:{required:cr["required"],alphaNumCustomValidator:Vs},newInvoiceDate:{required:cr["required"]},newInvoiceAmount:{required:cr["required"],amountCustomValidator:js},newWTH:{required:cr["required"]},newDistriName:{required:cr["required"],alphaNumCustomValidator:Vs},newTinNumber:{required:cr["required"],tinNumCustomValidator:Ws},newAddress:{required:cr["required"]},bank:{required:cr["required"]},bankAccount:{required:cr["required"]},series:{required:cr["required"]},checkNumber:{required:cr["required"]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDistributors(),e.getWTH(),e.getBanks();case 3:case"end":return t.stop()}}),t)})))()},methods:{getDistributors:function(){var e=this,t=Eu.collection("distributors").orderBy("distributorName","asc");e.distributors=[],t.get().then((function(t){t.forEach((function(t){e.distributors.push(t.data())})),e.newDistributor=e.distributors[0].distributorId}))},getWTH:function(){var e=this,t=Eu.collection("withholdingTaxCode").orderBy("withholdingTaxCode","asc");e.wths=[],t.get().then((function(t){t.forEach((function(t){e.wths.push(t.data())})),e.newWTH=e.wths[0].withholdingTaxCodeId}))},addDistributor:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDistriName.$touch(),e.$v.newTinNumber.$touch(),e.$v.newAddress.$touch(),!e.$v.newDistriName.$error&&!e.$v.newTinNumber.$error&&!e.$v.newAddress.$error){var t=null,a=null;e.requestProcessing=!0,t=Eu.collection("distributors").where("distributorName","==",Object(re["a"])(e.newDistriName)),a=Eu.collection("distributors").where("tinNumber","==",e.newTinNumber),t.get().then((function(t){t.empty?t&&a.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="WTC-"+zs.getFullYear()+Ls(zs.getMonth()+1,2)+zs.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("distributors").doc().set({distributorId:r,distributorName:Object(re["a"])(e.newDistriName),tinNumber:e.newTinNumber,address:e.newAddress,userReference:n[0].userId,status:1,dateCreated:zs,dateModified:zs}).then((function(){e.newDistriName="",e.newTinNumber="",e.newAddress="",e.requestProcessing=!1,e.$v.newDistriName.$reset(),e.$v.newTinNumber.$reset(),e.$v.newAddress.$reset(),e.$bvModal.hide("add-distributor-modal"),e.getDistributors(),e.$swal({title:"Success",text:"New distributor added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Tin number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))})):t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Distributor already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},clearCheck:function(){this.checkReference=""},getBanks:function(){var e=this,t=Eu.collection("banks").orderBy("bank","asc");e.banks=[],t.get().then((function(t){t.forEach((function(t){e.banks.push(t.data())})),e.bank=e.banks[0].bankUid,e.getBankAccounts(e.banks[0].bankUid)}))},getBankAccounts:function(e){var t=this,a=Eu.collection("bankAccounts").where("bankReference","==",e).orderBy("bankAccountNumber","asc");t.bankAccounts=[],a.get().then((function(e){e.forEach((function(e){t.bankAccounts.push(e.data())})),t.bankAccount=t.bankAccounts[0].bankAccountUid,t.getCheckSeries(t.bank,t.bankAccount)}))},getCheckSeries:function(e,t){var a=this,n=Eu.collection("bankCheckSeries").where("bankReference","==",e).where("bankAccountReference","==",t).orderBy("bankCheckSeries","asc");a.checkSeries=[],n.get().then((function(e){e.forEach((function(e){a.checkSeries.push(e.data())})),a.series=a.checkSeries[0].bankCheckSeriesUid,a.getCheckNumber(a.bank,a.bankAccount,a.series,"used")}))},getCheckNumber:function(e,t,a,n){var r=this,s=Mu.collection("bankCheckSeriesReports").where("bankReference","==",e).where("bankAccountReference","==",t).where("checkSeriesReference","==",a).where("status","==",n).orderBy("checkNumber","asc");r.checkNumbers=[],r.checkNumber="",s.get().then((function(e){e.forEach((function(e){e.exists&&r.checkNumbers.push(e.data())})),0!=r.checkNumbers.length&&(r.checkNumber=r.checkNumbers[0].checkNumber)}))},chooseCheckNumber:function(){var e=this;e.newCheckNumber=e.checkNumber;for(var t=0;t<e.checkNumbers.length;t++)e.checkNumber==e.checkNumbers[t].checkNumber&&(e.newCheckReference=e.checkNumbers[t].checkReference);e.$bvModal.hide("choose-check-number-modal")},getParticulars:function(){var e=this;if(e.loading=!1,0!=e.particulars.length){var t=a("e966"),n=t.bindWith(",","."),r=0,s=0;e.loading=!0,e.loadError=!1;for(var i=0;i<e.particulars.length;i++)s=e.particulars[i].amountPaid.replaceAll(",",""),r+=parseFloat(s.replaceAll(",",""));e.newPaymentAmount="â± "+n(parseFloat(r).toFixed(2)),setTimeout((function(){e.loading=!1}),1500)}},reloadData:function(){this.getParticulars()},addParticular:function(){var e=this,t=!0;if(e.requestProcessing=!1,e.$v.newPONumber.$touch(),e.$v.newInvoiceNumber.$touch(),e.$v.newInvoiceDate.$touch(),e.$v.newInvoiceAmount.$touch(),e.$v.newWTH.$touch(),e.$v.newPONumber.$error||e.$v.newInvoiceNumber.$error||e.$v.newInvoiceDate.$error||e.$v.newInvoiceAmount.$error||e.$v.newWTH.$error||(t=!1),!t){e.requestProcessing=!0,0==e.particulars.length&&(e.particulars=[]),e.newInvoiceAmount.replaceAll(",",""),e.newInvoiceAmount.replaceAll("â±",""),e.newInvoiceAmount.replaceAll(" ","");for(var a="",n=0,r=0,s=0;s<e.wths.length;s++)e.newWTH==e.wths[s].withholdingTaxCodeId&&(a=parseFloat(e.wths[s].withholdingTaxRate).toFixed(2));n=parseFloat(e.newInvoiceAmount)/1.12*parseFloat(a),r=parseFloat(e.newInvoiceAmount)-parseFloat(n);var i={rowNum:e.particulars.length+1,poNumber:e.newPONumber,invoiceNumber:e.newInvoiceNumber,invoiceDate:Ys(e.newInvoiceDate).format("MM DD, YYYYY"),invoiceAmount:Hs(parseFloat(e.newInvoiceAmount).toFixed(2)),whtReference:e.newWTH,wht:Hs(parseFloat(n).toFixed(2)),amountPaid:Hs(parseFloat(r).toFixed(2)),status:1};e.particulars.push(i),e.$swal({title:"Success",text:"New Particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newPONumber="",e.newInvoiceNumber="",e.newInvoiceDate=Ys().format("YYYY-MM-DD"),e.newInvoiceAmount="",e.newWTH="",e.$v.newPONumber.$reset(),e.$v.newInvoiceNumber.$reset(),e.$v.newInvoiceDate.$reset(),e.$v.newInvoiceAmount.$reset(),e.$v.newWTH.$reset(),e.getParticulars(),e.getWTH()})),e.requestProcessing=!1}},removeParticular:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this Particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&(t.particulars.splice(parseInt(e.rowNum)-1,1),t.$swal({title:"Success",text:"Particular delete successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1,t.getParticulars())}))},addPaymentAdvice:function(){var e=this;e.requestProcessing=!0,this.$swal({title:"Are you sure?",text:"You want to save this payment advice",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(t){if(t.value){if(e.requestProcessing=!1,e.$v.newDate.$touch(),e.$v.newCRNumber.$touch(),e.$v.newCheckNumber.$touch(),e.$v.newPaymentAmount.$touch(),e.$v.newDistributor.$touch(),!e.$v.newDate.$error&&!e.$v.newCRNumber.$error&&!e.$v.newCheckNumber.$error&&!e.$v.newPaymentAmount.$error&&!e.$v.newDistributor.$error){var a=null;a=Mu.collection("paymentAdvice").where("crNumber","==",e.newCRNumber),a.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[];a.get().then((function(t){t.forEach((function(e){n.push(e.data())}));var a="PAI-"+zs.getFullYear()+Ls(zs.getMonth()+1,2)+zs.getDate()+"-"+Math.floor(1e6*Math.random());e.newPaymentAmount=e.newPaymentAmount.replaceAll(",",""),e.newPaymentAmount=e.newPaymentAmount.replaceAll("â±","");try{Wu.collection("paymentAdvice").doc().set({paymentAdviceId:a,paymentAdviceDate:e.newDate,crNumber:e.newCRNumber,checkNumber:e.newCheckNumber,paymentAmount:e.newPaymentAmount,checkReference:e.newCheckReference,distributorReference:e.newDistributor,status:1,userReference:n[0].userId,dateCreated:zs,dateModified:zs}).then((function(){for(var t=0;t<e.particulars.length;t++){var n="PAPI-"+zs.getFullYear()+Ls(zs.getMonth()+1,2)+zs.getDate()+"-"+Math.floor(1e6*Math.random());e.particulars[t].invoiceAmount=e.particulars[t].invoiceAmount.replaceAll(",",""),Wu.collection("paymentAdviceParticulars").doc().set({paymentAdviceParticularId:n,invoiceDate:Ys(e.particulars[t].invoiceDate).format("YYYY-MM-DD"),invoiceAmount:e.particulars[t].invoiceAmount,poReference:e.particulars[t].poNumber,invoiceReference:e.particulars[t].invoiceNumber,whtReference:e.particulars[t].whtReference,paymentAdviceReference:a,dateCreated:zs,dateModified:zs}).then((function(){e.newDate="",e.newCRNumber="",e.newCheckNumber="",e.newPaymentAmount="",e.newCheckReference="",e.newDistributor="",e.particulars=[],e.$v.newDate.$reset(),e.$v.newCRNumber.$reset(),e.$v.newPaymentAmount.$reset(),e.$v.newDistributor.$reset(),e.$v.newCheckNumber.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New Payment Advice added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/sales/payment/advice/print/"+a)}))}))}}))}catch(r){console.log(r),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"CR Number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}}else e.requestProcessing=!1}))}}},Zs=Gs,Js=(a("35ba"),Object(m["a"])(Zs,Es,Fs,!1,null,null,null)),Xs=Js.exports,ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6 pl-0"}),a("span",{staticClass:"col-2 pt-3 pl-5 text-right"},[a("b",[e._v("Filter by Month:")])]),a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pt-2",staticStyle:{width:"200px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.reloadData()}},model:{value:e.paymentAdviceDate,callback:function(t){e.paymentAdviceDate=t},expression:"paymentAdviceDate"}})],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.paymentAdvices,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["crNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.crNumber))])]):e._e(),"paymentAmount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.paymentAmount))])]):e._e(),"paymentAdviceDate"==t.column.field?a("span",[a("span",{attrs:{classs:"tableSpan"}},[e._v(e._s(e._f("moment")(t.row.paymentAdviceDate,"MMM DD, YYYY")))])]):e._e(),"distributor"==t.column.field?a("span",e._l(e.distributors,(function(n){return a("span",{key:n.distributorId},[n.distributorId==t.row.distributorReference?a("span",[e._v(e._s(n.distributorName))]):e._e()])})),0):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdatePaymentModal(t.row)}}}),a("router-link",{attrs:{to:"/sales/payment/advice/print/"+t.row.paymentAdviceId}},[a("span",{staticClass:"pointer ml-2 fa fa-print",attrs:{id:"sideBarTxt",title:"View Print Page"}})])],1):e._e()])]}}])})],1),a("hr"),!e.loading&&e.paymentAdvices.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedPaymentAdvice(1,"")}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("b-modal",{attrs:{size:"xl",id:"update-payment-advice-modal",title:"Update Payment Advice",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100 mt-0"},[a("div",{staticClass:"text-left pl-5"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Particulars")])]),a("div",{staticClass:"table-full-width pb-5 pl-5 pr-5 pt-2"},[a("paper-table",{attrs:{type:"hover",loading:e.loading,loadError:e.loadError,title:e.particularsTable.title,"sub-title":e.particularsTable.subTitle,data:e.particulars,columns:e.particularsTable.columns},on:{reloadData:e.reloadData},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("td",[e._v(e._s(n.rowNum))]),a("td",[e._v(e._s(n.poReference))]),a("td",[e._v(e._s(n.invoiceReference))]),a("td",[e._v(e._s(e._f("moment")(n.invoiceDate,"MMM DD, YYYY")))]),a("td",[e._v("â± "+e._s(n.invoiceAmount))]),a("td",[e._v(e._s(n.wht))]),a("td",[e._v("â± "+e._s(n.amountPaid))]),a("td",{attrs:{align:"right"}},[""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(t){return e.openEditParticularModal(n)}}}):e._e(),""!=n.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(t){return e.removeParticular(n)}}}):e._e()])]}}])})],1),a("div",{staticClass:"text-right pr-5"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.show("add-particular-modal")}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Particular ")]),a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updatePaymentAdvice(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-payment-advice-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Distributors:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.distributors,reduce:function(e){return e.distributorId},label:"distributorName",clearable:!1},model:{value:e.edit.distributor,callback:function(t){e.$set(e.edit,"distributor",t)},expression:"edit.distributor"}}),e.$v.edit.$anyDirty&&!e.$v.edit.distributor.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:" col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"date",placeholder:"Date"},model:{value:e.edit.date,callback:function(t){e.$set(e.edit,"date",t)},expression:"edit.date"}}),e.$v.edit.$anyDirty&&!e.$v.edit.date.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("CR Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:" col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"CR Number"},model:{value:e.edit.crNumber,callback:function(t){e.$set(e.edit,"crNumber",t)},expression:"edit.crNumber"}}),e.$v.edit.$anyDirty&&!e.$v.edit.crNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.crNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:" col-sm-4 pl-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"Check Number"},on:{input:e.clearCheck},model:{value:e.edit.checkNumber,callback:function(t){e.$set(e.edit,"checkNumber",t)},expression:"edit.checkNumber"}}),e.$v.edit.$anyDirty&&!e.$v.edit.checkNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.checkNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:" col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.change-check-number-modal",modifiers:{"change-check-number-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Choose ")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:" col-sm-6 pl-5 pr-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"Payment Amount",readonly:""},model:{value:e.edit.paymentAmount,callback:function(t){e.$set(e.edit,"paymentAmount",t)},expression:"edit.paymentAmount"}}),e.$v.edit.$anyDirty&&!e.$v.edit.paymentAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.paymentAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("hr")]),a("b-modal",{attrs:{size:"lg",id:"change-check-number-modal",title:"Choose Check Number",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.changeCheckNumber(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" OK ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("change-check-number-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Account:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.banks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getBankAccounts(e.bank)}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}),e.$v.bank.$anyDirty&&!e.$v.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getCheckSeries(e.bank,e.bankAccount)}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}),e.$v.bankAccount.$anyDirty&&!e.$v.bankAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==e.checkSeries||""==e.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Series")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{input:"inputStyle",options:e.checkSeries,reduce:function(e){return e.bankCheckSeriesUid},label:"bankCheckSeries",clearable:!1},on:{input:function(t){return e.getCheckNumber(e.bank,e.bankAccount,e.series,"used")}},model:{value:e.series,callback:function(t){e.series=t},expression:"series"}}),e.$v.series.$anyDirty&&!e.$v.series.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.checkSeries||""==e.bankAccounts||""==e.checkNumbers?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Number")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.checkNumbers,reduce:function(e){return e.checkNumber},label:"checkNumber",clearable:!1},model:{value:e.checkNumber,callback:function(t){e.checkNumber=t},expression:"checkNumber"}}),e.$v.checkNumber.$anyDirty&&!e.$v.checkNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"add-particular-modal",title:"Add Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("add-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("PO Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"PO Number"},model:{value:e.newPONumber,callback:function(t){e.newPONumber=t},expression:"newPONumber"}}),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Invoice Number"},model:{value:e.newInvoiceNumber,callback:function(t){e.newInvoiceNumber=t},expression:"newInvoiceNumber"}}),e.$v.newInvoiceNumber.$anyDirty&&!e.$v.newInvoiceNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newInvoiceNumber.$anyDirty&&!e.$v.newInvoiceNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"date",id:"inputStyle",placeholder:"Invoice Date"},model:{value:e.newInvoiceDate,callback:function(t){e.newInvoiceDate=t},expression:"newInvoiceDate"}}),e.$v.newInvoiceDate.$anyDirty&&!e.$v.newInvoiceDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Invoice Amount"},model:{value:e.newInvoiceAmount,callback:function(t){e.newInvoiceAmount=t},expression:"newInvoiceAmount"}}),e.$v.newInvoiceAmount.$anyDirty&&!e.$v.newInvoiceAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newInvoiceAmount.$anyDirty&&!e.$v.newInvoiceAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Withholding Tax:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.wths,reduce:function(e){return e.withholdingTaxCodeId},label:"withholdingTaxCode",clearable:!1},model:{value:e.newWTH,callback:function(t){e.newWTH=t},expression:"newWTH"}}),e.$v.newWTH.$anyDirty&&!e.$v.newWTH.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-particular-modal",title:"Edit Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("PO Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"PO Number"},model:{value:e.editParticular.poNumber,callback:function(t){e.$set(e.editParticular,"poNumber",t)},expression:"editParticular.poNumber"}}),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.poNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.poNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Invoice Number"},model:{value:e.editParticular.invoiceNumber,callback:function(t){e.$set(e.editParticular,"invoiceNumber",t)},expression:"editParticular.invoiceNumber"}}),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.invoiceNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.invoiceNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"date",id:"inputStyle",placeholder:"Invoice Date"},model:{value:e.editParticular.invoiceDate,callback:function(t){e.$set(e.editParticular,"invoiceDate",t)},expression:"editParticular.invoiceDate"}}),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.invoiceDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Invoice Amount"},model:{value:e.editParticular.invoiceAmount,callback:function(t){e.$set(e.editParticular,"invoiceAmount",t)},expression:"editParticular.invoiceAmount"}}),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.invoiceAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.invoiceAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Withholding Tax:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5 pb-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.wths,reduce:function(e){return e.withholdingTaxCodeId},label:"withholdingTaxCode",clearable:!1},model:{value:e.editParticular.wht,callback:function(t){e.$set(e.editParticular,"wht",t)},expression:"editParticular.wht"}}),e.$v.editParticular.$anyDirty&&!e.$v.editParticular.wht.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},ti=[],ai=["#","CR No.","Amount","Date","Distributor","Actions"],ni=a("c1df"),ri=a("e966"),si=ri.bindWith(",","."),ii=cr["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),oi=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),ci=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9â± ,. ]*$/),li=["#","PO Number","Invoice No.","Invoice Date","Invoice Amount","WHT","Amount Paid","Actions"],ui=new Date,di=a("9f25"),mi={name:"payment-advice-list",components:{},data:function(){return{columns:[{label:"CR No",field:"crNumber"},{label:"Amount",field:"paymentAmount"},{label:"Date",field:"paymentAdviceDate"},{label:"Distributor",field:"distributor"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,loadError:!1,paymentAdviceTable:{title:"Payment Advice Table",subTitle:"",columns:[].concat(ai)},paymentAdviceCount:0,paymentAdvices:[],distributors:[],currentPage:1,searchTerm:"",searching:!1,requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",paymentAdviceDate:ni().format("YYYY-MM"),maxDate:ni().format("YYYY-MM"),pageNum:1,edit:{id:"",paymentAdviceId:"",distributor:"",date:"",crNumber:"",checkNumber:"",checkReference:"",paymentAmount:""},particularsTable:{title:"Particulars Table",subTitle:"",columns:[].concat(li)},particulars:[],banks:[],bank:"",bankAccounts:[],bankAccount:"",checkSeries:[],series:"",checkNumbers:[],checkNumber:"",newPONumber:"",newInvoiceNumber:"",newInvoiceDate:ni().format("YYYY-MM-DD"),newInvoiceAmount:"",newWTH:"",wths:[],editParticular:{id:"",particularId:"",poNumber:"",invoiceNumber:"",invoiceDate:ni().format("YYYY-MM-DD"),invoiceAmount:"",wht:""}}},validations:{edit:{distributor:{required:cr["required"]},date:{required:cr["required"]},crNumber:{required:cr["required"],alphaNumCustomValidator:ii},checkNumber:{required:cr["required"],numCustomValidator:oi},paymentAmount:{required:cr["required"],amountCustomValidator:ci}},bank:{required:cr["required"]},bankAccount:{required:cr["required"]},series:{required:cr["required"]},checkNumber:{required:cr["required"]},newPONumber:{required:cr["required"],alphaNumCustomValidator:ii},newInvoiceNumber:{required:cr["required"],alphaNumCustomValidator:ii},newInvoiceDate:{required:cr["required"]},newInvoiceAmount:{required:cr["required"],amountCustomValidator:ci},newWTH:{required:cr["required"]},editParticular:{poNumber:{required:cr["required"],alphaNumCustomValidator:ii},invoiceNumber:{required:cr["required"],alphaNumCustomValidator:ii},invoiceDate:{required:cr["required"]},invoiceAmount:{required:cr["required"],amountCustomValidator:ci},wht:{required:cr["required"]}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedPaymentAdvice(1,""),e.getDistributors(),e.getUserRole(),e.getBanks(),e.getWTH();case 5:case"end":return t.stop()}}),t)})))()},methods:{getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=Vu.collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var n=Vu.collection("userRoles").where("userRoleId","==",a[0].userRoleReference),r=[];n.get().then((function(t){t.empty||(t.forEach((function(e){r.push(e.data())})),e.userRole=r[0].userRole)}))}))},getPaginatedPaymentAdvice:function(e,t){var a=this,n=null,r=[],s=[],i=ni(a.paymentAdviceDate).startOf("month").format("YYYY-MM-DD"),o=ni(a.paymentAdviceDate).endOf("month").format("YYYY-MM-DD");a.loading=!0,a.loadError=!1,a.paymentAdvices=[],a.pageNum=e,t&&(a.searching=!0),t?(t=t.toString(),"all"!=a.limit?n=Wu.collection("paymentAdvice").where("crNumber","==",t.toString()).orderBy("paymentAdviceDate","desc").limit(a.limit):"all"==a.limit&&(n=Wu.collection("paymentAdvice").where("bankCheckNumber","==",t.toString()).orderBy("paymentAdviceDate","desc"))):"all"!=a.limit?n=Wu.collection("paymentAdvice").where("paymentAdviceDate",">=",i).where("paymentAdviceDate","<=",o).orderBy("paymentAdviceDate","desc").limit(a.limit):"all"==a.limit&&(n=Wu.collection("paymentAdvice").where("paymentAdviceDate",">=",i).where("paymentAdviceDate","<=",o).orderBy("dateCreated","desc")),n.get().then((function(t){if(!t.empty){t.forEach((function(e){s.push(e.data()),r.push(e.id)}));for(var n=0;n<s.length;n++)s[n]["rowNum"]=1+n,s[n]["id"]=r[n],s[n].paymentAmount=si(parseFloat(s[n].paymentAmount).toFixed(2));for(var i=10*(e-1),o=10*e,c=i;c<o;c++)s[c]&&a.paymentAdvices.push(s[c]);a.paymentAdviceCount=s.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))},onPageChange:function(e){var t=this.searchTerm;this.getPaginatedPaymentAdvice(e,t)},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getPaginatedPaymentAdvice(1,"")},reloadData:function(){this.searchTerm="",this.searching=!1,this.getPaginatedPaymentAdvice(1,"")},search:function(){var e=this.searchTerm;e&&this.getPaginatedPaymentAdvice(1,e)},getDistributors:function(){var e=this,t=Eu.collection("distributors").orderBy("distributorName","asc");e.distributors=[],t.get().then((function(t){t.forEach((function(t){e.distributors.push(t.data())}))}))},openUpdatePaymentModal:function(e){var t=this;t.edit={id:e.id,paymentAdviceId:e.paymentAdviceId,distributor:e.distributorReference,date:e.paymentAdviceDate,crNumber:e.crNumber,checkNumber:e.checkNumber,paymentAmount:e.paymentAmount,checkReference:e.checkReference},t.getParticulars(e.paymentAdviceId),t.$bvModal.show("update-payment-advice-modal")},getParticulars:function(e){var t=this,a=[],n=Wu.collection("paymentAdviceParticulars").where("paymentAdviceReference","==",e);t.particulars=[],n.get().then((function(e){e.forEach((function(e){t.particulars.push(e.data()),a.push(e.id)})),t.loading=!0,t.loadError=!1;for(var n=function(e){var n=0,r=0,s=0,i=Eu.collection("withholdingTaxCode").where("withholdingTaxCodeId","==",t.particulars[e].whtReference);i.get().then((function(i){i.forEach((function(e){n=e.data().withholdingTaxRate})),t.particulars[e].invoiceAmount=t.particulars[e].invoiceAmount.replaceAll(",",""),r=parseFloat(t.particulars[e].invoiceAmount)/1.12*parseFloat(n),s=parseFloat(t.particulars[e].invoiceAmount)-parseFloat(r),t.particulars[e]["rowNum"]=e+1,t.particulars[e]["id"]=a[e],t.particulars[e].invoiceAmount=si(parseFloat(t.particulars[e].invoiceAmount).toFixed(2)),t.particulars[e]["wht"]=si(parseFloat(r).toFixed(2)),t.particulars[e]["amountPaid"]=si(parseFloat(s).toFixed(2))}))},r=0;r<t.particulars.length;r++)n(r);setTimeout((function(){t.loading=!1}),1500)}))},getBanks:function(){var e=this,t=Eu.collection("banks").orderBy("bank","asc");e.banks=[],t.get().then((function(t){t.forEach((function(t){e.banks.push(t.data())})),e.bank=e.banks[0].bankUid,e.getBankAccounts(e.banks[0].bankUid)}))},getBankAccounts:function(e){var t=this,a=Eu.collection("bankAccounts").where("bankReference","==",e).orderBy("bankAccountNumber","asc");t.bankAccounts=[],a.get().then((function(e){e.forEach((function(e){t.bankAccounts.push(e.data())})),t.bankAccount=t.bankAccounts[0].bankAccountUid,t.getCheckSeries(t.bank,t.bankAccount)}))},getCheckSeries:function(e,t){var a=this,n=Eu.collection("bankCheckSeries").where("bankReference","==",e).where("bankAccountReference","==",t).orderBy("bankCheckSeries","asc");a.checkSeries=[],n.get().then((function(e){e.forEach((function(e){a.checkSeries.push(e.data())})),a.series=a.checkSeries[0].bankCheckSeriesUid,a.getCheckNumber(a.bank,a.bankAccount,a.series,"used")}))},getCheckNumber:function(e,t,a,n){var r=this,s=Mu.collection("bankCheckSeriesReports").where("bankReference","==",e).where("bankAccountReference","==",t).where("checkSeriesReference","==",a).where("status","==",n).orderBy("checkNumber","asc");r.checkNumbers=[],r.checkNumber="",s.get().then((function(e){e.forEach((function(e){e.exists&&r.checkNumbers.push(e.data())})),0!=r.checkNumbers.length&&(r.checkNumber=r.checkNumbers[0].checkNumber)}))},changeCheckNumber:function(){var e=this;e.edit.checkNumber=e.checkNumber;for(var t=0;t<e.checkNumbers.length;t++)e.checkNumber==e.checkNumbers[t].checkNumber&&(e.edit.checkReference=e.checkNumbers[t].checkReference);e.$bvModal.hide("change-check-number-modal")},clearCheck:function(){this.edit.checkReference=""},getWTH:function(){var e=this,t=Eu.collection("withholdingTaxCode").orderBy("withholdingTaxCode","asc");e.wths=[],t.get().then((function(t){t.forEach((function(t){e.wths.push(t.data())})),e.newWTH=e.wths[0].withholdingTaxCodeId}))},addParticular:function(){var e=this,t=0,a=0;if(e.requestProcessing=!1,e.$v.newPONumber.$touch(),e.$v.newInvoiceNumber.$touch(),e.$v.newInvoiceDate.$touch(),e.$v.newInvoiceAmount.$touch(),e.$v.newWTH.$touch(),!e.$v.newPONumber.$error&&!e.$v.newInvoiceNumber.$error&&!e.$v.newInvoiceDate.$error&&!e.$v.newInvoiceAmount.$error&&!e.$v.newWTH.$error)try{e.requestProcessing=!0;var n="PAPI-"+ui.getFullYear()+di(ui.getMonth()+1,2)+ui.getDate()+"-"+Math.floor(1e6*Math.random());Wu.collection("paymentAdviceParticulars").doc().set({paymentAdviceParticularId:n,invoiceDate:ni(e.newInvoiceDate).format("YYYY-MM-DD"),invoiceAmount:e.newInvoiceAmount,poReference:e.newPONumber,invoiceReference:e.newInvoiceNumber,whtReference:e.newWTH,paymentAdviceReference:e.edit.paymentAdviceId,dateCreated:ui,dateModified:ui}).then((function(){e.newPONumber="",e.newInvoiceNumber="",e.newInvoiceDate=ni().format("YYYY-MM-DD"),e.newInvoiceAmount="",e.newWTH="",e.$v.newPONumber.$reset(),e.$v.newInvoiceNumber.$reset(),e.$v.newInvoiceDate.$reset(),e.$v.newInvoiceAmount.$reset(),e.$v.newWTH.$reset(),e.getWTH(),e.getParticulars(e.edit.paymentAdviceId),e.$swal({title:"Success",text:"New Particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var n=0;n<e.particulars.length;n++)t=e.particulars[n].amountPaid.replaceAll(",",""),a+=parseFloat(t.replaceAll(",",""));Wu.collection("paymentAdvice").doc(e.edit.id).update({paymentAmount:parseFloat(a).toFixed(2),dateModified:ui}).then((function(){e.edit.paymentAmount=si(parseFloat(a).toFixed(2)),e.requestProcessing=!1,e.$bvModal.hide("add-particular-modal")}))}))}))}catch(r){console.log(r),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},updatePaymentAdvice:function(){var e=this;if(e.$v.edit.$touch(),e.requestProcessing=!1,!e.$v.edit.$error)try{e.requestProcessing=!0;var t=Wu.collection("paymentAdvice").where("paymentAdviceId","!=",e.edit.paymentAdviceId).where("crNumber","==",e.edit.crNumber);t.get().then((function(t){t.empty?t&&Wu.collection("paymentAdvice").doc(e.edit.id).update({paymentAdviceDate:e.edit.date,crNumber:e.edit.crNumber,checkNumber:e.edit.checkNumber,checkReference:e.edit.checkReference,distributorReference:e.edit.distributor,dateModified:ui}).then((function(){e.$v.edit.$reset(),e.$swal({title:"Success",text:"Payment advice update successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.requestProcessing=!1,e.$bvModal.hide("update-payment-advice-modal"),e.getPaginatedPaymentAdvice(1,"")}))})):t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"CR Number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}catch(a){console.log(a),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},openEditParticularModal:function(e){var t=this;t.editParticular={id:e.id,particularId:e.paymentAdviceParticularId,poNumber:e.poReference,invoiceNumber:e.invoiceReference,invoiceDate:e.invoiceDate,invoiceAmount:e.invoiceAmount,wht:e.whtReference},t.$bvModal.show("edit-particular-modal")},updateParticular:function(){var e=this,t=0,a=0;if(e.requestProcessing=!1,e.$v.editParticular.$touch(),!e.$v.editParticular.$error){e.requestProcessing=!0;try{Wu.collection("paymentAdviceParticulars").doc(e.editParticular.id).update({poReference:e.editParticular.poNumber,invoiceReference:e.editParticular.invoiceNumber,invoiceDate:e.editParticular.invoiceDate,invoiceAmount:e.editParticular.invoiceAmount,whtReference:e.editParticular.wht,dateModified:ui}).then((function(){e.$v.editParticular.$reset(),e.getWTH(),e.getParticulars(e.edit.paymentAdviceId),e.$swal({title:"Success",text:"Particular update successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var n=0;n<e.particulars.length;n++)t=e.particulars[n].amountPaid.replaceAll(",",""),a+=parseFloat(t.replaceAll(",",""));Wu.collection("paymentAdvice").doc(e.edit.id).update({paymentAmount:parseFloat(a).toFixed(2),dateModified:ui}).then((function(){e.edit.paymentAmount=si(parseFloat(a).toFixed(2)),e.requestProcessing=!1,e.$bvModal.hide("edit-particular-modal")}))}))}))}catch(n){console.log(n),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},removeParticular:function(e){var t=this,a=0,n=0;this.$swal({title:"Are you sure?",text:"You want to remove this Particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value){t.requestProcessing=!0;try{Wu.collection("paymentAdviceParticulars").doc(e.id).delete().then((function(){t.getWTH(),t.getParticulars(t.edit.paymentAdviceId),t.$swal({title:"Success",text:"Remove update successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var e=0;e<t.particulars.length;e++)a=t.particulars[e].amountPaid.replaceAll(",",""),n+=parseFloat(a.replaceAll(",",""));Wu.collection("paymentAdvice").doc(t.edit.id).update({paymentAmount:parseFloat(n).toFixed(2),dateModified:ui}).then((function(){t.edit.paymentAmount=si(parseFloat(n).toFixed(2)),t.requestProcessing=!1}))}))}))}catch(s){console.log(s),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))}}},pi=mi,bi=Object(m["a"])(pi,ei,ti,!1,null,null,null),hi=bi.exports,fi=a("d4e0"),vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimDescs(1)}}},[e._v("Enabled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimDescs(0)}}},[e._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"reim-desc-table",attrs:{columns:e.columns,rows:e.reimDescs,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["description"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.description))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateReimDescModal(t.row)}}}),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return e.changeStatus(t.row.id,0,"Disable")}}}):e._e(),0==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable"},on:{click:function(a){return e.changeStatus(t.row.id,1,"Enable")}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.reimDescs.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedReimDescs(e.stat)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-reim-desc-modal",modifiers:{"new-reim-desc-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Reimbursement Description")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-reim-desc-modal",title:"New Reimbursement Description",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addReimDesc(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-reim-desc-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.newDesc,callback:function(t){e.newDesc=t},expression:"newDesc"}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-reim-desc-modal",title:"Edit Reimbursement Description",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateReimDesc(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-reim-desc-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.edit.desc,callback:function(t){e.$set(e.edit,"desc",t)},expression:"edit.desc"}}),e.$v.edit.$anyDirty&&!e.$v.edit.desc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.desc.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},wi=[],Ci=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),gi=["#","Reimbursement Description","Actions"],ki=a("c1df"),yi=new Date,$i=a("9f25"),_i={components:{},name:"reim-desc",data:function(){return{columns:[{label:"Reimbursement Description",field:"description"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"80px"}],loading:!0,loadError:!1,reimDescTable:{title:"Reimbursement Description Table",subTitle:"",columns:[].concat(gi)},reimDescsCount:0,reimDescs:[],stat:1,currentPage:1,searchTerm:"",searching:!1,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newDesc:"",edit:{id:"",reimDescId:"",desc:""}}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=Vu.collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedReimDescs(1);case 1:case"end":return t.stop()}}),t)})))()},computed:Object($t["a"])({},Object(ne["b"])({users:"Users/users"})),validations:{newDesc:{required:cr["required"],alphaNumCustomValidator:Ci},edit:{desc:{required:cr["required"],alphaNumCustomValidator:Ci}}},methods:{getPaginatedReimDescs:function(e){var t=this,a=null,n=[],r=[];t.loading=!0,t.loadError=!1,t.reimDescs=[],t.stat=e,"all"!=t.limit?a=Eu.collection("reimbursementDescriptions").where("status","==",e).orderBy("dateCreated","asc").limit(t.limit):"all"==t.limit&&(a=Eu.collection("reimbursementDescriptions").where("status","==",e).orderBy("dateCreated","asc")),a.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data()),r.push(e.id)})),n.sort((function(e,t){return e.description-t.description}));for(var a=0;a<n.length;a++)n[a]["rowNum"]=1+a,n[a]["id"]=r[a],n[a].dateCreated=ki.unix(n[a].dateCreated.seconds),t.reimDescs.push(n[a])}setTimeout((function(){t.loading=!1}),1e3)}))},addReimDesc:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDesc.$touch(),!e.$v.newDesc.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("reimbursementDescriptions").where("description","==",Object(re["a"])(e.newDesc)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="RDI-"+yi.getFullYear()+$i(yi.getMonth()+1,2)+yi.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("reimbursementDescriptions").doc().set({reimbursementDescId:r,description:Object(re["a"])(e.newDesc),userReference:n[0].userId,status:1,dateCreated:yi,dateModified:yi}).then((function(){e.newDesc="",e.requestProcessing=!1,e.$v.newDesc.$reset(),e.$bvModal.hide("new-reim-desc-modal"),e.$refs["reim-desc-table"].reset(),e.getPaginatedReimDescs(1),e.$swal({title:"Success",text:"New reimbursement description added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Reimbursement description already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateReimDescModal:function(e){this.edit={id:e.id,reimDescId:e.reimbursementDescId,desc:e.description},this.$bvModal.show("update-reim-desc-modal")},updateReimDesc:function(){var e=this;if(e.requestProcessing=!0,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;t=Eu.collection("reimbursementDescriptions").where("description","==",Object(re["a"])(e.edit.desc)).where("reimbursementDescId","!=",e.edit.reimDescId),t.get().then((function(t){if(t.empty){if(t)try{Eu.collection("reimbursementDescriptions").doc(e.edit.id).update({description:Object(re["a"])(e.edit.desc),dateModified:yi}).then((function(){e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-reim-desc-modal"),e.requestProcessing=!1,e.$refs["reim-desc-table"].reset(),e.getPaginatedReimDescs(1),e.$swal({title:"Success",text:"Reimbursement description updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Reimbursement description already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},changeStatus:function(e,t,a){var n=this;n.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value)try{Eu.collection("reimbursementDescriptions").doc(e).update({status:t,dateModified:yi}).then((function(){n.$swal({title:"Success",text:"Reimbursement description status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){n.$refs["reim-desc-table"].reset(),n.getPaginatedReimDescs(t)}))}))}catch(s){console.log(s),n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},xi=_i,Ai=(a("069b"),Object(m["a"])(xi,vi,wi,!1,null,null,null)),Di=Ai.exports,Pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedLiquidationDescs(1)}}},[e._v("Enabled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedLiquidationDescs(0)}}},[e._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"liquidation-desc-table",attrs:{columns:e.columns,rows:e.liquidationDescs,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["description"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.description))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateLiquidationDescModal(t.row)}}}),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return e.changeStatus(t.row.id,0,"Disable")}}}):e._e(),0==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable"},on:{click:function(a){return e.changeStatus(t.row.id,1,"Enable")}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.liquidationDescs.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedLiquidationDescs(e.stat)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-liquidation-desc-modal",modifiers:{"new-liquidation-desc-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Liquidation Description")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-liquidation-desc-modal",title:"New Liquidation Description",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addLiquidationDesc(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-liquidation-desc-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.newDesc,callback:function(t){e.newDesc=t},expression:"newDesc"}}),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDesc.$anyDirty&&!e.$v.newDesc.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-liquidation-desc-modal",title:"Edit Liquidation Description",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateLiquidationDesc(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-liquidation-desc-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.edit.desc,callback:function(t){e.$set(e.edit,"desc",t)},expression:"edit.desc"}}),e.$v.edit.$anyDirty&&!e.$v.edit.desc.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.desc.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},Ni=[],Ti=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),Ri=["#","Liquidation Description","Actions"],Ii=a("c1df"),Si=new Date,qi=a("9f25"),Bi={components:{},name:"liquidation-desc",data:function(){return{columns:[{label:"Liquidation Description",field:"description"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"80px"}],loading:!0,loadError:!1,liquidationDescTable:{title:"Liquidation Description Table",subTitle:"",columns:[].concat(Ri)},liquidationDescsCount:0,liquidationDescs:[],stat:1,currentPage:1,searchTerm:"",searching:!1,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newDesc:"",edit:{id:"",liquidationDescId:"",desc:""}}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=Vu.collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedLiquidationDescs(1);case 1:case"end":return t.stop()}}),t)})))()},computed:Object($t["a"])({},Object(ne["b"])({users:"Users/users"})),validations:{newDesc:{required:cr["required"],alphaNumCustomValidator:Ti},edit:{desc:{required:cr["required"],alphaNumCustomValidator:Ti}}},methods:{getPaginatedLiquidationDescs:function(e){var t=this,a=null,n=[],r=[];t.loading=!0,t.loadError=!1,t.liquidationDescs=[],t.stat=e,"all"!=t.limit?a=Eu.collection("liquidationDescriptions").where("status","==",e).orderBy("dateCreated","asc").limit(t.limit):"all"==t.limit&&(a=Eu.collection("liquidationDescriptions").where("status","==",e).orderBy("dateCreated","asc")),a.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data()),r.push(e.id)})),n.sort((function(e,t){return e.description-t.description}));for(var a=0;a<n.length;a++)n[a]["rowNum"]=1+a,n[a]["id"]=r[a],n[a].dateCreated=Ii.unix(n[a].dateCreated.seconds),t.liquidationDescs.push(n[a])}setTimeout((function(){t.loading=!1}),1e3)}))},addLiquidationDesc:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDesc.$touch(),!e.$v.newDesc.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("liquidationDescriptions").where("description","==",Object(re["a"])(e.newDesc)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="LDI-"+Si.getFullYear()+qi(Si.getMonth()+1,2)+Si.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("liquidationDescriptions").doc().set({liquidationDescId:r,description:Object(re["a"])(e.newDesc),userReference:n[0].userId,status:1,dateCreated:Si,dateModified:Si}).then((function(){e.newDesc="",e.requestProcessing=!1,e.$v.newDesc.$reset(),e.$bvModal.hide("new-liquidation-desc-modal"),e.$refs["liquidation-desc-table"].reset(),e.getPaginatedLiquidationDescs(1),e.$swal({title:"Success",text:"New liquidation description added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Liquidation description already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateLiquidationDescModal:function(e){this.edit={id:e.id,liquidationDescId:e.liquidationDescId,desc:e.description},this.$bvModal.show("update-liquidation-desc-modal")},updateLiquidationDesc:function(){var e=this;if(e.requestProcessing=!0,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;t=Eu.collection("liquidationDescriptions").where("description","==",Object(re["a"])(e.edit.desc)).where("liquidationDescId","!=",e.edit.liquidationDescId),t.get().then((function(t){if(t.empty){if(t)try{Eu.collection("liquidationDescriptions").doc(e.edit.id).update({description:Object(re["a"])(e.edit.desc),dateModified:Si}).then((function(){e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-liquidation-desc-modal"),e.requestProcessing=!1,e.$refs["liquidation-desc-table"].reset(),e.getPaginatedLiquidationDescs(1),e.$swal({title:"Success",text:"Liquidation description updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Liquidation description already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},changeStatus:function(e,t,a){var n=this;n.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value)try{Eu.collection("liquidationDescriptions").doc(e).update({status:t,dateModified:Si}).then((function(){n.$swal({title:"Success",text:"Liquidation description status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){n.getPaginatedLiquidationDescs(t)}))}))}catch(s){console.log(s),n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},Mi=Bi,Oi=(a("a3e7"),Object(m["a"])(Mi,Pi,Ni,!1,null,null,null)),Ei=Oi.exports,Fi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Departments:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:e.maxDate},model:{value:e.newDate,callback:function(t){e.newDate=t},expression:"newDate"}}),e.$v.newDate.$anyDirty&&!e.$v.newDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.departments,reduce:function(e){return e.departmentUid},label:"departmentName",clearable:!1},on:{input:function(t){return e.getNames(e.newDepartment)}},model:{value:e.newDepartment,callback:function(t){e.newDepartment=t},expression:"newDepartment"}}),e.$v.newDepartment.$anyDirty&&!e.$v.newDepartment.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("To:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("From:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[0!=e.names.length?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.names,reduce:function(e){return e.userId},label:"name",clearable:!1},model:{value:e.newTo,callback:function(t){e.newTo=t},expression:"newTo"}}),e.$v.newTo.$anyDirty&&!e.$v.newTo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1):e._e(),0==e.names.length?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Employee")])]):e._e(),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"From",id:"inputStyle"},model:{value:e.newFrom,callback:function(t){e.newFrom=t},expression:"newFrom"}}),e.$v.newFrom.$anyDirty&&!e.$v.newFrom.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newFrom.$anyDirty&&!e.$v.newFrom.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount Received:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Total Petty Cash:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount Received",id:"inputStyle"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Petty Cash",id:"inputStyle"},model:{value:e.newTotalPetty,callback:function(t){e.newTotalPetty=t},expression:"newTotalPetty"}}),e.$v.newTotalPetty.$anyDirty&&!e.$v.newTotalPetty.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Received by:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.types,reduce:function(e){return e.typeId},label:"typeName",clearable:!1},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Received by",id:"inputStyle"},model:{value:e.newReceivedBy,callback:function(t){e.newReceivedBy=t},expression:"newReceivedBy"}}),e.$v.newReceivedBy.$anyDirty&&!e.$v.newReceivedBy.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newReceivedBy.$anyDirty&&!e.$v.newReceivedBy.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},["check"==e.newType?a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check No:")]),a("b",{staticClass:"text-red"},[e._v("*")])]):e._e()]),a("div",{staticClass:"form-group row mb-0"},["check"==e.newType?a("div",{staticClass:" col-sm-4 pl-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"Check Number"},on:{input:e.clearCheck},model:{value:e.newCheckNumber,callback:function(t){e.newCheckNumber=t},expression:"newCheckNumber"}}),e.$v.newCheckNumber.$anyDirty&&!e.$v.newCheckNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newCheckNumber.$anyDirty&&!e.$v.newCheckNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e(),"check"==e.newType?a("div",{staticClass:" col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.choose-check-number-modal",modifiers:{"choose-check-number-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing}},[e._v("Choose")])],1):e._e()]),a("hr"),a("div",{staticClass:"text-right"},[a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addPettyCash(t)}}},[e._v("Save")])],1),a("b-modal",{attrs:{size:"lg",id:"choose-check-number-modal",title:"Choose Check Number",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.chooseCheckNumber(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" OK ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("choose-check-number-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Account:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.banks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getBankAccounts(e.bank)}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}),e.$v.bank.$anyDirty&&!e.$v.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getCheckSeries(e.bank,e.bankAccount)}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}),e.$v.bankAccount.$anyDirty&&!e.$v.bankAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==e.checkSeries||""==e.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Series")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{input:"inputStyle",options:e.checkSeries,reduce:function(e){return e.bankCheckSeriesUid},label:"bankCheckSeries",clearable:!1},on:{input:function(t){return e.getCheckNumber(e.bank,e.bankAccount,e.series,"used")}},model:{value:e.series,callback:function(t){e.series=t},expression:"series"}}),e.$v.series.$anyDirty&&!e.$v.series.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.checkSeries||""==e.bankAccounts||""==e.checkNumbers?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Check Number")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.checkNumbers,reduce:function(e){return e.checkNumber},label:"checkNumber",clearable:!1},model:{value:e.checkNumber,callback:function(t){e.checkNumber=t},expression:"checkNumber"}}),e.$v.checkNumber.$anyDirty&&!e.$v.checkNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},Yi=[],Vi=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ,. ]*$/),Ui=cr["helpers"].regex("alphaNumAndDot",/^[ -.A-Za-z ]*$/),ji=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),Wi=a("c1df"),Ki=new Date,zi=a("9f25"),Li={name:"new-petty-cash",components:{},data:function(){return{newDate:Wi().format("YYYY-MM-DD"),maxDate:Wi().format("YYYY-MM-DD"),departments:[],names:[],newDepartment:"",newTo:"",newFrom:"",newAmount:"",newTotalPetty:"",types:[{typeId:"cash",typeName:"Cash"},{typeId:"check",typeName:"Check"}],newType:"cash",newReceivedBy:"",newCheckNumber:"",newCheckReference:"",banks:[],bank:"",bankAccounts:[],bankAccount:"",checkSeries:[],series:"",checkNumbers:[],checkNumber:"",requestProcessing:!1}},validations:{newDate:{required:cr["required"]},newDepartment:{required:cr["required"]},newTo:{required:cr["required"]},newFrom:{required:cr["required"],alphaCustomValidator:Ui},newAmount:{required:cr["required"],amountCustomValidator:Vi},newTotalPetty:{amountCustomValidator:Vi},newType:{required:cr["required"]},newReceivedBy:{required:cr["required"],alphaCustomValidator:Ui},newCheckNumber:{required:cr["required"],numCustomValidator:ji},bank:{required:cr["required"]},bankAccount:{required:cr["required"]},series:{required:cr["required"]},checkNumber:{required:cr["required"]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDepartments(),e.getBanks();case 2:case"end":return t.stop()}}),t)})))()},methods:{getDepartments:function(){var e=this,t=this,a=Vu.collection("departments").orderBy("departmentName","asc");t.departments=[],a.get().then((function(a){a.forEach((function(e){t.departments.push(e.data())})),t.newDepartment=t.departments[0].departmentUid,e.getNames(t.departments[0].departmentUid)}))},getNames:function(e){var t=this,a=Vu.collection("users").where("status","==",1).where("departmentReference","==",e).orderBy("lastname","asc");t.names=[],a.get().then((function(e){e.forEach((function(e){t.names.push(e.data())}));for(var a=0;a<t.names.length;a++)t.names[a]["name"]=t.names[a].lastname+", "+t.names[a].firstname;0!=t.names.length&&(t.newTo=t.names[0].userId)}))},clearCheck:function(){this.checkReference=""},getBanks:function(){var e=this,t=Eu.collection("banks").orderBy("bank","asc");e.banks=[],t.get().then((function(t){t.forEach((function(t){e.banks.push(t.data())})),e.bank=e.banks[0].bankUid,e.getBankAccounts(e.banks[0].bankUid)}))},getBankAccounts:function(e){var t=this,a=Eu.collection("bankAccounts").where("bankReference","==",e).orderBy("bankAccountNumber","asc");t.bankAccounts=[],a.get().then((function(e){e.forEach((function(e){t.bankAccounts.push(e.data())})),t.bankAccount=t.bankAccounts[0].bankAccountUid,t.getCheckSeries(t.bank,t.bankAccount)}))},getCheckSeries:function(e,t){var a=this,n=Eu.collection("bankCheckSeries").where("bankReference","==",e).where("bankAccountReference","==",t).orderBy("bankCheckSeries","asc");a.checkSeries=[],n.get().then((function(e){e.forEach((function(e){a.checkSeries.push(e.data())})),a.series=a.checkSeries[0].bankCheckSeriesUid,a.getCheckNumber(a.bank,a.bankAccount,a.series,"used")}))},getCheckNumber:function(e,t,a,n){var r=this,s=Mu.collection("bankCheckSeriesReports").where("bankReference","==",e).where("bankAccountReference","==",t).where("checkSeriesReference","==",a).where("status","==",n).orderBy("checkNumber","asc");r.checkNumbers=[],r.checkNumber="",s.get().then((function(e){e.forEach((function(e){e.exists&&r.checkNumbers.push(e.data())})),0!=r.checkNumbers.length&&(r.checkNumber=r.checkNumbers[0].checkNumber)}))},chooseCheckNumber:function(){var e=this;e.newCheckNumber=e.checkNumber;for(var t=0;t<e.checkNumbers.length;t++)e.checkNumber==e.checkNumbers[t].checkNumber&&(e.newCheckReference=e.checkNumbers[t].checkReference);e.$bvModal.hide("choose-check-number-modal")},addPettyCash:function(){var e=this;try{e.requestProcessing=!1,e.$v.newDate.$touch(),e.$v.newDepartment.$touch(),e.$v.newTo.$touch(),e.$v.newFrom.$touch(),e.$v.newAmount.$touch(),e.$v.newTotalPetty.$touch(),e.$v.newType.$touch(),e.$v.newCheckNumber.$touch();var t=!1;if("cash"==e.newType?e.$v.newDate.$error&&e.$v.newDepartment.$error&&e.$v.newTo.$error&&e.$v.newFrom.$error&&e.$v.newAmount.$error&&e.$v.newTotalPetty.$error&&(t=!0):"check"==e.newType&&e.$v.newDate.$error&&e.$v.newDepartment.$error&&e.$v.newTo.$error&&e.$v.newFrom.$error&&e.$v.newAmount.$error&&e.$v.newTotalPetty.$error&&e.$v.newCheckNumber.$error&&(t=!0),!t){e.requestProcessing=!0;var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=Uu.collection("pettyCash").orderBy("pettyCashDate","desc"),r=[],s=[],i=[],o="PCID-"+Ki.getFullYear()+zi(Ki.getMonth()+1,2)+Ki.getDate()+"-"+Math.floor(1e6*Math.random()),c=Uu.collection("pettyCash").where("departmentReference","==",e.newDepartment).orderBy("pettyCashNumber","desc");c.limit(1).get().then((function(t){t.empty?t&&a.get().then((function(t){t.forEach((function(e){e.exists&&r.push(e.data())})),n.limit(1).get().then((function(t){t.forEach((function(e){e.exists&&s.push(e.data())}));var a="",n=new Date;0!=s.length?(a=zi(parseInt(s[0].pettyCashNumber.slice(5))+1,2),"100"==a.toString()&&(a="01")):a="01",Uu.collection("pettyCash").doc().set({pettyCashId:o,pettyCashNumber:zi(n.getMonth()+1)+""+n.getFullYear().toString().slice(2,4)+"-"+a,pettyCashDate:e.newDate,amountReceive:e.newAmount,type:e.newType,cashOnHand:e.newAmount,departmentReference:e.newDepartment,nameToReference:e.newTo,from:e.newFrom,receivedBy:e.newReceivedBy,checkReference:e.newCheckReference,status:1,userReference:r[0].userId,dateCreated:Ki,dateModified:Ki}).then((function(){e.newDate=Wi().format("YYYY-MM-DD"),e.newAmount="",e.newType="cash",e.newDepartment="",e.newTo="",e.newFrom="",e.newReceivedBy="",e.newCheckNumber="",e.newCheckReference="",e.$v.newDate.$reset(),e.$v.newDepartment.$reset(),e.$v.newAmount.$reset(),e.$v.newType.$reset(),e.$v.newTo.$reset(),e.$v.newFrom.$reset(),e.$v.newCheckNumber.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New Petty Cash added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/petty/cash/"+o)}))}))}))})):(t.forEach((function(e){i.push(e.data())})),1==i[0].status||2==i[0].status?(e.requestProcessing=!1,e.$swal({title:"Not valid",text:"You have current petty cash.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):3==i[0].status&&a.get().then((function(t){t.forEach((function(e){e.exists&&r.push(e.data())})),n.limit(1).get().then((function(t){t.forEach((function(e){e.exists&&s.push(e.data())}));var a="",n=new Date,c=parseFloat(e.newAmount.replaceAll(",","")+parseFloat(i[0].cashOnHand.replaceAll(",","")));c=parseFloat(c).toFixed(2),0!=s.length?(a=zi(parseInt(s[0].pettyCashNumber.slice(5))+1,2),"100"==a.toString()&&(a="01")):a="01",Uu.collection("pettyCash").doc().set({pettyCashId:o,pettyCashNumber:zi(n.getMonth()+1)+""+n.getFullYear().toString().slice(2,4)+"-"+a,pettyCashDate:e.newDate,amountReceive:e.newAmount,totalPetty:e.newTotalPetty,type:e.newType,cashOnHand:c,departmentReference:e.newDepartment,nameToReference:e.newTo,from:e.newFrom,receivedBy:e.newReceivedBy,checkReference:e.newCheckReference,status:1,userReference:r[0].userId,dateCreated:Ki,dateModified:Ki}).then((function(){e.newDate=Wi().format("YYYY-MM-DD"),e.newAmount="",e.newTotalPetty="",e.newType="cash",e.newDepartment="",e.newTo="",e.newFrom="",e.newReceivedBy="",e.newCheckNumber="",e.newCheckReference="",e.$v.newDate.$reset(),e.$v.newDepartment.$reset(),e.$v.newAmount.$reset(),e.$v.newTotalPetty.$reset(),e.$v.newType.$reset(),e.$v.newTo.$reset(),e.$v.newFrom.$reset(),e.$v.newCheckNumber.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New Petty Cash added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/petty/cash/"+o)}))}))}))})))}))}}catch(l){console.log(l),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}},Qi=Li,Hi=(a("6910"),Object(m["a"])(Qi,Fi,Yi,!1,null,null,null)),Gi=Hi.exports,Zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Distributor:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("PO Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.distributors,reduce:function(e){return e.distributorId},label:"distributorName",clearable:!1},on:{input:function(t){return e.getItems(e.newDistributor)}},model:{value:e.newDistributor,callback:function(t){e.newDistributor=t},expression:"newDistributor"}}),e.$v.newDistributor.$anyDirty&&!e.$v.newDistributor.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-distributor-modal",modifiers:{"new-distributor-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newPODate,callback:function(t){e.newPODate=t},expression:"newPODate"}}),e.$v.newPODate.$anyDirty&&!e.$v.newPODate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Terms:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Expected Delivery Date:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newTerms,callback:function(t){e.newTerms=t},expression:"newTerms"}}),e.$v.newTerms.$anyDirty&&!e.$v.newTerms.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTerms.$anyDirty&&!e.$v.newTerms.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newExDeliveryDate,callback:function(t){e.newExDeliveryDate=t},expression:"newExDeliveryDate"}})],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Delivery Address:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Total Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newDeliveryAddress,expression:"newDeliveryAddress"}],staticClass:"pl-2",attrs:{rows:"2",cols:"49",id:"inputStyle",placeholder:"Delivery Address"},domProps:{value:e.newDeliveryAddress},on:{input:function(t){t.target.composing||(e.newDeliveryAddress=t.target.value)}}}),a("br"),e.$v.newDeliveryAddress.$anyDirty&&!e.$v.newDeliveryAddress.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",disabled:""},model:{value:e.newTotalAmount,callback:function(t){e.newTotalAmount=t},expression:"newTotalAmount"}}),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-po-item-modal",modifiers:{"new-po-item-modal":!0}}],staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add Item")])],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Items")])])]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.poItems,"search-options":{enabled:!1},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["itemReference"==t.column.field?a("span",e._l(e.items,(function(n){return a("span",{key:n.productId},[n.productId==t.row.itemReference?a("span",[e._v(e._s(n.productName))]):e._e()])})),0):e._e(),"description"==t.column.field?a("span",[a("span",[e._v(e._s(""==t.row.description?"----------":t.row.description))])]):e._e(),"quantity"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.quantity))])]):e._e(),"unitPrice"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.unitPrice))])]):e._e(),"amount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.amount))])]):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return e.removeItem(t.row)}}})]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addPurchaseOrder(t)}}},[e._v("Save")])],1),a("b-modal",{attrs:{size:"lg",id:"new-distributor-modal",title:"New Distributor",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addDistributor(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-distributor-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Distributor:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Address:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Distributor"},model:{value:e.newDistributorName,callback:function(t){e.newDistributorName=t},expression:"newDistributorName"}}),e.$v.newDistributorName.$anyDirty&&!e.$v.newDistributorName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDistributorName.$anyDirty&&!e.$v.newDistributorName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:e.newAddress},on:{input:function(t){t.target.composing||(e.newAddress=t.target.value)}}}),e.$v.newAddress.$anyDirty&&!e.$v.newAddress.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:e.newTinNumber,callback:function(t){e.newTinNumber=t},expression:"newTinNumber"}}),e.$v.newTinNumber.$anyDirty&&!e.$v.newTinNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:e.newContactNumber,callback:function(t){e.newContactNumber=t},expression:"newContactNumber"}}),e.$v.newContactNumber.$anyDirty&&!e.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Person:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Email Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Person"},model:{value:e.newContactPerson,callback:function(t){e.newContactPerson=t},expression:"newContactPerson"}}),e.$v.newContactPerson.$anyDirty&&!e.$v.newContactPerson.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:e.newEmailAddress,callback:function(t){e.newEmailAddress=t},expression:"newEmailAddress"}}),e.$v.newEmailAddress.$anyDirty&&!e.$v.newEmailAddress.email?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"xl",id:"new-po-item-modal",title:"Add PO Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addPOItems(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-po-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Items:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.items,reduce:function(e){return e.productId},label:"productName",clearable:!1},on:{input:function(t){return e.changeItem(e.newPOItem)}},model:{value:e.newPOItem,callback:function(t){e.newPOItem=t},expression:"newPOItem"}}),e.$v.newPOItem.$anyDirty&&!e.$v.newPOItem.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newPODescription,expression:"newPODescription"}],staticClass:"pl-2",attrs:{rows:"2",cols:"59",id:"inputStyle",placeholder:"Description"},domProps:{value:e.newPODescription},on:{input:function(t){t.target.composing||(e.newPODescription=t.target.value)}}})])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.newPOQuantity,e.newPOUnitPrice,"add")}},model:{value:e.newPOQuantity,callback:function(t){e.newPOQuantity=t},expression:"newPOQuantity"}}),e.$v.newPOQuantity.$anyDirty&&!e.$v.newPOQuantity.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPOQuantity.$anyDirty&&!e.$v.newPOQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.newPOQuantity,e.newPOUnitPrice,"add")}},model:{value:e.newPOUnitPrice,callback:function(t){e.newPOUnitPrice=t},expression:"newPOUnitPrice"}}),e.$v.newPOUnitPrice.$anyDirty&&!e.$v.newPOUnitPrice.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPOUnitPrice.$anyDirty&&!e.$v.newPOUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",disabled:""},model:{value:e.newPOAmount,callback:function(t){e.newPOAmount=t},expression:"newPOAmount"}}),e.$v.newPOAmount.$anyDirty&&!e.$v.newPOAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPOAmount.$anyDirty&&!e.$v.newPOAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},Ji=[],Xi=a("c1df"),eo=new Date,to=a("9f25"),ao=cr["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),no=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z. ]*$/),ro=cr["helpers"].regex("alphaNumAndDot",/^[ -. 0-9 ]*$/),so=cr["helpers"].regex("alphaNumAndDot",/^[ ,. 0-9 ]*$/),io=a("e966"),oo=io.bindWith(",","."),co={name:"new-purchase-order",components:{},data:function(){return{loading:!1,newDistributor:"",newDeliveryAddress:"",newTerms:"",newPODate:Xi().format("YYYY-MM-DD"),newExDeliveryDate:"",newTotalAmount:"",newDistributorName:"",newAddress:"",newTinNumber:"",newContactNumber:"",newContactPerson:"",newEmailAddress:"",requestProcessing:!1,newPOItem:"",newPODescription:"",newPOQuantity:"",newPOUnitPrice:"",newPOAmount:"",poItems:[],columns:[{label:"Item",field:"itemReference"},{label:"Description",field:"description"},{label:"Quantity",field:"quantity"},{label:"Unit Price",field:"unitPrice"},{label:"Amount",field:"amount"},{label:"",field:"action",width:"50px"}]}},computed:Object($t["a"])({},Object(ne["b"])({distriValid:"Sales/valid",distriError:"Sales/error",distributors:"Sales/distributor",items:"Products/product",error:"PurchaseOrders/error"})),validations:{newDistributor:{required:cr["required"]},newDeliveryAddress:{required:cr["required"]},newTerms:{required:cr["required"],alphaNumCustomValidator:ao},newPODate:{required:cr["required"]},newTotalAmount:{required:cr["required"],amountCustomValidator:so},newDistributorName:{required:cr["required"],alphaNumCustomValidator:ao},newAddress:{required:cr["required"]},newTinNumber:{numCustomValidator:ro},newContactNumber:{numCustomValidator:ro},newContactPerson:{alphaCustomValidator:no},newEmailAddress:{email:cr["email"]},newPOItem:{required:cr["required"]},newPOQuantity:{required:cr["required"],numCustomValidator:ro},newPOUnitPrice:{required:cr["required"],amountCustomValidator:so},newPOAmount:{required:cr["required"],amountCustomValidator:so}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getCompany(),e.getDistributors();case 2:case"end":return t.stop()}}),t)})))()},methods:{getCompany:function(){var e=this,t=[],a=Eu.collection("companyProfile");e.company=[],a.get().then((function(a){a.forEach((function(e){t.push(e.data())})),e.newDeliveryAddress=t[0].address}))},getDistributors:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$store.dispatch("Sales/getDistributor");case 2:case"end":return t.stop()}}),t)})))()},addDistributor:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$v.newDistributorName.$touch(),a.$v.newAddress.$touch(),a.$v.newTinNumber.$touch(),a.$v.newContactNumber.$touch(),a.$v.newContactPerson.$touch(),a.$v.newEmailAddress.$touch(),a.$v.newDistributorName.$error||a.$v.newAddress.$error||a.$v.newTinNumber.$error||a.$v.newContactNumber.$error||a.$v.newContactPerson.$error||a.$v.newEmailAddress.$error||(a.requestProcessing=!0,n={distributorId:"",distributorName:Object(re["a"])(a.newDistributorName),address:a.newAddress,tin:a.newTinNumber,contactNumber:a.newContactNumber,contactPerson:a.newContactPerson,email:a.newEmailAddress,userReference:"",status:1,dateCreated:eo,dateModified:eo},a.$store.dispatch("Sales/checkDistributor",{validate:1,newDistributor:a.newDistributorName}).then((function(){setTimeout((function(){1==a.distriValid?a.validationMessage("Distributor"):0==a.distriValid&&a.$store.dispatch("Sales/checkDistributor",{validate:2,newTinNumber:a.newTinNumber}).then((function(){setTimeout((function(){1==a.distriValid?a.validationMessage("Tin"):0==a.distriValid&&a.$store.dispatch("Sales/checkDistributor",{validate:3,newContactNumber:a.newContactNumber}).then((function(){setTimeout((function(){1==a.distriValid?a.validationMessage("Contact number"):0==a.distriValid&&a.$store.dispatch("Sales/checkDistributor",{validate:4,newEmailAddress:a.newEmailAddress}).then((function(){setTimeout((function(){1==a.distriValid?a.validationMessage("Email address"):0==a.distriValid&&a.$store.dispatch("Sales/newDistributor",n).then((function(){a.requestProcessing=!1,setTimeout((function(){0==a.distriError?(a.newDistributorName="",a.newAddress="",a.newTinNumber="",a.newContactNumber="",a.newContactPerson="",a.newEmailAddress="",a.$v.newDistributorName.$reset(),a.$v.newAddress.$reset(),a.$v.newTinNumber.$reset(),a.$v.newContactNumber.$reset(),a.$v.newContactPerson.$reset(),a.$v.newEmailAddress.$reset(),a.getDistributors(),a.$bvModal.hide("new-distributor-modal"),a.$swal({title:"Success",text:"New distributor added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.distriError&&a.errorMessage()}),500)}))}),500)}))}),500)}))}),500)}))}),500)})));case 8:case"end":return t.stop()}}),t)})))()},validationMessage:function(e){var t=this;t.$swal({title:"Invalid",text:e+" already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1},errorMessage:function(){var e=this;e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},getItems:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t,n.newPOItem="",n.$store.dispatch("Products/getProduct",{distributor:e});case 3:case"end":return a.stop()}}),a)})))()},addProduct:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$v.newProduct.$touch(),a.$v.newPrice.$touch(),a.$v.newCategory.$touch(),a.$v.newProductDistributor.$touch(),a.$v.newProduct.$error||a.$v.newPrice.$error||a.$v.newCategory.$error||a.$v.newProductDistributor.$error||(a.requestProcessing=!0,n={productId:"",productName:Object(re["a"])(a.newProduct),price:a.newPrice.replaceAll(",",""),categoryReference:a.newCategory,distributorReference:a.newProductDistributor,unit:a.newUnit,userReference:"",status:1,dateCreated:eo,dateModified:eo},a.$store.dispatch("Products/checkProduct",{newProduct:a.newProduct}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Product"):0==a.valid&&a.$store.dispatch("Products/newProduct",n).then((function(){setTimeout((function(){0==a.error?(a.newProduct="",a.newPrice="",a.newCategory="",a.newProductDistributor="",a.newUnit="",a.requestProcessing=!1,a.$v.newProduct.$reset(),a.$v.newPrice.$reset(),a.$v.newCategory.$reset(),a.$v.newProductDistributor.$reset(),a.getItems(a.newDistributor),a.$swal({title:"Success",text:"New product added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}),500)}))}),500)})));case 6:case"end":return t.stop()}}),t)})))()},changeItem:function(e){for(var t=this,a=0;a<t.items.length;a++)t.items[a].productId==e&&(t.newPOUnitPrice=oo(t.items[a].price))},computeAmount:function(e,t,a){t=t.replaceAll(",",""),"add"==a&&(this.newPOAmount=t*e,this.newPOAmount=oo(parseFloat(this.newPOAmount).toFixed(2)))},addPOItems:function(){var e=this;if(e.$v.newPOItem.$touch(),e.$v.newPOQuantity.$touch(),e.$v.newPOUnitPrice.$touch(),e.$v.newPOAmount.$touch(),!e.$v.newPOItem.$error&&!e.$v.newPOQuantity.$error&&!e.$v.newPOUnitPrice.$error&&!e.$v.newPOAmount.$error){e.requestProcessing=!0,0==e.poItems.length&&(e.poItems=[]);var t={rowNum:"",itemReference:e.newPOItem,description:e.newPODescription,quantity:e.newPOQuantity,unitPrice:oo(e.newPOUnitPrice),amount:oo(e.newPOAmount)};e.poItems.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newPOItem="",e.newPODescription="",e.newPOQuantity="",e.newPOUnitPrice="",e.newPOAmount="",e.$v.newPOItem.$reset(),e.$v.newPOQuantity.$reset(),e.$v.newPOUnitPrice.$reset(),e.$v.newPOAmount.$reset(),e.$bvModal.hide("new-po-item-modal"),e.getPOItems()})),e.requestProcessing=!1}},getPOItems:function(){var e=this;if(e.loading=!1,0!=e.poItems.length){e.loading=!0,e.newTotalAmount=0;for(var t=0;t<e.poItems.length;t++)e.poItems[t].rowNum=t+1,e.newTotalAmount=parseFloat(e.newTotalAmount)+parseFloat(e.poItems[t].amount.replaceAll(",",""));e.newTotalAmount=oo(parseFloat(e.newTotalAmount).toFixed(2)),setTimeout((function(){e.loading=!1,e.requestProcessing=!1}),1e3)}else 0==e.poItems.length&&(e.poItems=[],e.newTotalAmount="")},removeItem:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this item",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&(t.requestProcessing=!0,t.loading=!0,t.poItems.splice(parseInt(e.rowNum-1),1),t.$swal({title:"Success",text:"Item remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getPOItems(),t.requestProcessing=!1})))}))},addPurchaseOrder:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.$v.newDistributor.$touch(),a.$v.newDeliveryAddress.$touch(),a.$v.newTerms.$touch(),a.$v.newPODate.$touch(),a.$v.newTotalAmount.$touch(),a.$v.newDistributor.$error||a.$v.newDeliveryAddress.$error||a.$v.newTerms.$error||a.$v.newPODate.$error||a.$v.newTotalAmount.$error||(a.requestProcessing=!0,n="POI-"+eo.getFullYear()+to(eo.getMonth()+1,2)+eo.getDate()+"-"+Math.floor(1e6*Math.random()),r={purchaseOrderId:n,poNumber:"",poDate:a.newPODate,totalAmount:a.newTotalAmount.replaceAll(",",""),deliveryAddress:a.newDeliveryAddress,deliveryDate:a.newExDeliveryDate,terms:a.newTerms,remarks:"",attention:"",distributorReference:a.newDistributor,status:1,userReference:"",dateCreated:eo,dateModified:eo},a.$store.dispatch("PurchaseOrders/newPurchaseOrder",r).then((function(){setTimeout((function(){if(0==a.error){if(0!=a.poItems.length)for(var e=0;e<a.poItems.length;e++){var t={purchaseOrderItemId:"",unitPrice:a.poItems[e].unitPrice,quantity:a.poItems[e].quantity,description:a.poItems[e].description,poReference:n,itemReference:a.poItems[e].itemReference,userReference:"",status:1,dateCreated:eo,dateModified:eo};a.$store.dispatch("PurchaseOrders/newPurchaseOrderItem",t)}a.newDistributor="",a.newDeliveryAddress="",a.newTerms="",a.newPODate="",a.newExDeliveryDate="",a.newTotalAmount="",a.poItems=[],a.$v.newDistributor.$reset(),a.$v.newDeliveryAddress.$reset(),a.$v.newTerms.$reset(),a.$v.newPODate.$reset(),a.requestProcessing=!1,a.$swal({title:"Success",text:"New purchase order added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}else 1==a.error&&a.errorMessage()}),1e3)})));case 7:case"end":return t.stop()}}),t)})))()}}},lo=co,uo=(a("13b6"),Object(m["a"])(lo,Zi,Ji,!1,null,null,null)),mo=uo.exports,po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("S.I. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newSINumber,callback:function(t){e.newSINumber=t},expression:"newSINumber"}}),e.$v.newSINumber.$anyDirty&&!e.$v.newSINumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSINumber.$anyDirty&&!e.$v.newSINumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newInvoiceDate,callback:function(t){e.newInvoiceDate=t},expression:"newInvoiceDate"}}),e.$v.newInvoiceDate.$anyDirty&&!e.$v.newInvoiceDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("P.O. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("D.R. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},on:{input:e.changePOData},model:{value:e.newPONumber,callback:function(t){e.newPONumber=t},expression:"newPONumber"}}),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.choose-po-number-modal",modifiers:{"choose-po-number-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Choose")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newDRNumber,callback:function(t){e.newDRNumber=t},expression:"newDRNumber"}}),e.$v.newDRNumber.$anyDirty&&!e.$v.newDRNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDRNumber.$anyDirty&&!e.$v.newDRNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Terms:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Invoice To:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTerms,reduce:function(e){return e.paymentTermId},label:"description",clearable:!0},model:{value:e.newTerm,callback:function(t){e.newTerm=t},expression:"newTerm"}})],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-payment-terms-modal",modifiers:{"new-payment-terms-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.customers,reduce:function(e){return e.customerId},label:"name",clearable:!1},model:{value:e.newInvoiceTo,callback:function(t){e.newInvoiceTo=t},expression:"newInvoiceTo"}}),e.$v.newInvoiceTo.$anyDirty&&!e.$v.newInvoiceTo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-customer-modal",modifiers:{"new-customer-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Client P.O. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Total Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newClientPO,callback:function(t){e.newClientPO=t},expression:"newClientPO"}}),e.$v.newClientPO.$anyDirty&&!e.$v.newClientPO.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",disabled:""},model:{value:e.newTotalAmount,callback:function(t){e.newTotalAmount=t},expression:"newTotalAmount"}}),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-si-item-modal",modifiers:{"new-si-item-modal":!0}}],staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add Item")])],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Items")])])]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.siItems,"search-options":{enabled:!1},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["itemReference"==t.column.field?a("span",e._l(e.items,(function(n){return a("span",{key:n.itemId},[n.itemId==t.row.itemReference?a("span",[e._v(e._s(n.itemName))]):e._e()])})),0):e._e(),"description"==t.column.field?a("span",[a("span",[e._v(e._s(""==t.row.description?"----------":t.row.description))])]):e._e(),"quantity"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.quantity))])]):e._e(),"unitPrice"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.unitPrice))])]):e._e(),"amount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.amount))])]):e._e(),"vat"==t.column.field?a("span",e._l(e.vats,(function(n){return a("span",{key:n.vatId},[n.vatId==t.row.vat?a("span",[e._v(e._s(n.vat))]):e._e()])})),0):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return e.removeItem(t.row)}}})]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addSalesInvoice(t)}}},[e._v("Save")])],1),a("b-modal",{attrs:{size:"xl",id:"new-customer-modal",title:"New Customer",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addCustomer(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-customer-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},["individual"==e.newCustomerType?a("b",[e._v("Full Name:")]):e._e(),"corporate"==e.newCustomerType?a("b",[e._v("Company:")]):e._e(),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.customerTypes,reduce:function(e){return e.typeId},label:"type",clearable:!1},model:{value:e.newCustomerType,callback:function(t){e.newCustomerType=t},expression:"newCustomerType"}}),e.$v.newCustomerType.$anyDirty&&!e.$v.newCustomerType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),"individual"==e.newCustomerType?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Full Name"},model:{value:e.newFullName,callback:function(t){e.newFullName=t},expression:"newFullName"}}),e.$v.newFullName.$anyDirty&&!e.$v.newFullName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newFullName.$anyDirty&&!e.$v.newFullName.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e(),"corporate"==e.newCustomerType?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Company"},model:{value:e.newCompany,callback:function(t){e.newCompany=t},expression:"newCompany"}}),e.$v.newCompany.$anyDirty&&!e.$v.newCompany.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newCompany.$anyDirty&&!e.$v.newCompany.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e()]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Tin:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Email:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin"},model:{value:e.newTin,callback:function(t){e.newTin=t},expression:"newTin"}}),e.$v.newTin.$anyDirty&&!e.$v.newTin.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email"},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}}),e.$v.newEmail.$anyDirty&&!e.$v.newEmail.email?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:e.newContactNumber,callback:function(t){e.newContactNumber=t},expression:"newContactNumber"}}),e.$v.newContactNumber.$anyDirty&&!e.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"59",id:"inputStyle",placeholder:"Address"},domProps:{value:e.newAddress},on:{input:function(t){t.target.composing||(e.newAddress=t.target.value)}}})])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Terms:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Credit Limit:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTerms,reduce:function(e){return e.paymentTermId},label:"description",clearable:!0},model:{value:e.newCustomerTerm,callback:function(t){e.newCustomerTerm=t},expression:"newCustomerTerm"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Credit Limit"},model:{value:e.newCreditLimit,callback:function(t){e.newCreditLimit=t},expression:"newCreditLimit"}})],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Is Taxable?")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Business Style:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.taxables,reduce:function(e){return e.taxableId},label:"taxable",clearable:!0},model:{value:e.newTaxable,callback:function(t){e.newTaxable=t},expression:"newTaxable"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Business Style"},model:{value:e.newBusinessStyle,callback:function(t){e.newBusinessStyle=t},expression:"newBusinessStyle"}})],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-payment-terms-modal",title:"New Payment Terms",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addPaymentTerms(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-payment-terms-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Value:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}}),e.$v.newDescription.$anyDirty&&!e.$v.newDescription.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDescription.$anyDirty&&!e.$v.newDescription.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Value"},model:{value:e.newValue,callback:function(t){e.newValue=t},expression:"newValue"}}),e.$v.newValue.$anyDirty&&!e.$v.newValue.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newValue.$anyDirty&&!e.$v.newValue.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"choose-po-number-modal",title:"Choose P.O. Number",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.choosePONumber(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Choose ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("choose-po-number-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("P.O. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.poNumbers,reduce:function(e){return e.purchaseOrderId},label:"poNumber",clearable:!0},model:{value:e.choosePO,callback:function(t){e.choosePO=t},expression:"choosePO"}})],1)])]),a("b-modal",{attrs:{size:"xl",id:"new-si-item-modal",title:"Add SI Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addSIItems(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-si-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Items:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.items,reduce:function(e){return e.itemId},label:"itemName",clearable:!1},on:{input:function(t){return e.changeItem(e.newSIItem)}},model:{value:e.newSIItem,callback:function(t){e.newSIItem=t},expression:"newSIItem"}}),e.$v.newSIItem.$anyDirty&&!e.$v.newSIItem.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-item-modal",modifiers:{"new-item-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newSIDescription,expression:"newSIDescription"}],staticClass:"pl-2",attrs:{rows:"2",cols:"59",id:"inputStyle",placeholder:"Description"},domProps:{value:e.newSIDescription},on:{input:function(t){t.target.composing||(e.newSIDescription=t.target.value)}}})])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.newSIQuantity,e.newSIUnitPrice,"add")}},model:{value:e.newSIQuantity,callback:function(t){e.newSIQuantity=t},expression:"newSIQuantity"}}),e.$v.newSIQuantity.$anyDirty&&!e.$v.newSIQuantity.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSIQuantity.$anyDirty&&!e.$v.newSIQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.newSIQuantity,e.newSIUnitPrice,"add")}},model:{value:e.newSIUnitPrice,callback:function(t){e.newSIUnitPrice=t},expression:"newSIUnitPrice"}}),e.$v.newSIUnitPrice.$anyDirty&&!e.$v.newSIUnitPrice.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSIUnitPrice.$anyDirty&&!e.$v.newSIUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("VAT:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",disabled:""},model:{value:e.newSIAmount,callback:function(t){e.newSIAmount=t},expression:"newSIAmount"}}),e.$v.newSIAmount.$anyDirty&&!e.$v.newSIAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSIAmount.$anyDirty&&!e.$v.newSIAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.vats,reduce:function(e){return e.vatId},label:"vat",clearable:!1},model:{value:e.newSIVAT,callback:function(t){e.newSIVAT=t},expression:"newSIVAT"}}),e.$v.newSIVAT.$anyDirty&&!e.$v.newSIVAT.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-item-modal",title:"New Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addItem(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Item Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item Name"},model:{value:e.newItemName,callback:function(t){e.newItemName=t},expression:"newItemName"}}),e.$v.newItemName.$anyDirty&&!e.$v.newItemName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newItemName.$anyDirty&&!e.$v.newItemName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.types,reduce:function(e){return e.typeId},label:"type",clearable:!1},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Category:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Cost Price:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.categories,reduce:function(e){return e.itemCategoryId},label:"categoryName",clearable:!0},model:{value:e.newCategory,callback:function(t){e.newCategory=t},expression:"newCategory"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Cost Price"},model:{value:e.newCostPrice,callback:function(t){e.newCostPrice=t},expression:"newCostPrice"}}),e.$v.newCostPrice.$anyDirty&&!e.$v.newCostPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Sale Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Supplier:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Sale Price"},model:{value:e.newSalePrice,callback:function(t){e.newSalePrice=t},expression:"newSalePrice"}}),e.$v.newSalePrice.$anyDirty&&!e.$v.newSalePrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.suppliers,reduce:function(e){return e.supplierId},label:"supplierName",clearable:!1},model:{value:e.newItemSupplier,callback:function(t){e.newItemSupplier=t},expression:"newItemSupplier"}}),e.$v.newItemSupplier.$anyDirty&&!e.$v.newItemSupplier.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Unit"},model:{value:e.newUnit,callback:function(t){e.newUnit=t},expression:"newUnit"}}),e.$v.newUnit.$anyDirty&&!e.$v.newUnit.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},bo=[],ho=a("c1df"),fo=new Date,vo=a("9f25"),wo=cr["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),Co=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z. ]*$/),go=cr["helpers"].regex("alphaNumAndDot",/^[ -. 0-9 ]*$/),ko=cr["helpers"].regex("alphaNumAndDot",/^[ ,. 0-9 ]*$/),yo=a("e966"),$o=yo.bindWith(",","."),_o={name:"new-sales-invoice",components:{},data:function(){return{loading:!1,customers:[],suppliers:[],paymentTerms:[],newSINumber:"",newInvoiceDate:ho().format("YYYY-MM-DD"),newPONumber:"",newPORef:"",newDRNumber:"",newTerm:"",newInvoiceTo:"",newClientPO:"",newTotalAmount:"",requestProcessing:!1,customerTypes:[{typeId:"corporate",type:"Corporate"},{typeId:"individual",type:"Individual"}],taxables:[{taxableId:1,taxable:"Yes"},{taxableId:0,taxable:"No"}],newCustomerType:"corporate",newFullName:"",newCompany:"",newTin:"",newEmail:"",newContactNumber:"",newAddress:"",newCustomerTerm:"",newCreditLimit:"",newTaxable:"",newBusinessStyle:"",newDescription:"",newValue:"",poNumbers:[],choosePO:"",items:[],vats:[{vatId:"taxInclusive",vat:"Tax Inclusive"},{vatId:"taxExclusive",vat:"Tax Exclusive"},{vatId:"vatExempt",vat:"VAT Exempt"}],newSIItem:"",newSIDescription:"",newSIQuantity:"",newSIUnitPrice:"",newSIAmount:"",newSIVAT:"taxInclusive",siItems:[],types:[{typeId:"Inventory (Finished Goods)",type:"Inventory - Finished Goods"},{typeId:"Inventory (Raw Materials)",type:"Inventory - Raw Materials"},{typeId:"Services",type:"Services"}],categories:[],newItemName:"",newType:"Inventory (Finished Goods)",newCategory:"",newCostPrice:"",newSalePrice:"",newItemSupplier:"",newUnit:"",columns:[{label:"Item",field:"itemReference"},{label:"Description",field:"description"},{label:"Quantity",field:"quantity"},{label:"Unit Price",field:"unitPrice"},{label:"Amount",field:"amount"},{label:"VAT",field:"vat"},{label:"",field:"action",width:"50px"}]}},validations:{newSINumber:{required:cr["required"],numCustomValidator:go},newInvoiceDate:{required:cr["required"]},newPONumber:{required:cr["required"],alphaNumCustomValidator:wo},newDRNumber:{required:cr["required"],alphaNumCustomValidator:wo},newInvoiceTo:{required:cr["required"]},newClientPO:{required:cr["required"]},newTotalAmount:{required:cr["required"],amountCustomValidator:ko},newCustomerType:{required:cr["required"]},newFullName:{required:cr["required"],alphaCustomValidator:Co},newCompany:{required:cr["required"],alphaNumCustomValidator:wo},newTin:{numCustomValidator:go},newEmail:{email:cr["email"]},newContactNumber:{numCustomValidator:go},newDescription:{required:cr["required"],alphaNumCustomValidator:wo},newValue:{required:cr["required"],numCustomValidator:go},newSIItem:{required:cr["required"]},newSIQuantity:{required:cr["required"],numCustomValidator:go},newSIUnitPrice:{required:cr["required"],amountCustomValidator:ko},newSIAmount:{required:cr["required"],amountCustomValidator:ko},newSIVAT:{required:cr["required"]},newItemName:{required:cr["required"],alphaNumCustomValidator:wo},newType:{required:cr["required"]},newCostPrice:{amountCustomValidator:ko},newSalePrice:{amountCustomValidator:ko},newItemSupplier:{required:cr["required"]},newUnit:{alphaNumCustomValidator:wo}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getCustomers(),e.getSuppliers(),e.getPaymentTerms(),e.getPONumbers(),e.getItems(),e.getItemCategories();case 6:case"end":return t.stop()}}),t)})))()},methods:{getCustomers:function(){var e=this,t=Eu.collection("customers").orderBy("name","asc");e.customers=[],t.get().then((function(t){t.forEach((function(t){e.customers.push(t.data())})),e.newInvoiceTo=e.customers[0].customerId}))},getSuppliers:function(){var e=this,t=Eu.collection("suppliers").orderBy("supplierName","asc");e.suppliers=[],t.get().then((function(t){t.forEach((function(t){e.suppliers.push(t.data())})),e.newItemSupplier=e.suppliers[0].supplierId}))},getPaymentTerms:function(){var e=this,t=Eu.collection("paymentTerms").orderBy("description","asc");e.paymentTerms=[],t.get().then((function(t){t.forEach((function(t){e.paymentTerms.push(t.data())}))}))},getPONumbers:function(){var e=this,t=Wu.collection("purchaseOrders").where("status","==",3).orderBy("poNumber","asc");e.poNumbers=[],t.get().then((function(t){t.forEach((function(t){e.poNumbers.push(t.data())}))}))},getItems:function(){var e=this,t=Wu.collection("items").orderBy("itemName","asc");e.items=[],t.get().then((function(t){t.forEach((function(t){e.items.push(t.data())})),e.newSIItem=e.items[0].itemId,e.changeItem(e.items[0].itemId)}))},getItemCategories:function(){var e=this,t=Wu.collection("itemCategories").orderBy("categoryName","asc");e.categories=[],t.get().then((function(t){t.forEach((function(t){e.categories.push(t.data())}))}))},changeItem:function(e){var t=this,a="",n=Wu.collection("items").where("itemId","==",e).orderBy("itemName","asc");n.get().then((function(e){e.forEach((function(e){a=e.data().salePrice})),t.newSIUnitPrice=$o(a)}))},computeAmount:function(e,t,a){t=t.replaceAll(",",""),"add"==a&&(this.newSIAmount=t*e,this.newSIAmount=$o(parseFloat(this.newSIAmount).toFixed(2)))},addCustomer:function(){var e=this,t=!0;if(e.requestProcessing=!1,e.$v.newCustomerType.$touch(),e.$v.newFullName.$touch(),e.$v.newCompany.$touch(),e.$v.newTin.$touch(),e.$v.newEmail.$touch(),e.$v.newContactNumber.$touch(),"individual"!=e.newCustomerType||e.$v.newCustomerType.$error?"corporate"!=e.newCustomerType||e.$v.newCustomerType.$error||e.$v.newCompany.$error||e.$v.newTin.$error||e.$v.newEmail.$error||e.$v.newContactNumber.$error||(t=!1):e.$v.newFullName.$error||e.$v.newTin.$error||e.$v.newEmail.$error||e.$v.newContactNumber.$error||(t=!1),!t){var a=null,n="";e.requestProcessing=!0,"individual"==e.newCustomerType?(a=Eu.collection("customers").where("name","==",e.newFullName),n=e.newFullName):"corporate"==e.newCustomerType&&(a=Eu.collection("customers").where("name","==",e.newCompany),n=e.newCompany),a.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),r=[],s="CID-"+fo.getFullYear()+vo(fo.getMonth()+1,2)+fo.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&r.push(e.data())}));try{Eu.collection("customers").doc().set({customerId:s,name:n,type:e.newCustomerType,tin:e.newTin,email:e.newEmail,contactNumber:e.newContactNumber,address:e.newAddress,paymentTermReference:e.newCustomerTerm,creditLimit:e.newCreditLimit,taxable:e.newTaxable,businessStyle:e.newBusinessStyle,userReference:r[0].userId,status:1,dateCreated:fo,dateModified:fo}).then((function(){e.newCustomerType="corporate",e.newFullName="",e.newCompany="",e.newTin="",e.newEmail="",e.newContactNumber="",e.newAddress="",e.newCustomerTerm="",e.newCreditLimit="",e.newTaxable="",e.newBusinessStyle="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$v.newFullName.$reset(),e.$v.newCompany.$reset(),e.$v.newTin.$reset(),e.$v.newEmail.$reset(),e.$v.newContactNumber.$reset(),e.$bvModal.hide("new-customer-modal"),e.getCustomers(),e.$swal({title:"Success",text:"New customer added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Full Name/Company already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},addPaymentTerms:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDescription.$touch(),e.$v.newValue.$touch(),!e.$v.newDescription.$error&&!e.$v.newValue.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("paymentTerms").where("description","==",e.newDescription),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="PTID-"+fo.getFullYear()+vo(fo.getMonth()+1,2)+fo.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("paymentTerms").doc().set({paymentTermId:r,description:e.newDescription,value:e.newValue,userReference:n[0].userId,status:1,dateCreated:fo,dateModified:fo}).then((function(){e.newDescription="",e.newValue="",e.requestProcessing=!1,e.$v.newDescription.$reset(),e.$v.newValue.$reset(),e.$bvModal.hide("new-payment-terms-modal"),e.getPaymentTerms(),e.$swal({title:"Success",text:"New payment term added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Payment term already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},choosePONumber:function(){for(var e=this,t=0;t<e.poNumbers.length;t++)e.poNumbers[t].purchaseOrderId==e.choosePO&&(e.newPONumber=e.poNumbers[t].poNumber,e.newPORef=e.choosePO);var a=Wu.collection("purchaseOrderItems").where("poReference","==",e.newPORef),n=[];e.siItems=[],a.get().then((function(t){t.forEach((function(t){n={rowNum:"",itemReference:t.data().itemReference,description:t.data().description,quantity:t.data().quantity,unitPrice:t.data().unitPrice,amount:t.data().amount,vat:t.data().vat},e.siItems.push(n)})),e.getSIItems()})),e.$bvModal.hide("choose-po-number-modal")},changePOData:function(){var e=this;""==e.newPONumber&&""!=e.newPORef&&(e.newPORef="",e.siItems=[]),e.getSIItems()},addItem:function(){var e=this;if(e.requestProcessing=!1,e.$v.newItemName.$touch(),e.$v.newType.$touch(),e.$v.newCostPrice.$touch(),e.$v.newSalePrice.$touch(),e.$v.newItemSupplier.$touch(),e.$v.newUnit.$touch(),!e.$v.newItemName.$error&&!e.$v.newType.$error&&!e.$v.newCostPrice.$error&&!e.$v.newSalePrice.$error&&!e.$v.newItemSupplier.$error&&!e.$v.newUnit.$error){var t=null;e.requestProcessing=!0,t=Wu.collection("items").where("itemName","==",e.newItemName).where("supplierReference","==",e.newItemSupplier),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="IID-"+fo.getFullYear()+vo(fo.getMonth()+1,2)+fo.getDate()+"-"+Math.floor(1e6*Math.random());e.newCostPrice=e.newCostPrice.replaceAll(",",""),e.newSalePrice=e.newSalePrice.replaceAll(",",""),a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Wu.collection("items").doc().set({itemId:r,itemName:e.newItemName,type:e.newType,costPrice:e.newCostPrice,salePrice:e.newSalePrice,unit:e.newUnit,categoryReference:e.newCategory,supplierReference:e.newItemSupplier,userReference:n[0].userId,status:1,dateCreated:fo,dateModified:fo}).then((function(){e.newItemName="",e.newType="Inventory (Finished Goods)",e.newCategory="",e.newCostPrice="",e.newSalePrice="",e.newItemSupplier="",e.newUnit="",e.requestProcessing=!1,e.$v.newItemName.$reset(),e.$v.newType.$reset(),e.$v.newCostPrice.$reset(),e.$v.newSalePrice.$reset(),e.$v.newItemSupplier.$reset(),e.$v.newUnit.$reset(),e.$bvModal.hide("new-item-modal"),e.getItems(),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Item name already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},addSIItems:function(){var e=this;if(e.$v.newSIItem.$touch(),e.$v.newSIQuantity.$touch(),e.$v.newSIUnitPrice.$touch(),e.$v.newSIAmount.$touch(),e.$v.newSIVAT.$touch(),!e.$v.newSIItem.$error&&!e.$v.newSIQuantity.$error&&!e.$v.newSIUnitPrice.$error&&!e.$v.newSIAmount.$error&&!e.$v.newSIVAT.$error){e.requestProcessing=!0,0==e.siItems.length&&(e.siItems=[]);var t={rowNum:"",itemReference:e.newSIItem,description:e.newSIDescription,quantity:e.newSIQuantity,unitPrice:$o(e.newSIUnitPrice),amount:$o(e.newSIAmount),vat:e.newSIVAT};e.siItems.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newSIItem="",e.newSIDescription="",e.newSIQuantity="",e.newSIUnitPrice="",e.newSIAmount="",e.newSIVAT="taxInclusive",e.$v.newSIItem.$reset(),e.$v.newSIQuantity.$reset(),e.$v.newSIUnitPrice.$reset(),e.$v.newSIAmount.$reset(),e.$v.newSIVAT.$reset(),e.$bvModal.hide("new-si-item-modal"),e.getItems(),e.getSIItems()})),e.requestProcessing=!1}},getSIItems:function(){var e=this;if(e.loading=!1,0!=e.siItems.length){e.loading=!0,e.newTotalAmount=0;for(var t=0;t<e.siItems.length;t++)e.siItems[t].rowNum=t+1,e.newTotalAmount=parseFloat(e.newTotalAmount)+parseFloat(e.siItems[t].amount.replaceAll(",",""));e.newTotalAmount=$o(parseFloat(e.newTotalAmount).toFixed(2)),setTimeout((function(){e.loading=!1,e.requestProcessing=!1}),1e3)}else 0==e.siItems.length&&(e.siItems=[],e.newTotalAmount="")},removeItem:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this item",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&(t.requestProcessing=!0,t.loading=!0,t.siItems.splice(parseInt(e.rowNum-1),1),t.$swal({title:"Success",text:"Item remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getSIItems(),t.requestProcessing=!1})))}))},addSalesInvoice:function(){var e=this;if(e.$v.newSINumber.$touch(),e.$v.newInvoiceDate.$touch(),e.$v.newPONumber.$touch(),e.$v.newDRNumber.$touch(),e.$v.newInvoiceTo.$touch(),e.$v.newClientPO.$touch(),e.$v.newTotalAmount.$touch(),!e.$v.newSINumber.$error&&!e.$v.newInvoiceDate.$error&&!e.$v.newPONumber.$error&&!e.$v.newDRNumber.$error&&!e.$v.newInvoiceTo.$error&&!e.$v.newTotalAmount.$error){e.requestProcessing=!0;var t,a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[];a.get().then((function(a){a.forEach((function(e){n.push(e.data())}));var r="SII-"+fo.getFullYear()+vo(fo.getMonth()+1,2)+fo.getDate()+"-"+Math.floor(1e6*Math.random());t=""==e.newPORef?e.newPONumber:e.newPORef,Wu.collection("salesInvoices").doc().set({salesInvoiceId:r,siNumber:e.newSINumber,invoiceDate:e.newInvoiceDate,drNumber:e.newDRNumber,clientPO:e.newClientPO,totalAmount:e.newTotalAmount.replaceAll(",",""),poReference:t,paymentTermReference:e.newTerm,customerReference:e.newInvoiceTo,status:1,userReference:n[0].userId,dateCreated:fo,dateModified:fo}).then((function(){if(0!=e.siItems.length)for(var t=0;t<e.siItems.length;t++){var a="SIII-"+fo.getFullYear()+vo(fo.getMonth()+1,2)+fo.getDate()+"-"+Math.floor(1e6*Math.random());Wu.collection("salesInvoiceItems").doc().set({salesInvoiceItemId:a,description:e.siItems[t].description,quantity:e.siItems[t].quantity,unitPrice:e.siItems[t].unitPrice,amount:e.siItems[t].amount,vat:e.siItems[t].vat,itemReference:e.siItems[t].itemReference,siReference:r,status:1,userReference:n[0].userId,dateCreated:fo,dateModified:fo})}e.newSINumber="",e.newInvoiceDate=ho().format("YYYY-MM-DD"),e.newPONumber="",e.newPORef="",e.newDRNumber="",e.newTerm="",e.newInvoiceTo="",e.newClientPO="",e.newTotalAmount="",e.siItems=[],e.$v.newSINumber.$reset(),e.$v.newInvoiceDate.$reset(),e.$v.newPONumber.$reset(),e.$v.newDRNumber.$reset(),e.$v.newInvoiceTo.$reset(),e.$v.newClientPO.$reset(),e.$v.newTotalAmount.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New sales invoice added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/sales/invoice/"+r)}))}))}))}}}},xo=_o,Ao=(a("5cab"),Object(m["a"])(xo,po,bo,!1,null,null,null)),Do=Ao.exports,Po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("D.R. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Delivery Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newDRNumber,callback:function(t){e.newDRNumber=t},expression:"newDRNumber"}}),e.$v.newDRNumber.$anyDirty&&!e.$v.newDRNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDRNumber.$anyDirty&&!e.$v.newDRNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newDeliveryDate,callback:function(t){e.newDeliveryDate=t},expression:"newDeliveryDate"}}),e.$v.newDeliveryDate.$anyDirty&&!e.$v.newDeliveryDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("P.O. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("S.I. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},on:{input:e.changePOData},model:{value:e.newPONumber,callback:function(t){e.newPONumber=t},expression:"newPONumber"}}),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPONumber.$anyDirty&&!e.$v.newPONumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.choose-po-number-modal",modifiers:{"choose-po-number-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Choose")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newSINumber,callback:function(t){e.newSINumber=t},expression:"newSINumber"}}),e.$v.newSINumber.$anyDirty&&!e.$v.newSINumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSINumber.$anyDirty&&!e.$v.newSINumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Terms:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Delivered To:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTerms,reduce:function(e){return e.paymentTermId},label:"description",clearable:!0},model:{value:e.newTerm,callback:function(t){e.newTerm=t},expression:"newTerm"}})],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-payment-terms-modal",modifiers:{"new-payment-terms-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.customers,reduce:function(e){return e.customerId},label:"name",clearable:!1},model:{value:e.newDeliveredTo,callback:function(t){e.newDeliveredTo=t},expression:"newDeliveredTo"}}),e.$v.newDeliveredTo.$anyDirty&&!e.$v.newDeliveredTo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-customer-modal",modifiers:{"new-customer-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Client P.O. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Total Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newClientPO,callback:function(t){e.newClientPO=t},expression:"newClientPO"}}),e.$v.newClientPO.$anyDirty&&!e.$v.newClientPO.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",disabled:""},model:{value:e.newTotalAmount,callback:function(t){e.newTotalAmount=t},expression:"newTotalAmount"}}),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-dr-item-modal",modifiers:{"new-dr-item-modal":!0}}],staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add Item")])],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Items")])])]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.drItems,"search-options":{enabled:!1},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["itemReference"==t.column.field?a("span",e._l(e.items,(function(n){return a("span",{key:n.itemId},[n.itemId==t.row.itemReference?a("span",[e._v(e._s(n.itemName))]):e._e()])})),0):e._e(),"description"==t.column.field?a("span",[a("span",[e._v(e._s(""==t.row.description?"----------":t.row.description))])]):e._e(),"quantity"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.quantity))])]):e._e(),"unitPrice"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.unitPrice))])]):e._e(),"amount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.amount))])]):e._e(),"vat"==t.column.field?a("span",e._l(e.vats,(function(n){return a("span",{key:n.vatId},[n.vatId==t.row.vat?a("span",[e._v(e._s(n.vat))]):e._e()])})),0):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return e.removeItem(t.row)}}})]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addDeliveryReceipt(t)}}},[e._v("Save")])],1),a("b-modal",{attrs:{size:"xl",id:"new-customer-modal",title:"New Customer",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addCustomer(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-customer-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},["individual"==e.newCustomerType?a("b",[e._v("Full Name:")]):e._e(),"corporate"==e.newCustomerType?a("b",[e._v("Company:")]):e._e(),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.customerTypes,reduce:function(e){return e.typeId},label:"type",clearable:!1},model:{value:e.newCustomerType,callback:function(t){e.newCustomerType=t},expression:"newCustomerType"}}),e.$v.newCustomerType.$anyDirty&&!e.$v.newCustomerType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),"individual"==e.newCustomerType?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Full Name"},model:{value:e.newFullName,callback:function(t){e.newFullName=t},expression:"newFullName"}}),e.$v.newFullName.$anyDirty&&!e.$v.newFullName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newFullName.$anyDirty&&!e.$v.newFullName.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e(),"corporate"==e.newCustomerType?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Company"},model:{value:e.newCompany,callback:function(t){e.newCompany=t},expression:"newCompany"}}),e.$v.newCompany.$anyDirty&&!e.$v.newCompany.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newCompany.$anyDirty&&!e.$v.newCompany.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e()]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Tin:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Email:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin"},model:{value:e.newTin,callback:function(t){e.newTin=t},expression:"newTin"}}),e.$v.newTin.$anyDirty&&!e.$v.newTin.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email"},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}}),e.$v.newEmail.$anyDirty&&!e.$v.newEmail.email?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:e.newContactNumber,callback:function(t){e.newContactNumber=t},expression:"newContactNumber"}}),e.$v.newContactNumber.$anyDirty&&!e.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"59",id:"inputStyle",placeholder:"Address"},domProps:{value:e.newAddress},on:{input:function(t){t.target.composing||(e.newAddress=t.target.value)}}})])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Terms:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Credit Limit:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTerms,reduce:function(e){return e.paymentTermId},label:"description",clearable:!0},model:{value:e.newCustomerTerm,callback:function(t){e.newCustomerTerm=t},expression:"newCustomerTerm"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Credit Limit"},model:{value:e.newCreditLimit,callback:function(t){e.newCreditLimit=t},expression:"newCreditLimit"}})],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Is Taxable?")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Business Style:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.taxables,reduce:function(e){return e.taxableId},label:"taxable",clearable:!0},model:{value:e.newTaxable,callback:function(t){e.newTaxable=t},expression:"newTaxable"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Business Style"},model:{value:e.newBusinessStyle,callback:function(t){e.newBusinessStyle=t},expression:"newBusinessStyle"}})],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-payment-terms-modal",title:"New Payment Terms",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addPaymentTerms(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-payment-terms-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Value:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}}),e.$v.newDescription.$anyDirty&&!e.$v.newDescription.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDescription.$anyDirty&&!e.$v.newDescription.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Value"},model:{value:e.newValue,callback:function(t){e.newValue=t},expression:"newValue"}}),e.$v.newValue.$anyDirty&&!e.$v.newValue.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newValue.$anyDirty&&!e.$v.newValue.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"choose-po-number-modal",title:"Choose P.O. Number",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.choosePONumber(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Choose ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("choose-po-number-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("P.O. No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.poNumbers,reduce:function(e){return e.purchaseOrderId},label:"poNumber",clearable:!0},model:{value:e.choosePO,callback:function(t){e.choosePO=t},expression:"choosePO"}})],1)])]),a("b-modal",{attrs:{size:"xl",id:"new-dr-item-modal",title:"Add DR Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addDRItems(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-dr-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Items:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.items,reduce:function(e){return e.itemId},label:"itemName",clearable:!1},on:{input:function(t){return e.changeItem(e.newDRItem)}},model:{value:e.newDRItem,callback:function(t){e.newDRItem=t},expression:"newDRItem"}}),e.$v.newDRItem.$anyDirty&&!e.$v.newDRItem.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-item-modal",modifiers:{"new-item-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newDRDescription,expression:"newDRDescription"}],staticClass:"pl-2",attrs:{rows:"2",cols:"59",id:"inputStyle",placeholder:"Description"},domProps:{value:e.newDRDescription},on:{input:function(t){t.target.composing||(e.newDRDescription=t.target.value)}}})])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.newDRQuantity,e.newDRUnitPrice,"add")}},model:{value:e.newDRQuantity,callback:function(t){e.newDRQuantity=t},expression:"newDRQuantity"}}),e.$v.newDRQuantity.$anyDirty&&!e.$v.newDRQuantity.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDRQuantity.$anyDirty&&!e.$v.newDRQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.newDRQuantity,e.newDRUnitPrice,"add")}},model:{value:e.newDRUnitPrice,callback:function(t){e.newDRUnitPrice=t},expression:"newDRUnitPrice"}}),e.$v.newDRUnitPrice.$anyDirty&&!e.$v.newDRUnitPrice.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDRUnitPrice.$anyDirty&&!e.$v.newDRUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("VAT:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",disabled:""},model:{value:e.newDRAmount,callback:function(t){e.newDRAmount=t},expression:"newDRAmount"}}),e.$v.newDRAmount.$anyDirty&&!e.$v.newDRAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newDRAmount.$anyDirty&&!e.$v.newDRAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.vats,reduce:function(e){return e.vatId},label:"vat",clearable:!1},model:{value:e.newDRVAT,callback:function(t){e.newDRVAT=t},expression:"newDRVAT"}}),e.$v.newDRVAT.$anyDirty&&!e.$v.newDRVAT.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-item-modal",title:"New Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addItem(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-item-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Item Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item Name"},model:{value:e.newItemName,callback:function(t){e.newItemName=t},expression:"newItemName"}}),e.$v.newItemName.$anyDirty&&!e.$v.newItemName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newItemName.$anyDirty&&!e.$v.newItemName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.types,reduce:function(e){return e.typeId},label:"type",clearable:!1},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Category:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Cost Price:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.categories,reduce:function(e){return e.itemCategoryId},label:"categoryName",clearable:!0},model:{value:e.newCategory,callback:function(t){e.newCategory=t},expression:"newCategory"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Cost Price"},model:{value:e.newCostPrice,callback:function(t){e.newCostPrice=t},expression:"newCostPrice"}}),e.$v.newCostPrice.$anyDirty&&!e.$v.newCostPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Sale Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Supplier:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Sale Price"},model:{value:e.newSalePrice,callback:function(t){e.newSalePrice=t},expression:"newSalePrice"}}),e.$v.newSalePrice.$anyDirty&&!e.$v.newSalePrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.suppliers,reduce:function(e){return e.supplierId},label:"supplierName",clearable:!1},model:{value:e.newItemSupplier,callback:function(t){e.newItemSupplier=t},expression:"newItemSupplier"}}),e.$v.newItemSupplier.$anyDirty&&!e.$v.newItemSupplier.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Unit"},model:{value:e.newUnit,callback:function(t){e.newUnit=t},expression:"newUnit"}}),e.$v.newUnit.$anyDirty&&!e.$v.newUnit.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},No=[],To=a("c1df"),Ro=new Date,Io=a("9f25"),So=cr["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),qo=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z. ]*$/),Bo=cr["helpers"].regex("alphaNumAndDot",/^[ -. 0-9 ]*$/),Mo=cr["helpers"].regex("alphaNumAndDot",/^[ ,. 0-9 ]*$/),Oo=a("e966"),Eo=Oo.bindWith(",","."),Fo={name:"new-delivery-receipt",components:{},data:function(){return{loading:!1,customers:[],suppliers:[],paymentTerms:[],newDRNumber:"",newDeliveryDate:To().format("YYYY-MM-DD"),newPONumber:"",newPORef:"",newSINumber:"",newTerm:"",newDeliveredTo:"",newClientPO:"",newTotalAmount:"",requestProcessing:!1,customerTypes:[{typeId:"corporate",type:"Corporate"},{typeId:"individual",type:"Individual"}],taxables:[{taxableId:1,taxable:"Yes"},{taxableId:0,taxable:"No"}],newCustomerType:"corporate",newFullName:"",newCompany:"",newTin:"",newEmail:"",newContactNumber:"",newAddress:"",newCustomerTerm:"",newCreditLimit:"",newTaxable:"",newBusinessStyle:"",newDescription:"",newValue:"",poNumbers:[],choosePO:"",items:[],vats:[{vatId:"taxInclusive",vat:"Tax Inclusive"},{vatId:"taxExclusive",vat:"Tax Exclusive"},{vatId:"vatExempt",vat:"VAT Exempt"}],newDRItem:"",newDRDescription:"",newDRQuantity:"",newDRUnitPrice:"",newDRAmount:"",newDRVAT:"taxInclusive",drItems:[],types:[{typeId:"Inventory (Finished Goods)",type:"Inventory - Finished Goods"},{typeId:"Inventory (Raw Materials)",type:"Inventory - Raw Materials"},{typeId:"Services",type:"Services"}],categories:[],newItemName:"",newType:"Inventory (Finished Goods)",newCategory:"",newCostPrice:"",newSalePrice:"",newItemSupplier:"",newUnit:"",columns:[{label:"Item",field:"itemReference"},{label:"Description",field:"description"},{label:"Quantity",field:"quantity"},{label:"Unit Price",field:"unitPrice"},{label:"Amount",field:"amount"},{label:"VAT",field:"vat"},{label:"",field:"action",width:"50px"}]}},validations:{newDRNumber:{required:cr["required"],numCustomValidator:Bo},newDeliveryDate:{required:cr["required"]},newPONumber:{required:cr["required"],alphaNumCustomValidator:So},newSINumber:{required:cr["required"],alphaNumCustomValidator:So},newDeliveredTo:{required:cr["required"]},newClientPO:{required:cr["required"]},newTotalAmount:{required:cr["required"],amountCustomValidator:Mo},newCustomerType:{required:cr["required"]},newFullName:{required:cr["required"],alphaCustomValidator:qo},newCompany:{required:cr["required"],alphaNumCustomValidator:So},newTin:{numCustomValidator:Bo},newEmail:{email:cr["email"]},newContactNumber:{numCustomValidator:Bo},newDescription:{required:cr["required"],alphaNumCustomValidator:So},newValue:{required:cr["required"],numCustomValidator:Bo},newDRItem:{required:cr["required"]},newDRQuantity:{required:cr["required"],numCustomValidator:Bo},newDRUnitPrice:{required:cr["required"],amountCustomValidator:Mo},newDRAmount:{required:cr["required"],amountCustomValidator:Mo},newDRVAT:{required:cr["required"]},newItemName:{required:cr["required"],alphaNumCustomValidator:So},newType:{required:cr["required"]},newCostPrice:{amountCustomValidator:Mo},newSalePrice:{amountCustomValidator:Mo},newItemSupplier:{required:cr["required"]},newUnit:{alphaNumCustomValidator:So}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getCustomers(),e.getSuppliers(),e.getPaymentTerms(),e.getPONumbers(),e.getItems(),e.getItemCategories();case 6:case"end":return t.stop()}}),t)})))()},methods:{getCustomers:function(){var e=this,t=Eu.collection("customers").orderBy("name","asc");e.customers=[],t.get().then((function(t){t.forEach((function(t){e.customers.push(t.data())})),e.newInvoiceTo=e.customers[0].customerId}))},getSuppliers:function(){var e=this,t=Eu.collection("suppliers").orderBy("supplierName","asc");e.suppliers=[],t.get().then((function(t){t.forEach((function(t){e.suppliers.push(t.data())})),e.newItemSupplier=e.suppliers[0].supplierId}))},getPaymentTerms:function(){var e=this,t=Eu.collection("paymentTerms").orderBy("description","asc");e.paymentTerms=[],t.get().then((function(t){t.forEach((function(t){e.paymentTerms.push(t.data())}))}))},getPONumbers:function(){var e=this,t=Wu.collection("purchaseOrders").where("status","==",3).orderBy("poNumber","asc");e.poNumbers=[],t.get().then((function(t){t.forEach((function(t){e.poNumbers.push(t.data())}))}))},getItems:function(){var e=this,t=Wu.collection("items").orderBy("itemName","asc");e.items=[],t.get().then((function(t){t.forEach((function(t){e.items.push(t.data())})),e.newDRItem=e.items[0].itemId,e.changeItem(e.items[0].itemId)}))},getItemCategories:function(){var e=this,t=Wu.collection("itemCategories").orderBy("categoryName","asc");e.categories=[],t.get().then((function(t){t.forEach((function(t){e.categories.push(t.data())}))}))},changeItem:function(e){var t=this,a="",n=Wu.collection("items").where("itemId","==",e).orderBy("itemName","asc");n.get().then((function(e){e.forEach((function(e){a=e.data().salePrice})),t.newDRUnitPrice=Eo(a)}))},computeAmount:function(e,t,a){t=t.replaceAll(",",""),"add"==a&&(this.newDRAmount=t*e,this.newDRAmount=Eo(parseFloat(this.newDRAmount).toFixed(2)))},addCustomer:function(){var e=this,t=!0;if(e.requestProcessing=!1,e.$v.newCustomerType.$touch(),e.$v.newFullName.$touch(),e.$v.newCompany.$touch(),e.$v.newTin.$touch(),e.$v.newEmail.$touch(),e.$v.newContactNumber.$touch(),"individual"!=e.newCustomerType||e.$v.newCustomerType.$error?"corporate"!=e.newCustomerType||e.$v.newCustomerType.$error||e.$v.newCompany.$error||e.$v.newTin.$error||e.$v.newEmail.$error||e.$v.newContactNumber.$error||(t=!1):e.$v.newFullName.$error||e.$v.newTin.$error||e.$v.newEmail.$error||e.$v.newContactNumber.$error||(t=!1),!t){var a=null,n="";e.requestProcessing=!0,"individual"==e.newCustomerType?(a=Eu.collection("customers").where("name","==",e.newFullName),n=e.newFullName):"corporate"==e.newCustomerType&&(a=Eu.collection("customers").where("name","==",e.newCompany),n=e.newCompany),a.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),r=[],s="CID-"+Ro.getFullYear()+Io(Ro.getMonth()+1,2)+Ro.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&r.push(e.data())}));try{Eu.collection("customers").doc().set({customerId:s,name:n,type:e.newCustomerType,tin:e.newTin,email:e.newEmail,contactNumber:e.newContactNumber,address:e.newAddress,paymentTermReference:e.newCustomerTerm,creditLimit:e.newCreditLimit,businessStyle:e.newBusinessStyle,taxable:e.newTaxable,userReference:r[0].userId,status:1,dateCreated:Ro,dateModified:Ro}).then((function(){e.newCustomerType="corporate",e.newFullName="",e.newCompany="",e.newTin="",e.newEmail="",e.newContactNumber="",e.newAddress="",e.newCustomerTerm="",e.newCreditLimit="",e.newTaxable="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$v.newFullName.$reset(),e.$v.newCompany.$reset(),e.$v.newTin.$reset(),e.$v.newEmail.$reset(),e.$v.newContactNumber.$reset(),e.$bvModal.hide("new-customer-modal"),e.getCustomers(),e.$swal({title:"Success",text:"New customer added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Full Name/Company already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},addPaymentTerms:function(){var e=this;if(e.requestProcessing=!1,e.$v.newDescription.$touch(),e.$v.newValue.$touch(),!e.$v.newDescription.$error&&!e.$v.newValue.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("paymentTerms").where("description","==",e.newDescription),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="PTID-"+Ro.getFullYear()+Io(Ro.getMonth()+1,2)+Ro.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("paymentTerms").doc().set({paymentTermId:r,description:e.newDescription,value:e.newValue,userReference:n[0].userId,status:1,dateCreated:Ro,dateModified:Ro}).then((function(){e.newDescription="",e.newValue="",e.requestProcessing=!1,e.$v.newDescription.$reset(),e.$v.newValue.$reset(),e.$bvModal.hide("new-payment-terms-modal"),e.getPaymentTerms(),e.$swal({title:"Success",text:"New payment term added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Payment term already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},choosePONumber:function(){for(var e=this,t=0;t<e.poNumbers.length;t++)e.poNumbers[t].purchaseOrderId==e.choosePO&&(e.newPONumber=e.poNumbers[t].poNumber,e.newPORef=e.choosePO);var a=Wu.collection("purchaseOrderItems").where("poReference","==",e.newPORef),n=[];e.drItems=[],a.get().then((function(t){t.forEach((function(t){n={rowNum:"",itemReference:t.data().itemReference,description:t.data().description,quantity:t.data().quantity,unitPrice:t.data().unitPrice,amount:t.data().amount,vat:t.data().vat},e.drItems.push(n)})),e.getDRItems()})),e.$bvModal.hide("choose-po-number-modal")},changePOData:function(){var e=this;""==e.newPONumber&&""!=e.newPORef&&(e.newPORef="",e.drItems=[]),e.getDRItems()},addItem:function(){var e=this;if(e.requestProcessing=!1,e.$v.newItemName.$touch(),e.$v.newType.$touch(),e.$v.newCostPrice.$touch(),e.$v.newSalePrice.$touch(),e.$v.newItemSupplier.$touch(),e.$v.newUnit.$touch(),!e.$v.newItemName.$error&&!e.$v.newType.$error&&!e.$v.newCostPrice.$error&&!e.$v.newSalePrice.$error&&!e.$v.newItemSupplier.$error&&!e.$v.newUnit.$error){var t=null;e.requestProcessing=!0,t=Wu.collection("items").where("itemName","==",e.newItemName).where("supplierReference","==",e.newItemSupplier),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="IID-"+Ro.getFullYear()+Io(Ro.getMonth()+1,2)+Ro.getDate()+"-"+Math.floor(1e6*Math.random());e.newCostPrice=e.newCostPrice.replaceAll(",",""),e.newSalePrice=e.newSalePrice.replaceAll(",",""),a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Wu.collection("items").doc().set({itemId:r,itemName:e.newItemName,type:e.newType,costPrice:e.newCostPrice,salePrice:e.newSalePrice,unit:e.newUnit,categoryReference:e.newCategory,supplierReference:e.newItemSupplier,userReference:n[0].userId,status:1,dateCreated:Ro,dateModified:Ro}).then((function(){e.newItemName="",e.newType="inventory",e.newCategory="",e.newCostPrice="",e.newSalePrice="",e.newItemSupplier="",e.newUnit="",e.requestProcessing=!1,e.$v.newItemName.$reset(),e.$v.newType.$reset(),e.$v.newCostPrice.$reset(),e.$v.newSalePrice.$reset(),e.$v.newItemSupplier.$reset(),e.$v.newUnit.$reset(),e.$bvModal.hide("new-item-modal"),e.getItems(),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Item name already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},addDRItems:function(){var e=this;if(e.$v.newDRItem.$touch(),e.$v.newDRQuantity.$touch(),e.$v.newDRUnitPrice.$touch(),e.$v.newDRAmount.$touch(),e.$v.newDRVAT.$touch(),!e.$v.newDRItem.$error&&!e.$v.newDRQuantity.$error&&!e.$v.newDRUnitPrice.$error&&!e.$v.newDRAmount.$error&&!e.$v.newDRVAT.$error){e.requestProcessing=!0,0==e.drItems.length&&(e.drItems=[]);var t={rowNum:"",itemReference:e.newDRItem,description:e.newDRDescription,quantity:e.newDRQuantity,unitPrice:Eo(e.newDRUnitPrice),amount:Eo(e.newDRAmount),vat:e.newDRVAT};e.drItems.push(t),e.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newDRItem="",e.newDRDescription="",e.newDRQuantity="",e.newDRUnitPrice="",e.newDRAmount="",e.newDRVAT="taxInclusive",e.$v.newDRItem.$reset(),e.$v.newDRQuantity.$reset(),e.$v.newDRUnitPrice.$reset(),e.$v.newDRAmount.$reset(),e.$v.newDRVAT.$reset(),e.$bvModal.hide("new-dr-item-modal"),e.getItems(),e.getDRItems()})),e.requestProcessing=!1}},getDRItems:function(){var e=this;if(e.loading=!1,0!=e.drItems.length){e.loading=!0,e.newTotalAmount=0;for(var t=0;t<e.drItems.length;t++)e.drItems[t].rowNum=t+1,e.newTotalAmount=parseFloat(e.newTotalAmount)+parseFloat(e.drItems[t].amount.replaceAll(",",""));e.newTotalAmount=Eo(parseFloat(e.newTotalAmount).toFixed(2)),setTimeout((function(){e.loading=!1,e.requestProcessing=!1}),1e3)}else 0==e.drItems.length&&(e.drItems=[],e.newTotalAmount="")},removeItem:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this item",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&(t.requestProcessing=!0,t.loading=!0,t.drItems.splice(parseInt(e.rowNum-1),1),t.$swal({title:"Success",text:"Item remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getDRItems(),t.requestProcessing=!1})))}))},addDeliveryReceipt:function(){var e=this;if(e.$v.newDRNumber.$touch(),e.$v.newDeliveryDate.$touch(),e.$v.newPONumber.$touch(),e.$v.newSINumber.$touch(),e.$v.newDeliveredTo.$touch(),e.$v.newClientPO.$touch(),e.$v.newTotalAmount.$touch(),!e.$v.newDRNumber.$error&&!e.$v.newDeliveryDate.$error&&!e.$v.newPONumber.$error&&!e.$v.newSINumber.$error&&!e.$v.newDeliveredTo.$error&&!e.$v.newTotalAmount.$error){e.requestProcessing=!0;var t,a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[];a.get().then((function(a){a.forEach((function(e){n.push(e.data())}));var r="DRI-"+Ro.getFullYear()+Io(Ro.getMonth()+1,2)+Ro.getDate()+"-"+Math.floor(1e6*Math.random());t=""==e.newPORef?e.newPONumber:e.newPORef,Wu.collection("deliveryReceipts").doc().set({deliveryReceiptId:r,drNumber:e.newDRNumber,deliveryDate:e.newDeliveryDate,siNumber:e.newSINumber,clientPO:e.newClientPO,totalAmount:e.newTotalAmount.replaceAll(",",""),poReference:t,paymentTermReference:e.newTerm,customerReference:e.newDeliveredTo,status:1,userReference:n[0].userId,dateCreated:Ro,dateModified:Ro}).then((function(){if(0!=e.drItems.length)for(var t=0;t<e.drItems.length;t++){var a="DRII-"+Ro.getFullYear()+Io(Ro.getMonth()+1,2)+Ro.getDate()+"-"+Math.floor(1e6*Math.random());Wu.collection("deliveryReceiptItems").doc().set({deliveryReceiptItemId:a,description:e.drItems[t].description,quantity:e.drItems[t].quantity,unitPrice:e.drItems[t].unitPrice,amount:e.drItems[t].amount,vat:e.drItems[t].vat,itemReference:e.drItems[t].itemReference,drReference:r,status:1,userReference:n[0].userId,dateCreated:Ro,dateModified:Ro})}e.newDRNumber="",e.newDeliveryDate=To().format("YYYY-MM-DD"),e.newPONumber="",e.newPORef="",e.newSINumber="",e.newTerm="",e.newDeliveredTo="",e.newClientPO="",e.newTotalAmount="",e.drItems=[],e.$v.newDRNumber.$reset(),e.$v.newDeliveryDate.$reset(),e.$v.newPONumber.$reset(),e.$v.newSINumber.$reset(),e.$v.newDeliveredTo.$reset(),e.$v.newClientPO.$reset(),e.$v.newTotalAmount.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New delivery receipt created successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/sales/delivery/receipt/"+r)}))}))}))}}}},Yo=Fo,Vo=(a("6439"),Object(m["a"])(Yo,Po,No,!1,null,null,null)),Uo=Vo.exports,jo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",{staticClass:"pt-4"},[a("vue-good-table",{ref:"ew-account-table",attrs:{columns:e.columns,rows:e.eWalletAccounts,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"eWalletAccountName",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["eWalletAccountName"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.eWalletAccountName))])]):e._e(),"eWalletAccountNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.eWalletAccountNumber))])]):e._e(),"eWallet"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.eWallet))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateEWalletAccountModal(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.eWalletAccounts.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedEWalletAccounts()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-e-wallet-account-modal",modifiers:{"new-e-wallet-account-modal":!0}}],attrs:{id:"darkBtn"}},[e._v("New E Wallet Account")])],1)],1),a("b-modal",{attrs:{size:"lg",id:"new-e-wallet-account-modal",title:"New E Wallet Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addEWalletAccount(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-e-wallet-account-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet Account Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet Account Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Name"},model:{value:e.newEAccountName,callback:function(t){e.newEAccountName=t},expression:"newEAccountName"}}),e.$v.newEAccountName.$anyDirty&&!e.$v.newEAccountName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newEAccountName.$anyDirty&&!e.$v.newEAccountName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Number"},model:{value:e.newEAccountNumber,callback:function(t){e.newEAccountNumber=t},expression:"newEAccountNumber"}}),e.$v.newEAccountNumber.$anyDirty&&!e.$v.newEAccountNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newEAccountNumber.$anyDirty&&!e.$v.newEAccountNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.eWallets,reduce:function(e){return e.eWalletId},label:"eWalletName",clearable:!1},model:{value:e.newEWallet,callback:function(t){e.newEWallet=t},expression:"newEWallet"}}),e.$v.newEWallet.$anyDirty&&!e.$v.newEWallet.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-e-wallet-account-modal",title:"Edit E Wallet Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateEWalletAccount(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-e-wallet-account-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Account Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Name"},model:{value:e.edit.eAccountName,callback:function(t){e.$set(e.edit,"eAccountName",t)},expression:"edit.eAccountName"}}),e.$v.edit.$anyDirty&&!e.$v.edit.eAccountName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.eAccountName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Number"},model:{value:e.edit.eAccountNumber,callback:function(t){e.$set(e.edit,"eAccountNumber",t)},expression:"edit.eAccountNumber"}}),e.$v.edit.$anyDirty&&!e.$v.edit.eAccountNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.eAccountNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.eWallets,reduce:function(e){return e.eWalletId},label:"eWalletName",clearable:!1},model:{value:e.edit.eWallet,callback:function(t){e.$set(e.edit,"eWallet",t)},expression:"edit.eWallet"}}),e.$v.edit.eWallet.$anyDirty&&!e.$v.edit.eWallet.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)},Wo=[],Ko=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),zo=new Date,Lo=a("9f25"),Qo={name:"e-wallet-account",components:{},data:function(){return{columns:[{label:"Account Name",field:"eWalletAccountName"},{label:"Account No",field:"eWalletAccountNumber"},{label:"E Wallet",field:"eWallet"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,eWalletAccounts:[],eWallets:[],newEAccountName:"",newEAccountNumber:"",newEWallet:"",edit:{id:"",ewAccountId:"",eAccountName:"",eAccountNumber:"",eWallet:""},requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20"}},validations:{newEAccountName:{required:cr["required"],alphaNumCustomValidator:Ko},newEAccountNumber:{required:cr["required"],alphaNumCustomValidator:Ko},newEWallet:{required:cr["required"]},edit:{eAccountName:{required:cr["required"],alphaNumCustomValidator:Ko},eAccountNumber:{required:cr["required"],alphaNumCustomValidator:Ko},eWallet:{required:cr["required"]}}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=Vu.collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedEWalletAccounts(),e.getEWallets();case 2:case"end":return t.stop()}}),t)})))()},computed:Object($t["a"])({},Object(ne["b"])({users:"Users/users"})),methods:{getPaginatedEWalletAccounts:function(){var e=this,t=null,a=[],n=[];e.loading=!0,e.eWalletAccounts=[],"all"!=e.limit?t=Eu.collection("eWalletAccounts").orderBy("eWalletAccountName","asc").limit(e.limit):"all"==e.limit&&(t=Eu.collection("eWalletAccounts").orderBy("eWalletAccountName","asc")),t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data()),n.push(e.id)}));for(var r=0;r<a.length;r++)a[r]["id"]=n[r];for(var s=function(t){a[t]["rowNum"]=1+t,a[t]["eWallet"]="";var n=Eu.collection("eWallets"),r=[];n.get().then((function(n){n.forEach((function(e){r.push(e.data())}));for(var s=0;s<r.length;s++)a[t].eWalletReference==r[s].eWalletId&&(a[t].eWallet=r[s].eWalletName);e.eWalletAccounts.push(a[t])}))},i=0;i<a.length;i++)s(i)}setTimeout((function(){e.loading=!1}),1e3)}))},getEWallets:function(){var e=this,t=Eu.collection("eWallets").orderBy("eWalletName","asc");e.eWallets=[],t.get().then((function(t){t.forEach((function(t){e.eWallets.push(t.data())})),e.newEWallet=e.eWallets[0].eWalletId}))},addEWalletAccount:function(){var e=this;if(e.requestProcessing=!1,e.$v.newEAccountName.$touch(),e.$v.newEAccountNumber.$touch(),e.$v.newEWallet.$touch(),!e.$v.newEAccountName.$error&&!e.$v.newEAccountNumber.$error&&!e.$v.newEWallet.$error){e.requestProcessing=!0;var t=null;t=Eu.collection("eWalletAccounts").where("eWalletAccountNumber","==",e.newEAccountNumber).where("eWalletReference","==",e.newEWallet),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="EWAI-"+zo.getFullYear()+Lo(zo.getMonth()+1,2)+zo.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("eWalletAccounts").doc().set({eWalletAccountId:r,eWalletAccountName:e.newEAccountName,eWalletAccountNumber:e.newEAccountNumber,eWalletReference:e.newEWallet,userReference:n[0].userId,status:1,dateCreated:zo,dateModified:zo}).then((function(){e.newEAccountName="",e.newEAccountNumber="",e.newEWallet="",e.$v.newEAccountName.$reset(),e.$v.newEAccountNumber.$reset(),e.$v.newEWallet.$reset(),e.requestProcessing=!1,e.$bvModal.hide("new-e-wallet-account-modal"),e.$refs["ew-account-table"].reset(),e.getEWallets(),e.getPaginatedEWalletAccounts(),e.$swal({title:"Success",text:"New E Wallet Account added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"E Wallet Account already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateEWalletAccountModal:function(e){this.edit={id:e.id,ewAccountId:e.eWalletAccountId,eAccountName:e.eWalletAccountName,eAccountNumber:e.eWalletAccountNumber,eWallet:e.eWalletReference},this.$bvModal.show("update-e-wallet-account-modal")},updateEWalletAccount:function(){var e=this;if(e.requestProcessing=!1,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("eWalletAccounts").where("eWalletAccountNumber","==",e.edit.eAccountNumber).where("eWalletReference","==",e.edit.eWallet).where("eWalletAccountId","!=",e.edit.ewAccountId),t.get().then((function(t){if(t.empty){if(t)try{Eu.collection("eWalletAccounts").doc(e.edit.id).update({eWalletAccountName:e.edit.eAccountName,eWalletAccountNumber:e.edit.eAccountNumber,eWalletReference:e.edit.eWallet,dateModified:zo}).then((function(){e.$v.edit.$reset(),e.$bvModal.hide("update-e-wallet-account-modal"),e.$refs["ew-account-table"].reset(),e.getPaginatedEWalletAccounts(),e.requestProcessing=!1,e.$swal({title:"Success",text:"E Wallet Account updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"E Wallet Account already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}}}},Ho=Qo,Go=Object(m["a"])(Ho,jo,Wo,!1,null,null,null),Zo=Go.exports,Jo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet Account:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.eWallets,reduce:function(e){return e.eWalletId},label:"eWalletName",clearable:!1},on:{input:function(t){return e.getEWAccounts(e.newEWallet)}},model:{value:e.newEWallet,callback:function(t){e.newEWallet=t},expression:"newEWallet"}}),e.$v.newEWallet.$anyDirty&&!e.$v.newEWallet.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-e-wallet-modal",modifiers:{"new-e-wallet-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1),e.ewAccounts.length>0?a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.ewAccounts,reduce:function(e){return e.eWalletAccountId},label:"eWalletAccountNumber",clearable:!1},model:{value:e.newEWAccount,callback:function(t){e.newEWAccount=t},expression:"newEWAccount"}}),e.$v.newEWAccount.$anyDirty&&!e.$v.newEWAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1):e._e(),e.ewAccounts.length<=0?a("div",{staticClass:"col-sm-4 pl-5"},[a("span",{staticClass:"text-red"},[e._v("No Account")])]):e._e(),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-ew-account-modal",modifiers:{"new-ew-account-modal":!0}}],attrs:{id:"darkBtn",block:"",disabled:e.requestProcessing}},[e._v("Add")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payee:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payee Account No.:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newPayee,callback:function(t){e.newPayee=t},expression:"newPayee"}}),e.$v.newPayee.$anyDirty&&!e.$v.newPayee.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPayee.$anyDirty&&!e.$v.newPayee.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newPayeeAccount,callback:function(t){e.newPayeeAccount=t},expression:"newPayeeAccount"}}),e.$v.newPayeeAccount.$anyDirty&&!e.$v.newPayeeAccount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newPayeeAccount.$anyDirty&&!e.$v.newPayeeAccount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction No.:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:e.newTransactionNumber,callback:function(t){e.newTransactionNumber=t},expression:"newTransactionNumber"}}),e.$v.newTransactionNumber.$anyDirty&&!e.$v.newTransactionNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-6"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:e.newTransactionDate,callback:function(t){e.newTransactionDate=t},expression:"newTransactionDate"}}),e.$v.newTransactionDate.$anyDirty&&!e.$v.newTransactionDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Total Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",disabled:""},model:{value:e.newTotalAmount,callback:function(t){e.newTotalAmount=t},expression:"newTotalAmount"}}),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTotalAmount.$anyDirty&&!e.$v.newTotalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-particular-modal",modifiers:{"add-particular-modal":!0}}],staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add Particular")])],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[e._v("Particulars")])])]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.particulars,"search-options":{enabled:!1},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["particular"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.particular))])]):e._e(),"quantity"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.quantity))])]):e._e(),"unitPrice"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.unitPrice))])]):e._e(),"referenceNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.referenceNumber))])]):e._e(),"amount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("â± "+e._s(t.row.amount))])]):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return e.removeParticular(t.row)}}})]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right"},[a("base-button",{staticClass:"col-md-2 ml-2",attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addETransaction(t)}}},[e._v("Save")])],1),a("b-modal",{attrs:{size:"md",id:"new-e-wallet-modal",title:"New E Wallet",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addEWallet(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-e-wallet-modal")}}},[e._v(" Close ")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("E Wallet:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"E Wallet"},model:{value:e.newWallet,callback:function(t){e.newWallet=t},expression:"newWallet"}}),e.$v.newWallet.$anyDirty&&!e.$v.newWallet.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newWallet.$anyDirty&&!e.$v.newWallet.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-ew-account-modal",title:"New E Wallet Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addEWalletAccount(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-ew-account-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet Account Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet Account Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Name"},model:{value:e.newEAccountName,callback:function(t){e.newEAccountName=t},expression:"newEAccountName"}}),e.$v.newEAccountName.$anyDirty&&!e.$v.newEAccountName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newEAccountName.$anyDirty&&!e.$v.newEAccountName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Account Number"},model:{value:e.newEAccountNumber,callback:function(t){e.newEAccountNumber=t},expression:"newEAccountNumber"}}),e.$v.newEAccountNumber.$anyDirty&&!e.$v.newEAccountNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newEAccountNumber.$anyDirty&&!e.$v.newEAccountNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("E Wallet:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.eWallets,reduce:function(e){return e.eWalletId},label:"eWalletName",clearable:!1},model:{value:e.newEWalletA,callback:function(t){e.newEWalletA=t},expression:"newEWalletA"}}),e.$v.newEWalletA.$anyDirty&&!e.$v.newEWalletA.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"add-particular-modal",title:"Add Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("add-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Particular:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Quantity:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Particular"},model:{value:e.newParticular,callback:function(t){e.newParticular=t},expression:"newParticular"}}),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Quantity"},on:{input:function(t){return e.computeAmount(e.newQuantity,e.newUnitPrice)}},model:{value:e.newQuantity,callback:function(t){e.newQuantity=t},expression:"newQuantity"}}),e.$v.newQuantity.$anyDirty&&!e.$v.newQuantity.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newQuantity.$anyDirty&&!e.$v.newQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Unit Price:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Reference Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Unit Price"},on:{input:function(t){return e.computeAmount(e.newQuantity,e.newUnitPrice)}},model:{value:e.newUnitPrice,callback:function(t){e.newUnitPrice=t},expression:"newUnitPrice"}}),e.$v.newUnitPrice.$anyDirty&&!e.$v.newUnitPrice.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newUnitPrice.$anyDirty&&!e.$v.newUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Reference Number"},model:{value:e.newReferenceNumber,callback:function(t){e.newReferenceNumber=t},expression:"newReferenceNumber"}}),e.$v.newReferenceNumber.$anyDirty&&!e.$v.newReferenceNumber.refNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Amount",disabled:""},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.types,reduce:function(e){return e.type},label:"type",clearable:!0},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}})],1)]),"Cash Advance"==e.newType?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Cash Advance Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]):e._e(),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},["Cash Advance"==e.newType?a("v-select",{attrs:{id:"inputStyle",options:e.caTypes,reduce:function(e){return e.cashAdvanceTypeId},label:"type",clearable:!1},model:{value:e.newCAType,callback:function(t){e.newCAType=t},expression:"newCAType"}}):e._e()],1)])])],1)},Xo=[],ec=a("c1df"),tc=new Date,ac=a("9f25"),nc=cr["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),rc=cr["helpers"].regex("alphaNumAndDot",/^[ ,. 0-9 ]*$/),sc=cr["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),ic=cr["helpers"].regex("alphaNumAndDot",/^[ - 0-9 ]*$/),oc=a("e966"),cc=oc.bindWith(",","."),lc={name:"new-e-transaction",components:{},data:function(){return{loading:!1,particulars:[],columns:[{label:"Particular",field:"particular"},{label:"Quantity",field:"quantity"},{label:"Unit Price",field:"unitPrice"},{label:"Reference No.",field:"referenceNumber"},{label:"Amount",field:"amount"},{label:"",field:"action",width:"50px"}],eWallets:[],ewAccounts:[],types:[{type:"Cash Advance"}],caTypes:[],newEWallet:"",newEWAccount:"",newPayee:"",newPayeeAccount:"",newTransactionNumber:"",newTransactionDate:ec().format("YYYY-MM-DD"),newTotalAmount:"",requestProcessing:!1,newWallet:"",newEAccountName:"",newEAccountNumber:"",newEWalletA:"",newParticular:"",newQuantity:"",newUnitPrice:"",newReferenceNumber:"",newAmount:"",newType:"",newCAType:""}},validations:{newEWallet:{required:cr["required"]},newEWAccount:{required:cr["required"]},newPayee:{required:cr["required"],alphaNumCustomValidator:nc},newPayeeAccount:{required:cr["required"],alphaNumCustomValidator:nc},newTransactionNumber:{alphaNumCustomValidator:nc},newTransactionDate:{required:cr["required"]},newTotalAmount:{required:cr["required"],amountCustomValidator:rc},newWallet:{required:cr["required"],alphaNumCustomValidator:nc},newEAccountName:{required:cr["required"],alphaNumCustomValidator:nc},newEAccountNumber:{required:cr["required"],alphaNumCustomValidator:nc},newEWalletA:{required:cr["required"]},newParticular:{required:cr["required"],alphaNumCustomValidator:nc},newQuantity:{required:cr["required"],numCustomValidator:sc},newUnitPrice:{required:cr["required"],amountCustomValidator:rc},newReferenceNumber:{refNumCustomValidator:ic},newAmount:{required:cr["required"],amountCustomValidator:rc}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getEWallets(),e.getCATypes();case 2:case"end":return t.stop()}}),t)})))()},methods:{getCATypes:function(){var e=this,t=Uu.collection("cashAdvanceTypes");e.caTypes=[],t.get().then((function(t){t.forEach((function(t){e.caTypes.push(t.data())})),e.newCAType=e.caTypes[0].cashAdvanceTypeId}))},getEWallets:function(){var e=this,t=Eu.collection("eWallets").orderBy("eWalletName","asc");e.eWallets=[],t.get().then((function(t){t.forEach((function(t){e.eWallets.push(t.data())})),e.newEWallet=e.eWallets[0].eWalletId,e.getEWAccounts(e.newEWallet)}))},getEWAccounts:function(e){var t=this,a=Eu.collection("eWalletAccounts").where("eWalletReference","==",e);t.ewAccounts=[],a.get().then((function(e){e.forEach((function(e){t.ewAccounts.push(e.data())})),t.ewAccounts.length>0&&(t.newEWAccount=t.ewAccounts[0].eWalletAccountId)}))},addEWallet:function(){var e=this;if(e.requestProcessing=!1,e.$v.newWallet.$touch(),!e.$v.newEWallet.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("eWallets").where("eWalletName","==",Object(re["a"])(e.newWallet)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="EWI-"+tc.getFullYear()+ac(tc.getMonth()+1,2)+tc.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("eWallets").doc().set({eWalletId:r,eWalletName:Object(re["a"])(e.newWallet),userReference:n[0].userId,status:1,dateCreated:tc,dateModified:tc}).then((function(){e.newEWallet="",e.requestProcessing=!1,e.$v.newWallet.$reset(),e.$bvModal.hide("new-e-wallet-modal"),e.getEWallets(),e.$swal({title:"Success",text:"New E Wallet added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"E Wallet already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},addEWalletAccount:function(){var e=this;if(e.requestProcessing=!1,e.$v.newEAccountName.$touch(),e.$v.newEAccountNumber.$touch(),e.$v.newEWallet.$touch(),!e.$v.newEAccountName.$error&&!e.$v.newEAccountNumber.$error&&!e.$v.newEWallet.$error){e.requestProcessing=!0;var t=null;t=Eu.collection("eWalletAccounts").where("eWalletAccountNumber","==",e.newEAccountNumber).where("eWalletReference","==",e.newEWalletA),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="EWAI-"+tc.getFullYear()+ac(tc.getMonth()+1,2)+tc.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("eWalletAccounts").doc().set({eWalletAccountId:r,eWalletAccountName:e.newEAccountName,eWalletAccountNumber:e.newEAccountNumber,eWalletReference:e.newEWalletA,userReference:n[0].userId,status:1,dateCreated:tc,dateModified:tc}).then((function(){e.newEAccountName="",e.newEAccountNumber="",e.newEWallet="",e.$v.newEAccountName.$reset(),e.$v.newEAccountNumber.$reset(),e.$v.newEWallet.$reset(),e.requestProcessing=!1,e.$bvModal.hide("new-ew-account-modal"),e.getEWallets(),e.$swal({title:"Success",text:"New E Wallet Account added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"E Wallet Account already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},computeAmount:function(e,t){t=t.replaceAll(",",""),this.newAmount=t*e,this.newAmount=cc(parseFloat(this.newAmount).toFixed(2))},addParticular:function(){var e=this;if(e.$v.newParticular.$touch(),e.$v.newQuantity.$touch(),e.$v.newUnitPrice.$touch(),e.$v.newReferenceNumber.$touch(),e.$v.newAmount.$touch(),!e.$v.newParticular.$error&&!e.$v.newQuantity.$error&&!e.$v.newUnitPrice.$error&&!e.$v.newReferenceNumber.$error&&!e.$v.newAmount.$error){e.requestProcessing=!0,0==e.particulars.length&&(e.particulars=[]);var t={rowNum:"",particular:e.newParticular,quantity:e.newQuantity,unitPrice:cc(e.newUnitPrice),referenceNumber:e.newReferenceNumber,amount:cc(e.newAmount),type:e.newType,caType:e.newCAType};e.particulars.push(t),e.$swal({title:"Success",text:"New particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newParticular="",e.newQuantity="",e.newUnitPrice="",e.newReferenceNumber="",e.newAmount="",e.newType="",e.$v.newParticular.$reset(),e.$v.newQuantity.$reset(),e.$v.newUnitPrice.$reset(),e.$v.newReferenceNumber.$reset(),e.$v.newAmount.$reset(),e.$bvModal.hide("add-particular-modal"),e.getParticulars()})),e.requestProcessing=!1}},getParticulars:function(){var e=this;if(e.loading=!1,0!=e.particulars.length){e.loading=!0,e.newTotalAmount=0;for(var t=0;t<e.particulars.length;t++)e.particulars[t].rowNum=t+1,e.newTotalAmount=parseFloat(e.newTotalAmount)+parseFloat(e.particulars[t].amount.replaceAll(",",""));e.newTotalAmount=cc(parseFloat(e.newTotalAmount).toFixed(2)),setTimeout((function(){e.loading=!1,e.requestProcessing=!1}),1e3)}else 0==e.particulars.length&&(e.particulars=[],e.newTotalAmount="")},removeParticular:function(e){var t=this;this.$swal({title:"Are you sure?",text:"You want to remove this particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&(t.requestProcessing=!0,t.loading=!0,t.particulars.splice(parseInt(e.rowNum-1),1),t.$swal({title:"Success",text:"Particular remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getParticulars(),t.requestProcessing=!1})))}))},addETransaction:function(){var e=this;if(e.$v.newEWallet.$touch(),e.$v.newEWAccount.$touch(),e.$v.newPayee.$touch(),e.$v.newPayeeAccount.$touch(),e.$v.newTransactionDate.$touch(),e.$v.newTotalAmount.$touch(),!e.$v.newEWallet.$error&&!e.$v.newEWAccount.$error&&!e.$v.newPayee.$error&&!e.$v.newPayeeAccount.$error&&!e.$v.newTransactionDate.$error&&!e.$v.newTotalAmount.$error){e.requestProcessing=!0;var t=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),a=[],n=[],r=Vu.collection("eTransactions").orderBy("voucherDate","desc");r.limit(1).get().then((function(r){r.forEach((function(e){e.exists&&n.push(e.data())}));var s="",i=new Date;0!=n.length?(s=ac(parseInt(n[0].voucherNumber.slice(7))+1,5),"100000"==s.toString()&&(s="00001")):s="00001",t.get().then((function(t){t.forEach((function(e){a.push(e.data())}));var n="ETI-"+tc.getFullYear()+ac(tc.getMonth()+1,2)+tc.getDate()+"-"+Math.floor(1e6*Math.random());Vu.collection("eTransactions").doc().set({eTransactionId:n,voucherNumber:ac(i.getMonth()+1)+""+i.getFullYear().toString().slice(2,4)+"-"+s,voucherDate:i,payee:e.newPayee,payeeAccountNumber:e.newPayeeAccount,transactionNumber:e.newTransactionNumber,transactionDate:e.newTransactionDate,totalAmount:e.newTotalAmount.replaceAll(",",""),eWalletReference:e.newEWallet,eWalletAccountReference:e.newEWAccount,status:1,userReference:a[0].userId,dateCreated:tc,dateModified:tc}).then((function(){if(0!=e.particulars.length)for(var t=0;t<e.particulars.length;t++){var r="ETPI-"+tc.getFullYear()+ac(tc.getMonth()+1,2)+tc.getDate()+"-"+Math.floor(1e6*Math.random()),s="CAI-"+tc.getFullYear()+ac(tc.getMonth()+1,2)+tc.getDate()+"-"+Math.floor(1e6*Math.random());Vu.collection("eTransactionParticulars").doc().set({eTransactionParticularId:r,particular:e.particulars[t].particular,quantity:e.particulars[t].quantity,unitPrice:e.particulars[t].unitPrice,referenceNumber:e.particulars[t].referenceNumber,amount:e.particulars[t].amount,eTransactionReference:n,status:1,userReference:a[0].userId,dateCreated:tc,dateModified:tc}),"Cash Advance"==e.particulars[t].type&&Uu.collection("cashAdvances").doc().set({cashAdvanceId:s,cashAdvanceName:e.particulars[t].particular,cashAdvanceAmount:e.particulars[t].amount,type:"E Wallet",caTypeReference:e.particulars[t].caType,cashAdvanceDate:e.newTransactionDate,reference:"",description:"",status:1,userReference:a[0].userId,dateCreated:tc,dateModified:tc})}e.newEWallet="",e.newEWAccount="",e.newPayee="",e.newPayeeAccount="",e.newTransactionNumber="",e.newTransactionDate="",e.newTotalAmount="",e.particulars=[],e.$v.newEWallet.$reset(),e.$v.newEWAccount.$reset(),e.$v.newPayee.$reset(),e.$v.newPayeeAccount.$reset(),e.$v.newTransactionDate.$reset(),e.$v.newTotalAmount.$reset(),e.requestProcessing=!1,e.$swal({title:"Success",text:"New e transaction created successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$router.push("/view/electronic/transaction/"+n)}))}))}))}))}}}},uc=lc,dc=(a("ea6c"),Object(m["a"])(uc,Jo,Xo,!1,null,null,null)),mc=dc.exports,pc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"ca-type-table",attrs:{columns:e.columns,rows:e.caTypes,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["type"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.type))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateCATypeModal(t.row)}}})]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.caTypes.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedCATypes()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-cash-advance-type-modal",modifiers:{"new-cash-advance-type-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Cash Advance Type")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-cash-advance-type-modal",title:"New Cash Advance Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addCAType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-cash-advance-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newType.$anyDirty&&!e.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-cash-advance-type-modal",title:"Edit Cash Advance Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateCAType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-cash-advance-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}}),e.$v.edit.$anyDirty&&!e.$v.edit.type.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.type.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},bc=[],hc=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),fc=new Date,vc=a("9f25"),wc={components:{},name:"cash-advance-type",data:function(){return{columns:[{label:"Cash Advance Type",field:"type"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],caTypes:[],loading:!0,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newType:"",edit:{id:"",caTypeId:"",type:""}}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=Vu.collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedCATypes();case 1:case"end":return t.stop()}}),t)})))()},computed:Object($t["a"])({},Object(ne["b"])({users:"Users/users"})),validations:{newType:{required:cr["required"],alphaNumCustomValidator:hc},edit:{type:{required:cr["required"],alphaNumCustomValidator:hc}}},methods:{getPaginatedCATypes:function(){var e=this,t=null,a=[],n=[];e.loading=!0,e.caTypes=[],"all"!=e.limit?t=Uu.collection("cashAdvanceTypes").orderBy("type","asc").limit(e.limit):"all"==e.limit&&(t=Uu.collection("cashAdvanceTypes").orderBy("type","asc")),t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data()),n.push(e.id)}));for(var r=0;r<a.length;r++)a[r]["id"]=n[r],e.caTypes.push(a[r])}setTimeout((function(){e.loading=!1}),1e3)}))},addCAType:function(){var e=this;if(e.requestProcessing=!1,e.$v.newType.$touch(),!e.$v.newType.$error){var t=null;e.requestProcessing=!0,t=Uu.collection("cashAdvanceTypes").where("type","==",Object(re["a"])(e.newType)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="CATI-"+fc.getFullYear()+vc(fc.getMonth()+1,2)+fc.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Uu.collection("cashAdvanceTypes").doc().set({cashAdvanceTypeId:r,type:Object(re["a"])(e.newType),userReference:n[0].userId,status:1,dateCreated:fc,dateModified:fc}).then((function(){e.newType="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$bvModal.hide("new-cash-advance-type-modal"),e.$refs["ca-type-table"].reset(),e.getPaginatedCATypes(),e.$swal({title:"Success",text:"New cash advance type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Cash Advance type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateCATypeModal:function(e){this.edit={id:e.id,caTypeId:e.cashAdvanceTypeId,type:e.type},this.$bvModal.show("update-cash-advance-type-modal")},updateCAType:function(){var e=this;if(e.requestProcessing=!0,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;t=Uu.collection("cashAdvanceTypes").where("type","==",Object(re["a"])(e.edit.type)).where("cashAdvanceTypeId","!=",e.edit.caTypeId),t.get().then((function(t){if(t.empty){if(t)try{Uu.collection("cashAdvanceTypes").doc(e.edit.id).update({type:Object(re["a"])(e.edit.type),dateModified:fc}).then((function(){e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-cash-advance-type-modal"),e.requestProcessing=!1,e.$refs["ca-type-table"].reset(),e.getPaginatedCATypes(),e.$swal({title:"Success",text:"Cash Advance type updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Cash Advance type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}}}},Cc=wc,gc=(a("438e"),Object(m["a"])(Cc,pc,bc,!1,null,null,null)),kc=gc.exports,yc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"text-left"},[a("h4",[e._v("For Clearing Checks")])])]),a("div",{staticClass:"row pl-4 pt-2 pb-2"},[a("span",{staticClass:"col-2 pt-2"},[a("b",[e._v("Filter by week:")])]),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"date",min:"1997-01-01",max:e.maxDate},on:{input:function(t){return e.getClearedCheck(1)}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"date",min:"1997-01-01",max:e.maxDate},on:{input:function(t){return e.getClearedCheck(1)}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)]),a("vue-good-table",{attrs:{columns:e.columns,rows:e.clearedChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bankCheckNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankCheckNumber))])]):e._e(),"supplier"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.supplier))])]):e._e(),"voucherNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.voucherNumber))])]):e._e(),"bankCheckAmount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.bankCheckAmount))])]):e._e(),"bankCheckDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.bankCheckDate,"MMMM DD, YYYY")))])]):e._e(),"bank"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bank))])]):e._e(),"bankAccount"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankAccount))])]):e._e()])]}}])}),a("hr",{staticClass:"mt-2 mb-2"}),e.clearedChecks.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(t){return e.getClearedCheck()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mt-2 mb-2"}),0!=e.clearingTodayAmount?a("div",{staticClass:"pl-6 pt-2"},e._l(e.clearingAmounts,(function(t){return a("span",{key:t.bankId,staticClass:"row"},[a("span",{staticClass:"col-sm-6 text-right"},[a("b",[e._v(e._s(t.bank)+" Account No. "+e._s(t.account)+": ")]),e._v(" ("+e._s(t.countChecks)+" Checks) ")]),a("span",{staticClass:"col-sm-4 text-left"},[e._v("â± "+e._s(t.amount))])])})),0):e._e(),0!=e.clearingTodayAmount?a("hr",{staticClass:"mt-2 mb-2"}):e._e(),0!=e.clearingTodayAmount?a("div",{staticClass:"text-right pt-2 pr-6"},[a("b",[e._v("Total Amount: ")]),e._v(" â± "+e._s(e.clearingTodayAmount)+" ")]):e._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(t){return e.printForClearing(t)}}},[e._v("Print")])],1)])],1)],1)},$c=[],_c=a("c1df"),xc=a("e966"),Ac=xc.bindWith(",","."),Dc={name:"for-clearing-checks",components:{},data:function(){return{columns:[{label:"Check No",field:"bankCheckNumber"},{label:"Payee",field:"supplier",width:"150px"},{label:"Voucher No",field:"voucherNumber"},{label:"Amount",field:"bankCheckAmount"},{label:"Check Date",field:"bankCheckDate"},{label:"Bank",field:"bank",width:"100px"},{label:"Account Number",field:"bankAccount",width:"150px"}],loading:!0,dateToday:_c().format("YYYY-MM-DD"),dateTom:_c().add(1,"day").format("YYYY-MM-DD"),currentPostdatedPage:1,clearedChecks:[],clearedCheckCount:1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All"}],limit:"30",endDate:_c().subtract(1,"day").format("YYYY-MM-DD"),startDate:_c().subtract(7,"days").format("YYYY-MM-DD"),maxDate:_c().subtract(1,"day").format("YYYY-MM-DD"),suppliers:[],clearingTodayAmount:0,clearingAmounts:[]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getClearedCheck(),6==_c(e.endDate).day()?e.maxDate=_c(e.endDate).subtract(1,"day").format("YYYY-MM-DD"):0==_c(e.endDate).day()&&(e.maxDate=_c(e.endDate).subtract(2,"days").format("YYYY-MM-DD"));case 2:case"end":return t.stop()}}),t)})))()},methods:{getClearedCheck:function(){var e=this,t=null,a=[],n=[];6==_c(e.endDate).day()?e.endDate=_c(e.endDate).subtract(1,"day").format("YYYY-MM-DD"):0==_c(e.endDate).day()&&(e.endDate=_c(e.endDate).subtract(2,"days").format("YYYY-MM-DD"));var r=_c(e.startDate).format("YYYY-MM-DD"),s=_c(e.endDate).format("YYYY-MM-DD"),i=_c().format("YYYY-MM-DD"),o=[];e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var c=Vu.collection("users").where("username","==",e.username),l=[],u="",d="",m=0,p=[],b=[];c.get().then((function(c){c.forEach((function(e){l.push(e.data())})),d=l[0].userId;var h=Vu.collection("userRoles").where("userRoleId","==",l[0].userRoleReference),f=[];h.get().then((function(c){c.forEach((function(e){f.push(e.data())})),u=f[0].userRole,e.clearedChecks=[],e.clearedCheckCount=0,e.clearingAmounts=[],e.clearingTodayAmount=0,"Administrator"==u||"Manager"==u?"all"!=e.limit?t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("bankCheckDate","<=",s).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(e.limit):"all"==e.limit&&(t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("bankCheckDate","<=",s).where("status","in",[1,3]).orderBy("bankCheckDate","desc")):"User"==u&&("all"!=e.limit?t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("bankCheckDate","<=",s).where("userReference","==",d).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(e.limit):"all"==e.limit&&(t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("bankCheckDate","<=",s).where("userReference","==",d).where("status","in",[1,3]).orderBy("bankCheckDate","desc"))),t.get().then((function(t){t.forEach((function(e){a.push(e.data()),n.push(e.id)}));var r=Mu.collection("suppliers"),s=Eu.collection("banks"),c=Eu.collection("bankAccounts"),l=[],u=[],d=[];r.get().then((function(t){t.forEach((function(e){l.push(e.data())})),s.get().then((function(t){t.forEach((function(e){u.push(e.data())})),c.get().then((function(t){t.forEach((function(e){d.push(e.data())}));for(var n=0;n<a.length;n++)_c(a[n].bankCheckDate).format("YYYY-MM-DD")<i&&o.push(a[n]);for(var r=0;r<o.length;r++){o[r]["rowNum"]=1+r,o[r]["supplier"]="",o[r]["bank"]="",o[r]["bankAccount"]="";for(var c=0;c<l.length;c++)o[r].payeeReference==l[c].supplierId&&(o[r].supplier=l[c].supplier);for(var h=0;h<u.length;h++)o[r].bankReference==u[h].bankUid&&(o[r].bank=u[h].bank);for(var f=0;f<d.length;f++)o[r].bankAccountReference==d[f].bankAccountUid&&(o[r].bankAccount=d[f].bankAccountNumber);m=parseFloat(m)+parseFloat(o[r].bankCheckAmount),o[r].bankCheckAmount=Ac(parseFloat(o[r].bankCheckAmount).toFixed(2)),e.clearedChecks.push(o[r]),p.push(o[r])}e.clearedChecks.sort((function(e,t){return t.backCheckDate-e.bankCheckDate})),e.clearedCheckCount=o.length;for(var v=0;v<d.length;v++){for(var w="",C=0,g="",k=0,y=0;y<p.length;y++)d[v].bankAccountUid==p[y].bankAccountReference&&(w=d[v].bankAccountNumber,g=d[v].bankReference,C=parseFloat(C)+parseFloat(p[y].bankCheckAmount.replaceAll(",","")),k++);""!=w&&0!=C&&b.push({account:w,amount:parseFloat(C).toFixed(2),countChecks:k,bankId:g})}s.get().then((function(t){t.forEach((function(e){u.push(e.data())}));for(var a=0;a<b.length;a++){for(var n=0;n<u.length;n++)u[n].bankUid==b[a].bankId&&(b[a]["bank"]=u[n].bank,b[a].amount=Ac(parseFloat(b[a].amount.replaceAll(",","")).toFixed(2)));e.clearingAmounts.push(b[a])}})),m>0&&(e.clearingTodayAmount=Ac(parseFloat(m).toFixed(2)))}))}))}))}))}))})),setTimeout((function(){e.loading=!1}),1e3)},printForClearing:function(){var e=this,t=_c(e.startDate).format("YYYY-MM-DD"),a=_c(e.endDate).format("YYYY-MM-DD");dr()({printable:e.clearedChecks,properties:[{field:"bankCheckNumber",displayName:"Check Number"},{field:"bankCheckDate",displayName:"Check Date"},{field:"supplier",displayName:"Check Payee"},{field:"voucherNumber",displayName:"Voucher No"},{field:"bankCheckAmount",displayName:"Amount"},{field:"bank",displayName:"Bank"},{field:"bankAccount",displayName:"Account Number"}],type:"json",header:"<h2>For Clearing Checks</h2><h5>("+_c(t).format("MMMM DD, YYYY")+"-"+_c(a).format("MMMM DD, YYYY")+")</h5>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:"For Clearing Checks "+_c().format("MMMM YYYY")})}}},Pc=Dc,Nc=Object(m["a"])(Pc,yc,$c,!1,null,null,null),Tc=Nc.exports,Rc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"text-left"},[a("h4",[e._v("Nearly Clearing Checks")])])]),a("vue-good-table",{attrs:{columns:e.columns,rows:e.clearingChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bankCheckNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankCheckNumber))])]):e._e(),"supplier"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.supplier))])]):e._e(),"voucherNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.voucherNumber))])]):e._e(),"bankCheckAmount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.bankCheckAmount))])]):e._e(),"bank"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bank))])]):e._e(),"bankAccount"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankAccount))])]):e._e(),"bankCheckDate"==t.column.field?a("span",[t.row.bankCheckDate==e.dateToday&&e.dayToday<6&&e.dayToday>0?a("span",{attrs:{id:"redTxt"}},[a("b",[e._v("Clearing Today")])]):t.row.bankCheckDate==e.dateTom&&t.row.day<=5&&t.row.day>=1?a("span",{attrs:{id:"sideBarTxt"}},[a("b",[e._v("Clearing Tomorrow ("+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+")")])]):a("span",{attrs:{id:"sideBarTxt"}},[t.row.day<=5&&t.row.day>=1?a("b",[e._v(" Clearing on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+" ")]):e._e(),6==t.row.day&&1==e.dayToday?a("b",[e._v(" Clearing on Today "),a("br"),e._v("(Check date on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+") ")]):6==t.row.day&&0==e.dayToday?a("b",[e._v(" Clearing Tomorrow "),a("br"),e._v("(Check date on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+") ")]):6==t.row.day?a("b",[e._v(" Clearing on Monday "),a("br"),e._v("(Check date on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+") ")]):e._e(),0==t.row.day&&1==e.dayToday?a("b",[e._v(" Clearing on Today "),a("br"),e._v("(Check date on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+") ")]):0==t.row.day&&0==e.dayToday?a("b",[e._v(" Clearing Tomorrow "),a("br"),e._v("(Check date on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+") ")]):0==t.row.day?a("b",[e._v(" Clearing on Monday "),a("br"),e._v("(Check date on "+e._s(e._f("moment")(t.row.bankCheckDate,"dddd"))+") ")]):e._e()]),a("span",[e._v("("+e._s(e._f("moment")(t.row.bankCheckDate,"MMMM DD, YYYY"))+")")])]):e._e()])]}}])}),a("hr",{staticClass:"mt-2 mb-2"}),0!=e.clearingTodayAmount?a("div",{staticClass:"pl-6 pt-2"},e._l(e.clearingAmounts,(function(t){return a("span",{key:t.bankId,staticClass:"row"},[a("span",{staticClass:"col-sm-6 text-right"},[a("b",[e._v(e._s(t.bank)+" Account No. "+e._s(t.account)+": ")]),e._v(" ("+e._s(t.countChecks)+" Checks) ")]),a("span",{staticClass:"col-sm-4 text-left"},[e._v("â± "+e._s(t.amount))])])})),0):e._e(),0!=e.clearingTodayAmount?a("hr",{staticClass:"mt-2 mb-2"}):e._e(),0!=e.clearingTodayAmount?a("div",{staticClass:"text-right pt-2 pr-6"},[a("b",[e._v("Total Amount: ")]),e._v(" â± "+e._s(e.clearingTodayAmount)+" ")]):e._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(t){return e.printNearlyClearing(t)}}},[e._v("Print")])],1)])],1)],1)},Ic=[],Sc=a("c1df"),qc=a("e966"),Bc=qc.bindWith(",","."),Mc={name:"nearly-clearing-checks",components:{},data:function(){return{columns:[{label:"Check No",field:"bankCheckNumber"},{label:"Payee",field:"supplier",width:"150px"},{label:"Voucher No",field:"voucherNumber"},{label:"Amount",field:"bankCheckAmount"},{label:"Bank",field:"bank",width:"100px"},{label:"Account Number",field:"bankAccount",width:"150px"},{label:"Check Date",field:"bankCheckDate"}],loading:!0,dateToday:Sc().format("YYYY-MM-DD"),dateTom:Sc().add(1,"day").format("YYYY-MM-DD"),dayToday:Sc().day(),clearingChecks:[],clearingTodayAmount:0,clearingAmounts:[]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getClearingCheck();case 1:case"end":return t.stop()}}),t)})))()},methods:{getClearingCheck:function(){var e=this,t=null,a=[],n=[],r=[],s=Sc().add(6,"days").format("YYYY-MM-DD"),i=Sc().format("YYYY-MM-DD"),o=0,c=[],l=Eu.collection("banks").orderBy("bank","asc"),u=Eu.collection("bankAccounts").orderBy("bankAccountName","asc"),d=[],m=[],p=[],b=Sc().startOf("week").format("YYYY-MM-DD");1!=Sc().day()&&0!=Sc().day()||(i=Sc(b).subtract(1,"day").format("YYYY-MM-DD"),s=Sc().add(4,"days").format("YYYY-MM-DD")),e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var h=Vu.collection("users").where("username","==",e.username),f=[],v="",w="";h.get().then((function(b){b.forEach((function(e){f.push(e.data())})),w=f[0].userId;var h=Vu.collection("userRoles").where("userRoleId","==",f[0].userRoleReference),C=[];h.get().then((function(b){b.forEach((function(e){C.push(e.data())})),v=C[0].userRole,e.clearingChecks=[],e.clearingCheckCount=0,e.clearingTodayAmount=0,"Administrator"==v||"Manager"==v?t=Mu.collection("bankChecks").where("bankCheckDate",">=",i).where("bankCheckDate","<=",s).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc"):"User"==v&&(t=Mu.collection("bankChecks").where("bankCheckDate",">=",i).where("bankCheckDate","<=",s).where("userReference","==",w).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc")),t.get().then((function(t){t.forEach((function(e){a.push(e.data()),n.push(e.id)})),console.log(a);for(var s=0;s<a.length;s++)r.push(a[s]);for(var i=0;i<r.length;i++)r[i]["day"]=Sc(r[i].bankCheckDate).day();var b=Mu.collection("suppliers"),h=Eu.collection("banks"),f=Eu.collection("bankAccounts"),v=[],w=[],C=[];b.get().then((function(t){t.forEach((function(e){v.push(e.data())})),h.get().then((function(t){t.forEach((function(e){w.push(e.data())})),f.get().then((function(t){t.forEach((function(e){C.push(e.data())}));for(var a=0;a<r.length;a++){r[a]["rowNum"]=1+a,r[a]["supplier"]="",r[a]["bank"]="",r[a]["bankAccount"]="";for(var n=0;n<v.length;n++)r[a].payeeReference==v[n].supplierId&&(r[a].supplier=v[n].supplier);for(var s=0;s<w.length;s++)r[a].bankReference==w[s].bankUid&&(r[a].bank=w[s].bank);for(var i=0;i<C.length;i++)r[a].bankAccountReference==C[i].bankAccountUid&&(r[a].bankAccount=C[i].bankAccountNumber);o=parseFloat(o)+parseFloat(r[a].bankCheckAmount),c.push(r[a]),r[a].bankCheckAmount=Bc(parseFloat(r[a].bankCheckAmount).toFixed(2)),e.clearingChecks.push(r[a])}u.get().then((function(t){t.forEach((function(e){d.push(e.data())}));for(var a=0;a<d.length;a++){for(var n="",r=0,s="",i=0,o=0;o<c.length;o++)d[a].bankAccountUid==c[o].bankAccountReference&&(n=d[a].bankAccountNumber,s=d[a].bankReference,r=parseFloat(r)+parseFloat(c[o].bankCheckAmount.replaceAll(",","")),i++);""!=f&&0!=r&&m.push({account:n,amount:r,countChecks:i,bankId:s})}l.get().then((function(t){t.forEach((function(e){p.push(e.data())}));for(var a=0;a<m.length;a++)for(var n=0;n<p.length;n++)p[n].bankUid==m[a].bankId&&(m[a]["bank"]=p[n].bank,m[a].amount=Bc(parseFloat(m[a].amount).toFixed(2)),e.clearingAmounts.push(m[a]))}))})),o>0&&(e.clearingTodayAmount=Bc(parseFloat(o).toFixed(2)))}))}))}))})),setTimeout((function(){e.loading=!1}),1e3)}))}))},printNearlyClearing:function(){var e=this,t=Sc().add(6,"days").format("YYYY-MM-DD"),a=Sc().format("YYYY-MM-DD");dr()({printable:e.clearingChecks,properties:[{field:"bankCheckNumber",displayName:"Check Number"},{field:"bankCheckDate",displayName:"Check Date"},{field:"supplier",displayName:"Check Payee"},{field:"voucherNumber",displayName:"Voucher No"},{field:"bankCheckAmount",displayName:"Amount"},{field:"bank",displayName:"Bank"},{field:"bankAccount",displayName:"Account Number"}],type:"json",header:"<h2>Nearly Clearing Checks</h2><h5>("+Sc(a).format("MMMM DD, YYYY")+"-"+Sc(t).format("MMMM DD, YYYY")+")</h5>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:"Nearly Clearing Checks "+Sc().format("MMMM YYYY")})}}},Oc=Mc,Ec=Object(m["a"])(Oc,Rc,Ic,!1,null,null,null),Fc=Ec.exports,Yc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"text-left"},[a("h4",[e._v("Post-Dated Checks")])])]),a("vue-good-table",{attrs:{columns:e.columns,rows:e.postdatedChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bankCheckNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankCheckNumber))])]):e._e(),"supplier"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.supplier))])]):e._e(),"voucherNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.voucherNumber))])]):e._e(),"bankCheckAmount"==t.column.field?a("span",[a("span",[e._v("â± "+e._s(t.row.bankCheckAmount))])]):e._e(),"bankCheckDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.bankCheckDate,"MMMM DD, YYYY")))])]):e._e(),"bank"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bank))])]):e._e(),"bankAccount"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.bankAccount))])]):e._e()])]}}])}),a("hr",{staticClass:"mt-2 mb-2"}),e.postdatedChecks.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(t){return e.getPostDatedCheck()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(t){return e.printPostDated(t)}}},[e._v("Print")])],1)])],1)],1)},Vc=[],Uc=a("c1df"),jc=a("e966"),Wc=jc.bindWith(",","."),Kc={name:"post-dated-checks",components:{},data:function(){return{columns:[{label:"Check No",field:"bankCheckNumber"},{label:"Payee",field:"supplier",width:"150px"},{label:"Voucher No",field:"voucherNumber"},{label:"Amount",field:"bankCheckAmount"},{label:"Check Date",field:"bankCheckDate"},{label:"Bank",field:"bank",width:"100px"},{label:"Account Number",field:"bankAccount",width:"150px"}],loading:!0,dateToday:Uc().format("YYYY-MM-DD"),dateTom:Uc().add(1,"day").format("YYYY-MM-DD"),postdatedChecks:[],views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All"}],limit:"30"}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPostDatedCheck();case 1:case"end":return t.stop()}}),t)})))()},methods:{getPostDatedCheck:function(){var e=this,t=null,a=[],n=[],r=Uc().add(7,"days").format("YYYY-MM-DD"),s=[];e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var i=Vu.collection("users").where("username","==",e.username),o=[],c="",l="";1==Uc(r).day()&&(r=Uc().add(5,"days").format("YYYY-MM-DD")),i.get().then((function(i){i.forEach((function(e){o.push(e.data())})),l=o[0].userId;var u=Vu.collection("userRoles").where("userRoleId","==",o[0].userRoleReference),d=[];u.get().then((function(i){i.forEach((function(e){d.push(e.data())})),c=d[0].userRole,e.postdatedChecks=[],e.postdatedCheckCount=0,"Administrator"==c||"Manager"==c?"all"!=e.limitPostdated?t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc").limit(e.limitPostdated):"all"==e.limitPostdated&&(t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc")):"User"==c&&("all"!=e.limitPostdated?t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("userReference","==",l).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc").limit(e.limitPostdated):"all"==e.limitPostdated&&(t=Mu.collection("bankChecks").where("bankCheckDate",">=",r).where("userReference","==",l).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc"))),t.get().then((function(t){t.forEach((function(e){a.push(e.data()),n.push(e.id)}));var r=Mu.collection("suppliers"),i=Eu.collection("banks"),o=Eu.collection("bankAccounts"),c=[],l=[],u=[];r.get().then((function(t){t.forEach((function(e){c.push(e.data())})),i.get().then((function(t){t.forEach((function(e){l.push(e.data())})),o.get().then((function(t){t.forEach((function(e){u.push(e.data())}));for(var n=0;n<a.length;n++)s.push(a[n]);for(var r=0;r<s.length;r++){s[r]["rowNum"]=1+r,s[r]["supplier"]="",s[r]["bank"]="",s[r]["bankAccount"]="";for(var i=0;i<c.length;i++)s[r].payeeReference==c[i].supplierId&&(s[r].supplier=c[i].supplier);for(var o=0;o<l.length;o++)s[r].bankReference==l[o].bankUid&&(s[r].bank=l[o].bank);for(var d=0;d<u.length;d++)s[r].bankAccountReference==u[d].bankAccountUid&&(s[r].bankAccount=u[d].bankAccountNumber);s[r].bankCheckAmount=Wc(parseFloat(s[r].bankCheckAmount).toFixed(2)),e.postdatedChecks.push(s[r])}}))}))}))}))}))})),setTimeout((function(){e.loading=!1}),1e3)},printPostDated:function(){var e=this,t=Uc().add(6,"days").format("YYYY-MM-DD");dr()({printable:e.postdatedChecks,properties:[{field:"bankCheckNumber",displayName:"Check Number"},{field:"bankCheckDate",displayName:"Check Date"},{field:"supplier",displayName:"Check Payee"},{field:"voucherNumber",displayName:"Voucher No"},{field:"bankCheckAmount",displayName:"Amount"},{field:"bank",displayName:"Bank"},{field:"bankAccount",displayName:"Account Number"}],type:"json",header:"<h2>Post-Dated Checks</h2><h5>(Start Date: "+Uc(t).format("MMMM DD, YYYY")+")</h5>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:"Post-Dated Checks "+Uc().format("MMMM YYYY")})}}},zc=Kc,Lc=Object(m["a"])(zc,Yc,Vc,!1,null,null,null),Qc=Lc.exports,Hc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedCDTypes(1)}}},[e._v("Active")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedCDTypes(0)}}},[e._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"cd-type-table",attrs:{columns:e.columns,rows:e.cdTypes,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["type"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.type))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateCDTypeModal(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return e.changeStatus(t.row,0,"Disable")}}}):e._e(),0==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Active"},on:{click:function(a){return e.changeStatus(t.row,1,"Active")}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.cdTypes.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedCDTypes(1)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-cash-disbursement-type-modal",modifiers:{"new-cash-disbursement-type-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Cash Disbursement Type")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-cash-disbursement-type-modal",title:"New Cash Disbursement Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addCDType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-cash-disbursement-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newType.$anyDirty&&!e.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-cash-disbursement-type-modal",title:"Edit Cash Disbursement Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateCDType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-cash-disbursement-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}}),e.$v.edit.$anyDirty&&!e.$v.edit.type.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.type.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},Gc=[],Zc=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),Jc=new Date,Xc=a("9f25"),el={components:{},name:"cash-disbursement-type",data:function(){return{columns:[{label:"Type",field:"type"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"80px"}],cdTypes:[],loading:!0,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",stat:1,newType:"",edit:{id:"",cdTypeId:"",type:""}}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=Vu.collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedCDTypes(1);case 1:case"end":return t.stop()}}),t)})))()},computed:Object($t["a"])({},Object(ne["b"])({users:"Users/users"})),validations:{newType:{required:cr["required"],alphaNumCustomValidator:Zc},edit:{type:{required:cr["required"],alphaNumCustomValidator:Zc}}},methods:{getPaginatedCDTypes:function(e){var t=this,a=null,n=[],r=[];t.loading=!0,t.cdTypes=[],t.stat=e,"all"!=t.limit?a=Eu.collection("cashDisbursementTypes").where("status","==",e).orderBy("type","asc").limit(t.limit):"all"==t.limit&&(a=Eu.collection("cashDisbursementTypes").where("status","==",e).orderBy("type","asc")),a.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data()),r.push(e.id)}));for(var a=0;a<n.length;a++)n[a]["id"]=r[a],t.cdTypes.push(n[a])}setTimeout((function(){t.loading=!1}),1e3)}))},addCDType:function(){var e=this;if(e.requestProcessing=!1,e.$v.newType.$touch(),!e.$v.newType.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("cashDisbursementTypes").where("type","==",Object(re["a"])(e.newType)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="CDTI-"+Jc.getFullYear()+Xc(Jc.getMonth()+1,2)+Jc.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("cashDisbursementTypes").doc().set({cashDisbursementTypeId:r,type:Object(re["a"])(e.newType),userReference:n[0].userId,status:1,dateCreated:Jc,dateModified:Jc}).then((function(){e.newType="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$bvModal.hide("new-cash-disbursement-type-modal"),e.$refs["cd-type-table"].reset(),e.getPaginatedCDTypes(1),e.$swal({title:"Success",text:"New cash disbursement type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Cash disbursement type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateCDTypeModal:function(e){this.edit={id:e.id,cdTypeId:e.cashDisbursementTypeId,type:e.type},this.$bvModal.show("update-cash-disbursement-type-modal")},updateCDType:function(){var e=this;if(e.requestProcessing=!0,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;t=Eu.collection("cashDisbursementTypes").where("type","==",Object(re["a"])(e.edit.type)).where("cashDisbursementTypeId","!=",e.edit.cdTypeId),t.get().then((function(t){if(t.empty){if(t)try{Eu.collection("cashDisbursementTypes").doc(e.edit.id).update({type:Object(re["a"])(e.edit.type),dateModified:Jc}).then((function(){e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-cash-disbursement-type-modal"),e.requestProcessing=!1,e.$refs["cd-type-table"].reset(),e.getPaginatedCDTypes(1),e.$swal({title:"Success",text:"Cash disbursement type updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Cash disbursement type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},changeStatus:function(e,t,a){var n=this;n.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value)try{Eu.collection("cashDisbursementTypes").doc(e.id).update({status:t,dateModified:Jc}).then((function(){n.$swal({title:"Success",text:"Cast disbursement type status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){n.$refs["cd-type-table"].reset(),n.getPaginatedCDTypes(t)}))}))}catch(s){console.log(s),n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},tl=el,al=(a("41be"),Object(m["a"])(tl,Hc,Gc,!1,null,null,null)),nl=al.exports,rl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedRDTypes(1)}}},[e._v("Active")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==e.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedRDTypes(0)}}},[e._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"rd-type-table",attrs:{columns:e.columns,rows:e.rdTypes,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["type"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.type))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateRDTypeModal(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return e.changeStatus(t.row,0,"Disable")}}}):e._e(),0==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Active"},on:{click:function(a){return e.changeStatus(t.row,1,"Active")}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.rdTypes.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedRDTypes(1)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-remittance-disbursement-type-modal",modifiers:{"new-remittance-disbursement-type-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Remittance Disbursement Type")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-remittance-disbursement-type-modal",title:"New Remittance Disbursement Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addRDType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-remittance-disbursement-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newType.$anyDirty&&!e.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-remittance-disbursement-type-modal",title:"Edit Remittance Disbursement Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateRDType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-remittance-disbursement-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}}),e.$v.edit.$anyDirty&&!e.$v.edit.type.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.type.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},sl=[],il=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),ol=new Date,cl=a("9f25"),ll={components:{},name:"remittance-disbursement-type",data:function(){return{columns:[{label:"Type",field:"type"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"80px"}],rdTypes:[],loading:!0,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",stat:1,newType:"",edit:{id:"",rdTypeId:"",type:""}}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=Vu.collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=Vu.collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedRDTypes(1);case 1:case"end":return t.stop()}}),t)})))()},computed:Object($t["a"])({},Object(ne["b"])({users:"Users/users"})),validations:{newType:{required:cr["required"],alphaNumCustomValidator:il},edit:{type:{required:cr["required"],alphaNumCustomValidator:il}}},methods:{getPaginatedRDTypes:function(e){var t=this,a=null,n=[],r=[];t.loading=!0,t.rdTypes=[],t.stat=e,"all"!=t.limit?a=Eu.collection("remittanceDisbursementTypes").where("status","==",e).orderBy("type","asc").limit(t.limit):"all"==t.limit&&(a=Eu.collection("remittanceDisbursementTypes").where("status","==",e).orderBy("type","asc")),a.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data()),r.push(e.id)}));for(var a=0;a<n.length;a++)n[a]["id"]=r[a],t.rdTypes.push(n[a])}setTimeout((function(){t.loading=!1}),1e3)}))},addRDType:function(){var e=this;if(e.requestProcessing=!1,e.$v.newType.$touch(),!e.$v.newType.$error){var t=null;e.requestProcessing=!0,t=Eu.collection("remittanceDisbursementTypes").where("type","==",Object(re["a"])(e.newType)),t.get().then((function(t){if(t.empty){if(t){var a=Vu.collection("users").where("username","==",localStorage.getItem("aisname")),n=[],r="RDTI-"+ol.getFullYear()+cl(ol.getMonth()+1,2)+ol.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&n.push(e.data())}));try{Eu.collection("remittanceDisbursementTypes").doc().set({remittanceDisbursementTypeId:r,type:Object(re["a"])(e.newType),userReference:n[0].userId,status:1,dateCreated:ol,dateModified:ol}).then((function(){e.newType="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$bvModal.hide("new-remittance-disbursement-type-modal"),e.$refs["rd-type-table"].reset(),e.getPaginatedRDTypes(1),e.$swal({title:"Success",text:"New remittance disbursement type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Remittance disbursement type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateRDTypeModal:function(e){this.edit={id:e.id,rdTypeId:e.remittanceDisbursementTypeId,type:e.type},this.$bvModal.show("update-remittance-disbursement-type-modal")},updateRDType:function(){var e=this;if(e.requestProcessing=!0,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;t=Eu.collection("remittanceDisbursementTypes").where("type","==",Object(re["a"])(e.edit.type)).where("remittanceDisbursementTypeId","!=",e.edit.rdTypeId),t.get().then((function(t){if(t.empty){if(t)try{Eu.collection("remittanceDisbursementTypes").doc(e.edit.id).update({type:Object(re["a"])(e.edit.type),dateModified:ol}).then((function(){e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-remittance-disbursement-type-modal"),e.requestProcessing=!1,e.$refs["rd-type-table"].reset(),e.getPaginatedRDTypes(1),e.$swal({title:"Success",text:"Remittance disbursement type updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Remittance disbursement type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},changeStatus:function(e,t,a){var n=this;n.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(r){if(r.value)try{Eu.collection("remittanceDisbursementTypes").doc(e.id).update({status:t,dateModified:ol}).then((function(){n.$swal({title:"Success",text:"Remittance disbursement type status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){n.$refs["rd-type-table"].reset(),n.getPaginatedRDTypes(t)}))}))}catch(s){console.log(s),n.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},ul=ll,dl=(a("98a5"),Object(m["a"])(ul,rl,sl,!1,null,null,null)),ml=dl.exports,pl=a("bec7"),bl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("b-modal",{attrs:{id:e.id,title:"New Voucher Particular",size:"md",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-voucher-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Particular:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Particular"},model:{value:e.newParticular,callback:function(t){e.newParticular=t},expression:"newParticular"}}),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newParticular.$anyDirty&&!e.$v.newParticular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Accounting Equation:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.equations,reduce:function(e){return e.accountEquationId},label:"accountEquation",clearable:"",placeholder:"(this field is optional)"},on:{input:function(t){return e.getChartOfAccounts(e.newEquation)}},model:{value:e.newEquation,callback:function(t){e.newEquation=t},expression:"newEquation"}})],1)]),null!=e.newEquation?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Chart of Accounts (COA):")])])]):e._e(),null!=e.newEquation?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.coas,reduce:function(e){return e.accountId},label:"account",clearable:!1,readonly:""},model:{value:e.newCoa,callback:function(t){e.newCoa=t},expression:"newCoa"}})],1)]):e._e()])],1)},hl=[],fl=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -.'/", ]*$/),vl=new Date,wl={name:"new-check-voucher-particular",props:{id:{type:String,required:!0}},emits:["successSubmit"],data:function(){return{newParticular:"",newEquation:null,newCoa:"",requestProcessing:!1}},computed:Object($t["a"])({},Object(ne["b"])({equations:"ChartOfAccounts/accountEquations",coas:"ChartOfAccounts/coas",valid:"VoucherParticulars/valid",error:"VoucherParticulars/error"})),validations:{newParticular:{required:cr["required"],alphaNumCustomValidator:fl}},methods:{getChartOfAccounts:function(e){this.$store.dispatch("ChartOfAccounts/getCoas",{equationId:e})},addParticular:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!1,a.$v.newParticular.$touch(),a.$v.newParticular.$error||(a.requestProcessing=!0,a.$store.dispatch("VoucherParticulars/checkVoucherNewParticular",{newParticular:a.newParticular}).then((function(){setTimeout((function(){if(1==a.valid)a.requestProcessing=!1,a.validationMessage();else if(0==a.valid){for(var e="",t="",n=0;n<a.equations.length;n++)a.newEquation==a.equations[n].accountEquationId&&(e=a.equations[n].accountEquation);for(var r=0;r<a.coas.length;r++)a.newCoa==a.coas[r].accountId&&(t=a.coas[r].account);var s=localStorage.getItem("aisname"),i={particularId:"",particular:Object(re["a"])(a.newParticular),equationReference:a.newEquation,equation:e,coaReference:a.newCoa,coa:t,status:1,userReference:"",dateCreated:vl,createdBy:s};a.$store.dispatch("VoucherParticulars/newVoucherParticular",i).then((function(){a.requestProcessing=!1,0==a.error?(a.newParticular="",a.$v.newParticular.$reset(),a.$bvModal.hide("new-voucher-particular-modal"),a.$swal({title:"Success",text:"New check voucher particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){a.$emit("successSubmit","success")}))):1==a.error&&a.errorMessage()}))}}),1e3)})));case 4:case"end":return t.stop()}}),t)})))()},validationMessage:function(){var e=this;e.$swal({title:"Invalid",text:"Check voucher particular already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},errorMessage:function(){var e=this;e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},Cl=wl,gl=Object(m["a"])(Cl,bl,hl,!1,null,null,null),kl=gl.exports,yl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("b-modal",{attrs:{id:e.id,title:"Edit Check Voucher Particular",size:"md",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateParticular(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-voucher-particular-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Particular:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Particular"},model:{value:e.edit.particular,callback:function(t){e.$set(e.edit,"particular",t)},expression:"edit.particular"}}),e.$v.edit.$anyDirty&&!e.$v.edit.particular.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Accounting Equation:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.equations,reduce:function(e){return e.accountEquationId},label:"accountEquation",clearable:"",placeholder:"(this field is optional)"},on:{input:function(t){return e.getChartOfAccounts(e.edit.equationReference,"edit")}},model:{value:e.edit.equationReference,callback:function(t){e.$set(e.edit,"equationReference",t)},expression:"edit.equationReference"}})],1)]),null!=e.edit.equationReference?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Chart of Accounts (COA):")])])]):e._e(),null!=e.edit.equationReference?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.coas,reduce:function(e){return e.accountId},label:"account",clearable:!1,readonly:""},model:{value:e.edit.coaReference,callback:function(t){e.$set(e.edit,"coaReference",t)},expression:"edit.coaReference"}})],1)]):e._e()])],1)},$l=[],_l=cr["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -.'/", ]*$/),xl={name:"edit-check-voucher-particular",emits:["openUpdateParticularModal","successSubmit"],props:{id:{type:String,required:!0}},data:function(){return{edit:{id:"",particularId:null,particular:"",equationReference:null,equation:"",coaReference:"",coa:""},requestProcessing:!1}},computed:Object($t["a"])({},Object(ne["b"])({equations:"ChartOfAccounts/accountEquations",coas:"ChartOfAccounts/coas",valid:"VoucherParticulars/valid",error:"VoucherParticulars/error"})),validations:{edit:{particular:{required:cr["required"],alphaNumCustomValidator:_l}}},methods:{getChartOfAccounts:function(e,t){"edit"==t&&(this.edit.coaReference=""),this.$store.dispatch("ChartOfAccounts/getCoas",{equationId:e})},validationMessage:function(){var e=this;e.$swal({title:"Invalid",text:"Check voucher particular already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},errorMessage:function(){var e=this;e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},openUpdateParticularModal:function(e){this.edit={id:e.id,particularId:e.particularId,particular:e.particular,equationReference:e.equationReference,coaReference:e.coaReference},this.getChartOfAccounts(e.equationReference,"open"),this.$bvModal.show("update-voucher-particular-modal")},updateParticular:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!0,a.$v.edit.$touch(),a.$v.edit.$error||a.$store.dispatch("VoucherParticulars/checkEditParticular",{particular:a.edit.particular,particularId:a.edit.particularId}).then((function(){setTimeout((function(){if(1==a.valid)a.requestProcessing=!1,a.validationMessage();else if(0==a.valid){for(var e="",t="",n=0;n<a.equations.length;n++)a.edit.equationReference==a.equations[n].accountEquationId&&(e=a.equations[n].accountEquation);for(var r=0;r<a.coas.length;r++)a.edit.coaReference==a.coas[r].accountId&&(t=a.coas[r].account);a.edit.particular=Object(re["a"])(a.edit.particular),a.edit.equation=e,a.edit.coa=t,a.$store.dispatch("VoucherParticulars/updateVoucherParticular",a.edit).then((function(){a.requestProcessing=!1,0==a.error?(a.$v.edit.$reset(),a.$bvModal.hide("update-voucher-particular-modal"),a.$emit("successSubmit","success"),a.$swal({title:"Success",text:"Check voucher particular updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}))}}),1e3)}));case 4:case"end":return t.stop()}}),t)})))()}}},Al=xl,Dl=Object(m["a"])(Al,yl,$l,!1,null,null,null),Pl=Dl.exports,Nl={install:function(e){e.component(et.name,et),e.component(it.name,it),e.component(pt.name,pt),e.component(Dt.name,Dt),e.component(Kt.name,Kt),e.component(St.name,St),e.component(gt.name,gt),e.component(Zt.name,Zt),e.component(na.name,na),e.component(la.name,la),e.component(va.name,va),e.component($a.name,$a),e.component(Na.name,Na),e.component(Ba.name,Ba),e.component(Va.name,Va),e.component(La.name,La),e.component(Xa.name,Xa),e.component(sn.name,sn),e.component($n.name,$n),e.component(Nn.name,Nn),e.component(Bn.name,Bn),e.component(Vn.name,Vn),e.component(Ln.name,Ln),e.component(Xn.name,Xn),e.component(er["default"].name,er["default"]),e.component(tr["default"].name,tr["default"]),e.component(ar["default"].name,ar["default"]),e.component(nr["default"].name,nr["default"]),e.component(rr["default"].name,rr["default"]),e.component(sr["default"].name,sr["default"]),e.component(_r.name,_r),e.component(xr["default"].name,xr["default"]),e.component(Yr.name,Yr),e.component(ts.name,ts),e.component(fs.name,fs),e.component(Ds.name,Ds),e.component(Os.name,Os),e.component(Xs.name,Xs),e.component(hi.name,hi),e.component(fi["default"].name,fi["default"]),e.component(Di.name,Di),e.component(Ei.name,Ei),e.component(Gi.name,Gi),e.component(mo.name,mo),e.component(Do.name,Do),e.component(Uo.name,Uo),e.component(Zo.name,Zo),e.component(mc.name,mc),e.component(kc.name,kc),e.component(Tc.name,Tc),e.component(Fc.name,Fc),e.component(Qc.name,Qc),e.component(nl.name,nl),e.component(ml.name,ml),e.component(pl["default"].name,pl["default"]),e.component(kl.name,kl),e.component(Pl.name,Pl)}},Tl={bind:function(e,t,a){e.clickOutsideEvent=function(n){e==n.target||e.contains(n.target)||a.context[t.expression](n)},document.body.addEventListener("click",e.clickOutsideEvent)},unbind:function(e){document.body.removeEventListener("click",e.clickOutsideEvent)}},Rl={install:function(e){e.directive("click-outside",Tl)}},Il=Rl,Sl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-vertical fixed-left navbar-expand-md mb-0",attrs:{id:"sideBarBg"}},[a("div",{staticClass:"mr-0 ml-0 mb-0 pb-0 text-center"},[a("img",{staticClass:"pr-1 mb-0 pb-0 ml-0 pl-0 pt-2",attrs:{src:e.logo,alt:"Avasia",width:"160px",height:"65px"}})]),a("div",{staticClass:"container-fluid mt-0 pt-0"},[a("navbar-toggle-button",{attrs:{id:"redBtn"},nativeOn:{click:function(t){return e.showSidebar(t)}}},[a("span",{staticClass:"navbar-toggler-icon",attrs:{icon:"ni ni-shop"}})]),e._t("default"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.$sidebar.showSidebar,expression:"$sidebar.showSidebar"}],staticClass:"navbar-collapse collapse show",attrs:{id:"sidenav-collapse-main"}},[a("div",{staticClass:"navbar-collapse-header d-md-none"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 collapse-brand"},[a("router-link",{attrs:{to:"/main/home"}},[e._v("Avasia")])],1),a("div",{staticClass:"col-6 collapse-close"},[a("navbar-toggle-button",{nativeOn:{click:function(t){return e.closeSidebar(t)}}})],1)])]),a("ul",{staticClass:"navbar-nav"},[e._t("links")],2)])],2)])},ql=[],Bl={name:"sidebar",components:{NavbarToggleButton:Vt},props:{logo:{type:String,default:"img/icons/AVASIA-NEW-LOGO_B.png",description:"Avasia"},autoClose:{type:Boolean,default:!0,description:"Whether sidebar should autoclose on mobile when clicking an item"}},provide:function(){return{autoClose:this.autoClose}},methods:{closeSidebar:function(){this.$sidebar.displaySidebar(!1)},showSidebar:function(){this.$sidebar.displaySidebar(!0)}},beforeDestroy:function(){this.$sidebar.showSidebar&&(this.$sidebar.showSidebar=!1)}},Ml=Bl,Ol=(a("0efd"),Object(m["a"])(Ml,Sl,ql,!1,null,null,null)),El=Ol.exports,Fl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"nav-item",attrs:{id:"hoverBorder"}},[a("router-link",{staticClass:"nav-link text-white",attrs:{to:e.link.path,target:e.link.target,href:e.link.path},nativeOn:{click:function(t){return e.linkClick(t)}}},[[a("i",{class:e.link.icon}),a("span",{staticClass:"nav-link-text"},[e._v(e._s(e.link.name))])]],2)],1)},Yl=[],Vl={name:"sidebar-item",props:{link:{type:Object,default:function(){return{name:"",path:"",children:[]}},description:"Sidebar link. Can contain name, path, icon and other attributes. See examples for more info"}},inject:{autoClose:{default:!0}},data:function(){return{children:[],collapsed:!0}},methods:{linkClick:function(){this.autoClose&&this.$sidebar&&!0===this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)}}},Ul=Vl,jl=(a("251d"),Object(m["a"])(Ul,Fl,Yl,!1,null,null,null)),Wl=jl.exports,Kl={showSidebar:!1,sidebarLinks:[],isMinimized:!1,displaySidebar:function(e){this.showSidebar=e},toggleMinimize:function(){document.body.classList.toggle("sidebar-mini");var e=setInterval((function(){window.dispatchEvent(new Event("resize"))}),180);setTimeout((function(){clearInterval(e)}),1e3),this.isMinimized=!this.isMinimized}},zl={install:function(e,t){t&&t.sidebarLinks&&(Kl.sidebarLinks=t.sidebarLinks);var a=new e({data:{sidebarStore:Kl}});e.prototype.$sidebar=a.sidebarStore,e.component("side-bar",El),e.component("sidebar-item",Wl)}},Ll=zl,Ql=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notifications"},[a("slide-y-up-transition",{attrs:{duration:e.transitionDuration,group:"",mode:"out-in"}},e._l(e.notifications,(function(t){return a("notification",e._b({key:t.timestamp.getTime(),attrs:{clickHandler:t.onClick},on:{close:e.removeNotification}},"notification",t,!1))})),1)],1)},Hl=[],Gl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert alert-notify alert-dismissible",class:[{"alert-with-icon":e.icon},e.verticalAlign,e.horizontalAlign,e.alertType],style:e.customPosition,attrs:{"data-notify":"container",role:"alert","data-notify-position":"top-center"},on:{click:e.tryClose}},[e.icon||e.$slots.icon?[e._t("icon",[a("span",{staticClass:"alert-icon",attrs:{"data-notify":"icon"}},[a("i",{class:e.icon})])])]:e._e(),a("span",{staticClass:"alert-text"},[e.title?a("span",{staticClass:"title"},[a("b",[e._v(e._s(e.title)),a("br")])]):e._e(),e.message?a("span",{domProps:{innerHTML:e._s(e.message)}}):e._e(),!e.message&&e.component?a("content-render",{attrs:{component:e.component}}):e._e()],1),e._t("dismiss-icon",[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:e.close}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã")])])])],2)},Zl=[],Jl=void 0,Xl={name:"notification",components:{contentRender:{props:["component"],render:function(e){return e(Jl.component)}}},props:{message:String,title:String,icon:String,verticalAlign:{type:String,default:"top",validator:function(e){var t=["top","bottom"];return-1!==t.indexOf(e)}},horizontalAlign:{type:String,default:"right",validator:function(e){var t=["left","center","right"];return-1!==t.indexOf(e)}},type:{type:String,default:"info",validator:function(e){var t=["default","info","primary","danger","warning","success"];return-1!==t.indexOf(e)}},timeout:{type:Number,default:5e3,validator:function(e){return e>=0}},timestamp:{type:Date,default:function(){return new Date}},component:{type:[Object,Function]},showClose:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},clickHandler:Function},data:function(){return{elmHeight:0}},computed:{hasIcon:function(){return this.icon&&this.icon.length>0},alertType:function(){return"alert-".concat(this.type)},customPosition:function(){var e=this,t=20,a=this.elmHeight+10,n=this.$notifications.state.filter((function(t){return t.horizontalAlign===e.horizontalAlign&&t.verticalAlign===e.verticalAlign&&t.timestamp<=e.timestamp})).length;this.$notifications.settings.overlap&&(n=1);var r=(n-1)*a+t,s={};return"top"===this.verticalAlign?s.top="".concat(r,"px"):s.bottom="".concat(r,"px"),s}},methods:{close:function(){this.$emit("close",this.timestamp)},tryClose:function(e){this.clickHandler&&this.clickHandler(e,this),this.closeOnClick&&this.close()}},mounted:function(){this.elmHeight=this.$el.clientHeight,this.timeout&&setTimeout(this.close,this.timeout)}},eu=Xl,tu=(a("f0fa"),Object(m["a"])(eu,Gl,Zl,!1,null,null,null)),au=tu.exports,nu={components:{SlideYUpTransition:w["b"],Notification:au},props:{transitionDuration:{type:Number,default:200},overlap:{type:Boolean,default:!1}},data:function(){return{notifications:this.$notifications.state}},methods:{removeNotification:function(e){this.$notifications.removeNotification(e)}},created:function(){this.$notifications.settings.overlap=this.overlap},watch:{overlap:function(e){this.$notifications.settings.overlap=e}}},ru=nu,su=Object(m["a"])(ru,Ql,Hl,!1,null,null,null),iu=su.exports,ou={state:[],settings:{overlap:!1,verticalAlign:"top",horizontalAlign:"right",type:"info",timeout:5e3,closeOnClick:!0,showClose:!0},setOptions:function(e){this.settings=Object.assign(this.settings,e)},removeNotification:function(e){var t=this.state.findIndex((function(t){return t.timestamp===e}));-1!==t&&this.state.splice(t,1)},addNotification:function(e){("string"===typeof e||e instanceof String)&&(e={message:e}),e.timestamp=new Date,e.timestamp.setMilliseconds(e.timestamp.getMilliseconds()+this.state.length),e=Object.assign({},this.settings,e),this.state.push(e)},notify:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){t.addNotification(e)})):this.addNotification(e)}},cu={install:function(e,t){var a=new e({data:{notificationStore:ou},methods:{notify:function(e){this.notificationStore.notify(e)}}});e.prototype.$notify=a.notify,e.prototype.$notifications=a.notificationStore,e.component("Notifications",iu),t&&ou.setOptions(t)}},lu=cu,uu={install:function(e){e.use(Nl),e.use(Il),e.use(Ll),e.use(lu)}},du=a("5886"),mu=(a("4413"),a("2ead")),pu=a.n(mu),bu=a("4a7a"),hu=a.n(bu),fu=(a("6dfc"),a("1dce")),vu=a.n(fu),wu=a("5f5b"),Cu=a("6aac"),gu=a("e6c7"),ku=a("2591");a("e71f");var yu={apiKey:"AIzaSyDdMaN37h0a4f1m1D_hnrK_UBnEzwjvldw",authDomain:"checkmonitoring-24389.firebaseapp.com",projectId:"checkmonitoring-24389",storageBucket:"checkmonitoring-24389.appspot.com",messagingSenderId:"526594053924",appId:"1:526594053924:web:d2912087870da96c5cc5b1",measurementId:"G-RWLHDGS17E"},$u=ku["a"].initializeApp(yu);ku["a"].analytics();var _u=a("f617"),xu=(a("dac4"),a("7898")),Au=a.n(xu);a("b15b"),a("f9e3"),a("2dd8");
/*!
=========================================================
* Vue Argon Dashboard - v1.1.1
=========================================================
* Product Page: https://www.creative-tim.com/product/vue-argon-dashboard
* Copyright 2020 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://github.com/creativetimofficial/vue-argon-dashboard/blob/master/LICENSE.md)
* Coded by Creative Tim
=========================================================
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
*/
a("e71f");var Du={apiKey:"AIzaSyAVC_k1JrmTP-YKX2Io2e9NL098ygMjVDI",authDomain:"aisexpensemonitoring.firebaseapp.com",databaseURL:"https://aisexpensemonitoring-default-rtdb.firebaseio.com",projectId:"aisexpensemonitoring",storageBucket:"aisexpensemonitoring.appspot.com",messagingSenderId:"385775193841",appId:"1:385775193841:web:970ef567fb71d6ca10e350",measurementId:"G-82Q4TEZGH9"},Pu={apiKey:"AIzaSyD8vRlGGdU_R_fG-E8RlrW00xQ_yI7AZ3Y",authDomain:"aissampleproject.firebaseapp.com",projectId:"aissampleproject",storageBucket:"aissampleproject.appspot.com",messagingSenderId:"357500152036",appId:"1:357500152036:web:16917f0ccb0beb909424f1",measurementId:"G-K0L8702SQ8"},Nu={apiKey:"AIzaSyDUoAP33LrGmh4E7p0HBW8cmneumafKZls",authDomain:"expensemonitoring-d3fe7.firebaseapp.com",databaseURL:"https://expensemonitoring-d3fe7-default-rtdb.firebaseio.com",projectId:"expensemonitoring-d3fe7",storageBucket:"expensemonitoring-d3fe7.appspot.com",messagingSenderId:"92038358257",appId:"1:92038358257:web:9e5caf4ecf3ff8c2c3b550",measurementId:"G-VW1HLBH9Y2"},Tu={apiKey:"AIzaSyCFQ1c-eSq_6e3N_hukkNtith6QyuxeC2c",authDomain:"salesmonitoring-3710f.firebaseapp.com",projectId:"salesmonitoring-3710f",storageBucket:"salesmonitoring-3710f.appspot.com",messagingSenderId:"358540565930",appId:"1:358540565930:web:81f277686dde3dad469fd3",measurementId:"G-9MRB2J1472"},Ru=ku["a"].initializeApp(Du,"aisMaintenance"),Iu=ku["a"].initializeApp(Pu,"aisUsers"),Su=ku["a"].initializeApp(Nu,"aisExpense"),qu=ku["a"].initializeApp(Tu,"aisSales"),Bu={name:"_blank",specs:["fullscreen=yes","titlebar=yes","scrollbars=yes"],styles:["https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css","https://unpkg.com/kidlat-css/css/kidlat.css","print.css"],timeout:1e3,autoClose:!1},Mu=$u.firestore(),Ou=$u.storage(),Eu=Ru.firestore(),Fu=Ru.database(),Yu=Ru.storage(),Vu=Iu.firestore(),Uu=Su.firestore(),ju=Su.storage(),Wu=qu.firestore(),Ku=qu.storage();n["default"].use(wu["a"]),n["default"].config.productionTip=!1;var zu="http://project.ais:3005";n["default"].use(du["default"]),n["default"].use(pu.a),n["default"].component("v-select",hu.a),n["default"].use(vu.a),n["default"].component("b-modal",Cu["a"]),n["default"].directive("b-modal",gu["a"]),n["default"].use(_u["a"]),n["default"].use(Au.a,Bu),n["default"].use(S.a),n["default"].use(uu),new n["default"]({router:ae,store:Le,render:function(e){return e(b)}}).$mount("#app")},"59a2":function(e,t,a){"use strict";a("6dc0")},"5cab":function(e,t,a){"use strict";a("8c4b")},"5eaf":function(e,t,a){"use strict";a("2aa4")},6:function(e,t){},6439:function(e,t,a){"use strict";a("4995")},6910:function(e,t,a){"use strict";a("f731")},"6dc0":function(e,t,a){},7:function(e,t){},"70bf":function(e,t,a){},7509:function(e,t,a){},8:function(e,t){},8107:function(e,t,a){},"83f3":function(e,t,a){"use strict";a("b21f")},"85ec":function(e,t,a){},"87d9":function(e,t,a){},"8aee":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",[a("vue-good-table",{ref:"check-payee-table",attrs:{columns:e.columns,rows:e.suppliers,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"supplier",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["supplier"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.supplier))])]):e._e(),"dateCreated"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.dateCreated,"MMMM DD, YYYY")))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateSupplierModal(t.row)}}})]):e._e()])]}}])}),!e.loading&&e.suppliers.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getCheckPayees()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-supplier-modal",modifiers:{"new-supplier-modal":!0}}],staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Payee")])],1)],1),a("b-modal",{attrs:{id:"new-supplier-modal",title:"New Payee",size:"md",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addSupplier(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-supplier-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Payee:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Payee"},model:{value:e.newSupplier,callback:function(t){e.newSupplier=t},expression:"newSupplier"}}),e.$v.newSupplier.$anyDirty&&!e.$v.newSupplier.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newSupplier.$anyDirty&&!e.$v.newSupplier.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{id:"update-supplier-modal",title:"Edit Payee",size:"md",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateSupplier(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-supplier-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Payee:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Payee"},model:{value:e.selectedSupplier.supplier,callback:function(t){e.$set(e.selectedSupplier,"supplier",t)},expression:"selectedSupplier.supplier"}}),e.$v.selectedSupplier.$anyDirty&&!e.$v.selectedSupplier.supplier.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.selectedSupplier.$anyDirty&&!e.$v.selectedSupplier.supplier.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)},r=[],s=(a("99af"),a("4160"),a("159b"),a("5530")),i=(a("96cf"),a("1da1")),o=a("56d7"),c=a("b5ae"),l=a("c6f8"),u=a("2f62"),d=c["helpers"].regex("alphaNumAndDot",/^[ -.'/,A-Za-z  ]*$/),m=["#","Payee","Date Added","Actions"],p=new Date,b={name:"check-payee",components:{},data:function(){return{columns:[{label:"Payee",field:"supplier"},{label:"Date Added",field:"dateCreated"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,loadError:!1,supplierTable:{title:"Suppliers Table",subTitle:"",columns:[].concat(m)},suppliersCount:0,currentPage:1,searchTerm:"",searching:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newSupplier:"",selectedSupplier:{id:"",supplierUid:null,supplier:""},requestProcessing:!1}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=o["dbUsers"].collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getCheckPayees();case 1:case"end":return t.stop()}}),t)})))()},computed:Object(s["a"])({},Object(u["b"])({users:"Users/users",suppliers:"CheckPayees/checkPayees",valid:"CheckPayees/valid",error:"CheckPayees/error"})),validations:{newSupplier:{required:c["required"],alphaNumCustomValidator:d},selectedSupplier:{supplier:{required:c["required"],alphaNumCustomValidator:d}}},methods:{closePage:function(){this.$router.push("/check/dashboard")},getCheckPayees:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.loading=!0,a.loadError=!1,a.$store.dispatch("CheckPayees/getCheckPayee",{limit:a.limit}),setTimeout((function(){a.loading=!1}),1e3);case 5:case"end":return t.stop()}}),t)})))()},addSupplier:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!1,a.$v.newSupplier.$touch(),a.$v.newSupplier.$error||(a.requestProcessing=!0,a.$store.dispatch("CheckPayees/checkNewPayee",{newSupplier:a.newSupplier}).then((function(){setTimeout((function(){if(1==a.valid)a.requestProcessing=!1,a.validationMessage();else if(0==a.valid){var e=localStorage.getItem("aisname"),t={supplierId:"",supplier:Object(l["a"])(a.newSupplier),status:1,userReference:"",dateCreated:p,createdBy:e};a.$store.dispatch("CheckPayees/newCheckPayee",t).then((function(){a.requestProcessing=!1,0==a.error?(a.newSupplier="",a.$v.newSupplier.$reset(),a.$bvModal.hide("new-supplier-modal"),a.$refs["check-payee-table"].reset(),a.getCheckPayees(),a.$swal({title:"Success",text:"New Supplier added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}))}}),1e3)})));case 4:case"end":return t.stop()}}),t)})))()},validationMessage:function(){var e=this;e.$swal({title:"Invalid",text:"Payee already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},errorMessage:function(){var e=this;e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},openUpdateSupplierModal:function(e){this.selectedSupplier={id:e.id,supplierId:e.supplierId,supplier:e.supplier},this.$bvModal.show("update-supplier-modal")},updateSupplier:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.requestProcessing=!0,a.$v.selectedSupplier.$touch(),a.$v.selectedSupplier.$error||a.$store.dispatch("CheckPayees/checkEditPayee",{supplier:a.selectedSupplier.supplier,supplierId:a.selectedSupplier.supplierId}).then((function(){setTimeout((function(){1==a.valid?(a.requestProcessing=!1,a.validationMessage()):0==a.valid&&a.$store.dispatch("CheckPayees/updateCheckPayee",a.selectedSupplier).then((function(){a.requestProcessing=!1,0==a.error?(a.selectedSupplier={},a.$v.selectedSupplier.$reset(),a.$bvModal.hide("update-supplier-modal"),a.$refs["check-payee-table"].reset(),a.getCheckPayees(),a.$swal({title:"Success",text:"Supplier updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}))}),1e3)}));case 4:case"end":return t.stop()}}),t)})))()}}},h=b,f=a("2877"),v=Object(f["a"])(h,n,r,!1,null,null,null);t["default"]=v.exports},"8c4b":function(e,t,a){},"8e20":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5",attrs:{type:"gradient-success"}}),a("div",{staticClass:"col-12 container-fluid mt--7 ",attrs:{id:"checkVoucher"}},[a("card",{staticClass:"pl-4 pt-5 pb-5 shadow"},[a("div",{staticClass:"row"},e._l(e.banks,(function(t){return a("span",{key:t.bankUid},[t.bankUid==e.check.bankReference?a("span",{staticClass:"col-sm-6"},[a("b",[e._v(e._s(t.bank))])]):e._e()])})),0),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Number: ")]),e._l(e.bankAccounts,(function(t){return a("span",{key:t.bankAccountUid},[t.bankAccountUid==e.check.bankAccountReference?a("span",[e._v(e._s(t.bankAccountNumber))]):e._e()])}))],2),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Name: ")]),e._l(e.bankAccounts,(function(t){return a("span",{key:t.bankAccountUid},[t.bankAccountUid==e.check.bankAccountReference?a("span",[e._v(e._s(t.bankAccountName))]):e._e()])}))],2)]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-8"},[a("b",[e._v("Payee: ")]),e._l(e.suppliers,(function(t){return a("span",{key:t.supplierId},[t.supplierId==e.check.payeeReference?a("span",[e._v(e._s(t.supplier))]):e._e()])}))],2)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher No: ")]),e._v(e._s(e.check.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher Date: ")]),e._v(e._s(e._f("moment")(e.check.voucherDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check Date: ")]),e._v(e._s(e._f("moment")(e.check.bankCheckDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check No: ")]),e._v(e._s(e.check.bankCheckNumber)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Total Amount: ")]),e._v("â± "+e._s(e.check.bankCheckAmount)+" ")])]),a("img",{attrs:{src:"img/icons/AVASIA-NEW-LOGO_B.png",id:"voucherWatermark"}}),a("hr"),a("div",{staticClass:"row pb-2",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4"},[a("b",[e._v("PARTICULARS")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("REF. NO.")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("PRICE")])]),a("span",{staticClass:"col-sm-1"},[a("b",[e._v("QTY")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("AMOUNT")])])]),e._l(e.particulars,(function(t){return a("div",{key:t.bankCheckParticularsUid,staticClass:"row",attrs:{id:"particularStyle"}},[t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-4"},[a("span",{attrs:{id:"docStyle"}},[e._v(e._s(t.particular)+" "+e._s(t.description||""))])]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v(e._s(t.referenceNumber))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v("â± "+e._s(t.unitPrice))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-1"},[e._v(e._s(t.quantity))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v("â± "+e._s(t.particularAmount))]):e._e()])})),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[e._v("Remarks: ")]),e._v(e._s(e.check.description)+" ")])]),a("hr"),a("span",[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Received Payment by: ")]),e._v(e._s(e.voucherSignatory.receivedPayment)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by: ")]),e._v(e._s(e.voucherSignatory.prepared||e.user.firstname+" "+e.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Certified by: ")]),e._v(e._s(e.voucherSignatory.certified)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by: ")]),e._v(e._s(e.voucherSignatory.approved)+" ")])])])],2)],1),a("div",{staticClass:"col-12",attrs:{id:"duplicateVoucher"}},[a("div",{staticClass:"row"},e._l(e.banks,(function(t){return a("span",{key:t.bankUid},[t.bankUid==e.check.bankReference?a("span",{staticClass:"col-sm-6"},[a("b",[e._v(e._s(t.bank))])]):e._e()])})),0),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Number: ")]),e._l(e.bankAccounts,(function(t){return a("span",{key:t.bankAccountUid,staticClass:"col-sm-8"},[t.bankAccountUid==e.check.bankAccountReference?a("span",[e._v(e._s(t.bankAccountNumber))]):e._e()])}))],2),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Name: ")]),e._l(e.bankAccounts,(function(t){return a("span",{key:t.bankAccountUid,staticClass:"col-sm-8"},[t.bankAccountUid==e.check.bankAccountReference?a("span",[e._v(e._s(t.bankAccountName))]):e._e()])}))],2)]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-8"},[a("b",[e._v("Payee: ")]),e._l(e.suppliers,(function(t){return a("span",{key:t.supplierId},[t.supplierId==e.check.payeeReference?a("span",[e._v(e._s(t.supplier))]):e._e()])}))],2)]),a("img",{attrs:{src:"img/icons/AVASIA-NEW-LOGO_B.png",id:"voucherWatermark"}}),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher No: ")]),e._v(e._s(e.check.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher Date: ")]),e._v(e._s(e._f("moment")(e.check.voucherDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check Date: ")]),e._v(e._s(e._f("moment")(e.check.bankCheckDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check No: ")]),e._v(e._s(e.check.bankCheckNumber)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Total Amount: ")]),e._v("â± "+e._s(e.check.bankCheckAmount)+" ")])]),a("br"),a("hr"),e._m(0),e._l(e.particulars,(function(t){return a("div",{key:t.bankCheckParticularsUid,staticClass:"row",attrs:{id:"particularStyle"}},[t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-4"},[a("span",{attrs:{id:"docStyle"}},[e._v(e._s(t.particular)+" "+e._s(t.description||""))])]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v(e._s(t.referenceNumber))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v("â± "+e._s(t.unitPrice))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-1"},[e._v(e._s(t.quantity))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v("â± "+e._s(t.particularAmount))]):e._e()])})),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[e._v("Remarks: ")]),e._v(e._s(e.check.description)+" ")])]),a("br"),a("div",[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Received Payment by: ")]),e._v(e._s(e.voucherSignatory.receivedPayment)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by: ")]),e._v(e._s(e.voucherSignatory.prepared||e.user.firstname+" "+e.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Certified by: ")]),e._v(e._s(e.voucherSignatory.certified)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by: ")]),e._v(e._s(e.voucherSignatory.approved)+" ")])])]),a("br"),e._l(e.breakCounts,(function(e){return a("div",{key:e},[a("br")])})),a("br"),a("div",{staticClass:"row"},e._l(e.banks,(function(t){return a("span",{key:t.bankUid},[t.bankUid==e.check.bankReference?a("span",{staticClass:"col-sm-6"},[a("b",[e._v(e._s(t.bank))])]):e._e()])})),0),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Number: ")]),e._l(e.bankAccounts,(function(t){return a("span",{key:t.bankAccountUid,staticClass:"col-sm-8"},[t.bankAccountUid==e.check.bankAccountReference?a("span",[e._v(e._s(t.bankAccountNumber))]):e._e()])}))],2),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account Name: ")]),e._l(e.bankAccounts,(function(t){return a("span",{key:t.bankAccountUid,staticClass:"col-sm-8"},[t.bankAccountUid==e.check.bankAccountReference?a("span",[e._v(e._s(t.bankAccountName))]):e._e()])}))],2)]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-8"},[a("b",[e._v("Payee: ")]),e._l(e.suppliers,(function(t){return a("span",{key:t.supplierId},[t.supplierId==e.check.payeeReference?a("span",[e._v(e._s(t.supplier))]):e._e()])}))],2)]),a("img",{attrs:{src:"img/icons/AVASIA-NEW-LOGO_B.png",id:"voucherWatermark"}}),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher No: ")]),e._v(e._s(e.check.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher Date: ")]),e._v(e._s(e._f("moment")(e.check.voucherDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check Date: ")]),e._v(e._s(e._f("moment")(e.check.bankCheckDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check No: ")]),e._v(e._s(e.check.bankCheckNumber)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Total Amount: ")]),e._v("â± "+e._s(e.check.bankCheckAmount)+" ")])]),a("br"),a("hr"),e._m(1),e._l(e.particulars,(function(t){return a("div",{key:t.bankCheckParticularsUid,staticClass:"row",attrs:{id:"particularStyle"}},[t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-4"},[a("span",{attrs:{id:"docStyle"}},[e._v(e._s(t.particular)+" "+e._s(t.description||""))])]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v(e._s(t.referenceNumber))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v("â± "+e._s(t.unitPrice))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-1"},[e._v(e._s(t.quantity))]):e._e(),t.bankCheckReference==e.check.bankCheckUid?a("span",{staticClass:"col-sm-2"},[e._v("â± "+e._s(t.particularAmount))]):e._e()])})),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[e._v("Remarks: ")]),e._v(e._s(e.check.description)+" ")])]),a("br"),a("div",[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Received Payment by: ")]),e._v(e._s(e.voucherSignatory.receivedPayment)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by: ")]),e._v(e._s(e.voucherSignatory.prepared||e.user.firstname+" "+e.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Certified by: ")]),e._v(e._s(e.voucherSignatory.certified)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by: ")]),e._v(e._s(e.voucherSignatory.approved)+" ")])])])],2),a("div",{staticClass:"text-right"},["check"==e.pageName&&3==e.check.status?a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.printCheck(t)}}},[e._v("Print Check")]):e._e(),a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.printVoucher(t)}}},[e._v("Print Voucher")]),a("base-button",{staticClass:"col-md-2 ml-2 mr-5",attrs:{id:"darkInlineBtn"},nativeOn:{click:function(t){return e.cancelVoucher(t)}}},[e._v("Close")])],1),a("hr"),a("div",{staticClass:"col-12 container-fluid",attrs:{id:"printCheck"}},[a("card",{staticClass:"pl-4 pb-5 shadow",attrs:{id:"imgCheck"}},[a("br"),a("div",{staticClass:"row",attrs:{id:"dateStyle"}},[a("span",{staticClass:"col-sm-8"}),a("span",{staticClass:"col-sm-3"},[a("b",[e._v(e._s(e._f("moment")(e.check.bankCheckDate,"MM - DD - YYYY")))])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-2 pt-2"}),a("span",{staticClass:"col-sm-7 pt-2"},e._l(e.suppliers,(function(t){return a("span",{key:t.supplierId},[t.supplierId==e.check.payeeReference?a("span",[a("b",[e._v("**"+e._s(t.supplier)+"**")])]):e._e()])})),0),a("span",{staticClass:"col-sm-3 pt-2"},[a("b",[e._v(e._s(e.check.bankCheckAmount))])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-1 pt-2"}),a("span",{staticClass:"col-sm-11 pt-2"},[a("b",[e._v("**"+e._s(e.amountWord)+"**")])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12 pb-6"})])]),a("br")],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row pb-2",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4"},[a("span",{attrs:{id:"docStyle"}},[a("b",[e._v("PARTICULARS")])])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("REF. NO.")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("PRICE")])]),a("span",{staticClass:"col-sm-1"},[a("b",[e._v("QTY")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("AMOUNT")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row pb-2",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4"},[a("span",{attrs:{id:"docStyle"}},[a("b",[e._v("PARTICULARS")])])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("REF. NO.")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("PRICE")])]),a("span",{staticClass:"col-sm-1"},[a("b",[e._v("QTY")])]),a("span",{staticClass:"col-sm-2"},[a("b",[e._v("AMOUNT")])])])}],s=(a("a4d3"),a("e01a"),a("4160"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),i=a("56d7"),o=a("add5"),c=a.n(o),l=a("6eca"),u=a("7ff6"),d=a("c6f8"),m=a("e966"),p=m.bindWith(",","."),b=a("c1df"),h=new Date,f=new l["ToWords"]({localeCode:"en-US",converterOptions:{currency:!0,ignoreDecimal:!1,ignoreZeroCurrency:!1}}),v={name:"print-check",components:{},data:function(){return{check:[],banks:[],bankAccounts:[],particulars:[],suppliers:[],user:{firstname:"",lastname:""},totalAmount:"",wordAmount:"",requestProcessing:!1,amountWord:"",pageName:this.$router.currentRoute.params.page,breakCounts:0,voucherSignatory:{receivedPayment:"",prepared:"",certified:"",approved:""}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUser(localStorage.getItem("aisname")),e.getCheck(e.$router.currentRoute.params.id),e.getSuppliers();case 3:case"end":return t.stop()}}),t)})))()},methods:{getSignatory:function(){var e=this,t=i["dbMains"].collection("printSignatoryTypes").where("type","==",Object(u["a"])("Check Voucher")),a="";t.get().then((function(t){if(!t.empty){t.forEach((function(e){a=e.data().printSignatoryId}));var n=i["dbMains"].collection("printSignatories").where("signatoryTypeReference","==",a).orderBy("orderNumber","asc"),r=[],s=[],o=[];n.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data()),s.push(e.id)}));for(var a=0;a<r.length;a++)r[a]["rowNum"]=a+1,r[a]["id"]=s[a],o.push(r[a]);e.voucherSignatory={receivedPayment:o[0].name,prepared:o[1].name,certified:o[2].name,approved:o[3].name}}}))}}))},getCheck:function(e){if(""==e)self.$swal({title:"Warning",text:"The check ID is missing.",icon:"warning",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){self.cancelViewCheck()}));else if(""!=e){var t=this,a=i["db"].collection("bankChecks").where("bankCheckUid","==",e);t.getSignatory(),t.check=[],a.get().then((function(e){e.forEach((function(e){t.check.push(e.data())})),t.check=t.check[0],t.check.voucherDate=b.unix(t.check.voucherDate.seconds);var a=parseFloat(t.check.bankCheckAmount);t.amountWord=f.convert(a),t.check.bankCheckAmount=p(parseFloat(t.check.bankCheckAmount).toFixed(2)),t.getBanks(),t.getBankAccounts(),t.getParticulars(t.$router.currentRoute.params.id)}))}},getBanks:function(){var e=this,t=i["dbMains"].collection("banks").orderBy("bank","asc");e.banks=[],t.get().then((function(t){t.forEach((function(t){e.banks.push(t.data())}))}))},getBankAccounts:function(){var e=this;e.bankAccounts=[];var t=i["dbMains"].collection("bankAccounts").orderBy("bankAccountName","asc");t.get().then((function(t){t.forEach((function(t){e.bankAccounts.push(t.data())}))}))},getParticulars:function(e){var t=this,a=i["db"].collection("bankCheckParticulars").where("bankCheckReference","==",e);t.particulars=[],a.get().then((function(e){e.forEach((function(e){t.particulars.push(e.data())})),t.loading=!0,t.loadError=!1;for(var a=0;a<t.particulars.length;a++)t.particulars[a]["rowNum"]=a+1,t.particulars[a].description&&(t.particulars[a].description=" : "+t.particulars[a].description),t.particulars[a].unitPrice=p(parseFloat(t.particulars[a].unitPrice).toFixed(2)),t.particulars[a].particularAmount=p(parseFloat(t.particulars[a].particularAmount).toFixed(2));t.particulars.length<=1?t.breakCounts=9:t.particulars.length>1&&t.particulars.length<9&&(t.breakCounts=10-t.particulars.length),setTimeout((function(){t.loading=!1}),1500)}))},reloadData:function(){this.getParticulars(this.$router.currentRoute.params.id)},getUser:function(e){if(""==e)self.$swal({title:"Warning",text:"The user ID is missing.",icon:"warning",confirmButtonColor:"#b80000",confirmButtonText:"OK"});else if(""!=e){var t=this,a=i["dbUsers"].collection("users").where("username","==",e),n=[];a.get().then((function(e){e.forEach((function(e){n.push(e.data())})),t.user.firstname=n[0].firstname,t.user.lastname=n[0].lastname}))}},getSuppliers:function(){var e=this,t=i["db"].collection("suppliers").orderBy("supplier","asc");e.suppliers=[],t.get().then((function(t){t.forEach((function(t){e.suppliers.push(t.data())}));for(var a=0;a<e.suppliers.length;a++)e.suppliers[a].supplier=Object(d["a"])(e.suppliers[a].supplier)}))},cancelVoucher:function(){"check"==this.$router.currentRoute.params.page?this.$router.push("/check/dashboard"):"voucher"==this.$router.currentRoute.params.page&&this.$router.push("/check/voucher/list")},printVoucher:function(){this.$swal({title:"Print with duplicate?",text:"",icon:"question",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"YES",cancelButtonText:"NO"}).then((function(e){e.value?c()({printable:"duplicateVoucher",type:"html",style:'#duplicateVoucher {font-family: "Calibri"; padding-left: 2px; margin-bottom: 0px;} #duplicateVoucher div span{padding-bottom: 2px;} #particularStyle span {margin-left:2px;} #docStyle {display: block; overflow: inherit; white-space: normal;} #voucherWatermark{display: block; width: 20%; height: 20%; opacity: 0.05; right: 0px; left: 0px; position: absolute; margin-left: auto; margin-right: auto;} img {filter: grayscale(100%);}',documentTitle:"Cheque Voucher"}):c()({printable:"checkVoucher",type:"html",style:'#checkVoucher {font-family: "Calibri"; padding-left: 2px;} #checkVoucher div span {padding-bottom: 4px;} #particularStyle span {margin-left:2px;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;} #voucherWatermark{display: block; width: 20%; height: 20%; opacity: 0.05; right: 0px; left: 0px; position: absolute; margin-left: auto; margin-right: auto;} img {filter: grayscale(100%);}',documentTitle:"Cheque Voucher"})}))},printCheck:function(){var e=this.$router.currentRoute.params.id;c()({printable:"printCheck",type:"html",style:'#printCheck {font-family: "Arial";} #imgCheck {margin-top: 10px;} #dateStyle {padding-bottom: 4px;}',documentTitle:"Check",onPrintDialogClose:function(){var t=i["db"].collection("bankChecks").where("bankCheckUid","==",e),a="";t.get().then((function(e){e.forEach((function(e){a=e.id})),i["db"].collection("bankChecks").doc(a).update({dateModified:h}).then((function(){console.log("Printed")}))}))}})}}},w=v,C=(a("59a2"),a("2877")),g=Object(C["a"])(w,n,r,!1,null,null,null);t["default"]=g.exports},9:function(e,t){},"95cc":function(e,t,a){},"98a5":function(e,t,a){"use strict";a("397e")},"99db":function(e,t,a){"use strict";a("87d9")},"9ab9":function(e,t,a){},a017:function(e,t,a){},a3e7:function(e,t,a){"use strict";a("a8f5")},a4d4:function(e,t,a){},a8f5:function(e,t,a){},b21f:function(e,t,a){},be87:function(e,t,a){},bec7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("card",[a("vue-good-table",{ref:"voucher-particular-table",attrs:{columns:e.columns,rows:e.particulars,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"particular",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["particular"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.particular))])]):e._e(),"equation"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.equation||"----------"))])]):e._e(),"coa"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.coa||"----------"))])]):e._e(),"dateCreated"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.dateCreated,"MMMM DD, YYYY")))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(n){return a("span",{key:n.userId},[n.userId==t.row.userReference?a("span",[e._v(e._s(n.firstname)+" "+e._s(n.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.$refs.editModal.openUpdateParticularModal(t.row)}}})]):e._e()])]}}])}),!e.loading&&e.particulars.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getVoucherParticulars()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-voucher-particular-modal",modifiers:{"new-voucher-particular-modal":!0}}],staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Voucher Particular")])],1)],1),a("new-check-voucher-particular",{attrs:{id:"new-voucher-particular-modal"},on:{successSubmit:function(t){return e.reloadTable()}}}),a("edit-check-voucher-particular",{ref:"editModal",attrs:{id:"update-voucher-particular-modal"},on:{successSubmit:function(t){return e.reloadTable()}}})],1)},r=[],s=(a("4160"),a("159b"),a("5530")),i=(a("96cf"),a("1da1")),o=a("56d7"),c=a("2f62"),l={name:"check-voucher-particular",components:{},data:function(){return{columns:[{label:"Check Voucher Particular",field:"particular"},{label:"Accounting Equation",field:"equation"},{label:"COA",field:"coa"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,loadError:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20"}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=o["dbUsers"].collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getVoucherParticulars();case 1:case"end":return t.stop()}}),t)})))()},computed:Object(s["a"])({},Object(c["b"])({users:"Users/users",particulars:"VoucherParticulars/voucherParticulars",equations:"ChartOfAccounts/accountEquations",coas:"ChartOfAccounts/coas"})),methods:{getVoucherParticulars:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.loading=!0,a.loadError=!1,a.$store.dispatch("VoucherParticulars/getVoucherParticular",{limit:a.limit}),setTimeout((function(){a.loading=!1}),1e3);case 5:case"end":return t.stop()}}),t)})))()},reloadTable:function(){this.$refs["voucher-particular-table"].reset(),this.getVoucherParticulars()}}},u=l,d=a("2877"),m=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=m.exports},cd1f:function(e,t,a){},cd75:function(e,t,a){},d141:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"row mb-0 pl-2 pr-2 pt-4",attrs:{id:"redBg"}},[a("div",{staticClass:"col-xl-4 col-lg-4"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Bank","sub-title":e.bankA}})],1),a("div",{staticClass:"col-xl-8 col-lg-4 pb-2"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Account Name","sub-title":e.accountName}})],1)]),a("div",{staticClass:"row mb-0 pl-2 pr-2 pb-2",attrs:{id:"redBg"}},[a("div",{staticClass:"col-xl-4 col-lg-4"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Account Number","sub-title":e.accountNumber}})],1),a("div",{staticClass:"col-xl-8 col-lg-4"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Account Balance","sub-title":"â± "+e.bankAccountBalance}})],1)]),a("div",{staticClass:"row mb-0 pl-2 pr-2 pb-4",attrs:{id:"redBg"}},[a("div",{staticClass:"col-xl-6 col-lg-4"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Total Deposits","sub-title":"â± "+e.totalDeposits}})],1),a("div",{staticClass:"col-xl-6 col-lg-4"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Total Withdrawals",type:"gradient-default","sub-title":"â± "+e.totalWithdrawals}})],1)]),a("hr",{staticClass:"mb-2 mt-3"}),e._m(0),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-4 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBanks,reduce:function(e){return e.bankUid},label:"bank",clearable:!1},on:{input:function(t){return e.getActivateBankAccounts(e.bank)}},model:{value:e.bank,callback:function(t){e.bank=t},expression:"bank"}}),e.$v.bank.$anyDirty&&!e.$v.bank.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),""==e.activateBankAccounts?a("div",{staticClass:"col-sm-4 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[e._v("No Bank Account")])]):a("div",{staticClass:"col-sm-4 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.activateBankAccounts,reduce:function(e){return e.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(t){return e.getAccountDetails(1,"")}},model:{value:e.bankAccount,callback:function(t){e.bankAccount=t},expression:"bankAccount"}}),e.$v.bankAccount.$anyDirty&&!e.$v.bankAccount.required?a("i",{staticClass:"text-danger"},[e._v("Field Required")]):e._e()],1),a("span",{staticClass:"col-sm-4 pl-5 pr-5"},[a("base-input",{staticClass:"pt-1",attrs:{id:"inputStyle",type:"month",min:"1997-01"},on:{input:function(t){return e.getCashPosition(1,"")}},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}})],1)]),a("hr",{staticClass:"mb-2 mt-3"}),a("div",{staticClass:"table full-width pt-2"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.transactions,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["dateNegotiated"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(""==t.row.dateNegotiated?"---------":t.row.dateNegotiated,"MMMM DD, YYYY")))])]):e._e(),"type"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.type))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.amount))])]):e._e(),"number"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.number))])]):e._e()])]}}])}),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"}),a("div",{staticClass:"col-sm-3"},[e.transactions.length>0?a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.printAccountTrans()}}},[e._v("Print")]):e._e()],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(t){return e.closePage()}}},[e._v("Close")])],1)])],1)])])],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row pt-2 mb-1"},[a("span",{staticClass:"col-sm-4"},[a("b",[e._v("Bank:")])]),a("span",{staticClass:"col-sm-4"},[a("b",[e._v("Account Number:")])]),a("span",{staticClass:"col-sm-4"},[a("b",[e._v("Choose Date:")])])])}],s=(a("99af"),a("4160"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),i=a("56d7"),o=a("b5ae"),c=a("c6f8"),l=a("add5"),u=a.n(l),d=["#","Transaction Date","Type","Amount","Reference/Check No."],m=a("c1df"),p=a("e966"),b=p.bindWith(",","."),h={name:"bank-account-balance",components:{},data:function(){return{columns:[{label:"Transaction Date",field:"dateNegotiated"},{label:"Type",field:"type"},{label:"Amount",field:"amount"},{label:"Reference/Check No",field:"number"}],loading:!1,loadError:!1,searchTerm:"",searching:!1,transactionTable:{title:"Transaction",subTitle:"",columns:[].concat(d)},transactions:[],transactionsCount:0,currentPage:1,activateBanks:[],bank:"",activateBankAccounts:[],bankAccount:"",chooseDate:m().format("YYYY-MM"),bankA:"",bankName:"",accountName:"",accountNumber:"",availableBalance:"0.00",startingBalance:"0.00",totalDeposits:"0.00",totalWithdrawals:"0.00",endingBalance:"0.00",dateYear:"",bankAccountBalance:"0.00",printTrans:[]}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=i["dbUsers"].collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=i["dbUsers"].collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"User"==n[0].userRole?a("/main/home"):"Manager"!=n[0].userRole&&"Administrator"!=n[0].userRole||a()}))}}))},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getActivateBanks();case 1:case"end":return t.stop()}}),t)})))()},validations:{bank:{required:o["required"]},bankAccount:{required:o["required"]}},methods:{closePage:function(){this.$router.push("/transaction")},getActivateBanks:function(){var e=this,t=i["dbMains"].collection("banks").orderBy("bank","asc");e.activateBanks=[],t.get().then((function(t){t.forEach((function(t){e.activateBanks.push(t.data())})),e.bank=e.activateBanks[0].bankUid,""!=e.bank&&e.getActivateBankAccounts(e.activateBanks[0].bankUid)}))},getActivateBankAccounts:function(e){var t=this,a=i["dbMains"].collection("bankAccounts").where("bankReference","==",e);t.activateBankAccounts=[],t.bankAccount="",a.get().then((function(e){e.forEach((function(e){t.activateBankAccounts.push(e.data())})),0!=t.activateBankAccounts.length&&(t.bankAccount=t.activateBankAccounts[0].bankAccountUid),t.getAccountDetails(1,"")}))},getAccountDetails:function(e,t){var a=this;if(a.$v.bank.$touch(),a.$v.bankAccount.$touch(),!a.$v.bank.$error&&!a.$v.bankAccount.$error){var n=i["dbMains"].collection("banks").where("bankUid","==",a.bank),r=[];n.get().then((function(e){e.forEach((function(e){r.push(e.data())})),a.bankA=r[0].bank,a.bankName=r[0].bankName})),a.getCashPosition(e,t)}},getCashPosition:function(e,t){var a=this;if(a.$v.bank.$touch(),a.$v.bankAccount.$touch(),a.transactions=[],a.printTrans=[],a.bankAccountBalance="0.00",!a.$v.bank.$error&&!a.$v.bankAccount.$error){var n=m(a.chooseDate).startOf("month").format("YYYY-MM-DD"),r=m(a.chooseDate).endOf("month").format("YYYY-MM-DD"),s=null,o=null,l=null,u=[],d=0,p=[],h=0,f=[],v=[],w=[],C=i["dbMains"].collection("bankAccounts").where("bankReference","==",a.bank).where("bankAccountUid","==",a.bankAccount);C.get().then((function(e){e.forEach((function(e){w.push(e.data())})),a.accountName=w[0].bankAccountName,a.accountNumber=w[0].bankAccountNumber,parseFloat(w[0].accountBalance.replaceAll(",",""))>0&&(a.bankAccountBalance=b(parseFloat(w[0].accountBalance).toFixed(2)))})),t&&(a.searching=!0),t?(t=t.toString(),s=i["db"].collection("bankChecks").where("bankCheckNumber","==",t).where("status","in",[2]).orderBy("dateNegotiated","desc"),o=i["dbMains"].collection("bankAccountFunds").where("referenceNumber","==",t).orderBy("transactionDate","desc"),l=i["dbMains"].collection("bankAccountWithdrawals").where("referenceNumber","==",t).orderBy("transactionDate","desc")):(s=i["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("dateNegotiated",">=",n).where("dateNegotiated","<=",r).where("status","in",[2]).orderBy("dateNegotiated","desc"),o=i["dbMains"].collection("bankAccountFunds").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("transactionDate",">=",n).where("transactionDate","<=",r).orderBy("transactionDate","desc"),l=i["dbMains"].collection("bankAccountWithdrawals").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("transactionDate",">=",n).where("transactionDate","<=",r).orderBy("transactionDate","desc")),a.dateYear=Object(c["a"])(m(a.chooseDate).format("MMMM YYYY").toString()),s.get().then((function(t){t.forEach((function(e){u.push(e.data())}));for(var n=0;n<u.length;n++)d+=parseFloat(u[n].bankCheckAmount),f.push({dateNegotiated:u[n].dateNegotiated,amount:"â± "+b(parseFloat(u[n].bankCheckAmount).toFixed(2)),number:u[n].bankCheckNumber,type:"Withdrawal"});o.get().then((function(t){t.forEach((function(e){p.push(e.data())}));for(var n=0;n<p.length;n++)h+=parseFloat(p[n].amount),f.push({dateNegotiated:p[n].transactionDate,amount:"â± "+b(parseFloat(p[n].amount).toFixed(2)),number:p[n].referenceNumber,type:"Deposit"});l.get().then((function(t){t.forEach((function(e){v.push(e.data())}));for(var n=0;n<v.length;n++)d+=parseFloat(v[n].amount),f.push({dateNegotiated:v[n].transactionDate,amount:"â± "+b(parseFloat(v[n].amount).toFixed(2)),number:v[n].referenceNumber,type:"Withdrawal"});a.totalWithdrawals=b(parseFloat(d).toFixed(2)),a.totalDeposits=b(parseFloat(h).toFixed(2)),f.sort((function(e,t){return new Date(t.dateNegotiated)-new Date(e.dateNegotiated)})),a.printTrans=f;for(var r=0;r<f.length;r++)f[r]["rowNum"]=r+1,a.transactions.push(f[r]);a.transactionsCount=f.length,a.currentPage=e,setTimeout((function(){a.loading=!1}),1e3)}))}))}))}},onPageChange:function(e){var t=this.searchTerm;this.getAccountDetails(e,t)},search:function(){var e=this.searchTerm;e&&this.getAccountDetails(1,e)},reloadData:function(){this.searchTerm="",this.searching=!1,this.getAccountDetails(1,"")},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getAccountDetails(1,"")},printAccountTrans:function(){for(var e=this,t="",a="",n="",r=m(e.chooseDate).format("MMMM YYYY"),s="<h5><b>Total Withdrawals:</b> â±"+e.totalWithdrawals+"<br><b>Total Deposits:</b> â±"+e.totalDeposits+"</h5>",i=0;i<e.activateBanks.length;i++)e.activateBanks[i].bankUid==e.bank&&(t=e.activateBanks[i].bank);for(var o=0;o<e.activateBankAccounts.length;o++)e.activateBankAccounts[o].bankAccountUid==e.bankAccount&&(a=e.activateBankAccounts[o].bankAccountNumber,n=e.activateBankAccounts[o].bankAccountName);u()({printable:e.printTrans,properties:[{field:"dateNegotiated",displayName:"Transaction/Check Date"},{field:"type",displayName:"Type"},{field:"amount",displayName:"Amount"},{field:"number",displayName:"Reference/Check No."}],type:"json",header:"<h2>"+t+" ACCOUNT TRANSACTIONS ("+r+")</h2><h4>Account: "+a+" ("+n+")</h4>"+s,style:'td {text-align: center;} body {font-family: "Calibri";}',documentTitle:t+" Account Transaction"})}}},f=h,v=a("2877"),w=Object(v["a"])(f,n,r,!1,null,null,null);t["default"]=w.exports},d4e0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5",attrs:{type:"gradient-success"}}),a("div",{staticClass:"col-12 container-fluid mt--7",attrs:{id:"checkVoucher"}},[a("card",{staticClass:"pl-4 pt-0 pb-0 shadow"},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-2 pt-3 pl-4 text-right"},[a("b",[e._v("Choose Date:")])]),a("span",{staticClass:"col-sm-4 pl-0"},[a("base-input",{staticClass:"pt-2",staticStyle:{width:"230px"},attrs:{type:"date",min:"1997-01-01",id:"inputStyle"},on:{input:function(t){return e.getReimSummary()}},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}})],1),a("span",{staticClass:"col-2 pt-3 pl-4 text-right"},[a("b",[e._v("Department:")])]),a("span",{staticClass:"col-sm-4 pt-2 pl-0"},[a("v-select",{attrs:{id:"inputStyle",options:e.departments,reduce:function(e){return e.departmentUid},label:"departmentName"},on:{input:function(t){return e.getReimSummary()}},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1)])]),a("div",{attrs:{id:"viewGenSummary"}},[a("card",{staticClass:"pl-4 pt-2 pb-5 shadow"},[a("div",{staticClass:"row",attrs:{id:"centerStyle"}},[a("span",{staticClass:"col-sm-12 text-center",attrs:{id:"particular"}},[a("b",[e._v(e._s(e.company.name))])])]),a("div",{staticClass:"row",attrs:{id:"centerStyle"}},[a("span",{staticClass:"col-sm-12 text-center",attrs:{id:"particular"}},[a("b",[e._v(e._s(e.company.address))])])]),a("div",{staticClass:"row pt-4 pb-2",attrs:{id:"headerStyle"}},[a("span",{staticClass:"col-sm-12 text-center"},[a("b",[e._v("Summary of Reimbursement")]),a("br")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("span",[a("b",[e._v(e._s(e._f("moment")(e.chooseDate,"MMMM DD, YYYY")))])])]),a("div",{staticClass:"col-sm-2"}),a("div",{staticClass:"col-sm-4"},e._l(e.departments,(function(t){return a("span",{key:t.departmentUid},[t.departmentUid==e.department&&""!=e.department?a("span",[a("b",[e._v(e._s(t.departmentName))])]):e._e()])})),0)]),0!=e.checks.length?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("span",[a("b",[e._v("Check No:")]),e._v(" "+e._s(e.checks.checkNumber)+" ")])]),a("div",{staticClass:"col-sm-2"}),a("div",{staticClass:"col-sm-4"},[a("span",[a("b",[e._v("Voucher No.:")]),e._v(" "+e._s(e.checks.voucherNumber)+" ")])])]):e._e(),a("hr",{staticClass:"mt-2"}),0!=e.reimSummary.length?a("div",{staticClass:"row pb-0 text-center pl-4 pr-4",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-6",attrs:{id:"borderStyle"}},[a("b",[e._v("Name")])]),a("span",{staticClass:"col-sm-6",attrs:{id:"borderStyle"}},[a("b",[e._v("Amount")])])]):e._e(),e._l(e.reimSummary,(function(t){return a("div",{key:t.reimbursementId,staticClass:"row pl-4 pr-4 text-center",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-6",attrs:{id:"borderStyle"}},[a("span",[e._v(e._s(t.name))])]),a("span",{staticClass:"col-sm-6",attrs:{id:"borderStyle"}},[a("span",[e._v("â± "+e._s(t.totalAmount))])])])})),0!=e.reimSummary.length?a("div",{staticClass:"row pb-0 pl-4 pr-4 text-center",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-6",attrs:{id:"borderStyle"}},[a("b",[e._v("Total Amount")])]),a("span",{staticClass:"col-sm-6",attrs:{id:"borderStyle"}},[a("b",[e._v("â± "+e._s(e.totalReimAmount))])])]):e._e(),a("br"),0!=e.reimSummary.length?a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12",attrs:{id:"particular"}},[a("h3",[e._v("Total Reimbursement Amount: â± "+e._s(e.totalReimAmount))])])]):e._e(),a("br"),0!=e.reimSummary.length?a("hr",{staticClass:"mt-2"}):e._e(),0!=e.reimSummary.length?a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by :")]),e._v(" "+e._s(e.user.firstname)+" "+e._s(e.user.lastname)+" ")]),a("span",{staticClass:"col-sm-2"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by : ")])])]):e._e()],2)],1),a("hr"),a("div",{staticClass:"text-right"},[0!=e.reimSummary.length&&2==e.reimStatus?a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.openCreateCheck(e.reimSummary)}}},[e._v("Create Check")]):e._e(),0!=e.reimSummary.length?a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.printGenSummary(t)}}},[e._v("Print")]):e._e(),a("base-button",{staticClass:"col-md-2 ml-2 mr-5",attrs:{id:"darkInlineBtn"},nativeOn:{click:function(t){return e.$router.push("/reimbursement")}}},[e._v("Close")])],1)],1)],1)},r=[],s=(a("4160"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),i=a("56d7"),o=a("add5"),c=a.n(o),l=a("c1df"),u=a("e966"),d=u.bindWith(",","."),m={name:"reim-summary",components:{},data:function(){return{company:{name:"",address:""},chooseDate:"",departments:[],department:"",reimSummary:[],totalReimAmount:0,user:{firstname:"",lastname:""},reimStatus:1,reimCheckRef:"",particulars:[],checks:[]}},beforeRouteEnter:function(e,t,a){var n=localStorage.getItem("aisname"),r=i["dbUsers"].collection("users").where("username","==",n),s=[];r.get().then((function(e){if(!e.empty){e.forEach((function(e){s.push(e.data())}));var t=i["dbUsers"].collection("userRoles").where("userRoleId","==",s[0].userRoleReference),n=[];t.get().then((function(e){e.forEach((function(e){n.push(e.data())})),"Administrator"!=n[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDepartments(),e.getCompany(),e.getUser(localStorage.getItem("aisname")),e.getReimSummary();case 4:case"end":return t.stop()}}),t)})))()},methods:{getDepartments:function(){var e=this,t=i["dbUsers"].collection("departments").orderBy("departmentName","asc");e.departments=[],t.get().then((function(t){t.forEach((function(t){e.departments.push(t.data())}))}))},getCompany:function(){var e=this,t=[],a=i["dbMains"].collection("companyProfile");e.company=[],a.get().then((function(a){a.forEach((function(e){t.push(e.data())})),e.company={name:t[0].name,address:t[0].address}}))},getUser:function(e){if(""==e)self.$swal({title:"Warning",text:"The user ID is missing.",icon:"warning",confirmButtonColor:"#ef8157",confirmButtonText:"OK"});else if(""!=e){var t=this,a=i["dbUsers"].collection("users").where("username","==",e),n=[];a.get().then((function(e){e.forEach((function(e){n.push(e.data())})),t.user.firstname=n[0].firstname,t.user.lastname=n[0].lastname}))}},getReimSummary:function(){var e=this;e.reimSummary=[];try{var t=null,a=[],n="",r=0,s=[];t=""==e.department||null==e.department?i["dbExpense"].collection("reimbursements").where("processDate","==",l(e.chooseDate).format("YYYY-MM-DD")):i["dbExpense"].collection("reimbursements").where("processDate","==",l(e.chooseDate).format("YYYY-MM-DD")).where("departmentReference","==",e.department),t.get().then((function(t){t.forEach((function(e){a.push(e.data()),s.push(e.id)})),0!=a.length&&(e.reimStatus=a[0].status,3!=e.reimStatus&&4!=e.reimStatus||(e.reimCheckRef=a[0].checkReference,e.getCheckData(e.reimCheckRef)));for(var o=function(t){var o=i["dbUsers"].collection("users").where("userId","==",a[t].nameReference);o.get().then((function(i){i.forEach((function(e){n=e.data().firstname+" "+e.data().lastname})),r=parseFloat(r)+parseFloat(a[t].totalAmount.replaceAll(",","")),a[t]["id"]=s[t],a[t]["name"]=n,a[t].totalAmount=d(parseFloat(a[t].totalAmount.replaceAll(",","")).toFixed(2)),e.reimSummary.push(a[t]),e.totalReimAmount=d(parseFloat(r).toFixed(2))}))},c=0;c<a.length;c++)o(c)}))}catch(o){console.log(o),e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#096b85",confirmButtonText:"OK"})}},printGenSummary:function(){c()({printable:"viewGenSummary",type:"html",style:'#viewGenSummary {font-family: "Calibri";} #particularStyle {text-align: center;} #particular {display: block; overflow: inherit; white-space: normal; font-size: 12px;} #centerStyle {text-align: center;} #headerStyle {text-align: center; padding-top: 20px;} #borderStyle{border-width: 1px; border-style: solid;} #particular {display: block; overflow: inherit; white-space: normal;}',documentTitle:"Reimbursement Summary"})},openCreateCheck:function(e){self.particulars=[];for(var t=0;t<e.length;t++){var a={rowNum:t+1,reimId:e[t].id,particular:e[t].name,referenceNumber:"",unitPrice:e[t].totalAmount,particularAmount:e[t].totalAmount,quantity:1,status:1};self.particulars.push(a)}localStorage.setItem("checkPart",JSON.stringify(self.particulars)),this.$router.push("/check/dashboard")},getCheckData:function(e){var t=this,a=i["db"].collection("bankChecks").where("bankCheckUid","==",e);t.checks=[],a.get().then((function(e){e.forEach((function(e){t.checks={checkNumber:e.data().bankCheckNumber,voucherNumber:e.data().voucherNumber}}))}))}}},p=m,b=(a("4400"),a("2877")),h=Object(b["a"])(p,n,r,!1,null,null,null);t["default"]=h.exports},da78:function(e,t,a){"use strict";a("7509")},dac7:function(e,t,a){},dfe9:function(e,t,a){},e215:function(e,t,a){},e421:function(e,t,a){"use strict";a("70bf")},e429:function(e,t,a){},ea6c:function(e,t,a){"use strict";a("a017")},f0fa:function(e,t,a){"use strict";a("18f9")},f364:function(e,t,a){"use strict";a("0a84f")},f731:function(e,t,a){},fce0:function(e,t,a){"use strict";a("3949")}});
//# sourceMappingURL=app.48f4cfc8.js.map