(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6010d55c"],{"0828":function(e,t,a){},"0db8":function(e,t,a){},1450:function(e,t,a){"use strict";var i=a("30ef"),n=a.n(i),r=a("93b4");t["a"]={mounted:function(){Object(r["c"])(n.a)}}},"180c":function(e,t,a){},"1fca":function(e,t,a){"use strict";function i(e,t){if(t){var a=this.$data._chart,i=e.datasets.map((function(e){return e.label})),n=t.datasets.map((function(e){return e.label})),r=JSON.stringify(n),s=JSON.stringify(i);s===r&&t.datasets.length===e.datasets.length?(e.datasets.forEach((function(e,i){var n=Object.keys(t.datasets[i]),r=Object.keys(e),s=n.filter((function(e){return"_meta"!==e&&-1===r.indexOf(e)}));for(var o in s.forEach((function(e){delete a.data.datasets[i][e]})),e)e.hasOwnProperty(o)&&(a.data.datasets[i][o]=e[o])})),e.hasOwnProperty("labels")&&(a.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(a.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(a.data.yLabels=e.yLabels,this.$emit("ylabels:update")),a.update(),this.$emit("chart:update")):(a&&(a.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return s}));var n={data:function(){return{chartData:null}},watch:{chartData:i}},r={props:{chartData:{type:Object,required:!0,default:function(){}}},watch:{chartData:i}},s={reactiveData:n,reactiveProp:r},o=a("30ef"),l=a.n(o);function c(e,t){return{render:function(e){return e("div",{style:this.styles,class:this.cssClasses},[e("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(e){this.$data._plugins.push(e)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(e,a){this.$data._chart&&this.$data._chart.destroy(),this.$data._chart=new l.a(this.$refs.canvas.getContext("2d"),{type:t,data:e,options:a,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var d=c("bar-chart","bar"),u=(c("horizontalbar-chart","horizontalBar"),c("doughnut-chart","doughnut"));c("line-chart","line"),c("pie-chart","pie"),c("polar-chart","polarArea"),c("radar-chart","radar"),c("bubble-chart","bubble"),c("scatter-chart","scatter")},2394:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==e.listStatus?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getEnterprise(1)}}},[e._v("Active")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==e.listStatus?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getEnterprise(0)}}},[e._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"enterprise-table",attrs:{columns:e.columns,rows:e.enterprises,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["enterprise"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.enterprise))])]):e._e(),"status"==t.column.field?a("span",[a("span",[e._v(e._s(1==t.row.status?"Active":"Disabled"))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(i){return a("span",{key:i.userId},[i.userId==t.row.userReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openEditEnterpriseModal(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return e.changeStatus(t.row,0,"Disable")}}}):e._e(),0==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Active"},on:{click:function(a){return e.changeStatus(t.row,1,"Active")}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.enterprises.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getEnterprise(1)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-enterprise-modal",modifiers:{"new-enterprise-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Enterprise")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-enterprise-modal",title:"New Enterprise",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addEnterprise(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-enterprise-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Enterprise:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Enterprise"},model:{value:e.newEnterprise,callback:function(t){e.newEnterprise=t},expression:"newEnterprise"}}),e.$v.newEnterprise.$anyDirty&&!e.$v.newEnterprise.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newEnterprise.$anyDirty&&!e.$v.newEnterprise.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"edit-enterprise-modal",title:"Edit Enterprise",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateEnterprise(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-enterprise-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Enterprise:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Enterprise"},model:{value:e.edit.enterprise,callback:function(t){e.$set(e.edit,"enterprise",t)},expression:"edit.enterprise"}}),e.$v.edit.$anyDirty&&!e.$v.edit.enterprise.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.enterprise.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)],1)},n=[],r=(a("4160"),a("159b"),a("5530")),s=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&,]*$/),m=new Date,p=a("9f25"),h={components:{},data:function(){return{columns:[{label:"Enterprise",field:"enterprise"},{label:"Status",field:"status",sortable:!1},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"80px"}],loading:!0,enterprises:[],requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newEnterprise:"",edit:{id:"",enterpriseId:"",enterprise:""},listStatus:1}},beforeRouteEnter:function(e,t,a){var i=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",i),r=[];n.get().then((function(e){if(!e.empty){e.forEach((function(e){r.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",r[0].userRoleReference),i=[];t.get().then((function(e){e.forEach((function(e){i.push(e.data())})),"User"==i[0].userRole?a("/main/home"):"Manager"!=i[0].userRole&&"Administrator"!=i[0].userRole||a()}))}}))},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getEnterprise(1);case 1:case"end":return t.stop()}}),t)})))()},computed:Object(r["a"])({},Object(d["b"])({users:"Users/users"})),validations:{newEnterprise:{required:l["required"],alphaNumCustomValidator:u},edit:{enterprise:{required:l["required"],alphaNumCustomValidator:u}}},methods:{addEnterprise:function(){var e=this;if(e.$v.newEnterprise.$touch(),!e.$v.newEnterprise.$error){e.requestProcessing=!0;var t=o["dbExpense"].collection("enterprises").where("enterprise","==",Object(c["a"])(e.newEnterprise));t.get().then((function(t){if(t.empty){if(t){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),i=[],n="PEI-"+m.getFullYear()+p(m.getMonth()+1,2)+m.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&i.push(e.data())}));try{o["dbExpense"].collection("enterprises").doc().set({enterpriseId:n,enterprise:Object(c["a"])(e.newEnterprise),userReference:i[0].userId,status:1,dateCreated:m,dateModified:m}).then((function(){e.newEnterprise="",e.requestProcessing=!1,e.$v.newEnterprise.$reset(),e.$refs["enterprise-table"].reset(),e.getEnterprise(1),e.$bvModal.hide("new-enterprise-modal"),e.$swal({title:"Success",text:"New enterprise added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Enterprise already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},getEnterprise:function(e){var t=this,a=null,i=[],n=[];t.loading=!0,t.enterprises=[],t.listStatus=e,"all"!=t.limit?a=o["dbExpense"].collection("enterprises").where("status","==",e).orderBy("enterprise","asc").limit(t.limit):"all"==t.limit&&(a=o["dbExpense"].collection("enterprises").where("status","==",e).orderBy("enterprise","asc")),a.get().then((function(e){if(!e.empty){e.forEach((function(e){i.push(e.data()),n.push(e.id)}));for(var a=0;a<i.length;a++)i[a]["id"]=n[a],t.enterprises.push(i[a])}setTimeout((function(){t.loading=!1}),1e3)}))},openEditEnterpriseModal:function(e){this.edit={id:e.id,enterpriseId:e.enterpriseId,enterprise:e.enterprise},this.$bvModal.show("edit-enterprise-modal")},updateEnterprise:function(){var e=this;if(e.$v.edit.$touch(),!e.$v.edit.$error){e.requestProcessing=!0;var t=o["dbExpense"].collection("enterprises").where("enterprise","==",Object(c["a"])(e.edit.enterprise)).where("enterpriseId","!=",e.edit.enterpriseId);t.get().then((function(t){if(t.empty){if(t)try{o["dbExpense"].collection("enterprises").doc(e.edit.id).update({enterprise:Object(c["a"])(e.edit.enterprise),dateModified:m}).then((function(){e.$v.edit.$reset(),e.$bvModal.hide("edit-enterprise-modal"),e.requestProcessing=!1,e.$refs["enterprise-table"].reset(),e.getEnterprise(1),e.$swal({title:"Success",text:"Enterprise updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Enterprise already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},changeStatus:function(e,t,a){var i=this;i.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value)try{o["dbExpense"].collection("enterprises").doc(e.id).update({status:t,dateModified:m}).then((function(){i.$swal({title:"Success",text:"Enterprise status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){i.getEnterprise(t)}))}))}catch(r){console.log(r),i.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},f=h,b=(a("3a7b"),a("2877")),g=Object(b["a"])(f,i,n,!1,null,null,null);t["default"]=g.exports},2404:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},["Release"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getRemittanceDisbursements("Release")}}},[e._v("Release")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Cleared"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getRemittanceDisbursements("Cleared")}}},[e._v("Cleared")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getRemittanceDisbursements("All")}}},[e._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.getRemittanceDisbursements(e.listType)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==e.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.getRemittanceDisbursements(e.listType)}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"remittance-disbursement-table",attrs:{columns:e.columns,rows:e.remittanceDisbursements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["voucherNumber"==t.column.field?a("span",[a("span",{staticClass:"pointer",attrs:{id:"sideBarTxt"},on:{click:function(a){return e.openViewRemittanceDisbursementModal(t.row)}}},[e._v(e._s(t.row.voucherNumber))])]):e._e(),"transactionDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.transactionDate,"MMM DD, YYYY")))])]):e._e(),"amount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("₱ "+e._s(t.row.amount))])]):e._e(),"name"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.name))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(i){return a("span",{key:i.userId},[i.userId==t.row.userReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("RELEASE")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("CLEARED")]):e._e()]):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateRDModal(t.row)}}}):e._e(),1==t.row.status&&"User"!=e.userRole?a("span",{staticClass:"pointer ml-2 far fa-check-square",attrs:{id:"sideBarTxt",title:"Cleared"},on:{click:function(a){return e.changeStatus(t.row,2)}}}):e._e(),2==t.row.status&&"User"!=e.userRole?a("span",{staticClass:"pointer ml-2 far fa-square",attrs:{id:"sideBarTxt",title:"Release"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),e.remittanceDisbursements.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getRemittanceDisbursements(e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-remittance-disbursement-modal",modifiers:{"new-remittance-disbursement-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Remittance Disbursement")])],1)]),a("div",{staticClass:"pl-4",attrs:{id:"duplicateView"}},[a("div",{staticClass:"row"},[e._m(0),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher Number: "+e._s(e.view.voucherNumber))])])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Transaction Date: ")]),e._v(e._s(e._f("moment")(e.view.transactionDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Amount: ")]),e._v("₱ "+e._s(e.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("ID Number: ")]),e._v(e._s(e.view.idNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Name: ")]),e._v(e._s(e.view.name)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Description: ")]),e._v(e._s(e.view.description)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Email: ")]),e._v(e._s(e.view.email)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Contact Number: ")]),e._v(e._s(e.view.contactNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Penalty: ")]),e._v(e._s(e.view.penalty)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Payment Type: ")]),e._v(e._s(e.view.paymentType)+" ")]),"Check"==e.view.paymentType?a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check No: ")]),e._v(e._s(e.view.checkReference)+" ")]):e._e()]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Type: ")]),e._v(e._s(e.view.type)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account: ")]),e._v(e._s(e.view.account)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Business Type: ")]),e._v(e._s(e.view.businessType)+" ")])]),a("hr"),a("div",{staticClass:"row"},[e._m(1),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by :")]),e._v(" "+e._s(e.user.firstname)+" "+e._s(e.user.lastname)+" ")])]),e._m(2),a("br"),e._l(e.breakCounts,(function(e){return a("span",{key:e},[a("br")])})),a("br"),a("div",{staticClass:"row"},[e._m(3),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher Number: "+e._s(e.view.voucherNumber))])])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Transaction Date: ")]),e._v(e._s(e._f("moment")(e.view.transactionDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Amount: ")]),e._v("₱ "+e._s(e.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("ID Number: ")]),e._v(e._s(e.view.idNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Name: ")]),e._v(e._s(e.view.name)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Description: ")]),e._v(e._s(e.view.description)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Email: ")]),e._v(e._s(e.view.email)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Contact Number: ")]),e._v(e._s(e.view.contactNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Penalty: ")]),e._v(e._s(e.view.penalty)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Payment Type: ")]),e._v(e._s(e.view.paymentType)+" ")]),"Check"==e.view.paymentType?a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check No: ")]),e._v(e._s(e.view.checkReference)+" ")]):e._e()]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Type: ")]),e._v(e._s(e.view.type)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account: ")]),e._v(e._s(e.view.account)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Business Type: ")]),e._v(e._s(e.view.businessType)+" ")])]),a("hr"),a("div",{staticClass:"row"},[e._m(4),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by :")]),e._v(" "+e._s(e.user.firstname)+" "+e._s(e.user.lastname)+" ")])]),e._m(5)],2),a("b-modal",{attrs:{size:"xl",id:"new-remittance-disbursement-modal",title:"New Remittance Disbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.newRemittanceDisbursement(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-remittance-disbursement-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.newTransDate,callback:function(t){e.newTransDate=t},expression:"newTransDate"}}),e.$v.newTransDate.$anyDirty&&!e.$v.newTransDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("ID Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Name:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newIDNumber,callback:function(t){e.newIDNumber=t},expression:"newIDNumber"}}),e.$v.newIDNumber.$anyDirty&&!e.$v.newIDNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newIDNumber.$anyDirty&&!e.$v.newIDNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}),e.$v.newName.$anyDirty&&!e.$v.newName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newName.$anyDirty&&!e.$v.newName.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Email:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newDescription,expression:"newDescription"}],attrs:{rows:"4",cols:"59",id:"inputStyle"},domProps:{value:e.newDescription},on:{input:function(t){t.target.composing||(e.newDescription=t.target.value)}}})]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}}),e.$v.newEmail.$anyDirty&&!e.$v.newEmail.email?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Penalty Amount:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newContactNumber,callback:function(t){e.newContactNumber=t},expression:"newContactNumber"}}),e.$v.newContactNumber.$anyDirty&&!e.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newPenalty,callback:function(t){e.newPenalty=t},expression:"newPenalty"}}),e.$v.newPenalty.$anyDirty&&!e.$v.newPenalty.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),"Check"==e.newPaymentType?a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]):e._e()]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTypes,reduce:function(e){return e.type},label:"type",clearable:!1},model:{value:e.newPaymentType,callback:function(t){e.newPaymentType=t},expression:"newPaymentType"}}),e.$v.newPaymentType.$anyDirty&&!e.$v.newPaymentType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),"Check"==e.newPaymentType?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newCheckNo,callback:function(t){e.newCheckNo=t},expression:"newCheckNo"}}),e.$v.newCheckNo.$anyDirty&&!e.$v.newCheckNo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newCheckNo.$anyDirty&&!e.$v.newCheckNo.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e()]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Chart of Accounts:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.rdTypes,reduce:function(e){return e.remittanceDisbursementTypeId},label:"type",clearable:!1},model:{value:e.newRType,callback:function(t){e.newRType=t},expression:"newRType"}}),e.$v.newRType.$anyDirty&&!e.$v.newRType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-remittance-disbursement-type-modal",modifiers:{"new-remittance-disbursement-type-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.coas,reduce:function(e){return e.accountId},label:"account",clearable:!1},model:{value:e.newCOA,callback:function(t){e.newCOA=t},expression:"newCOA"}}),e.$v.newCOA.$anyDirty&&!e.$v.newCOA.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Business Types:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.businessTypes,reduce:function(e){return e.businessTypeId},label:"type",clearable:!1},model:{value:e.newBusinessType,callback:function(t){e.newBusinessType=t},expression:"newBusinessType"}}),e.$v.newBusinessType.$anyDirty&&!e.$v.newBusinessType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"new-remittance-disbursement-type-modal",title:"New Remittance Disbursement Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addRDType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-remittance-disbursement-type-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newType.$anyDirty&&!e.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"xl",id:"view-remittance-disbursement-modal",title:"View Remittance Disbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.printRemittanceDisbursement(t)}}},[e._v(" Print ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("view-remittance-disbursement-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("card",{staticClass:"pl-4 pt-5 pb-5 shadow",attrs:{id:"singleView"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("REMITTANCE DISBURSEMENT")])]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Voucher Number: "+e._s(e.view.voucherNumber))])])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Transaction Date: ")]),e._v(e._s(e._f("moment")(e.view.transactionDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Amount: ")]),e._v("₱ "+e._s(e.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("ID Number: ")]),e._v(e._s(e.view.idNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Name: ")]),e._v(e._s(e.view.name)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Description: ")]),e._v(e._s(e.view.description)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Email: ")]),e._v(e._s(e.view.email)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Contact Number: ")]),e._v(e._s(e.view.contactNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Penalty: ")]),e._v(e._s(e.view.penalty)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Payment Type: ")]),e._v(e._s(e.view.paymentType)+" ")]),"Check"==e.view.paymentType?a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Check No: ")]),e._v(e._s(e.view.checkReference)+" ")]):e._e()]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Type: ")]),e._v(e._s(e.view.type)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Account: ")]),e._v(e._s(e.view.account)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Business Type: ")]),e._v(e._s(e.view.businessType)+" ")])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Received Payment by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Prepared by :")]),e._v(" "+e._s(e.user.firstname)+" "+e._s(e.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Certified by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by : ")])])])])],1),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[1==e.attachmentStatus?a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addAttachments()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Attachment ")]):e._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("attachment-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e.loadAttachment?a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12 text-center"},[a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}})],1)])]):e._e(),e.attachments.length>0&&!e.loadAttachment?a("card",{attrs:{shadow:""}},[e.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},e._l(e.attachments,(function(t){return a("span",{key:t.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[1==e.attachmentStatus?a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return e.removeAttachment(t.name)}}}):e._e()]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:t.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:t.url}})])])])])})),0):e._e()]):e._e(),0!=e.attachments.length||e.loadAttachment?e._e():a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("h2",{staticClass:"text-center"},[e._v("NO ATTACHMENT")])])])])],1),a("b-modal",{attrs:{size:"xl",id:"edit-remittance-disbursement-modal",title:"Edit Remittance Disbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateRemittanceDisbursement(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-remittance-disbursement-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.edit.transDate,callback:function(t){e.$set(e.edit,"transDate",t)},expression:"edit.transDate"}}),e.$v.edit.$anyDirty&&!e.$v.edit.transDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.amount,callback:function(t){e.$set(e.edit,"amount",t)},expression:"edit.amount"}}),e.$v.edit.$anyDirty&&!e.$v.edit.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("ID Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Name:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.idNumber,callback:function(t){e.$set(e.edit,"idNumber",t)},expression:"edit.idNumber"}}),e.$v.edit.$anyDirty&&!e.$v.edit.idNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.idNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.name,callback:function(t){e.$set(e.edit,"name",t)},expression:"edit.name"}}),e.$v.edit.$anyDirty&&!e.$v.edit.name.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.name.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Email:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.description,expression:"edit.description"}],attrs:{rows:"4",cols:"59",id:"inputStyle"},domProps:{value:e.edit.description},on:{input:function(t){t.target.composing||e.$set(e.edit,"description",t.target.value)}}})]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.email,callback:function(t){e.$set(e.edit,"email",t)},expression:"edit.email"}}),e.$v.edit.$anyDirty&&!e.$v.edit.email.email?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Contact Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Penalty Amount:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.contactNumber,callback:function(t){e.$set(e.edit,"contactNumber",t)},expression:"edit.contactNumber"}}),e.$v.edit.$anyDirty&&!e.$v.edit.contactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.penalty,callback:function(t){e.$set(e.edit,"penalty",t)},expression:"edit.penalty"}}),e.$v.edit.$anyDirty&&!e.$v.edit.penalty.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Payment Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),"Check"==e.newPaymentType?a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])]):e._e()]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.paymentTypes,reduce:function(e){return e.type},label:"type",clearable:!1},model:{value:e.edit.paymentType,callback:function(t){e.$set(e.edit,"paymentType",t)},expression:"edit.paymentType"}}),e.$v.edit.$anyDirty&&!e.$v.edit.paymentType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),"Check"==e.edit.paymentType?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.edit.checkNo,callback:function(t){e.$set(e.edit,"checkNo",t)},expression:"edit.checkNo"}}),e.$v.edit.$anyDirty&&!e.$v.edit.checkNo.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.checkNo.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1):e._e()]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Chart of Accounts:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.rdTypes,reduce:function(e){return e.remittanceDisbursementTypeId},label:"type",clearable:!1},model:{value:e.edit.rType,callback:function(t){e.$set(e.edit,"rType",t)},expression:"edit.rType"}}),e.$v.edit.$anyDirty&&!e.$v.edit.rType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.coas,reduce:function(e){return e.accountId},label:"account",clearable:!1},model:{value:e.edit.coa,callback:function(t){e.$set(e.edit,"coa",t)},expression:"edit.coa"}}),e.$v.edit.$anyDirty&&!e.$v.edit.coa.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Business Types:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.businessTypes,reduce:function(e){return e.businessTypeId},label:"type",clearable:!1},model:{value:e.edit.businessType,callback:function(t){e.$set(e.edit,"businessType",t)},expression:"edit.businessType"}}),e.$v.edit.$anyDirty&&!e.$v.edit.businessType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])])],1)])],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"col-sm-6"},[a("b",[e._v("REMITTANCE DISBURSEMENT")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Received Payment by : ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Certified by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by : ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"col-sm-6"},[a("b",[e._v("REMITTANCE DISBURSEMENT")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Received Payment by : ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Certified by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[e._v("Approved by : ")])])])}],r=(a("a4d3"),a("e01a"),a("4160"),a("fb6a"),a("b0c0"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("5530")),s=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("4627"),d=a("add5"),u=a.n(d),m=a("c6f8"),p=a("2f62"),h=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ., ]*$/),f=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z -., ]*$/),b=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),g=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),v=a("c1df"),y=a("e966"),w=y.bindWith(",","."),C=new Date,x=a("9f25"),_={components:{},data:function(){return{columns:[{label:"Voucher No.",field:"voucherNumber"},{label:"Transaction Date",field:"transactionDate"},{label:"Amount",field:"amount"},{label:"Name",field:"name"},{label:"Created by",field:"userReference"},{label:"Status",field:"status"},{label:"",field:"action",width:"100px",sortable:!1}],loading:!0,remittanceDisbursements:[],userRole:"",user:{firstname:"",lastname:""},requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"}],filter:"month",dateCreated:v().format("YYYY-MM"),maxDate:v().format("YYYY-MM"),listType:"",newType:"",banks:[],bankAccounts:[],paymentTypes:[{type:"Cash"},{type:"Check"}],rdTypes:[],coas:[],businessTypes:[],newTransDate:v().format("YYYY-MM-DD"),newAmount:"",newIDNumber:"",newName:"",newDescription:"",newEmail:"",newContactNumber:"",newPenalty:"",newPaymentType:"Cash",newCheckNo:"",newRType:"",newCOA:"",newBusinessType:"",view:{voucherNumber:"",amount:"",transactionDate:"",idNumber:"",name:"",description:"",email:"",contactNumber:"",penalty:"",paymentType:"",checkReference:"",type:"",account:"",businessType:""},attachment:"",attachmentData:null,attachments:[],rdId:"",uploadValue:0,loadAttachment:!0,edit:{id:"",rdId:"",transDate:"",amount:"",idNumber:"",name:"",description:"",email:"",contactNumber:"",penalty:"",paymentType:"",checkNo:"",rType:"",coa:"",businessType:""},breakCounts:15}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole(),e.getRemittanceDisbursements("Release"),e.getRemittanceDisbursementTypes(),e.getChartOfAccounts(),e.getBusinessTypes(),e.getUser();case 6:case"end":return t.stop()}}),t)})))()},computed:Object(r["a"])({},Object(p["b"])({users:"Users/users"})),validations:{newType:{required:l["required"],alphaNumCustomValidator:g},newTransDate:{required:l["required"]},newAmount:{required:l["required"],amountCustomValidator:h},newIDNumber:{required:l["required"],numCustomValidator:b},newName:{required:l["required"],alphaCustomValidator:f},newEmail:{email:l["email"]},newContactNumber:{numCustomValidator:b},newPenalty:{amountCustomValidator:h},newPaymentType:{required:l["required"]},newCheckNo:{required:l["required"],numCustomValidator:b},newRType:{required:l["required"]},newCOA:{required:l["required"]},newBusinessType:{required:l["required"]},edit:{transDate:{required:l["required"]},amount:{required:l["required"],amountCustomValidator:h},idNumber:{required:l["required"],numCustomValidator:b},name:{required:l["required"],alphaCustomValidator:f},email:{email:l["email"]},contactNumber:{numCustomValidator:b},penalty:{amountCustomValidator:h},paymentType:{required:l["required"]},checkNo:{required:l["required"],numCustomValidator:b},rType:{required:l["required"]},coa:{required:l["required"]},businessType:{required:l["required"]}}},methods:{getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=o["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var i=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];i.get().then((function(t){t.empty||(t.forEach((function(e){n.push(e.data())})),e.userRole=n[0].userRole)}))}))},getUser:function(){var e=this;e.username=localStorage.getItem("aisname");var t=o["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||(t.forEach((function(e){a.push(e.data())})),e.user.firstname=a[0].firstname,e.user.lastname=a[0].lastname)}))},getBankAccounts:function(e){var t=this,a=o["dbMains"].collection("bankAccounts").where("bankReference","==",e).orderBy("bankAccountNumber","asc");t.bankAccounts=[],a.get().then((function(e){e.forEach((function(e){t.bankAccounts.push(e.data())})),t.newBankAccount=t.bankAccounts[0].bankAccountUid}))},getRemittanceDisbursementTypes:function(){var e=this,t=o["dbMains"].collection("remittanceDisbursementTypes").orderBy("type","asc");e.rdTypes=[],t.get().then((function(t){t.forEach((function(t){e.rdTypes.push(t.data())})),e.newRType=e.rdTypes[0].remittanceDisbursementTypeId}))},getChartOfAccounts:function(){var e=this,t=o["dbMains"].collection("chartOfAccounts").orderBy("account","asc");e.coas=[],t.get().then((function(t){t.forEach((function(t){e.coas.push(t.data())})),e.newCOA=e.coas[0].accountId}))},getBusinessTypes:function(){var e=this,t=o["dbMains"].collection("businessTypes").orderBy("type","asc");e.businessTypes=[],t.get().then((function(t){t.forEach((function(t){e.businessTypes.push(t.data())})),e.newBusinessType=e.businessTypes[0].businessTypeId}))},addRDType:function(){var e=this;if(e.requestProcessing=!1,e.$v.newType.$touch(),!e.$v.newType.$error){var t=null;e.requestProcessing=!0,t=o["dbMains"].collection("remittanceDisbursementTypes").where("type","==",Object(m["a"])(e.newType)),t.get().then((function(t){if(t.empty){if(t){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),i=[],n="RDTI-"+C.getFullYear()+x(C.getMonth()+1,2)+C.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&i.push(e.data())}));try{o["dbMains"].collection("remittanceDisbursementTypes").doc().set({remittanceDisbursementTypeId:n,type:Object(m["a"])(e.newType),userReference:i[0].userId,status:1,dateCreated:C,dateModified:C}).then((function(){e.newType="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$bvModal.hide("new-remittance-disbursement-type-modal"),e.getRemittanceDisbursementTypes(),e.$swal({title:"Success",text:"New remittance disbursement type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Remittance disbursement type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},newRemittanceDisbursement:function(){var e=this,t=!1;if(e.$v.newTransDate.$touch(),e.$v.newAmount.$touch(),e.$v.newIDNumber.$touch(),e.$v.newName.$touch(),e.$v.newEmail.$touch(),e.$v.newContactNumber.$touch(),e.$v.newPenalty.$touch(),e.$v.newPaymentType.$touch(),e.$v.newCheckNo.$touch(),e.$v.newRType.$touch(),e.$v.newCOA.$touch(),e.$v.newBusinessType.$touch(),"Cash"==e.newPaymentType?(e.$v.newTransDate.$error||e.$v.newAmount.$error||e.$v.newIDNumber.$error||e.$v.newName.$error||e.$v.newEmail.$error||e.$v.newContactNumber.$error||e.$v.newPenalty.$error||e.$v.newPaymentType.$error||e.$v.newRType.$error||e.$v.newCOA.$error||e.$v.newBusinessType.$error)&&(t=!0):"Check"==e.newPaymentType&&(e.$v.newTransDate.$error||e.$v.newAmount.$error||e.$v.newIDNumber.$error||e.$v.newName.$error||e.$v.newEmail.$error||e.$v.newContactNumber.$error||e.$v.newPenalty.$error||e.$v.newPaymentType.$error||e.$v.newCheckNo.$error||e.$v.newRType.$error||e.$v.newCOA.$error||e.$v.newBusinessType.$error)&&(t=!0),!t){e.requestProcessing=!0;try{var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),i=[],n="ReDI-"+C.getFullYear()+x(C.getMonth()+1,2)+C.getDate()+"-"+Math.floor(1e6*Math.random()),r=o["dbUsers"].collection("remittanceDisbursements").orderBy("dateCreated","desc").limit(1),s="";r.get().then((function(t){t.forEach((function(e){e.exists&&(s=e.data().voucherNumber)}));var r="",l=new Date;""!=s?(r=x(parseInt(s.slice(7))+1,4),"1000"==r.toString()&&(r="0001")):r="0001",a.get().then((function(t){t.forEach((function(e){i.push(e.data())})),o["dbUsers"].collection("remittanceDisbursements").doc().set({remittanceDisbursementId:n,transactionDate:e.newTransDate,amount:e.newAmount,voucherNumber:x(l.getMonth()+1)+""+l.getFullYear().toString().slice(2,4)+"-4"+r,idNumber:e.newIDNumber,name:e.newName,description:e.newDescription,email:e.newEmail,contactNumber:e.newContactNumber,penalty:e.newPenalty,paymentType:e.newPaymentType,checkReference:e.newCheckNo,remittanceTypeReference:e.newRType,accountReference:e.newCOA,businessTypeReference:e.newBusinessType,status:1,userReference:i[0].userId,dateCreated:C,dateModified:C}).then((function(){e.$swal({title:"Success",text:"New remittance disbursement added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.newTransDate=v().format("YYYY-MM-DD"),e.newAmount="",e.newIDNumber="",e.newName="",e.newDescription="",e.newEmail="",e.newContactNumber="",e.newPenalty="",e.newPaymentType="Cash",e.newCheckNo="",e.newRType="",e.newCOA="",e.newBusinessType="",e.requestProcessing=!1,e.$v.newTransDate.$reset(),e.$v.newAmount.$reset(),e.$v.newIDNumber.$reset(),e.$v.newName.$reset(),e.$v.newEmail.$reset(),e.$v.newContactNumber.$reset(),e.$v.newPenalty.$reset(),e.$v.newPaymentType.$reset(),e.$v.newCheckNo.$reset(),e.$v.newRType.$reset(),e.$v.newCOA.$reset(),e.$v.newBusinessType.$reset(),e.$bvModal.hide("new-remittance-disbursement-modal"),e.$refs["remittance-disbursement-table"].reset(),e.getRemittanceDisbursementTypes(),e.getChartOfAccounts(),e.getBusinessTypes(),e.getRemittanceDisbursements(e.listType)}))}))}))}))}catch(l){console.log(l),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},getRemittanceDisbursements:function(e){var t=this,a=null,i=[],n=[],r=v(t.dateCreated).startOf("month").format("YYYY-MM-DD"),s=v(t.dateCreated).endOf("month").format("YYYY-MM-DD");t.username=localStorage.getItem("aisname"),t.accountName=t.username.toUpperCase();var l=o["dbUsers"].collection("users").where("username","==",t.username),c=[],d="",u="";l.get().then((function(l){l.forEach((function(e){c.push(e.data())})),u=c[0].userId;var m=o["dbUsers"].collection("userRoles").where("userRoleId","==",c[0].userRoleReference),p=[];m.get().then((function(l){l.forEach((function(e){p.push(e.data())})),d=p[0].userRole,t.loading=!0,t.remittanceDisbursements=[],t.listType=e,"Administrator"==d||"Manager"==d?"Release"==e?"all"!=t.limit?a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("status","==",1).limit(t.limit):"all"==t.limit&&(a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("status","==",1)):"Cleared"==e?"all"!=t.limit?a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("status","==",2).limit(t.limit):"all"==t.limit&&(a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("status","==",2)):"All"==e&&("all"!=t.limit?a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).limit(t.limit):"all"==t.limit&&(a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s))):"User"==d&&("Release"==e?"all"!=t.limit?a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("userReference","==",u).where("status","==",1).limit(t.limit):"all"==t.limit&&(a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("userReference","==",u).where("status","==",1)):"Cleared"==e?"all"!=t.limit?a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("userReference","==",u).where("status","==",2).limit(t.limit):"all"==t.limit&&(a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("userReference","==",u).where("status","==",2)):"All"==e&&("all"!=t.limit?a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("userReference","==",u).limit(t.limit):"all"==t.limit&&(a=o["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",s).where("userReference","==",u)))),a.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data()),i.push(e.id)}));var a=o["dbMains"].collection("remittanceDisbursementTypes"),r=o["dbMains"].collection("chartOfAccounts"),s=o["dbMains"].collection("businessTypes"),l=[],c=[],d=[];a.get().then((function(e){e.forEach((function(e){l.push(e.data())})),r.get().then((function(e){e.forEach((function(e){c.push(e.data())})),s.get().then((function(e){e.forEach((function(e){d.push(e.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=i[a],n[a]["type"]="",n[a]["coa"]="",n[a]["businessType"]="",n[a].amount=w(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2)),t.remittanceDisbursements.push(n[a]);for(var r=0;r<l.length;r++)l[r].remittanceDisbursementTypeId==n[a].remittanceTypeReference&&(n[a].type=l[r].type);for(var s=0;s<c.length;s++)c[s].accountId==n[a].accountReference&&(n[a].coa=c[s].account);for(var o=0;o<d.length;o++)d[o].businessTypeId==n[a].businessTypeReference&&(n[a].businessType=d[o].type)}}))}))}))}setTimeout((function(){t.loading=!1}),1e3)}))}))}))},openViewRemittanceDisbursementModal:function(e){var t=this;t.view={voucherNumber:e.voucherNumber,amount:e.amount,transactionDate:e.transactionDate,idNumber:e.idNumber,name:e.name,description:e.description,email:e.email,contactNumber:e.contactNumber,penalty:e.penalty,paymentType:e.paymentType,checkReference:e.checkReference,type:e.type,account:e.coa,businessType:e.businessType},t.$bvModal.show("view-remittance-disbursement-modal")},openAttachments:function(e){this.rdId=e.remittanceDisbursementId,this.attachmentStatus=e.status,this.$bvModal.show("attachment-modal"),this.getAttachments(this.rdId)},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(e){var t=this,a={maxSizeMB:1,useWebWorker:!0};t.uploadValue=0,t.attachment=null,t.attachments=[],t.attachmentData=e.target.files[0],Object(c["a"])(t.attachmentData,a).then((function(e){t.attachmentData=e,t.onUpload(t.attachmentData)}))},onUpload:function(e){var t=this,a=o["storageMains"].ref("remittanceDisbursements/"+t.rdId+"/"+e.name).put(e);t.requestProcessing=!1;try{t.attachment=null,t.requestProcessing=!0,a.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadValue=100,t.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1,t.getAttachments(t.rdId)}))}catch(i){console.log("error"),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}},getAttachments:function(e){var t=this,a=0,i=o["storageMains"].ref("remittanceDisbursements/"+e);t.loadAttachment=!0,t.attachments=[],t.uploadValue=0,i.listAll().then((function(i){i.items.forEach((function(i){o["storageMains"].ref("remittanceDisbursements/"+e+"/"+i.name).getDownloadURL().then((function(e){a+=1,t.attachments.push({rowNum:a,name:i.name,url:e,path:i.fullPath,status:1}),t.uploadValue=100}))}))})).catch((function(e){console.log(e)})),setTimeout((function(){t.loadAttachment=!1}),5e3)},removeAttachment:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var i=o["storageMains"].ref("remittanceDisbursements/"+t.rdId+"/"+e);try{i.delete().then((function(){t.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getAttachments(t.rdId)}))}))}catch(n){console.log(n),t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}}))},openUpdateRDModal:function(e){var t=this;t.edit={id:e.id,rdId:e.refundDisbursementId,transDate:e.transactionDate,amount:e.amount,idNumber:e.idNumber,name:e.name,description:e.description,email:e.email,contactNumber:e.contactNumber,penalty:e.penalty,paymentType:e.paymentType,checkNo:e.checkReference,rType:e.remittanceTypeReference,coa:e.accountReference,businessType:e.businessTypeReference},t.$bvModal.show("edit-remittance-disbursement-modal")},updateRemittanceDisbursement:function(){var e=this,t=!1;if(e.$v.edit.transDate.$touch(),e.$v.edit.amount.$touch(),e.$v.edit.idNumber.$touch(),e.$v.edit.name.$touch(),e.$v.edit.email.$touch(),e.$v.edit.contactNumber.$touch(),e.$v.edit.penalty.$touch(),e.$v.edit.paymentType.$touch(),e.$v.edit.checkNo.$touch(),e.$v.edit.rType.$touch(),e.$v.edit.coa.$touch(),e.$v.edit.businessType.$touch(),"Cash"==e.paymentType?(e.$v.edit.transDate.$error||e.$v.edit.amount.$error||e.$v.edit.idNumber.$error||e.$v.edit.name.$error||e.$v.edit.email.$error||e.$v.edit.contactNumber.$error||e.$v.edit.penalty.$error||e.$v.edit.paymentType.$error||e.$v.edit.rType.$error||e.$v.edit.coa.$error||e.$v.edit.businessType.$error)&&(t=!0):"Check"==e.paymentType&&(e.$v.edit.transDate.$error||e.$v.edit.amount.$error||e.$v.edit.idNumber.$error||e.$v.edit.name.$error||e.$v.edit.email.$error||e.$v.edit.contactNumber.$error||e.$v.edit.penalty.$error||e.$v.edit.paymentType.$error||e.$v.edit.checkNo.$error||e.$v.edit.rType.$error||e.$v.edit.coa.$error||e.$v.edit.businessType.$error)&&(t=!0),!t){e.requestProcessing=!0;try{o["dbUsers"].collection("remittanceDisbursements").doc(e.edit.id).update({transactionDate:e.edit.transDate,amount:e.edit.amount,idNumber:e.edit.idNumber,name:e.edit.name,description:e.edit.description,email:e.edit.email,contactNumber:e.edit.contactNumber,penalty:e.edit.penalty,paymentType:e.edit.paymentType,checkReference:e.edit.checkNo,remittanceTypeReference:e.edit.rType,accountReference:e.edit.coa,businessTypeReference:e.edit.businessType,dateModified:C}).then((function(){e.edit={id:"",rdId:"",transDate:"",amount:"",idNumber:"",name:"",description:"",email:"",contactNumber:"",penalty:"",paymentType:"",checkNo:"",rType:"",coa:"",businessType:""},e.requestProcessing=!1,e.$v.edit.$reset(),e.$bvModal.hide("edit-remittance-disbursement-modal"),e.$refs["remittance-disbursement-table"].reset(),e.getRemittanceDisbursements(e.listType),e.$swal({title:"Success",text:"Remittance disbursement updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},changeStatus:function(e,t){var a=this,i="";1==t?i="Release":2==t&&(i="Cleared"),a.$swal({title:"Are you sure?",text:"You want to change the status to "+i,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){n.value&&o["dbUsers"].collection("remittanceDisbursements").doc(e.id).update({status:t,dateModified:C}).then((function(){a.$refs["remittance-disbursement-table"].reset(),a.getRemittanceDisbursements(i),a.$swal({title:"Success",text:"Remittance disbursement status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))},printRemittanceDisbursement:function(){this.$swal({title:"Print with duplicate?",text:"",icon:"question",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"YES",cancelButtonText:"NO"}).then((function(e){e.value?u()({printable:"duplicateView",type:"html",style:'#duplicateView {font-family: "Calibri";} #borderStyle {border-width: 1px; border-style: solid;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;}',documentTitle:"Remittance Disbursement Voucher"}):u()({printable:"singleView",type:"html",style:'#singleView {font-family: "Calibri";} #borderStyle {border-width: 1px; border-style: solid;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;}',documentTitle:"Remittance Disbursement Voucher"})}))}}},D=_,k=(a("f6ac"),a("2877")),S=Object(k["a"])(D,i,n,!1,null,null,null);t["default"]=S.exports},"2fc5":function(e,t,a){},"30ef":function(e,t,a){
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
(function(t,i){e.exports=i(function(){try{return a("c1df")}catch(e){}}())})(0,(function(e){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function a(e){return e&&e["default"]||e}e=e&&e.hasOwnProperty("default")?e["default"]:e;var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=t((function(e){var t={};for(var a in i)i.hasOwnProperty(a)&&(t[i[a]]=a);var n=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var r in n)if(n.hasOwnProperty(r)){if(!("channels"in n[r]))throw new Error("missing channels property: "+r);if(!("labels"in n[r]))throw new Error("missing channel labels property: "+r);if(n[r].labels.length!==n[r].channels)throw new Error("channel and label counts mismatch: "+r);var s=n[r].channels,o=n[r].labels;delete n[r].channels,delete n[r].labels,Object.defineProperty(n[r],"channels",{value:s}),Object.defineProperty(n[r],"labels",{value:o})}function l(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}n.rgb.hsl=function(e){var t,a,i,n=e[0]/255,r=e[1]/255,s=e[2]/255,o=Math.min(n,r,s),l=Math.max(n,r,s),c=l-o;return l===o?t=0:n===l?t=(r-s)/c:r===l?t=2+(s-n)/c:s===l&&(t=4+(n-r)/c),t=Math.min(60*t,360),t<0&&(t+=360),i=(o+l)/2,a=l===o?0:i<=.5?c/(l+o):c/(2-l-o),[t,100*a,100*i]},n.rgb.hsv=function(e){var t,a,i,n,r,s=e[0]/255,o=e[1]/255,l=e[2]/255,c=Math.max(s,o,l),d=c-Math.min(s,o,l),u=function(e){return(c-e)/6/d+.5};return 0===d?n=r=0:(r=d/c,t=u(s),a=u(o),i=u(l),s===c?n=i-a:o===c?n=1/3+t-i:l===c&&(n=2/3+a-t),n<0?n+=1:n>1&&(n-=1)),[360*n,100*r,100*c]},n.rgb.hwb=function(e){var t=e[0],a=e[1],i=e[2],r=n.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(a,i));return i=1-1/255*Math.max(t,Math.max(a,i)),[r,100*s,100*i]},n.rgb.cmyk=function(e){var t,a,i,n,r=e[0]/255,s=e[1]/255,o=e[2]/255;return n=Math.min(1-r,1-s,1-o),t=(1-r-n)/(1-n)||0,a=(1-s-n)/(1-n)||0,i=(1-o-n)/(1-n)||0,[100*t,100*a,100*i,100*n]},n.rgb.keyword=function(e){var a=t[e];if(a)return a;var n,r=1/0;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s],c=l(e,o);c<r&&(r=c,n=s)}return n},n.keyword.rgb=function(e){return i[e]},n.rgb.xyz=function(e){var t=e[0]/255,a=e[1]/255,i=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var n=.4124*t+.3576*a+.1805*i,r=.2126*t+.7152*a+.0722*i,s=.0193*t+.1192*a+.9505*i;return[100*n,100*r,100*s]},n.rgb.lab=function(e){var t,a,i,r=n.rgb.xyz(e),s=r[0],o=r[1],l=r[2];return s/=95.047,o/=100,l/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,t=116*o-16,a=500*(s-o),i=200*(o-l),[t,a,i]},n.hsl.rgb=function(e){var t,a,i,n,r,s=e[0]/360,o=e[1]/100,l=e[2]/100;if(0===o)return r=255*l,[r,r,r];a=l<.5?l*(1+o):l+o-l*o,t=2*l-a,n=[0,0,0];for(var c=0;c<3;c++)i=s+1/3*-(c-1),i<0&&i++,i>1&&i--,r=6*i<1?t+6*(a-t)*i:2*i<1?a:3*i<2?t+(a-t)*(2/3-i)*6:t,n[c]=255*r;return n},n.hsl.hsv=function(e){var t,a,i=e[0],n=e[1]/100,r=e[2]/100,s=n,o=Math.max(r,.01);return r*=2,n*=r<=1?r:2-r,s*=o<=1?o:2-o,a=(r+n)/2,t=0===r?2*s/(o+s):2*n/(r+n),[i,100*t,100*a]},n.hsv.rgb=function(e){var t=e[0]/60,a=e[1]/100,i=e[2]/100,n=Math.floor(t)%6,r=t-Math.floor(t),s=255*i*(1-a),o=255*i*(1-a*r),l=255*i*(1-a*(1-r));switch(i*=255,n){case 0:return[i,l,s];case 1:return[o,i,s];case 2:return[s,i,l];case 3:return[s,o,i];case 4:return[l,s,i];case 5:return[i,s,o]}},n.hsv.hsl=function(e){var t,a,i,n=e[0],r=e[1]/100,s=e[2]/100,o=Math.max(s,.01);return i=(2-r)*s,t=(2-r)*o,a=r*o,a/=t<=1?t:2-t,a=a||0,i/=2,[n,100*a,100*i]},n.hwb.rgb=function(e){var t,a,i,n,r,s,o,l=e[0]/360,c=e[1]/100,d=e[2]/100,u=c+d;switch(u>1&&(c/=u,d/=u),t=Math.floor(6*l),a=1-d,i=6*l-t,0!==(1&t)&&(i=1-i),n=c+i*(a-c),t){default:case 6:case 0:r=a,s=n,o=c;break;case 1:r=n,s=a,o=c;break;case 2:r=c,s=a,o=n;break;case 3:r=c,s=n,o=a;break;case 4:r=n,s=c,o=a;break;case 5:r=a,s=c,o=n;break}return[255*r,255*s,255*o]},n.cmyk.rgb=function(e){var t,a,i,n=e[0]/100,r=e[1]/100,s=e[2]/100,o=e[3]/100;return t=1-Math.min(1,n*(1-o)+o),a=1-Math.min(1,r*(1-o)+o),i=1-Math.min(1,s*(1-o)+o),[255*t,255*a,255*i]},n.xyz.rgb=function(e){var t,a,i,n=e[0]/100,r=e[1]/100,s=e[2]/100;return t=3.2406*n+-1.5372*r+-.4986*s,a=-.9689*n+1.8758*r+.0415*s,i=.0557*n+-.204*r+1.057*s,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,t=Math.min(Math.max(0,t),1),a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),[255*t,255*a,255*i]},n.xyz.lab=function(e){var t,a,i,n=e[0],r=e[1],s=e[2];return n/=95.047,r/=100,s/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t=116*r-16,a=500*(n-r),i=200*(r-s),[t,a,i]},n.lab.xyz=function(e){var t,a,i,n=e[0],r=e[1],s=e[2];a=(n+16)/116,t=r/500+a,i=a-s/200;var o=Math.pow(a,3),l=Math.pow(t,3),c=Math.pow(i,3);return a=o>.008856?o:(a-16/116)/7.787,t=l>.008856?l:(t-16/116)/7.787,i=c>.008856?c:(i-16/116)/7.787,t*=95.047,a*=100,i*=108.883,[t,a,i]},n.lab.lch=function(e){var t,a,i,n=e[0],r=e[1],s=e[2];return t=Math.atan2(s,r),a=360*t/2/Math.PI,a<0&&(a+=360),i=Math.sqrt(r*r+s*s),[n,i,a]},n.lch.lab=function(e){var t,a,i,n=e[0],r=e[1],s=e[2];return i=s/360*2*Math.PI,t=r*Math.cos(i),a=r*Math.sin(i),[n,t,a]},n.rgb.ansi16=function(e){var t=e[0],a=e[1],i=e[2],r=1 in arguments?arguments[1]:n.rgb.hsv(e)[2];if(r=Math.round(r/50),0===r)return 30;var s=30+(Math.round(i/255)<<2|Math.round(a/255)<<1|Math.round(t/255));return 2===r&&(s+=60),s},n.hsv.ansi16=function(e){return n.rgb.ansi16(n.hsv.rgb(e),e[2])},n.rgb.ansi256=function(e){var t=e[0],a=e[1],i=e[2];if(t===a&&a===i)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var n=16+36*Math.round(t/255*5)+6*Math.round(a/255*5)+Math.round(i/255*5);return n},n.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var a=.5*(1+~~(e>50)),i=(1&t)*a*255,n=(t>>1&1)*a*255,r=(t>>2&1)*a*255;return[i,n,r]},n.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var a;e-=16;var i=Math.floor(e/36)/5*255,n=Math.floor((a=e%36)/6)/5*255,r=a%6/5*255;return[i,n,r]},n.rgb.hex=function(e){var t=((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2])),a=t.toString(16).toUpperCase();return"000000".substring(a.length)+a},n.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var a=t[0];3===t[0].length&&(a=a.split("").map((function(e){return e+e})).join(""));var i=parseInt(a,16),n=i>>16&255,r=i>>8&255,s=255&i;return[n,r,s]},n.rgb.hcg=function(e){var t,a,i=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(i,n),r),o=Math.min(Math.min(i,n),r),l=s-o;return t=l<1?o/(1-l):0,a=l<=0?0:s===i?(n-r)/l%6:s===n?2+(r-i)/l:4+(i-n)/l+4,a/=6,a%=1,[360*a,100*l,100*t]},n.hsl.hcg=function(e){var t=e[1]/100,a=e[2]/100,i=1,n=0;return i=a<.5?2*t*a:2*t*(1-a),i<1&&(n=(a-.5*i)/(1-i)),[e[0],100*i,100*n]},n.hsv.hcg=function(e){var t=e[1]/100,a=e[2]/100,i=t*a,n=0;return i<1&&(n=(a-i)/(1-i)),[e[0],100*i,100*n]},n.hcg.rgb=function(e){var t=e[0]/360,a=e[1]/100,i=e[2]/100;if(0===a)return[255*i,255*i,255*i];var n=[0,0,0],r=t%1*6,s=r%1,o=1-s,l=0;switch(Math.floor(r)){case 0:n[0]=1,n[1]=s,n[2]=0;break;case 1:n[0]=o,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=s;break;case 3:n[0]=0,n[1]=o,n[2]=1;break;case 4:n[0]=s,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=o}return l=(1-a)*i,[255*(a*n[0]+l),255*(a*n[1]+l),255*(a*n[2]+l)]},n.hcg.hsv=function(e){var t=e[1]/100,a=e[2]/100,i=t+a*(1-t),n=0;return i>0&&(n=t/i),[e[0],100*n,100*i]},n.hcg.hsl=function(e){var t=e[1]/100,a=e[2]/100,i=a*(1-t)+.5*t,n=0;return i>0&&i<.5?n=t/(2*i):i>=.5&&i<1&&(n=t/(2*(1-i))),[e[0],100*n,100*i]},n.hcg.hwb=function(e){var t=e[1]/100,a=e[2]/100,i=t+a*(1-t);return[e[0],100*(i-t),100*(1-i)]},n.hwb.hcg=function(e){var t=e[1]/100,a=e[2]/100,i=1-a,n=i-t,r=0;return n<1&&(r=(i-n)/(1-n)),[e[0],100*n,100*r]},n.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},n.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},n.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},n.gray.hsl=n.gray.hsv=function(e){return[0,0,e[0]]},n.gray.hwb=function(e){return[0,100,e[0]]},n.gray.cmyk=function(e){return[0,0,0,e[0]]},n.gray.lab=function(e){return[e[0],0,0]},n.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),a=(t<<16)+(t<<8)+t,i=a.toString(16).toUpperCase();return"000000".substring(i.length)+i},n.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}}));n.rgb,n.hsl,n.hsv,n.hwb,n.cmyk,n.xyz,n.lab,n.lch,n.hex,n.keyword,n.ansi16,n.ansi256,n.hcg,n.apple,n.gray;function r(){for(var e={},t=Object.keys(n),a=t.length,i=0;i<a;i++)e[t[i]]={distance:-1,parent:null};return e}function s(e){var t=r(),a=[e];t[e].distance=0;while(a.length)for(var i=a.pop(),s=Object.keys(n[i]),o=s.length,l=0;l<o;l++){var c=s[l],d=t[c];-1===d.distance&&(d.distance=t[i].distance+1,d.parent=i,a.unshift(c))}return t}function o(e,t){return function(a){return t(e(a))}}function l(e,t){var a=[t[e].parent,e],i=n[t[e].parent][e],r=t[e].parent;while(t[r].parent)a.unshift(t[r].parent),i=o(n[t[r].parent][r],i),r=t[r].parent;return i.conversion=a,i}var c=function(e){for(var t=s(e),a={},i=Object.keys(t),n=i.length,r=0;r<n;r++){var o=i[r],c=t[o];null!==c.parent&&(a[o]=l(o,t))}return a},d={},u=Object.keys(n);function m(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function p(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var a=e(t);if("object"===typeof a)for(var i=a.length,n=0;n<i;n++)a[n]=Math.round(a[n]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}u.forEach((function(e){d[e]={},Object.defineProperty(d[e],"channels",{value:n[e].channels}),Object.defineProperty(d[e],"labels",{value:n[e].labels});var t=c(e),a=Object.keys(t);a.forEach((function(a){var i=t[a];d[e][a]=p(i),d[e][a].raw=m(i)}))}));var h=d,f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},b={getRgba:g,getHsla:v,getRgb:w,getHsl:C,getHwb:y,getAlpha:x,hexString:_,rgbString:D,rgbaString:k,percentString:S,percentaString:M,hslString:T,hslaString:R,hwbString:A,keyword:$};function g(e){if(e){var t=/^#([a-fA-F0-9]{3,4})$/i,a=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,i=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/(\w+)/,s=[0,0,0],o=1,l=e.match(t),c="";if(l){l=l[1],c=l[3];for(var d=0;d<s.length;d++)s[d]=parseInt(l[d]+l[d],16);c&&(o=Math.round(parseInt(c+c,16)/255*100)/100)}else if(l=e.match(a)){c=l[2],l=l[1];for(d=0;d<s.length;d++)s[d]=parseInt(l.slice(2*d,2*d+2),16);c&&(o=Math.round(parseInt(c,16)/255*100)/100)}else if(l=e.match(i)){for(d=0;d<s.length;d++)s[d]=parseInt(l[d+1]);o=parseFloat(l[4])}else if(l=e.match(n)){for(d=0;d<s.length;d++)s[d]=Math.round(2.55*parseFloat(l[d+1]));o=parseFloat(l[4])}else if(l=e.match(r)){if("transparent"==l[1])return[0,0,0,0];if(s=f[l[1]],!s)return}for(d=0;d<s.length;d++)s[d]=B(s[d],0,255);return o=o||0==o?B(o,0,1):1,s[3]=o,s}}function v(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=e.match(t);if(a){var i=parseFloat(a[4]),n=B(parseInt(a[1]),0,360),r=B(parseFloat(a[2]),0,100),s=B(parseFloat(a[3]),0,100),o=B(isNaN(i)?1:i,0,1);return[n,r,s,o]}}}function y(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=e.match(t);if(a){var i=parseFloat(a[4]),n=B(parseInt(a[1]),0,360),r=B(parseFloat(a[2]),0,100),s=B(parseFloat(a[3]),0,100),o=B(isNaN(i)?1:i,0,1);return[n,r,s,o]}}}function w(e){var t=g(e);return t&&t.slice(0,3)}function C(e){var t=v(e);return t&&t.slice(0,3)}function x(e){var t=g(e);return t||(t=v(e))||(t=y(e))?t[3]:void 0}function _(e,t){t=void 0!==t&&3===e.length?t:e[3];return"#"+P(e[0])+P(e[1])+P(e[2])+(t>=0&&t<1?P(Math.round(255*t)):"")}function D(e,t){return t<1||e[3]&&e[3]<1?k(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function k(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function S(e,t){if(t<1||e[3]&&e[3]<1)return M(e,t);var a=Math.round(e[0]/255*100),i=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return"rgb("+a+"%, "+i+"%, "+n+"%)"}function M(e,t){var a=Math.round(e[0]/255*100),i=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return"rgba("+a+"%, "+i+"%, "+n+"%, "+(t||e[3]||1)+")"}function T(e,t){return t<1||e[3]&&e[3]<1?R(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function R(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function A(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function $(e){return N[e.slice(0,3)]}function B(e,t,a){return Math.min(Math.max(t,e),a)}function P(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var N={};for(var I in f)N[f[I]]=I;var O=function(e){return e instanceof O?e:this instanceof O?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"===typeof e?(t=b.getRgba(e),t?this.setValues("rgb",t):(t=b.getHsla(e))?this.setValues("hsl",t):(t=b.getHwb(e))&&this.setValues("hwb",t)):"object"===typeof e&&(t=e,void 0!==t.r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new O(e);var t};O.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e%=360,e=e<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return b.hexString(this.values.rgb)},rgbString:function(){return b.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return b.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return b.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return b.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return b.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return b.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return b.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],a=0;a<e.length;a++){var i=e[a]/255;t[a]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),a=e.luminosity();return t>a?(t+.05)/(a+.05):(a+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb,t=(299*e[0]+587*e[1]+114*e[2])/1e3;return t<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,a=(t[0]+e)%360;return t[0]=a<0?360+a:a,this.setValues("hsl",t),this},mix:function(e,t){var a=this,i=e,n=void 0===t?.5:t,r=2*n-1,s=a.alpha()-i.alpha(),o=((r*s===-1?r:(r+s)/(1+r*s))+1)/2,l=1-o;return this.rgb(o*a.red()+l*i.red(),o*a.green()+l*i.green(),o*a.blue()+l*i.blue()).alpha(a.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var e,t,a=new O,i=this.values,n=a.values;for(var r in i)i.hasOwnProperty(r)&&(e=i[r],t={}.toString.call(e),"[object Array]"===t?n[r]=e.slice(0):"[object Number]"===t?n[r]=e:console.error("unexpected color value:",e));return a}},O.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},O.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},O.prototype.getValues=function(e){for(var t=this.values,a={},i=0;i<e.length;i++)a[e.charAt(i)]=t[e][i];return 1!==t.alpha&&(a.a=t.alpha),a},O.prototype.setValues=function(e,t){var a,i,n=this.values,r=this.spaces,s=this.maxes,o=1;if(this.valid=!0,"alpha"===e)o=t;else if(t.length)n[e]=t.slice(0,e.length),o=t[e.length];else if(void 0!==t[e.charAt(0)]){for(a=0;a<e.length;a++)n[e][a]=t[e.charAt(a)];o=t.a}else if(void 0!==t[r[e][0]]){var l=r[e];for(a=0;a<e.length;a++)n[e][a]=t[l[a]];o=t.alpha}if(n.alpha=Math.max(0,Math.min(1,void 0===o?n.alpha:o)),"alpha"===e)return!1;for(a=0;a<e.length;a++)i=Math.max(0,Math.min(s[e][a],n[e][a])),n[e][a]=Math.round(i);for(var c in r)c!==e&&(n[c]=h[e][c](n[e]));return!0},O.prototype.setSpace=function(e,t){var a=t[0];return void 0===a?this.getValues(e):("number"===typeof a&&(a=Array.prototype.slice.call(t)),this.setValues(e,a),this)},O.prototype.setChannel=function(e,t,a){var i=this.values[e];return void 0===a?i[t]:(a===i[t]||(i[t]=a,this.setValues(e,i)),this)},"undefined"!==typeof window&&(window.Color=O);var Y=O,E={noop:function(){},uid:function(){var e=0;return function(){return e++}}(),isNullOrUndef:function(e){return null===e||"undefined"===typeof e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"===typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return"undefined"===typeof e?t:e},valueAtIndexOrDefault:function(e,t,a){return E.valueOrDefault(E.isArray(e)?e[t]:e,a)},callback:function(e,t,a){if(e&&"function"===typeof e.call)return e.apply(a,t)},each:function(e,t,a,i){var n,r,s;if(E.isArray(e))if(r=e.length,i)for(n=r-1;n>=0;n--)t.call(a,e[n],n);else for(n=0;n<r;n++)t.call(a,e[n],n);else if(E.isObject(e))for(s=Object.keys(e),r=s.length,n=0;n<r;n++)t.call(a,e[s[n]],s[n])},arrayEquals:function(e,t){var a,i,n,r;if(!e||!t||e.length!==t.length)return!1;for(a=0,i=e.length;a<i;++a)if(n=e[a],r=t[a],n instanceof Array&&r instanceof Array){if(!E.arrayEquals(n,r))return!1}else if(n!==r)return!1;return!0},clone:function(e){if(E.isArray(e))return e.map(E.clone);if(E.isObject(e)){for(var t={},a=Object.keys(e),i=a.length,n=0;n<i;++n)t[a[n]]=E.clone(e[a[n]]);return t}return e},_merger:function(e,t,a,i){var n=t[e],r=a[e];E.isObject(n)&&E.isObject(r)?E.merge(n,r,i):t[e]=E.clone(r)},_mergerIf:function(e,t,a){var i=t[e],n=a[e];E.isObject(i)&&E.isObject(n)?E.mergeIf(i,n):t.hasOwnProperty(e)||(t[e]=E.clone(n))},merge:function(e,t,a){var i,n,r,s,o,l=E.isArray(t)?t:[t],c=l.length;if(!E.isObject(e))return e;for(a=a||{},i=a.merger||E._merger,n=0;n<c;++n)if(t=l[n],E.isObject(t))for(r=Object.keys(t),o=0,s=r.length;o<s;++o)i(r[o],e,t,a);return e},mergeIf:function(e,t){return E.merge(e,t,{merger:E._mergerIf})},extend:Object.assign||function(e){return E.merge(e,[].slice.call(arguments,1),{merger:function(e,t,a){t[e]=a[e]}})},inherits:function(e){var t=this,a=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},i=function(){this.constructor=a};return i.prototype=t.prototype,a.prototype=new i,a.extend=E.inherits,e&&E.extend(a.prototype,e),a.__super__=t.prototype,a},_deprecated:function(e,t,a,i){void 0!==t&&console.warn(e+': "'+a+'" is deprecated. Please use "'+i+'" instead')}},F=E;E.callCallback=E.callback,E.indexOf=function(e,t,a){return Array.prototype.indexOf.call(e,t,a)},E.getValueOrDefault=E.valueOrDefault,E.getValueAtIndexOrDefault=E.valueAtIndexOrDefault;var q={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,a=0,i=1;return 0===e?0:1===e?1:(a||(a=.3),i<1?(i=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a))},easeOutElastic:function(e){var t=1.70158,a=0,i=1;return 0===e?0:1===e?1:(a||(a=.3),i<1?(i=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/a)+1)},easeInOutElastic:function(e){var t=1.70158,a=0,i=1;return 0===e?0:2===(e/=.5)?1:(a||(a=.45),i<1?(i=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-q.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*q.easeInBounce(2*e):.5*q.easeOutBounce(2*e-1)+.5}},L={effects:q};F.easingEffects=q;var U=Math.PI,V=U/180,z=2*U,j=U/2,W=U/4,H=2*U/3,K={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,a,i,n,r){if(r){var s=Math.min(r,n/2,i/2),o=t+s,l=a+s,c=t+i-s,d=a+n-s;e.moveTo(t,l),o<c&&l<d?(e.arc(o,l,s,-U,-j),e.arc(c,l,s,-j,0),e.arc(c,d,s,0,j),e.arc(o,d,s,j,U)):o<c?(e.moveTo(o,a),e.arc(c,l,s,-j,j),e.arc(o,l,s,j,U+j)):l<d?(e.arc(o,l,s,-U,0),e.arc(o,d,s,0,U)):e.arc(o,l,s,-U,U),e.closePath(),e.moveTo(t,a)}else e.rect(t,a,i,n)},drawPoint:function(e,t,a,i,n,r){var s,o,l,c,d,u=(r||0)*V;if(t&&"object"===typeof t&&(s=t.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(i,n),e.rotate(u),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(a)||a<=0)){switch(e.beginPath(),t){default:e.arc(i,n,a,0,z),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(u)*a,n-Math.cos(u)*a),u+=H,e.lineTo(i+Math.sin(u)*a,n-Math.cos(u)*a),u+=H,e.lineTo(i+Math.sin(u)*a,n-Math.cos(u)*a),e.closePath();break;case"rectRounded":d=.516*a,c=a-d,o=Math.cos(u+W)*c,l=Math.sin(u+W)*c,e.arc(i-o,n-l,d,u-U,u-j),e.arc(i+l,n-o,d,u-j,u),e.arc(i+o,n+l,d,u,u+j),e.arc(i-l,n+o,d,u+j,u+U),e.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*a,e.rect(i-c,n-c,2*c,2*c);break}u+=W;case"rectRot":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(i-o,n-l),e.lineTo(i+l,n-o),e.lineTo(i+o,n+l),e.lineTo(i-l,n+o),e.closePath();break;case"crossRot":u+=W;case"cross":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(i-o,n-l),e.lineTo(i+o,n+l),e.moveTo(i+l,n-o),e.lineTo(i-l,n+o);break;case"star":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(i-o,n-l),e.lineTo(i+o,n+l),e.moveTo(i+l,n-o),e.lineTo(i-l,n+o),u+=W,o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(i-o,n-l),e.lineTo(i+o,n+l),e.moveTo(i+l,n-o),e.lineTo(i-l,n+o);break;case"line":o=Math.cos(u)*a,l=Math.sin(u)*a,e.moveTo(i-o,n-l),e.lineTo(i+o,n+l);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(u)*a,n+Math.sin(u)*a);break}e.fill(),e.stroke()}},_isPointInArea:function(e,t){var a=1e-6;return e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,a,i){var n=a.steppedLine;if(n){if("middle"===n){var r=(t.x+a.x)/2;e.lineTo(r,i?a.y:t.y),e.lineTo(r,i?t.y:a.y)}else"after"===n&&!i||"after"!==n&&i?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}else a.tension?e.bezierCurveTo(i?t.controlPointPreviousX:t.controlPointNextX,i?t.controlPointPreviousY:t.controlPointNextY,i?a.controlPointNextX:a.controlPointPreviousX,i?a.controlPointNextY:a.controlPointPreviousY,a.x,a.y):e.lineTo(a.x,a.y)}},G=K;F.clear=K.clear,F.drawRoundedRectangle=function(e){e.beginPath(),K.roundedRect.apply(K,arguments)};var Z={_set:function(e,t){return F.merge(this[e]||(this[e]={}),t)}};Z._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var X=Z,J=F.valueOrDefault;function Q(e){return!e||F.isNullOrUndef(e.size)||F.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}var ee={toLineHeight:function(e,t){var a=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!a||"normal"===a[1])return 1.2*t;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e},toPadding:function(e){var t,a,i,n;return F.isObject(e)?(t=+e.top||0,a=+e.right||0,i=+e.bottom||0,n=+e.left||0):t=a=i=n=+e||0,{top:t,right:a,bottom:i,left:n,height:t+i,width:n+a}},_parseFont:function(e){var t=X.global,a=J(e.fontSize,t.defaultFontSize),i={family:J(e.fontFamily,t.defaultFontFamily),lineHeight:F.options.toLineHeight(J(e.lineHeight,t.defaultLineHeight),a),size:a,style:J(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return i.string=Q(i),i},resolve:function(e,t,a,i){var n,r,s,o=!0;for(n=0,r=e.length;n<r;++n)if(s=e[n],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),o=!1),void 0!==a&&F.isArray(s)&&(s=s[a],o=!1),void 0!==s))return i&&!o&&(i.cacheable=!1),s}},te={_factorize:function(e){var t,a=[],i=Math.sqrt(e);for(t=1;t<i;t++)e%t===0&&(a.push(t),a.push(e/t));return i===(0|i)&&a.push(i),a.sort((function(e,t){return e-t})).pop(),a},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,a=Math.round(t),i=e===Math.pow(10,a);return i?a:t}},ae=te;F.log10=te.log10;var ie=function(e,t){return{x:function(a){return e+e+t-a},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}},ne=function(){return{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},re=function(e,t,a){return e?ie(t,a):ne()},se=function(e,t){var a,i;"ltr"!==t&&"rtl"!==t||(a=e.canvas.style,i=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=i)},oe=function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))},le={getRtlAdapter:re,overrideTextDirection:se,restoreTextDirection:oe},ce=F,de=L,ue=G,me=ee,pe=ae,he=le;function fe(e,t,a,i){var n,r,s,o,l,c,d,u,m,p=Object.keys(a);for(n=0,r=p.length;n<r;++n)if(s=p[n],c=a[s],t.hasOwnProperty(s)||(t[s]=c),o=t[s],o!==c&&"_"!==s[0]){if(e.hasOwnProperty(s)||(e[s]=o),l=e[s],d=typeof c,d===typeof l)if("string"===d){if(u=Y(l),u.valid&&(m=Y(c),m.valid)){t[s]=m.mix(u,i).rgbString();continue}}else if(ce.isFinite(l)&&ce.isFinite(c)){t[s]=l+(c-l)*i;continue}t[s]=c}}ce.easing=de,ce.canvas=ue,ce.options=me,ce.math=pe,ce.rtl=he;var be=function(e){ce.extend(this,e),this.initialize.apply(this,arguments)};ce.extend(be.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ce.extend({},e._model)),e._start={},e},transition:function(e){var t=this,a=t._model,i=t._start,n=t._view;return a&&1!==e?(n||(n=t._view={}),i||(i=t._start={}),fe(i,n,a,e),t):(t._view=ce.extend({},a),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ce.isNumber(this._model.x)&&ce.isNumber(this._model.y)}}),be.extend=ce.inherits;var ge=be,ve=ge.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),ye=ve;Object.defineProperty(ve.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ve.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),X._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ce.noop,onComplete:ce.noop}});var we={animations:[],request:null,addAnimation:function(e,t,a,i){var n,r,s=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=a,i||(e.animating=!0),n=0,r=s.length;n<r;++n)if(s[n].chart===e)return void(s[n]=t);s.push(t),1===s.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ce.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ce.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){var e=this;e.advance(),e.animations.length>0&&e.requestAnimationFrame()},advance:function(){var e,t,a,i,n=this.animations,r=0;while(r<n.length)e=n[r],t=e.chart,a=e.numSteps,i=Math.floor((Date.now()-e.startTime)/e.duration*a)+1,e.currentStep=Math.min(i,a),ce.callback(e.render,[t,e],t),ce.callback(e.onAnimationProgress,[e],t),e.currentStep>=a?(ce.callback(e.onAnimationComplete,[e],t),t.animating=!1,n.splice(r,1)):++r}},Ce=ce.options.resolve,xe=["push","pop","shift","splice","unshift"];function _e(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),xe.forEach((function(t){var a="onData"+t.charAt(0).toUpperCase()+t.slice(1),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),n=i.apply(this,t);return ce.each(e._chartjs.listeners,(function(e){"function"===typeof e[a]&&e[a].apply(e,t)})),n}})})))}function De(e,t){var a=e._chartjs;if(a){var i=a.listeners,n=i.indexOf(t);-1!==n&&i.splice(n,1),i.length>0||(xe.forEach((function(t){delete e[t]})),delete e._chartjs)}}var ke=function(e,t){this.initialize(e,t)};ce.extend(ke.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var a=this;a.chart=e,a.index=t,a.linkScales(),a.addElements(),a._type=a.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),a=e.chart,i=a.scales,n=e.getDataset(),r=a.options.scales;null!==t.xAxisID&&t.xAxisID in i&&!n.xAxisID||(t.xAxisID=n.xAxisID||r.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in i&&!n.yAxisID||(t.yAxisID=n.yAxisID||r.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&De(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,a=t.dataElementType;return a&&new a({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,a=this,i=a.getMeta(),n=a.getDataset().data||[],r=i.data;for(e=0,t=n.length;e<t;++e)r[e]=r[e]||a.createMetaData(e);i.dataset=i.dataset||a.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),a=t.data||(t.data=[]);e._data!==a&&(e._data&&De(e._data,e),a&&Object.isExtensible(a)&&_e(a,e),e._data=a),e.resyncElements()},_configure:function(){var e=this;e._config=ce.merge({},[e.chart.options.datasets[e._type],e.getDataset()],{merger:function(e,t,a){"_meta"!==e&&"data"!==e&&ce._merger(e,t,a)}})},_update:function(e){var t=this;t._configure(),t._cachedDataOpts=null,t.update(e)},update:ce.noop,transition:function(e){for(var t=this.getMeta(),a=t.data||[],i=a.length,n=0;n<i;++n)a[n].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],a=t.length,i=0;for(e.dataset&&e.dataset.draw();i<a;++i)t[i].draw()},getStyle:function(e){var t,a=this,i=a.getMeta(),n=i.dataset;return a._configure(),n&&void 0===e?t=a._resolveDatasetElementOptions(n||{}):(e=e||0,t=a._resolveDataElementOptions(i.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var a,i,n,r,s=this,o=s.chart,l=s._config,c=e.custom||{},d=o.options.elements[s.datasetElementType.prototype._type]||{},u=s._datasetElementOptions,m={},p={chart:o,dataset:s.getDataset(),datasetIndex:s.index,hover:t};for(a=0,i=u.length;a<i;++a)n=u[a],r=t?"hover"+n.charAt(0).toUpperCase()+n.slice(1):n,m[n]=Ce([c[r],l[r],d[r]],p);return m},_resolveDataElementOptions:function(e,t){var a=this,i=e&&e.custom,n=a._cachedDataOpts;if(n&&!i)return n;var r,s,o,l,c=a.chart,d=a._config,u=c.options.elements[a.dataElementType.prototype._type]||{},m=a._dataElementOptions,p={},h={chart:c,dataIndex:t,dataset:a.getDataset(),datasetIndex:a.index},f={cacheable:!i};if(i=i||{},ce.isArray(m))for(s=0,o=m.length;s<o;++s)l=m[s],p[l]=Ce([i[l],d[l],u[l]],h,t,f);else for(r=Object.keys(m),s=0,o=r.length;s<o;++s)l=r[s],p[l]=Ce([i[l],d[m[l]],d[l],u[l]],h,t,f);return f.cacheable&&(a._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(e){ce.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index,i=e.custom||{},n=e._model,r=ce.getHoverColor;e.$previousStyle={backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:n.borderWidth},n.backgroundColor=Ce([i.hoverBackgroundColor,t.hoverBackgroundColor,r(n.backgroundColor)],void 0,a),n.borderColor=Ce([i.hoverBorderColor,t.hoverBorderColor,r(n.borderColor)],void 0,a),n.borderWidth=Ce([i.hoverBorderWidth,t.hoverBorderWidth,n.borderWidth],void 0,a)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,a,i,n,r,s=this.getMeta().dataset,o={};if(s){for(r=s._model,n=this._resolveDatasetElementOptions(s,!0),i=Object.keys(n),e=0,t=i.length;e<t;++e)a=i[e],o[a]=r[a],r[a]=n[a];s.$previousStyle=o}},resyncElements:function(){var e=this,t=e.getMeta(),a=e.getDataset().data,i=t.data.length,n=a.length;n<i?t.data.splice(n,i-n):n>i&&e.insertElements(i,n-i)},insertElements:function(e,t){for(var a=0;a<t;++a)this.addElementAndReset(e+a)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),ke.extend=ce.inherits;var Se=ke,Me=2*Math.PI;function Te(e,t){var a=t.startAngle,i=t.endAngle,n=t.pixelMargin,r=n/t.outerRadius,s=t.x,o=t.y;e.beginPath(),e.arc(s,o,t.outerRadius,a-r,i+r),t.innerRadius>n?(r=n/t.innerRadius,e.arc(s,o,t.innerRadius-n,i+r,a-r,!0)):e.arc(s,o,n,i+Math.PI/2,a-Math.PI/2),e.closePath(),e.clip()}function Re(e,t,a,i){var n,r=a.endAngle;for(i&&(a.endAngle=a.startAngle+Me,Te(e,a),a.endAngle=r,a.endAngle===a.startAngle&&a.fullCircles&&(a.endAngle+=Me,a.fullCircles--)),e.beginPath(),e.arc(a.x,a.y,a.innerRadius,a.startAngle+Me,a.startAngle,!0),n=0;n<a.fullCircles;++n)e.stroke();for(e.beginPath(),e.arc(a.x,a.y,t.outerRadius,a.startAngle,a.startAngle+Me),n=0;n<a.fullCircles;++n)e.stroke()}function Ae(e,t,a){var i="inner"===t.borderAlign;i?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),a.fullCircles&&Re(e,t,a,i),i&&Te(e,a),e.beginPath(),e.arc(a.x,a.y,t.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),e.stroke()}X._set("global",{elements:{arc:{backgroundColor:X.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var $e=ge.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var a=this._view;if(a){var i=ce.getAngleFromPoint(a,{x:e,y:t}),n=i.angle,r=i.distance,s=a.startAngle,o=a.endAngle;while(o<s)o+=Me;while(n>o)n-=Me;while(n<s)n+=Me;var l=n>=s&&n<=o,c=r>=a.innerRadius&&r<=a.outerRadius;return l&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,a=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,a=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},draw:function(){var e,t=this._chart.ctx,a=this._view,i="inner"===a.borderAlign?.33:0,n={x:a.x,y:a.y,innerRadius:a.innerRadius,outerRadius:Math.max(a.outerRadius-i,0),pixelMargin:i,startAngle:a.startAngle,endAngle:a.endAngle,fullCircles:Math.floor(a.circumference/Me)};if(t.save(),t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,n.fullCircles){for(n.endAngle=n.startAngle+Me,t.beginPath(),t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),e=0;e<n.fullCircles;++e)t.fill();n.endAngle=n.startAngle+a.circumference%Me}t.beginPath(),t.arc(n.x,n.y,n.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),t.fill(),a.borderWidth&&Ae(t,a,n),t.restore()}}),Be=ce.valueOrDefault,Pe=X.global.defaultColor;X._set("global",{elements:{line:{tension:.4,backgroundColor:Pe,borderWidth:3,borderColor:Pe,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Ne=ge.extend({_type:"line",draw:function(){var e,t,a,i=this,n=i._view,r=i._chart.ctx,s=n.spanGaps,o=i._children.slice(),l=X.global,c=l.elements.line,d=-1,u=i._loop;if(o.length){if(i._loop){for(e=0;e<o.length;++e)if(t=ce.previousItem(o,e),!o[e]._view.skip&&t._view.skip){o=o.slice(e).concat(o.slice(0,e)),u=s;break}u&&o.push(o[0])}for(r.save(),r.lineCap=n.borderCapStyle||c.borderCapStyle,r.setLineDash&&r.setLineDash(n.borderDash||c.borderDash),r.lineDashOffset=Be(n.borderDashOffset,c.borderDashOffset),r.lineJoin=n.borderJoinStyle||c.borderJoinStyle,r.lineWidth=Be(n.borderWidth,c.borderWidth),r.strokeStyle=n.borderColor||l.defaultColor,r.beginPath(),a=o[0]._view,a.skip||(r.moveTo(a.x,a.y),d=0),e=1;e<o.length;++e)a=o[e]._view,t=-1===d?ce.previousItem(o,e):o[d],a.skip||(d!==e-1&&!s||-1===d?r.moveTo(a.x,a.y):ce.canvas.lineTo(r,t._view,a),d=e);u&&r.closePath(),r.stroke(),r.restore()}}}),Ie=ce.valueOrDefault,Oe=X.global.defaultColor;function Ye(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}function Ee(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius}X._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Oe,borderColor:Oe,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Fe=ge.extend({_type:"point",inRange:function(e,t){var a=this._view;return!!a&&Math.pow(e-a.x,2)+Math.pow(t-a.y,2)<Math.pow(a.hitRadius+a.radius,2)},inLabelRange:Ye,inXRange:Ye,inYRange:Ee,getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,a=this._chart.ctx,i=t.pointStyle,n=t.rotation,r=t.radius,s=t.x,o=t.y,l=X.global,c=l.defaultColor;t.skip||(void 0===e||ce.canvas._isPointInArea(t,e))&&(a.strokeStyle=t.borderColor||c,a.lineWidth=Ie(t.borderWidth,l.elements.point.borderWidth),a.fillStyle=t.backgroundColor||c,ce.canvas.drawPoint(a,i,r,s,o,n))}}),qe=X.global.defaultColor;function Le(e){return e&&void 0!==e.width}function Ue(e){var t,a,i,n,r;return Le(e)?(r=e.width/2,t=e.x-r,a=e.x+r,i=Math.min(e.y,e.base),n=Math.max(e.y,e.base)):(r=e.height/2,t=Math.min(e.x,e.base),a=Math.max(e.x,e.base),i=e.y-r,n=e.y+r),{left:t,top:i,right:a,bottom:n}}function Ve(e,t,a){return e===t?a:e===a?t:e}function ze(e){var t=e.borderSkipped,a={};return t?(e.horizontal?e.base>e.x&&(t=Ve(t,"left","right")):e.base<e.y&&(t=Ve(t,"bottom","top")),a[t]=!0,a):a}function je(e,t,a){var i,n,r,s,o=e.borderWidth,l=ze(e);return ce.isObject(o)?(i=+o.top||0,n=+o.right||0,r=+o.bottom||0,s=+o.left||0):i=n=r=s=+o||0,{t:l.top||i<0?0:i>a?a:i,r:l.right||n<0?0:n>t?t:n,b:l.bottom||r<0?0:r>a?a:r,l:l.left||s<0?0:s>t?t:s}}function We(e){var t=Ue(e),a=t.right-t.left,i=t.bottom-t.top,n=je(e,a/2,i/2);return{outer:{x:t.left,y:t.top,w:a,h:i},inner:{x:t.left+n.l,y:t.top+n.t,w:a-n.l-n.r,h:i-n.t-n.b}}}function He(e,t,a){var i=null===t,n=null===a,r=!(!e||i&&n)&&Ue(e);return r&&(i||t>=r.left&&t<=r.right)&&(n||a>=r.top&&a<=r.bottom)}X._set("global",{elements:{rectangle:{backgroundColor:qe,borderColor:qe,borderSkipped:"bottom",borderWidth:0}}});var Ke=ge.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,a=We(t),i=a.outer,n=a.inner;e.fillStyle=t.backgroundColor,e.fillRect(i.x,i.y,i.w,i.h),i.w===n.w&&i.h===n.h||(e.save(),e.beginPath(),e.rect(i.x,i.y,i.w,i.h),e.clip(),e.fillStyle=t.borderColor,e.rect(n.x,n.y,n.w,n.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return He(this._view,e,t)},inLabelRange:function(e,t){var a=this._view;return Le(a)?He(a,e,null):He(a,null,t)},inXRange:function(e){return He(this._view,e,null)},inYRange:function(e){return He(this._view,null,e)},getCenterPoint:function(){var e,t,a=this._view;return Le(a)?(e=a.x,t=(a.y+a.base)/2):(e=(a.x+a.base)/2,t=a.y),{x:e,y:t}},getArea:function(){var e=this._view;return Le(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Ge={},Ze=$e,Xe=Ne,Je=Fe,Qe=Ke;Ge.Arc=Ze,Ge.Line=Xe,Ge.Point=Je,Ge.Rectangle=Qe;var et=ce._deprecated,tt=ce.valueOrDefault;function at(e,t){var a,i,n,r,s=e._length;for(n=1,r=t.length;n<r;++n)s=Math.min(s,Math.abs(t[n]-t[n-1]));for(n=0,r=e.getTicks().length;n<r;++n)i=e.getPixelForTick(n),s=n>0?Math.min(s,Math.abs(i-a)):s,a=i;return s}function it(e,t,a){var i,n,r=a.barThickness,s=t.stackCount,o=t.pixels[e],l=ce.isNullOrUndef(r)?at(t.scale,t.pixels):-1;return ce.isNullOrUndef(r)?(i=l*a.categoryPercentage,n=a.barPercentage):(i=r*s,n=1),{chunk:i/s,ratio:n,start:o-i/2}}function nt(e,t,a){var i,n,r=t.pixels,s=r[e],o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null,c=a.categoryPercentage;return null===o&&(o=s-(null===l?t.end-t.start:l-s)),null===l&&(l=s+s-o),i=s-(s-Math.min(o,l))/2*c,n=Math.abs(l-o)/2*c,{chunk:n/t.stackCount,ratio:a.barPercentage,start:i}}X._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),X._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var rt=Se.extend({dataElementType:Ge.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,a=this;Se.prototype.initialize.apply(a,arguments),e=a.getMeta(),e.stack=a.getDataset().stack,e.bar=!0,t=a._getIndexScale().options,et("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),et("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),et("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),et("bar chart",a._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),et("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,a,i=this,n=i.getMeta().data;for(i._ruler=i.getRuler(),t=0,a=n.length;t<a;++t)i.updateElement(n[t],t,e)},updateElement:function(e,t,a){var i=this,n=i.getMeta(),r=i.getDataset(),s=i._resolveDataElementOptions(e,t);e._xScale=i.getScaleForId(n.xAxisID),e._yScale=i.getScaleForId(n.yAxisID),e._datasetIndex=i.index,e._index=t,e._model={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderSkipped:s.borderSkipped,borderWidth:s.borderWidth,datasetLabel:r.label,label:i.chart.data.labels[t]},ce.isArray(r.data[t])&&(e._model.borderSkipped=null),i._updateElementGeometry(e,t,a,s),e.pivot()},_updateElementGeometry:function(e,t,a,i){var n=this,r=e._model,s=n._getValueScale(),o=s.getBasePixel(),l=s.isHorizontal(),c=n._ruler||n.getRuler(),d=n.calculateBarValuePixels(n.index,t,i),u=n.calculateBarIndexPixels(n.index,t,c,i);r.horizontal=l,r.base=a?o:d.base,r.x=l?a?o:d.head:u.center,r.y=l?u.center:a?o:d.head,r.height=l?u.size:void 0,r.width=l?void 0:u.size},_getStacks:function(e){var t,a,i=this,n=i._getIndexScale(),r=n._getMatchingVisibleMetas(i._type),s=n.options.stacked,o=r.length,l=[];for(t=0;t<o;++t)if(a=r[t],(!1===s||-1===l.indexOf(a.stack)||void 0===s&&void 0===a.stack)&&l.push(a.stack),a.index===e)break;return l},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var a=this._getStacks(e),i=void 0!==t?a.indexOf(t):-1;return-1===i?a.length-1:i},getRuler:function(){var e,t,a=this,i=a._getIndexScale(),n=[];for(e=0,t=a.getMeta().data.length;e<t;++e)n.push(i.getPixelForValue(null,e,a.index));return{pixels:n,start:i._startPixel,end:i._endPixel,stackCount:a.getStackCount(),scale:i}},calculateBarValuePixels:function(e,t,a){var i,n,r,s,o,l,c,d=this,u=d.chart,m=d._getValueScale(),p=m.isHorizontal(),h=u.data.datasets,f=m._getMatchingVisibleMetas(d._type),b=m._parseValue(h[e].data[t]),g=a.minBarLength,v=m.options.stacked,y=d.getMeta().stack,w=void 0===b.start?0:b.max>=0&&b.min>=0?b.min:b.max,C=void 0===b.start?b.end:b.max>=0&&b.min>=0?b.max-b.min:b.min-b.max,x=f.length;if(v||void 0===v&&void 0!==y)for(i=0;i<x;++i){if(n=f[i],n.index===e)break;n.stack===y&&(c=m._parseValue(h[n.index].data[t]),r=void 0===c.start?c.end:c.min>=0&&c.max>=0?c.max:c.min,(b.min<0&&r<0||b.max>=0&&r>0)&&(w+=r))}return s=m.getPixelForValue(w),o=m.getPixelForValue(w+C),l=o-s,void 0!==g&&Math.abs(l)<g&&(l=g,o=C>=0&&!p||C<0&&p?s-g:s+g),{size:l,base:s,head:o,center:o+l/2}},calculateBarIndexPixels:function(e,t,a,i){var n=this,r="flex"===i.barThickness?nt(t,a,i):it(t,a,i),s=n.getStackIndex(e,n.getMeta().stack),o=r.start+r.chunk*s+r.chunk/2,l=Math.min(tt(i.maxBarThickness,1/0),r.chunk*r.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}},draw:function(){var e=this,t=e.chart,a=e._getValueScale(),i=e.getMeta().data,n=e.getDataset(),r=i.length,s=0;for(ce.canvas.clipArea(t.ctx,t.chartArea);s<r;++s){var o=a._parseValue(n.data[s]);isNaN(o.min)||isNaN(o.max)||i[s].draw()}ce.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var e=this,t=ce.extend({},Se.prototype._resolveDataElementOptions.apply(e,arguments)),a=e._getIndexScale().options,i=e._getValueScale().options;return t.barPercentage=tt(a.barPercentage,t.barPercentage),t.barThickness=tt(a.barThickness,t.barThickness),t.categoryPercentage=tt(a.categoryPercentage,t.categoryPercentage),t.maxBarThickness=tt(a.maxBarThickness,t.maxBarThickness),t.minBarLength=tt(i.minBarLength,t.minBarLength),t}}),st=ce.valueOrDefault,ot=ce.options.resolve;X._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",i=t.datasets[e.datasetIndex].data[e.index];return a+": ("+e.xLabel+", "+e.yLabel+", "+i.r+")"}}}});var lt=Se.extend({dataElementType:Ge.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,a=t.getMeta(),i=a.data;ce.each(i,(function(a,i){t.updateElement(a,i,e)}))},updateElement:function(e,t,a){var i=this,n=i.getMeta(),r=e.custom||{},s=i.getScaleForId(n.xAxisID),o=i.getScaleForId(n.yAxisID),l=i._resolveDataElementOptions(e,t),c=i.getDataset().data[t],d=i.index,u=a?s.getPixelForDecimal(.5):s.getPixelForValue("object"===typeof c?c:NaN,t,d),m=a?o.getBasePixel():o.getPixelForValue(c,t,d);e._xScale=s,e._yScale=o,e._options=l,e._datasetIndex=d,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:a?0:l.radius,skip:r.skip||isNaN(u)||isNaN(m),x:u,y:m},e.pivot()},setHoverStyle:function(e){var t=e._model,a=e._options,i=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=st(a.hoverBackgroundColor,i(a.backgroundColor)),t.borderColor=st(a.hoverBorderColor,i(a.borderColor)),t.borderWidth=st(a.hoverBorderWidth,a.borderWidth),t.radius=a.radius+a.hoverRadius},_resolveDataElementOptions:function(e,t){var a=this,i=a.chart,n=a.getDataset(),r=e.custom||{},s=n.data[t]||{},o=Se.prototype._resolveDataElementOptions.apply(a,arguments),l={chart:i,dataIndex:t,dataset:n,datasetIndex:a.index};return a._cachedDataOpts===o&&(o=ce.extend({},o)),o.radius=ot([r.radius,s.r,a._config.radius,i.options.elements.point.radius],l,t),o}}),ct=ce.valueOrDefault,dt=Math.PI,ut=2*dt,mt=dt/2;X._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,a,i,n,r=document.createElement("ul"),s=e.data,o=s.datasets,l=s.labels;if(r.setAttribute("class",e.id+"-legend"),o.length)for(t=0,a=o[0].data.length;t<a;++t)i=r.appendChild(document.createElement("li")),n=i.appendChild(document.createElement("span")),n.style.backgroundColor=o[0].backgroundColor[t],l[t]&&i.appendChild(document.createTextNode(l[t]));return r.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,i){var n=e.getDatasetMeta(0),r=n.controller.getStyle(i);return{text:a,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(t.datasets[0].data[i])||n.data[i].hidden,index:i}})):[]}},onClick:function(e,t){var a,i,n,r=t.index,s=this.chart;for(a=0,i=(s.data.datasets||[]).length;a<i;++a)n=s.getDatasetMeta(a),n.data[r]&&(n.data[r].hidden=!n.data[r].hidden);s.update()}},cutoutPercentage:50,rotation:-mt,circumference:ut,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.labels[e.index],i=": "+t.datasets[e.datasetIndex].data[e.index];return ce.isArray(a)?(a=a.slice(),a[0]+=i):a+=i,a}}}});var pt=Se.extend({dataElementType:Ge.Arc,linkScales:ce.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&++t;return t},update:function(e){var t,a,i,n,r=this,s=r.chart,o=s.chartArea,l=s.options,c=1,d=1,u=0,m=0,p=r.getMeta(),h=p.data,f=l.cutoutPercentage/100||0,b=l.circumference,g=r._getRingWeight(r.index);if(b<ut){var v=l.rotation%ut;v+=v>=dt?-ut:v<-dt?ut:0;var y=v+b,w=Math.cos(v),C=Math.sin(v),x=Math.cos(y),_=Math.sin(y),D=v<=0&&y>=0||y>=ut,k=v<=mt&&y>=mt||y>=ut+mt,S=v===-dt||y>=dt,M=v<=-mt&&y>=-mt||y>=dt+mt,T=S?-1:Math.min(w,w*f,x,x*f),R=M?-1:Math.min(C,C*f,_,_*f),A=D?1:Math.max(w,w*f,x,x*f),$=k?1:Math.max(C,C*f,_,_*f);c=(A-T)/2,d=($-R)/2,u=-(A+T)/2,m=-($+R)/2}for(i=0,n=h.length;i<n;++i)h[i]._options=r._resolveDataElementOptions(h[i],i);for(s.borderWidth=r.getMaxBorderWidth(),t=(o.right-o.left-s.borderWidth)/c,a=(o.bottom-o.top-s.borderWidth)/d,s.outerRadius=Math.max(Math.min(t,a)/2,0),s.innerRadius=Math.max(s.outerRadius*f,0),s.radiusLength=(s.outerRadius-s.innerRadius)/(r._getVisibleDatasetWeightTotal()||1),s.offsetX=u*s.outerRadius,s.offsetY=m*s.outerRadius,p.total=r.calculateTotal(),r.outerRadius=s.outerRadius-s.radiusLength*r._getRingWeightOffset(r.index),r.innerRadius=Math.max(r.outerRadius-s.radiusLength*g,0),i=0,n=h.length;i<n;++i)r.updateElement(h[i],i,e)},updateElement:function(e,t,a){var i=this,n=i.chart,r=n.chartArea,s=n.options,o=s.animation,l=(r.left+r.right)/2,c=(r.top+r.bottom)/2,d=s.rotation,u=s.rotation,m=i.getDataset(),p=a&&o.animateRotate||e.hidden?0:i.calculateCircumference(m.data[t])*(s.circumference/ut),h=a&&o.animateScale?0:i.innerRadius,f=a&&o.animateScale?0:i.outerRadius,b=e._options||{};ce.extend(e,{_datasetIndex:i.index,_index:t,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:l+n.offsetX,y:c+n.offsetY,startAngle:d,endAngle:u,circumference:p,outerRadius:f,innerRadius:h,label:ce.valueAtIndexOrDefault(m.label,t,n.data.labels[t])}});var g=e._model;a&&o.animateRotate||(g.startAngle=0===t?s.rotation:i.getMeta().data[t-1]._model.endAngle,g.endAngle=g.startAngle+g.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),a=this.getMeta(),i=0;return ce.each(a.data,(function(a,n){e=t.data[n],isNaN(e)||a.hidden||(i+=Math.abs(e))})),i},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?ut*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,a,i,n,r,s,o,l,c=this,d=0,u=c.chart;if(!e)for(t=0,a=u.data.datasets.length;t<a;++t)if(u.isDatasetVisible(t)){i=u.getDatasetMeta(t),e=i.data,t!==c.index&&(r=i.controller);break}if(!e)return 0;for(t=0,a=e.length;t<a;++t)n=e[t],r?(r._configure(),s=r._resolveDataElementOptions(n,t)):s=n._options,"inner"!==s.borderAlign&&(o=s.borderWidth,l=s.hoverBorderWidth,d=o>d?o:d,d=l>d?l:d);return d},setHoverStyle:function(e){var t=e._model,a=e._options,i=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=ct(a.hoverBackgroundColor,i(a.backgroundColor)),t.borderColor=ct(a.hoverBorderColor,i(a.borderColor)),t.borderWidth=ct(a.hoverBorderWidth,a.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(t+=this._getRingWeight(a));return t},_getRingWeight:function(e){return Math.max(ct(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});X._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),X._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ht=rt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),ft=ce.valueOrDefault,bt=ce.options.resolve,gt=ce.canvas._isPointInArea;function vt(e,t){var a=e&&e.options.ticks||{},i=a.reverse,n=void 0===a.min?t:0,r=void 0===a.max?t:0;return{start:i?r:n,end:i?n:r}}function yt(e,t,a){var i=a/2,n=vt(e,i),r=vt(t,i);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function wt(e){var t,a,i,n;return ce.isObject(e)?(t=e.top,a=e.right,i=e.bottom,n=e.left):t=a=i=n=e,{top:t,right:a,bottom:i,left:n}}X._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Ct=Se.extend({datasetElementType:Ge.Line,dataElementType:Ge.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,a,i=this,n=i.getMeta(),r=n.dataset,s=n.data||[],o=i.chart.options,l=i._config,c=i._showLine=ft(l.showLine,o.showLines);for(i._xScale=i.getScaleForId(n.xAxisID),i._yScale=i.getScaleForId(n.yAxisID),c&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=i._yScale,r._datasetIndex=i.index,r._children=s,r._model=i._resolveDatasetElementOptions(r),r.pivot()),t=0,a=s.length;t<a;++t)i.updateElement(s[t],t,e);for(c&&0!==r._model.tension&&i.updateBezierControlPoints(),t=0,a=s.length;t<a;++t)s[t].pivot()},updateElement:function(e,t,a){var i,n,r=this,s=r.getMeta(),o=e.custom||{},l=r.getDataset(),c=r.index,d=l.data[t],u=r._xScale,m=r._yScale,p=s.dataset._model,h=r._resolveDataElementOptions(e,t);i=u.getPixelForValue("object"===typeof d?d:NaN,t,c),n=a?m.getBasePixel():r.calculatePointY(d,t,c),e._xScale=u,e._yScale=m,e._options=h,e._datasetIndex=c,e._index=t,e._model={x:i,y:n,skip:o.skip||isNaN(i)||isNaN(n),radius:h.radius,pointStyle:h.pointStyle,rotation:h.rotation,backgroundColor:h.backgroundColor,borderColor:h.borderColor,borderWidth:h.borderWidth,tension:ft(o.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:h.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,a=t._config,i=e.custom||{},n=t.chart.options,r=n.elements.line,s=Se.prototype._resolveDatasetElementOptions.apply(t,arguments);return s.spanGaps=ft(a.spanGaps,n.spanGaps),s.tension=ft(a.lineTension,r.tension),s.steppedLine=bt([i.steppedLine,a.steppedLine,r.stepped]),s.clip=wt(ft(a.clip,yt(t._xScale,t._yScale,s.borderWidth))),s},calculatePointY:function(e,t,a){var i,n,r,s,o,l,c,d=this,u=d.chart,m=d._yScale,p=0,h=0;if(m.options.stacked){for(o=+m.getRightValue(e),l=u._getSortedVisibleDatasetMetas(),c=l.length,i=0;i<c;++i){if(r=l[i],r.index===a)break;n=u.data.datasets[r.index],"line"===r.type&&r.yAxisID===m.id&&(s=+m.getRightValue(n.data[t]),s<0?h+=s||0:p+=s||0)}return o<0?m.getPixelForValue(h+o):m.getPixelForValue(p+o)}return m.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,a,i,n=this,r=n.chart,s=n.getMeta(),o=s.dataset._model,l=r.chartArea,c=s.data||[];function d(e,t,a){return Math.max(Math.min(e,a),t)}if(o.spanGaps&&(c=c.filter((function(e){return!e._model.skip}))),"monotone"===o.cubicInterpolationMode)ce.splineCurveMonotone(c);else for(e=0,t=c.length;e<t;++e)a=c[e]._model,i=ce.splineCurve(ce.previousItem(c,e)._model,a,ce.nextItem(c,e)._model,o.tension),a.controlPointPreviousX=i.previous.x,a.controlPointPreviousY=i.previous.y,a.controlPointNextX=i.next.x,a.controlPointNextY=i.next.y;if(r.options.elements.line.capBezierPoints)for(e=0,t=c.length;e<t;++e)a=c[e]._model,gt(a,l)&&(e>0&&gt(c[e-1]._model,l)&&(a.controlPointPreviousX=d(a.controlPointPreviousX,l.left,l.right),a.controlPointPreviousY=d(a.controlPointPreviousY,l.top,l.bottom)),e<c.length-1&&gt(c[e+1]._model,l)&&(a.controlPointNextX=d(a.controlPointNextX,l.left,l.right),a.controlPointNextY=d(a.controlPointNextY,l.top,l.bottom)))},draw:function(){var e,t=this,a=t.chart,i=t.getMeta(),n=i.data||[],r=a.chartArea,s=a.canvas,o=0,l=n.length;for(t._showLine&&(e=i.dataset._model.clip,ce.canvas.clipArea(a.ctx,{left:!1===e.left?0:r.left-e.left,right:!1===e.right?s.width:r.right+e.right,top:!1===e.top?0:r.top-e.top,bottom:!1===e.bottom?s.height:r.bottom+e.bottom}),i.dataset.draw(),ce.canvas.unclipArea(a.ctx));o<l;++o)n[o].draw(r)},setHoverStyle:function(e){var t=e._model,a=e._options,i=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ft(a.hoverBackgroundColor,i(a.backgroundColor)),t.borderColor=ft(a.hoverBorderColor,i(a.borderColor)),t.borderWidth=ft(a.hoverBorderWidth,a.borderWidth),t.radius=ft(a.hoverRadius,a.radius)}}),xt=ce.options.resolve;X._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,a,i,n,r=document.createElement("ul"),s=e.data,o=s.datasets,l=s.labels;if(r.setAttribute("class",e.id+"-legend"),o.length)for(t=0,a=o[0].data.length;t<a;++t)i=r.appendChild(document.createElement("li")),n=i.appendChild(document.createElement("span")),n.style.backgroundColor=o[0].backgroundColor[t],l[t]&&i.appendChild(document.createTextNode(l[t]));return r.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,i){var n=e.getDatasetMeta(0),r=n.controller.getStyle(i);return{text:a,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(t.datasets[0].data[i])||n.data[i].hidden,index:i}})):[]}},onClick:function(e,t){var a,i,n,r=t.index,s=this.chart;for(a=0,i=(s.data.datasets||[]).length;a<i;++a)n=s.getDatasetMeta(a),n.data[r].hidden=!n.data[r].hidden;s.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var _t=Se.extend({dataElementType:Ge.Arc,linkScales:ce.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,a,i,n=this,r=n.getDataset(),s=n.getMeta(),o=n.chart.options.startAngle||0,l=n._starts=[],c=n._angles=[],d=s.data;for(n._updateRadius(),s.count=n.countVisibleElements(),t=0,a=r.data.length;t<a;t++)l[t]=o,i=n._computeAngle(t),c[t]=i,o+=i;for(t=0,a=d.length;t<a;++t)d[t]._options=n._resolveDataElementOptions(d[t],t),n.updateElement(d[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,a=t.chartArea,i=t.options,n=Math.min(a.right-a.left,a.bottom-a.top);t.outerRadius=Math.max(n/2,0),t.innerRadius=Math.max(i.cutoutPercentage?t.outerRadius/100*i.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,a){var i=this,n=i.chart,r=i.getDataset(),s=n.options,o=s.animation,l=n.scale,c=n.data.labels,d=l.xCenter,u=l.yCenter,m=s.startAngle,p=e.hidden?0:l.getDistanceFromCenterForValue(r.data[t]),h=i._starts[t],f=h+(e.hidden?0:i._angles[t]),b=o.animateScale?0:l.getDistanceFromCenterForValue(r.data[t]),g=e._options||{};ce.extend(e,{_datasetIndex:i.index,_index:t,_scale:l,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:d,y:u,innerRadius:0,outerRadius:a?b:p,startAngle:a&&o.animateRotate?m:h,endAngle:a&&o.animateRotate?m:f,label:ce.valueAtIndexOrDefault(c,t,c[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),a=0;return ce.each(t.data,(function(t,i){isNaN(e.data[i])||t.hidden||a++})),a},setHoverStyle:function(e){var t=e._model,a=e._options,i=ce.getHoverColor,n=ce.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=n(a.hoverBackgroundColor,i(a.backgroundColor)),t.borderColor=n(a.hoverBorderColor,i(a.borderColor)),t.borderWidth=n(a.hoverBorderWidth,a.borderWidth)},_computeAngle:function(e){var t=this,a=this.getMeta().count,i=t.getDataset(),n=t.getMeta();if(isNaN(i.data[e])||n.data[e].hidden)return 0;var r={chart:t.chart,dataIndex:e,dataset:i,datasetIndex:t.index};return xt([t.chart.options.elements.arc.angle,2*Math.PI/a],r,e)}});X._set("pie",ce.clone(X.doughnut)),X._set("pie",{cutoutPercentage:0});var Dt=pt,kt=ce.valueOrDefault;X._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var St=Se.extend({datasetElementType:Ge.Line,dataElementType:Ge.Point,linkScales:ce.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,a,i=this,n=i.getMeta(),r=n.dataset,s=n.data||[],o=i.chart.scale,l=i._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=o,r._datasetIndex=i.index,r._children=s,r._loop=!0,r._model=i._resolveDatasetElementOptions(r),r.pivot(),t=0,a=s.length;t<a;++t)i.updateElement(s[t],t,e);for(i.updateBezierControlPoints(),t=0,a=s.length;t<a;++t)s[t].pivot()},updateElement:function(e,t,a){var i=this,n=e.custom||{},r=i.getDataset(),s=i.chart.scale,o=s.getPointPositionForValue(t,r.data[t]),l=i._resolveDataElementOptions(e,t),c=i.getMeta().dataset._model,d=a?s.xCenter:o.x,u=a?s.yCenter:o.y;e._scale=s,e._options=l,e._datasetIndex=i.index,e._index=t,e._model={x:d,y:u,skip:n.skip||isNaN(d)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:kt(n.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,a=e.chart.options,i=Se.prototype._resolveDatasetElementOptions.apply(e,arguments);return i.spanGaps=kt(t.spanGaps,a.spanGaps),i.tension=kt(t.lineTension,a.elements.line.tension),i},updateBezierControlPoints:function(){var e,t,a,i,n=this,r=n.getMeta(),s=n.chart.chartArea,o=r.data||[];function l(e,t,a){return Math.max(Math.min(e,a),t)}for(r.dataset._model.spanGaps&&(o=o.filter((function(e){return!e._model.skip}))),e=0,t=o.length;e<t;++e)a=o[e]._model,i=ce.splineCurve(ce.previousItem(o,e,!0)._model,a,ce.nextItem(o,e,!0)._model,a.tension),a.controlPointPreviousX=l(i.previous.x,s.left,s.right),a.controlPointPreviousY=l(i.previous.y,s.top,s.bottom),a.controlPointNextX=l(i.next.x,s.left,s.right),a.controlPointNextY=l(i.next.y,s.top,s.bottom)},setHoverStyle:function(e){var t=e._model,a=e._options,i=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=kt(a.hoverBackgroundColor,i(a.backgroundColor)),t.borderColor=kt(a.hoverBorderColor,i(a.borderColor)),t.borderWidth=kt(a.hoverBorderWidth,a.borderWidth),t.radius=kt(a.hoverRadius,a.radius)}});X._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),X._set("global",{datasets:{scatter:{showLine:!1}}});var Mt=Ct,Tt={bar:rt,bubble:lt,doughnut:pt,horizontalBar:ht,line:Ct,polarArea:_t,pie:Dt,radar:St,scatter:Mt};function Rt(e,t){return e.native?{x:e.x,y:e.y}:ce.getRelativePosition(e,t)}function At(e,t){var a,i,n,r,s,o,l=e._getSortedVisibleDatasetMetas();for(i=0,r=l.length;i<r;++i)for(a=l[i].data,n=0,s=a.length;n<s;++n)o=a[n],o._view.skip||t(o)}function $t(e,t){var a=[];return At(e,(function(e){e.inRange(t.x,t.y)&&a.push(e)})),a}function Bt(e,t,a,i){var n=Number.POSITIVE_INFINITY,r=[];return At(e,(function(e){if(!a||e.inRange(t.x,t.y)){var s=e.getCenterPoint(),o=i(t,s);o<n?(r=[e],n=o):o===n&&r.push(e)}})),r}function Pt(e){var t=-1!==e.indexOf("x"),a=-1!==e.indexOf("y");return function(e,i){var n=t?Math.abs(e.x-i.x):0,r=a?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}}function Nt(e,t,a){var i=Rt(t,e);a.axis=a.axis||"x";var n=Pt(a.axis),r=a.intersect?$t(e,i):Bt(e,i,!1,n),s=[];return r.length?(e._getSortedVisibleDatasetMetas().forEach((function(e){var t=e.data[r[0]._index];t&&!t._view.skip&&s.push(t)})),s):[]}var It={modes:{single:function(e,t){var a=Rt(t,e),i=[];return At(e,(function(e){if(e.inRange(a.x,a.y))return i.push(e),i})),i.slice(0,1)},label:Nt,index:Nt,dataset:function(e,t,a){var i=Rt(t,e);a.axis=a.axis||"xy";var n=Pt(a.axis),r=a.intersect?$t(e,i):Bt(e,i,!1,n);return r.length>0&&(r=e.getDatasetMeta(r[0]._datasetIndex).data),r},"x-axis":function(e,t){return Nt(e,t,{intersect:!1})},point:function(e,t){var a=Rt(t,e);return $t(e,a)},nearest:function(e,t,a){var i=Rt(t,e);a.axis=a.axis||"xy";var n=Pt(a.axis);return Bt(e,i,a.intersect,n)},x:function(e,t,a){var i=Rt(t,e),n=[],r=!1;return At(e,(function(e){e.inXRange(i.x)&&n.push(e),e.inRange(i.x,i.y)&&(r=!0)})),a.intersect&&!r&&(n=[]),n},y:function(e,t,a){var i=Rt(t,e),n=[],r=!1;return At(e,(function(e){e.inYRange(i.y)&&n.push(e),e.inRange(i.x,i.y)&&(r=!0)})),a.intersect&&!r&&(n=[]),n}}},Ot=ce.extend;function Yt(e,t){return ce.where(e,(function(e){return e.pos===t}))}function Et(e,t){return e.sort((function(e,a){var i=t?a:e,n=t?e:a;return i.weight===n.weight?i.index-n.index:i.weight-n.weight}))}function Ft(e){var t,a,i,n=[];for(t=0,a=(e||[]).length;t<a;++t)i=e[t],n.push({index:t,box:i,pos:i.position,horizontal:i.isHorizontal(),weight:i.weight});return n}function qt(e,t){var a,i,n;for(a=0,i=e.length;a<i;++a)n=e[a],n.width=n.horizontal?n.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,n.height=n.horizontal&&t.hBoxMaxHeight}function Lt(e){var t=Ft(e),a=Et(Yt(t,"left"),!0),i=Et(Yt(t,"right")),n=Et(Yt(t,"top"),!0),r=Et(Yt(t,"bottom"));return{leftAndTop:a.concat(n),rightAndBottom:i.concat(r),chartArea:Yt(t,"chartArea"),vertical:a.concat(i),horizontal:n.concat(r)}}function Ut(e,t,a,i){return Math.max(e[a],t[a])+Math.max(e[i],t[i])}function Vt(e,t,a){var i,n,r=a.box,s=e.maxPadding;if(a.size&&(e[a.pos]-=a.size),a.size=a.horizontal?r.height:r.width,e[a.pos]+=a.size,r.getPadding){var o=r.getPadding();s.top=Math.max(s.top,o.top),s.left=Math.max(s.left,o.left),s.bottom=Math.max(s.bottom,o.bottom),s.right=Math.max(s.right,o.right)}if(i=t.outerWidth-Ut(s,e,"left","right"),n=t.outerHeight-Ut(s,e,"top","bottom"),i!==e.w||n!==e.h)return e.w=i,e.h=n,a.horizontal?i!==e.w:n!==e.h}function zt(e){var t=e.maxPadding;function a(a){var i=Math.max(t[a]-e[a],0);return e[a]+=i,i}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function jt(e,t){var a=t.maxPadding;function i(e){var i={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){i[e]=Math.max(t[e],a[e])})),i}return i(e?["left","right"]:["top","bottom"])}function Wt(e,t,a){var i,n,r,s,o,l,c=[];for(i=0,n=e.length;i<n;++i)r=e[i],s=r.box,s.update(r.width||t.w,r.height||t.h,jt(r.horizontal,t)),Vt(t,a,r)&&(l=!0,c.length&&(o=!0)),s.fullWidth||c.push(r);return o&&Wt(c,t,a)||l}function Ht(e,t,a){var i,n,r,s,o=a.padding,l=t.x,c=t.y;for(i=0,n=e.length;i<n;++i)r=e[i],s=r.box,r.horizontal?(s.left=s.fullWidth?o.left:t.left,s.right=s.fullWidth?a.outerWidth-o.right:t.left+t.w,s.top=c,s.bottom=c+s.height,s.width=s.right-s.left,c=s.bottom):(s.left=l,s.right=l+s.width,s.top=t.top,s.bottom=t.top+t.h,s.height=s.bottom-s.top,l=s.right);t.x=l,t.y=c}X._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Kt={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var a=e.boxes?e.boxes.indexOf(t):-1;-1!==a&&e.boxes.splice(a,1)},configure:function(e,t,a){for(var i,n=["fullWidth","position","weight"],r=n.length,s=0;s<r;++s)i=n[s],a.hasOwnProperty(i)&&(t[i]=a[i])},update:function(e,t,a){if(e){var i=e.options.layout||{},n=ce.options.toPadding(i.padding),r=t-n.width,s=a-n.height,o=Lt(e.boxes),l=o.vertical,c=o.horizontal,d=Object.freeze({outerWidth:t,outerHeight:a,padding:n,availableWidth:r,vBoxMaxWidth:r/2/l.length,hBoxMaxHeight:s/2}),u=Ot({maxPadding:Ot({},n),w:r,h:s,x:n.left,y:n.top},n);qt(l.concat(c),d),Wt(l,u,d),Wt(c,u,d)&&Wt(l,u,d),zt(u),Ht(o.leftAndTop,u,d),u.x+=u.w,u.y+=u.h,Ht(o.rightAndBottom,u,d),e.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h},ce.each(o.chartArea,(function(t){var a=t.box;Ot(a,e.chartArea),a.update(u.w,u.h)}))}}},Gt={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Zt="/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n",Xt=Object.freeze({__proto__:null,default:Zt}),Jt=a(Xt),Qt="$chartjs",ea="chartjs-",ta=ea+"size-monitor",aa=ea+"render-monitor",ia=ea+"render-animation",na=["animationstart","webkitAnimationStart"],ra={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function sa(e,t){var a=ce.getStyle(e,t),i=a&&a.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}function oa(e,t){var a=e.style,i=e.getAttribute("height"),n=e.getAttribute("width");if(e[Qt]={initial:{height:i,width:n,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",null===n||""===n){var r=sa(e,"width");void 0!==r&&(e.width=r)}if(null===i||""===i)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var s=sa(e,"height");void 0!==r&&(e.height=s)}return e}var la=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(a){}return e}(),ca=!!la&&{passive:!0};function da(e,t,a){e.addEventListener(t,a,ca)}function ua(e,t,a){e.removeEventListener(t,a,ca)}function ma(e,t,a,i,n){return{type:e,chart:t,native:n||null,x:void 0!==a?a:null,y:void 0!==i?i:null}}function pa(e,t){var a=ra[e.type]||e.type,i=ce.getRelativePosition(e,t);return ma(a,t,i.x,i.y,e)}function ha(e,t){var a=!1,i=[];return function(){i=Array.prototype.slice.call(arguments),t=t||this,a||(a=!0,ce.requestAnimFrame.call(window,(function(){a=!1,e.apply(t,i)})))}}function fa(e){var t=document.createElement("div");return t.className=e||"",t}function ba(e){var t=1e6,a=fa(ta),i=fa(ta+"-expand"),n=fa(ta+"-shrink");i.appendChild(fa()),n.appendChild(fa()),a.appendChild(i),a.appendChild(n),a._reset=function(){i.scrollLeft=t,i.scrollTop=t,n.scrollLeft=t,n.scrollTop=t};var r=function(){a._reset(),e()};return da(i,"scroll",r.bind(i,"expand")),da(n,"scroll",r.bind(n,"shrink")),a}function ga(e,t){var a=e[Qt]||(e[Qt]={}),i=a.renderProxy=function(e){e.animationName===ia&&t()};ce.each(na,(function(t){da(e,t,i)})),a.reflow=!!e.offsetParent,e.classList.add(aa)}function va(e){var t=e[Qt]||{},a=t.renderProxy;a&&(ce.each(na,(function(t){ua(e,t,a)})),delete t.renderProxy),e.classList.remove(aa)}function ya(e,t,a){var i=e[Qt]||(e[Qt]={}),n=i.resizer=ba(ha((function(){if(i.resizer){var n=a.options.maintainAspectRatio&&e.parentNode,r=n?n.clientWidth:0;t(ma("resize",a)),n&&n.clientWidth<r&&a.canvas&&t(ma("resize",a))}})));ga(e,(function(){if(i.resizer){var t=e.parentNode;t&&t!==n.parentNode&&t.insertBefore(n,t.firstChild),n._reset()}}))}function wa(e){var t=e[Qt]||{},a=t.resizer;delete t.resizer,va(e),a&&a.parentNode&&a.parentNode.removeChild(a)}function Ca(e,t){var a=e[Qt]||(e[Qt]={});if(!a.containsStyles){a.containsStyles=!0,t="/* Chart.js */\n"+t;var i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(t)),e.appendChild(i)}}var xa={disableCSSInjection:!1,_enabled:"undefined"!==typeof window&&"undefined"!==typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document,a=t.host?t:document.head;Ca(a,Jt)}},acquireContext:function(e,t){"string"===typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var a=e&&e.getContext&&e.getContext("2d");return a&&a.canvas===e?(this._ensureLoaded(e),oa(e,t),a):null},releaseContext:function(e){var t=e.canvas;if(t[Qt]){var a=t[Qt].initial;["height","width"].forEach((function(e){var i=a[e];ce.isNullOrUndef(i)?t.removeAttribute(e):t.setAttribute(e,i)})),ce.each(a.style||{},(function(e,a){t.style[a]=e})),t.width=t.width,delete t[Qt]}},addEventListener:function(e,t,a){var i=e.canvas;if("resize"!==t){var n=a[Qt]||(a[Qt]={}),r=n.proxies||(n.proxies={}),s=r[e.id+"_"+t]=function(t){a(pa(t,e))};da(i,t,s)}else ya(i,a,e)},removeEventListener:function(e,t,a){var i=e.canvas;if("resize"!==t){var n=a[Qt]||{},r=n.proxies||{},s=r[e.id+"_"+t];s&&ua(i,t,s)}else wa(i)}};ce.addEvent=da,ce.removeEvent=ua;var _a=xa._enabled?xa:Gt,Da=ce.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},_a);X._set("global",{plugins:{}});var ka={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,a){var i,n,r,s,o,l=this.descriptors(e),c=l.length;for(i=0;i<c;++i)if(n=l[i],r=n.plugin,o=r[t],"function"===typeof o&&(s=[e].concat(a||[]),s.push(n.options),!1===o.apply(r,s)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var a=[],i=[],n=e&&e.config||{},r=n.options&&n.options.plugins||{};return this._plugins.concat(n.plugins||[]).forEach((function(e){var t=a.indexOf(e);if(-1===t){var n=e.id,s=r[n];!1!==s&&(!0===s&&(s=ce.clone(X.global.plugins[n])),a.push(e),i.push({plugin:e,options:s||{}}))}})),t.descriptors=i,t.id=this._cacheId,i},_invalidate:function(e){delete e.$plugins}},Sa={constructors:{},defaults:{},registerScaleType:function(e,t,a){this.constructors[e]=t,this.defaults[e]=ce.clone(a)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ce.merge({},[X.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var a=this;a.defaults.hasOwnProperty(e)&&(a.defaults[e]=ce.extend(a.defaults[e],t))},addScalesToLayout:function(e){ce.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,Kt.addBox(e,t)}))}},Ma=ce.valueOrDefault,Ta=ce.rtl.getRtlAdapter;X._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ce.noop,title:function(e,t){var a="",i=t.labels,n=i?i.length:0;if(e.length>0){var r=e[0];r.label?a=r.label:r.xLabel?a=r.xLabel:n>0&&r.index<n&&(a=i[r.index])}return a},afterTitle:ce.noop,beforeBody:ce.noop,beforeLabel:ce.noop,label:function(e,t){var a=t.datasets[e.datasetIndex].label||"";return a&&(a+=": "),ce.isNullOrUndef(e.value)?a+=e.yLabel:a+=e.value,a},labelColor:function(e,t){var a=t.getDatasetMeta(e.datasetIndex),i=a.data[e.index],n=i._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ce.noop,afterBody:ce.noop,beforeFooter:ce.noop,footer:ce.noop,afterFooter:ce.noop}}});var Ra={average:function(e){if(!e.length)return!1;var t,a,i=0,n=0,r=0;for(t=0,a=e.length;t<a;++t){var s=e[t];if(s&&s.hasValue()){var o=s.tooltipPosition();i+=o.x,n+=o.y,++r}}return{x:i/r,y:n/r}},nearest:function(e,t){var a,i,n,r=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(a=0,i=e.length;a<i;++a){var l=e[a];if(l&&l.hasValue()){var c=l.getCenterPoint(),d=ce.distanceBetweenPoints(t,c);d<o&&(o=d,n=l)}}if(n){var u=n.tooltipPosition();r=u.x,s=u.y}return{x:r,y:s}}};function Aa(e,t){return t&&(ce.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function $a(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ba(e){var t=e._xScale,a=e._yScale||e._scale,i=e._index,n=e._datasetIndex,r=e._chart.getDatasetMeta(n).controller,s=r._getIndexScale(),o=r._getValueScale();return{xLabel:t?t.getLabelForIndex(i,n):"",yLabel:a?a.getLabelForIndex(i,n):"",label:s?""+s.getLabelForIndex(i,n):"",value:o?""+o.getLabelForIndex(i,n):"",index:i,datasetIndex:n,x:e._model.x,y:e._model.y}}function Pa(e){var t=X.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Ma(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Ma(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Ma(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Ma(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Ma(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Ma(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Ma(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Ma(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Ma(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Na(e,t){var a=e._chart.ctx,i=2*t.yPadding,n=0,r=t.body,s=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);s+=t.beforeBody.length+t.afterBody.length;var o=t.title.length,l=t.footer.length,c=t.titleFontSize,d=t.bodyFontSize,u=t.footerFontSize;i+=o*c,i+=o?(o-1)*t.titleSpacing:0,i+=o?t.titleMarginBottom:0,i+=s*d,i+=s?(s-1)*t.bodySpacing:0,i+=l?t.footerMarginTop:0,i+=l*u,i+=l?(l-1)*t.footerSpacing:0;var m=0,p=function(e){n=Math.max(n,a.measureText(e).width+m)};return a.font=ce.fontString(c,t._titleFontStyle,t._titleFontFamily),ce.each(t.title,p),a.font=ce.fontString(d,t._bodyFontStyle,t._bodyFontFamily),ce.each(t.beforeBody.concat(t.afterBody),p),m=t.displayColors?d+2:0,ce.each(r,(function(e){ce.each(e.before,p),ce.each(e.lines,p),ce.each(e.after,p)})),m=0,a.font=ce.fontString(u,t._footerFontStyle,t._footerFontFamily),ce.each(t.footer,p),n+=2*t.xPadding,{width:n,height:i}}function Ia(e,t){var a,i,n,r,s,o=e._model,l=e._chart,c=e._chart.chartArea,d="center",u="center";o.y<t.height?u="top":o.y>l.height-t.height&&(u="bottom");var m=(c.left+c.right)/2,p=(c.top+c.bottom)/2;"center"===u?(a=function(e){return e<=m},i=function(e){return e>m}):(a=function(e){return e<=t.width/2},i=function(e){return e>=l.width-t.width/2}),n=function(e){return e+t.width+o.caretSize+o.caretPadding>l.width},r=function(e){return e-t.width-o.caretSize-o.caretPadding<0},s=function(e){return e<=p?"top":"bottom"},a(o.x)?(d="left",n(o.x)&&(d="center",u=s(o.y))):i(o.x)&&(d="right",r(o.x)&&(d="center",u=s(o.y)));var h=e._options;return{xAlign:h.xAlign?h.xAlign:d,yAlign:h.yAlign?h.yAlign:u}}function Oa(e,t,a,i){var n=e.x,r=e.y,s=e.caretSize,o=e.caretPadding,l=e.cornerRadius,c=a.xAlign,d=a.yAlign,u=s+o,m=l+o;return"right"===c?n-=t.width:"center"===c&&(n-=t.width/2,n+t.width>i.width&&(n=i.width-t.width),n<0&&(n=0)),"top"===d?r+=u:r-="bottom"===d?t.height+u:t.height/2,"center"===d?"left"===c?n+=u:"right"===c&&(n-=u):"left"===c?n-=m:"right"===c&&(n+=m),{x:n,y:r}}function Ya(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Ea(e){return Aa([],$a(e))}var Fa=ge.extend({initialize:function(){this._model=Pa(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,a=t.callbacks,i=a.beforeTitle.apply(e,arguments),n=a.title.apply(e,arguments),r=a.afterTitle.apply(e,arguments),s=[];return s=Aa(s,$a(i)),s=Aa(s,$a(n)),s=Aa(s,$a(r)),s},getBeforeBody:function(){return Ea(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var a=this,i=a._options.callbacks,n=[];return ce.each(e,(function(e){var r={before:[],lines:[],after:[]};Aa(r.before,$a(i.beforeLabel.call(a,e,t))),Aa(r.lines,i.label.call(a,e,t)),Aa(r.after,$a(i.afterLabel.call(a,e,t))),n.push(r)})),n},getAfterBody:function(){return Ea(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,a=t.beforeFooter.apply(e,arguments),i=t.footer.apply(e,arguments),n=t.afterFooter.apply(e,arguments),r=[];return r=Aa(r,$a(a)),r=Aa(r,$a(i)),r=Aa(r,$a(n)),r},update:function(e){var t,a,i=this,n=i._options,r=i._model,s=i._model=Pa(n),o=i._active,l=i._data,c={xAlign:r.xAlign,yAlign:r.yAlign},d={x:r.x,y:r.y},u={width:r.width,height:r.height},m={x:r.caretX,y:r.caretY};if(o.length){s.opacity=1;var p=[],h=[];m=Ra[n.position].call(i,o,i._eventPosition);var f=[];for(t=0,a=o.length;t<a;++t)f.push(Ba(o[t]));n.filter&&(f=f.filter((function(e){return n.filter(e,l)}))),n.itemSort&&(f=f.sort((function(e,t){return n.itemSort(e,t,l)}))),ce.each(f,(function(e){p.push(n.callbacks.labelColor.call(i,e,i._chart)),h.push(n.callbacks.labelTextColor.call(i,e,i._chart))})),s.title=i.getTitle(f,l),s.beforeBody=i.getBeforeBody(f,l),s.body=i.getBody(f,l),s.afterBody=i.getAfterBody(f,l),s.footer=i.getFooter(f,l),s.x=m.x,s.y=m.y,s.caretPadding=n.caretPadding,s.labelColors=p,s.labelTextColors=h,s.dataPoints=f,u=Na(this,s),c=Ia(this,u),d=Oa(s,u,c,i._chart)}else s.opacity=0;return s.xAlign=c.xAlign,s.yAlign=c.yAlign,s.x=d.x,s.y=d.y,s.width=u.width,s.height=u.height,s.caretX=m.x,s.caretY=m.y,i._model=s,e&&n.custom&&n.custom.call(i,s),i},drawCaret:function(e,t){var a=this._chart.ctx,i=this._view,n=this.getCaretPosition(e,t,i);a.lineTo(n.x1,n.y1),a.lineTo(n.x2,n.y2),a.lineTo(n.x3,n.y3)},getCaretPosition:function(e,t,a){var i,n,r,s,o,l,c=a.caretSize,d=a.cornerRadius,u=a.xAlign,m=a.yAlign,p=e.x,h=e.y,f=t.width,b=t.height;if("center"===m)o=h+b/2,"left"===u?(i=p,n=i-c,r=i,s=o+c,l=o-c):(i=p+f,n=i+c,r=i,s=o-c,l=o+c);else if("left"===u?(n=p+d+c,i=n-c,r=n+c):"right"===u?(n=p+f-d-c,i=n-c,r=n+c):(n=a.caretX,i=n-c,r=n+c),"top"===m)s=h,o=s-c,l=s;else{s=h+b,o=s+c,l=s;var g=r;r=i,i=g}return{x1:i,x2:n,x3:r,y1:s,y2:o,y3:l}},drawTitle:function(e,t,a){var i,n,r,s=t.title,o=s.length;if(o){var l=Ta(t.rtl,t.x,t.width);for(e.x=Ya(t,t._titleAlign),a.textAlign=l.textAlign(t._titleAlign),a.textBaseline="middle",i=t.titleFontSize,n=t.titleSpacing,a.fillStyle=t.titleFontColor,a.font=ce.fontString(i,t._titleFontStyle,t._titleFontFamily),r=0;r<o;++r)a.fillText(s[r],l.x(e.x),e.y+i/2),e.y+=i+n,r+1===o&&(e.y+=t.titleMarginBottom-n)}},drawBody:function(e,t,a){var i,n,r,s,o,l,c,d,u=t.bodyFontSize,m=t.bodySpacing,p=t._bodyAlign,h=t.body,f=t.displayColors,b=0,g=f?Ya(t,"left"):0,v=Ta(t.rtl,t.x,t.width),y=function(t){a.fillText(t,v.x(e.x+b),e.y+u/2),e.y+=u+m},w=v.textAlign(p);for(a.textAlign=p,a.textBaseline="middle",a.font=ce.fontString(u,t._bodyFontStyle,t._bodyFontFamily),e.x=Ya(t,w),a.fillStyle=t.bodyFontColor,ce.each(t.beforeBody,y),b=f&&"right"!==w?"center"===p?u/2+1:u+2:0,o=0,c=h.length;o<c;++o){for(i=h[o],n=t.labelTextColors[o],r=t.labelColors[o],a.fillStyle=n,ce.each(i.before,y),s=i.lines,l=0,d=s.length;l<d;++l){if(f){var C=v.x(g);a.fillStyle=t.legendColorBackground,a.fillRect(v.leftForLtr(C,u),e.y,u,u),a.lineWidth=1,a.strokeStyle=r.borderColor,a.strokeRect(v.leftForLtr(C,u),e.y,u,u),a.fillStyle=r.backgroundColor,a.fillRect(v.leftForLtr(v.xPlus(C,1),u-2),e.y+1,u-2,u-2),a.fillStyle=n}y(s[l])}ce.each(i.after,y)}b=0,ce.each(t.afterBody,y),e.y-=m},drawFooter:function(e,t,a){var i,n,r=t.footer,s=r.length;if(s){var o=Ta(t.rtl,t.x,t.width);for(e.x=Ya(t,t._footerAlign),e.y+=t.footerMarginTop,a.textAlign=o.textAlign(t._footerAlign),a.textBaseline="middle",i=t.footerFontSize,a.fillStyle=t.footerFontColor,a.font=ce.fontString(i,t._footerFontStyle,t._footerFontFamily),n=0;n<s;++n)a.fillText(r[n],o.x(e.x),e.y+i/2),e.y+=i+t.footerSpacing}},drawBackground:function(e,t,a,i){a.fillStyle=t.backgroundColor,a.strokeStyle=t.borderColor,a.lineWidth=t.borderWidth;var n=t.xAlign,r=t.yAlign,s=e.x,o=e.y,l=i.width,c=i.height,d=t.cornerRadius;a.beginPath(),a.moveTo(s+d,o),"top"===r&&this.drawCaret(e,i),a.lineTo(s+l-d,o),a.quadraticCurveTo(s+l,o,s+l,o+d),"center"===r&&"right"===n&&this.drawCaret(e,i),a.lineTo(s+l,o+c-d),a.quadraticCurveTo(s+l,o+c,s+l-d,o+c),"bottom"===r&&this.drawCaret(e,i),a.lineTo(s+d,o+c),a.quadraticCurveTo(s,o+c,s,o+c-d),"center"===r&&"left"===n&&this.drawCaret(e,i),a.lineTo(s,o+d),a.quadraticCurveTo(s,o,s+d,o),a.closePath(),a.fill(),t.borderWidth>0&&a.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var a={width:t.width,height:t.height},i={x:t.x,y:t.y},n=Math.abs(t.opacity<.001)?0:t.opacity,r=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&r&&(e.save(),e.globalAlpha=n,this.drawBackground(i,t,e,a),i.y+=t.yPadding,ce.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),ce.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t=this,a=t._options,i=!1;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:(t._active=t._chart.getElementsAtEventForMode(e,a.mode,a),a.reverse&&t._active.reverse()),i=!ce.arrayEquals(t._active,t._lastActive),i&&(t._lastActive=t._active,(a.enabled||a.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),i}}),qa=Ra,La=Fa;La.positioners=qa;var Ua=ce.valueOrDefault;function Va(){return ce.merge({},[].slice.call(arguments),{merger:function(e,t,a,i){if("xAxes"===e||"yAxes"===e){var n,r,s,o=a[e].length;for(t[e]||(t[e]=[]),n=0;n<o;++n)s=a[e][n],r=Ua(s.type,"xAxes"===e?"category":"linear"),n>=t[e].length&&t[e].push({}),!t[e][n].type||s.type&&s.type!==t[e][n].type?ce.merge(t[e][n],[Sa.getScaleDefaults(r),s]):ce.merge(t[e][n],s)}else ce._merger(e,t,a,i)}})}function za(){return ce.merge({},[].slice.call(arguments),{merger:function(e,t,a,i){var n=t[e]||{},r=a[e];"scales"===e?t[e]=Va(n,r):"scale"===e?t[e]=ce.merge(n,[Sa.getScaleDefaults(r.type),r]):ce._merger(e,t,a,i)}})}function ja(e){e=e||{};var t=e.data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=za(X.global,X[e.type],e.options||{}),e}function Wa(e){var t=e.options;ce.each(e.scales,(function(t){Kt.removeBox(e,t)})),t=za(X.global,X[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Ha(e,t,a){var i,n=function(e){return e.id===i};do{i=t+a++}while(ce.findIndex(e,n)>=0);return i}function Ka(e){return"top"===e||"bottom"===e}function Ga(e,t){return function(a,i){return a[e]===i[e]?a[t]-i[t]:a[e]-i[e]}}X._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Za=function(e,t){return this.construct(e,t),this};ce.extend(Za.prototype,{construct:function(e,t){var a=this;t=ja(t);var i=Da.acquireContext(e,t),n=i&&i.canvas,r=n&&n.height,s=n&&n.width;a.id=ce.uid(),a.ctx=i,a.canvas=n,a.config=t,a.width=s,a.height=r,a.aspectRatio=r?s/r:null,a.options=t.options,a._bufferedRender=!1,a._layers=[],a.chart=a,a.controller=a,Za.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data},set:function(e){a.config.data=e}}),i&&n?(a.initialize(),a.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return ka.notify(e,"beforeInit"),ce.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),ka.notify(e,"afterInit"),e},clear:function(){return ce.canvas.clear(this),this},stop:function(){return we.cancelAnimation(this),this},resize:function(e){var t=this,a=t.options,i=t.canvas,n=a.maintainAspectRatio&&t.aspectRatio||null,r=Math.max(0,Math.floor(ce.getMaximumWidth(i))),s=Math.max(0,Math.floor(n?r/n:ce.getMaximumHeight(i)));if((t.width!==r||t.height!==s)&&(i.width=t.width=r,i.height=t.height=s,i.style.width=r+"px",i.style.height=s+"px",ce.retinaScale(t,a.devicePixelRatio),!e)){var o={width:r,height:s};ka.notify(t,"resize",[o]),a.onResize&&a.onResize(t,o),t.stop(),t.update({duration:a.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},a=e.scale;ce.each(t.xAxes,(function(e,a){e.id||(e.id=Ha(t.xAxes,"x-axis-",a))})),ce.each(t.yAxes,(function(e,a){e.id||(e.id=Ha(t.yAxes,"y-axis-",a))})),a&&(a.id=a.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,a=e.scales||{},i=[],n=Object.keys(a).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(i=i.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&i.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ce.each(i,(function(t){var i=t.options,r=i.id,s=Ua(i.type,t.dtype);Ka(i.position)!==Ka(t.dposition)&&(i.position=t.dposition),n[r]=!0;var o=null;if(r in a&&a[r].type===s)o=a[r],o.options=i,o.ctx=e.ctx,o.chart=e;else{var l=Sa.getScaleConstructor(s);if(!l)return;o=new l({id:r,type:s,options:i,ctx:e.ctx,chart:e}),a[o.id]=o}o.mergeTicksOptions(),t.isDefault&&(e.scale=o)})),ce.each(n,(function(e,t){e||delete a[t]})),e.scales=a,Sa.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,a=this,i=[],n=a.data.datasets;for(e=0,t=n.length;e<t;e++){var r=n[e],s=a.getDatasetMeta(e),o=r.type||a.config.type;if(s.type&&s.type!==o&&(a.destroyDatasetMeta(e),s=a.getDatasetMeta(e)),s.type=o,s.order=r.order||0,s.index=e,s.controller)s.controller.updateIndex(e),s.controller.linkScales();else{var l=Tt[s.type];if(void 0===l)throw new Error('"'+s.type+'" is not a chart type.');s.controller=new l(a,e),i.push(s.controller)}}return i},resetElements:function(){var e=this;ce.each(e.data.datasets,(function(t,a){e.getDatasetMeta(a).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,a,i=this;if(e&&"object"===typeof e||(e={duration:e,lazy:arguments[1]}),Wa(i),ka._invalidate(i),!1!==ka.notify(i,"beforeUpdate")){i.tooltip._data=i.data;var n=i.buildOrUpdateControllers();for(t=0,a=i.data.datasets.length;t<a;t++)i.getDatasetMeta(t).controller.buildOrUpdateElements();i.updateLayout(),i.options.animation&&i.options.animation.duration&&ce.each(n,(function(e){e.reset()})),i.updateDatasets(),i.tooltip.initialize(),i.lastActive=[],ka.notify(i,"afterUpdate"),i._layers.sort(Ga("z","_idx")),i._bufferedRender?i._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:i.render(e)}},updateLayout:function(){var e=this;!1!==ka.notify(e,"beforeLayout")&&(Kt.update(this,this.width,this.height),e._layers=[],ce.each(e.boxes,(function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())}),e),e._layers.forEach((function(e,t){e._idx=t})),ka.notify(e,"afterScaleUpdate"),ka.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==ka.notify(e,"beforeDatasetsUpdate")){for(var t=0,a=e.data.datasets.length;t<a;++t)e.updateDataset(t);ka.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,a=t.getDatasetMeta(e),i={meta:a,index:e};!1!==ka.notify(t,"beforeDatasetUpdate",[i])&&(a.controller._update(),ka.notify(t,"afterDatasetUpdate",[i]))},render:function(e){var t=this;e&&"object"===typeof e||(e={duration:e,lazy:arguments[1]});var a=t.options.animation,i=Ua(e.duration,a&&a.duration),n=e.lazy;if(!1!==ka.notify(t,"beforeRender")){var r=function(e){ka.notify(t,"afterRender"),ce.callback(a&&a.onComplete,[e],t)};if(a&&i){var s=new ye({numSteps:i/16.66,easing:e.easing||a.easing,render:function(e,t){var a=ce.easing.effects[t.easing],i=t.currentStep,n=i/t.numSteps;e.draw(a(n),n,i)},onAnimationProgress:a.onProgress,onAnimationComplete:r});we.addAnimation(t,s,i,n)}else t.draw(),r(new ye({numSteps:0,chart:t}));return t}},draw:function(e){var t,a,i=this;if(i.clear(),ce.isNullOrUndef(e)&&(e=1),i.transition(e),!(i.width<=0||i.height<=0)&&!1!==ka.notify(i,"beforeDraw",[e])){for(a=i._layers,t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(i.chartArea);for(i.drawDatasets(e);t<a.length;++t)a[t].draw(i.chartArea);i._drawTooltip(e),ka.notify(i,"afterDraw",[e])}},transition:function(e){for(var t=this,a=0,i=(t.data.datasets||[]).length;a<i;++a)t.isDatasetVisible(a)&&t.getDatasetMeta(a).controller.transition(e);t.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,a,i=this,n=i.data.datasets||[],r=[];for(t=0,a=n.length;t<a;++t)e&&!i.isDatasetVisible(t)||r.push(i.getDatasetMeta(t));return r.sort(Ga("order","index")),r},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,a,i=this;if(!1!==ka.notify(i,"beforeDatasetsDraw",[e])){for(t=i._getSortedVisibleDatasetMetas(),a=t.length-1;a>=0;--a)i.drawDataset(t[a],e);ka.notify(i,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var a=this,i={meta:e,index:e.index,easingValue:t};!1!==ka.notify(a,"beforeDatasetDraw",[i])&&(e.controller.draw(t),ka.notify(a,"afterDatasetDraw",[i]))},_drawTooltip:function(e){var t=this,a=t.tooltip,i={tooltip:a,easingValue:e};!1!==ka.notify(t,"beforeTooltipDraw",[i])&&(a.draw(),ka.notify(t,"afterTooltipDraw",[i]))},getElementAtEvent:function(e){return It.modes.single(this,e)},getElementsAtEvent:function(e){return It.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return It.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,a){var i=It.modes[t];return"function"===typeof i?i(this,e,a):[]},getDatasetAtEvent:function(e){return It.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,a=t.data.datasets[e];a._meta||(a._meta={});var i=a._meta[t.id];return i||(i=a._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a.order||0,index:e}),i},getVisibleDatasetCount:function(){for(var e=0,t=0,a=this.data.datasets.length;t<a;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"===typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,a=this.data.datasets[e],i=a._meta&&a._meta[t];i&&(i.controller.destroy(),delete a._meta[t])},destroy:function(){var e,t,a=this,i=a.canvas;for(a.stop(),e=0,t=a.data.datasets.length;e<t;++e)a.destroyDatasetMeta(e);i&&(a.unbindEvents(),ce.canvas.clear(a),Da.releaseContext(a.ctx),a.canvas=null,a.ctx=null),ka.notify(a,"destroy"),delete Za.instances[a.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new La({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},a=function(){e.eventHandler.apply(e,arguments)};ce.each(e.options.events,(function(i){Da.addEventListener(e,i,a),t[i]=a})),e.options.responsive&&(a=function(){e.resize()},Da.addEventListener(e,"resize",a),t.resize=a)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ce.each(t,(function(t,a){Da.removeEventListener(e,a,t)})))},updateHoverStyle:function(e,t,a){var i,n,r,s=a?"set":"remove";for(n=0,r=e.length;n<r;++n)i=e[n],i&&this.getDatasetMeta(i._datasetIndex).controller[s+"HoverStyle"](i);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+s+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,a=t.tooltip;if(!1!==ka.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var i=t.handleEvent(e);a&&(i=a._start?a.handleEvent(e):i|a.handleEvent(e)),ka.notify(t,"afterEvent",[e]);var n=t._bufferedRequest;return n?t.render(n):i&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t=this,a=t.options||{},i=a.hover,n=!1;return t.lastActive=t.lastActive||[],"mouseout"===e.type?t.active=[]:t.active=t.getElementsAtEventForMode(e,i.mode,i),ce.callback(a.onHover||a.hover.onHover,[e.native,t.active],t),"mouseup"!==e.type&&"click"!==e.type||a.onClick&&a.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,i.mode,!1),t.active.length&&i.mode&&t.updateHoverStyle(t.active,i.mode,!0),n=!ce.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,n}}),Za.instances={};var Xa=Za;Za.Controller=Za,Za.types={},ce.configMerge=za,ce.scaleMerge=Va;var Ja=function(){function e(e,t,a){var i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[a])):i=e,i}function t(e){return void 0!==e&&null!==e&&"none"!==e}function a(a,i,n){var r=document.defaultView,s=ce._getParentNode(a),o=r.getComputedStyle(a)[i],l=r.getComputedStyle(s)[i],c=t(o),d=t(l),u=Number.POSITIVE_INFINITY;return c||d?Math.min(c?e(o,a,n):u,d?e(l,s,n):u):"none"}ce.where=function(e,t){if(ce.isArray(e)&&Array.prototype.filter)return e.filter(t);var a=[];return ce.each(e,(function(e){t(e)&&a.push(e)})),a},ce.findIndex=Array.prototype.findIndex?function(e,t,a){return e.findIndex(t,a)}:function(e,t,a){a=void 0===a?e:a;for(var i=0,n=e.length;i<n;++i)if(t.call(a,e[i],i,e))return i;return-1},ce.findNextWhere=function(e,t,a){ce.isNullOrUndef(a)&&(a=-1);for(var i=a+1;i<e.length;i++){var n=e[i];if(t(n))return n}},ce.findPreviousWhere=function(e,t,a){ce.isNullOrUndef(a)&&(a=e.length);for(var i=a-1;i>=0;i--){var n=e[i];if(t(n))return n}},ce.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ce.almostEquals=function(e,t,a){return Math.abs(e-t)<a},ce.almostWhole=function(e,t){var a=Math.round(e);return a-t<=e&&a+t>=e},ce.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},ce.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},ce.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},ce.toRadians=function(e){return e*(Math.PI/180)},ce.toDegrees=function(e){return e*(180/Math.PI)},ce._decimalPlaces=function(e){if(ce.isFinite(e)){var t=1,a=0;while(Math.round(e*t)/t!==e)t*=10,a++;return a}},ce.getAngleFromPoint=function(e,t){var a=t.x-e.x,i=t.y-e.y,n=Math.sqrt(a*a+i*i),r=Math.atan2(i,a);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:n}},ce.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},ce.aliasPixel=function(e){return e%2===0?0:.5},ce._alignPixel=function(e,t,a){var i=e.currentDevicePixelRatio,n=a/2;return Math.round((t-n)*i)/i+n},ce.splineCurve=function(e,t,a,i){var n=e.skip?t:e,r=t,s=a.skip?t:a,o=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)),l=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;var u=i*c,m=i*d;return{previous:{x:r.x-u*(s.x-n.x),y:r.y-u*(s.y-n.y)},next:{x:r.x+m*(s.x-n.x),y:r.y+m*(s.y-n.y)}}},ce.EPSILON=Number.EPSILON||1e-14,ce.splineCurveMonotone=function(e){var t,a,i,n,r,s,o,l,c,d=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),u=d.length;for(t=0;t<u;++t)if(i=d[t],!i.model.skip){if(a=t>0?d[t-1]:null,n=t<u-1?d[t+1]:null,n&&!n.model.skip){var m=n.model.x-i.model.x;i.deltaK=0!==m?(n.model.y-i.model.y)/m:0}!a||a.model.skip?i.mK=i.deltaK:!n||n.model.skip?i.mK=a.deltaK:this.sign(a.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(a.deltaK+i.deltaK)/2}for(t=0;t<u-1;++t)i=d[t],n=d[t+1],i.model.skip||n.model.skip||(ce.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=n.mK=0:(r=i.mK/i.deltaK,s=n.mK/i.deltaK,l=Math.pow(r,2)+Math.pow(s,2),l<=9||(o=3/Math.sqrt(l),i.mK=r*o*i.deltaK,n.mK=s*o*i.deltaK)));for(t=0;t<u;++t)i=d[t],i.model.skip||(a=t>0?d[t-1]:null,n=t<u-1?d[t+1]:null,a&&!a.model.skip&&(c=(i.model.x-a.model.x)/3,i.model.controlPointPreviousX=i.model.x-c,i.model.controlPointPreviousY=i.model.y-c*i.mK),n&&!n.model.skip&&(c=(n.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+c,i.model.controlPointNextY=i.model.y+c*i.mK))},ce.nextItem=function(e,t,a){return a?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},ce.previousItem=function(e,t,a){return a?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},ce.niceNum=function(e,t){var a,i=Math.floor(ce.log10(e)),n=e/Math.pow(10,i);return a=t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10,a*Math.pow(10,i)},ce.requestAnimFrame=function(){return"undefined"===typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),ce.getRelativePosition=function(e,t){var a,i,n=e.originalEvent||e,r=e.target||e.srcElement,s=r.getBoundingClientRect(),o=n.touches;o&&o.length>0?(a=o[0].clientX,i=o[0].clientY):(a=n.clientX,i=n.clientY);var l=parseFloat(ce.getStyle(r,"padding-left")),c=parseFloat(ce.getStyle(r,"padding-top")),d=parseFloat(ce.getStyle(r,"padding-right")),u=parseFloat(ce.getStyle(r,"padding-bottom")),m=s.right-s.left-l-d,p=s.bottom-s.top-c-u;return a=Math.round((a-s.left-l)/m*r.width/t.currentDevicePixelRatio),i=Math.round((i-s.top-c)/p*r.height/t.currentDevicePixelRatio),{x:a,y:i}},ce.getConstraintWidth=function(e){return a(e,"max-width","clientWidth")},ce.getConstraintHeight=function(e){return a(e,"max-height","clientHeight")},ce._calculatePadding=function(e,t,a){return t=ce.getStyle(e,t),t.indexOf("%")>-1?a*parseInt(t,10)/100:parseInt(t,10)},ce._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},ce.getMaximumWidth=function(e){var t=ce._getParentNode(e);if(!t)return e.clientWidth;var a=t.clientWidth,i=ce._calculatePadding(t,"padding-left",a),n=ce._calculatePadding(t,"padding-right",a),r=a-i-n,s=ce.getConstraintWidth(e);return isNaN(s)?r:Math.min(r,s)},ce.getMaximumHeight=function(e){var t=ce._getParentNode(e);if(!t)return e.clientHeight;var a=t.clientHeight,i=ce._calculatePadding(t,"padding-top",a),n=ce._calculatePadding(t,"padding-bottom",a),r=a-i-n,s=ce.getConstraintHeight(e);return isNaN(s)?r:Math.min(r,s)},ce.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},ce.retinaScale=function(e,t){var a=e.currentDevicePixelRatio=t||"undefined"!==typeof window&&window.devicePixelRatio||1;if(1!==a){var i=e.canvas,n=e.height,r=e.width;i.height=n*a,i.width=r*a,e.ctx.scale(a,a),i.style.height||i.style.width||(i.style.height=n+"px",i.style.width=r+"px")}},ce.fontString=function(e,t,a){return t+" "+e+"px "+a},ce.longestText=function(e,t,a,i){i=i||{};var n=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(n=i.data={},r=i.garbageCollect=[],i.font=t),e.font=t;var s,o,l,c,d,u=0,m=a.length;for(s=0;s<m;s++)if(c=a[s],void 0!==c&&null!==c&&!0!==ce.isArray(c))u=ce.measureText(e,n,r,u,c);else if(ce.isArray(c))for(o=0,l=c.length;o<l;o++)d=c[o],void 0===d||null===d||ce.isArray(d)||(u=ce.measureText(e,n,r,u,d));var p=r.length/2;if(p>a.length){for(s=0;s<p;s++)delete n[r[s]];r.splice(0,p)}return u},ce.measureText=function(e,t,a,i,n){var r=t[n];return r||(r=t[n]=e.measureText(n).width,a.push(n)),r>i&&(i=r),i},ce.numberOfLabelLines=function(e){var t=1;return ce.each(e,(function(e){ce.isArray(e)&&e.length>t&&(t=e.length)})),t},ce.color=Y?function(e){return e instanceof CanvasGradient&&(e=X.global.defaultColor),Y(e)}:function(e){return console.error("Color.js not found!"),e},ce.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:ce.color(e).saturate(.5).darken(.1).rgbString()}};function Qa(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function ei(e){this.options=e||{}}ce.extend(ei.prototype,{formats:Qa,parse:Qa,format:Qa,add:Qa,diff:Qa,startOf:Qa,endOf:Qa,_create:function(e){return e}}),ei.override=function(e){ce.extend(ei.prototype,e)};var ti=ei,ai={_date:ti},ii={formatters:{values:function(e){return ce.isArray(e)?e:""+e},linear:function(e,t,a){var i=a.length>3?a[2]-a[1]:a[1]-a[0];Math.abs(i)>1&&e!==Math.floor(e)&&(i=e-Math.floor(e));var n=ce.log10(Math.abs(i)),r="";if(0!==e){var s=Math.max(Math.abs(a[0]),Math.abs(a[a.length-1]));if(s<1e-4){var o=ce.log10(Math.abs(e)),l=Math.floor(o)-Math.floor(n);l=Math.max(Math.min(l,20),0),r=e.toExponential(l)}else{var c=-1*Math.floor(n);c=Math.max(Math.min(c,20),0),r=e.toFixed(c)}}else r="0";return r},logarithmic:function(e,t,a){var i=e/Math.pow(10,Math.floor(ce.log10(e)));return 0===e?"0":1===i||2===i||5===i||0===t||t===a.length-1?e.toExponential():""}}},ni=ce.isArray,ri=ce.isNullOrUndef,si=ce.valueOrDefault,oi=ce.valueAtIndexOrDefault;function li(e,t){for(var a=[],i=e.length/t,n=0,r=e.length;n<r;n+=i)a.push(e[Math.floor(n)]);return a}function ci(e,t,a){var i,n=e.getTicks().length,r=Math.min(t,n-1),s=e.getPixelForTick(r),o=e._startPixel,l=e._endPixel,c=1e-6;if(!(a&&(i=1===n?Math.max(s-o,l-s):0===t?(e.getPixelForTick(1)-s)/2:(s-e.getPixelForTick(r-1))/2,s+=r<t?i:-i,s<o-c||s>l+c)))return s}function di(e,t){ce.each(e,(function(e){var a,i=e.gc,n=i.length/2;if(n>t){for(a=0;a<n;++a)delete e.data[i[a]];i.splice(0,n)}}))}function ui(e,t,a,i){var n,r,s,o,l,c,d,u,m,p,h,f,b,g=a.length,v=[],y=[],w=[];for(n=0;n<g;++n){if(o=a[n].label,l=a[n].major?t.major:t.minor,e.font=c=l.string,d=i[c]=i[c]||{data:{},gc:[]},u=l.lineHeight,m=p=0,ri(o)||ni(o)){if(ni(o))for(r=0,s=o.length;r<s;++r)h=o[r],ri(h)||ni(h)||(m=ce.measureText(e,d.data,d.gc,m,h),p+=u)}else m=ce.measureText(e,d.data,d.gc,m,o),p=u;v.push(m),y.push(p),w.push(u/2)}function C(e){return{width:v[e]||0,height:y[e]||0,offset:w[e]||0}}return di(i,g),f=v.indexOf(Math.max.apply(null,v)),b=y.indexOf(Math.max.apply(null,y)),{first:C(0),last:C(g-1),widest:C(f),highest:C(b)}}function mi(e){return e.drawTicks?e.tickMarkLength:0}function pi(e){var t,a;return e.display?(t=ce.options._parseFont(e),a=ce.options.toPadding(e.padding),t.lineHeight+a.height):0}function hi(e,t){return ce.extend(ce.options._parseFont({fontFamily:si(t.fontFamily,e.fontFamily),fontSize:si(t.fontSize,e.fontSize),fontStyle:si(t.fontStyle,e.fontStyle),lineHeight:si(t.lineHeight,e.lineHeight)}),{color:ce.options.resolve([t.fontColor,e.fontColor,X.global.defaultFontColor])})}function fi(e){var t=hi(e,e.minor),a=e.major.enabled?hi(e,e.major):t;return{minor:t,major:a}}function bi(e){var t,a,i,n=[];for(a=0,i=e.length;a<i;++a)t=e[a],"undefined"!==typeof t._index&&n.push(t);return n}function gi(e){var t,a,i=e.length;if(i<2)return!1;for(a=e[0],t=1;t<i;++t)if(e[t]-e[t-1]!==a)return!1;return a}function vi(e,t,a,i){var n,r,s,o,l=gi(e),c=(t.length-1)/i;if(!l)return Math.max(c,1);for(n=ce.math._factorize(l),s=0,o=n.length-1;s<o;s++)if(r=n[s],r>c)return r;return Math.max(c,1)}function yi(e){var t,a,i=[];for(t=0,a=e.length;t<a;t++)e[t].major&&i.push(t);return i}function wi(e,t,a){var i,n,r=0,s=t[0];for(a=Math.ceil(a),i=0;i<e.length;i++)n=e[i],i===s?(n._index=i,r++,s=t[r*a]):delete n.label}function Ci(e,t,a,i){var n,r,s,o,l=si(a,0),c=Math.min(si(i,e.length),e.length),d=0;t=Math.ceil(t),i&&(n=i-a,t=n/Math.floor(n/t)),o=l;while(o<0)d++,o=Math.round(l+d*t);for(r=Math.max(l,0);r<c;r++)s=e[r],r===o?(s._index=r,d++,o=Math.round(l+d*t)):delete s.label}X._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:ii.formatters.values,minor:{},major:{}}});var xi=ge.extend({zeroLineIndex:0,getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){ce.callback(this.options.beforeUpdate,[this])},update:function(e,t,a){var i,n,r,s,o,l=this,c=l.options.ticks,d=c.sampleSize;if(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=ce.extend({left:0,right:0,top:0,bottom:0},a),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),s=l.buildTicks()||[],s=l.afterBuildTicks(s)||s,(!s||!s.length)&&l.ticks)for(s=[],i=0,n=l.ticks.length;i<n;++i)s.push({value:l.ticks[i],major:!1});return l._ticks=s,o=d<s.length,r=l._convertTicksToLabels(o?li(s,d):s),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=c.display&&(c.autoSkip||"auto"===c.source)?l._autoSkip(s):s,o&&(r=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=r,l.afterUpdate(),l.minSize},_configure:function(){var e,t,a=this,i=a.options.ticks.reverse;a.isHorizontal()?(e=a.left,t=a.right):(e=a.top,t=a.bottom,i=!i),a._startPixel=e,a._endPixel=t,a._reversePixels=i,a._length=t-e},afterUpdate:function(){ce.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ce.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){ce.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ce.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ce.noop,afterDataLimits:function(){ce.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ce.callback(this.options.beforeBuildTicks,[this])},buildTicks:ce.noop,afterBuildTicks:function(e){var t=this;return ni(e)&&e.length?ce.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=ce.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){ce.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){ce.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ce.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,a,i,n,r,s,o=this,l=o.options,c=l.ticks,d=o.getTicks().length,u=c.minRotation||0,m=c.maxRotation,p=u;!o._isVisible()||!c.display||u>=m||d<=1||!o.isHorizontal()?o.labelRotation=u:(e=o._getLabelSizes(),t=e.widest.width,a=e.highest.height-e.highest.offset,i=Math.min(o.maxWidth,o.chart.width-t),n=l.offset?o.maxWidth/d:i/(d-1),t+6>n&&(n=i/(d-(l.offset?.5:1)),r=o.maxHeight-mi(l.gridLines)-c.padding-pi(l.scaleLabel),s=Math.sqrt(t*t+a*a),p=ce.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/n,1)),Math.asin(Math.min(r/s,1))-Math.asin(a/s))),p=Math.max(u,Math.min(m,p))),o.labelRotation=p)},afterCalculateTickRotation:function(){ce.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ce.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},a=e.chart,i=e.options,n=i.ticks,r=i.scaleLabel,s=i.gridLines,o=e._isVisible(),l="bottom"===i.position,c=e.isHorizontal();if(c?t.width=e.maxWidth:o&&(t.width=mi(s)+pi(r)),c?o&&(t.height=mi(s)+pi(r)):t.height=e.maxHeight,n.display&&o){var d=fi(n),u=e._getLabelSizes(),m=u.first,p=u.last,h=u.widest,f=u.highest,b=.4*d.minor.lineHeight,g=n.padding;if(c){var v=0!==e.labelRotation,y=ce.toRadians(e.labelRotation),w=Math.cos(y),C=Math.sin(y),x=C*h.width+w*(f.height-(v?f.offset:0))+(v?0:b);t.height=Math.min(e.maxHeight,t.height+x+g);var _,D,k=e.getPixelForTick(0)-e.left,S=e.right-e.getPixelForTick(e.getTicks().length-1);v?(_=l?w*m.width+C*m.offset:C*(m.height-m.offset),D=l?C*(p.height-p.offset):w*p.width+C*p.offset):(_=m.width/2,D=p.width/2),e.paddingLeft=Math.max((_-k)*e.width/(e.width-k),0)+3,e.paddingRight=Math.max((D-S)*e.width/(e.width-S),0)+3}else{var M=n.mirror?0:h.width+g+b;t.width=Math.min(e.maxWidth,t.width+M),e.paddingTop=m.height/2,e.paddingBottom=p.height/2}}e.handleMargins(),c?(e.width=e._length=a.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=a.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){ce.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(ri(e))return NaN;if(("number"===typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,a,i,n=this;for(n.ticks=e.map((function(e){return e.value})),n.beforeTickToLabelConversion(),t=n.convertTicksToLabels(e)||n.ticks,n.afterTickToLabelConversion(),a=0,i=e.length;a<i;++a)e[a].label=t[a];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=ui(e.ctx,fi(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,a,i,n;return ni(e)?(t=+this.getRightValue(e[0]),a=+this.getRightValue(e[1]),i=Math.min(t,a),n=Math.max(t,a)):(e=+this.getRightValue(e),t=void 0,a=e,i=e,n=e),{min:i,max:n,start:t,end:a}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:ce.noop,getPixelForValue:ce.noop,getValueForPixel:ce.noop,getPixelForTick:function(e){var t=this,a=t.options.offset,i=t._ticks.length,n=1/Math.max(i-(a?0:1),1);return e<0||e>i-1?null:t.getPixelForDecimal(e*n+(a?n/2:0))},getPixelForDecimal:function(e){var t=this;return t._reversePixels&&(e=1-e),t._startPixel+e*t._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,a=e.max;return e.beginAtZero?0:t<0&&a<0?a:t>0&&a>0?t:0},_autoSkip:function(e){var t,a,i,n,r=this,s=r.options.ticks,o=r._length,l=s.maxTicksLimit||o/r._tickSize()+1,c=s.major.enabled?yi(e):[],d=c.length,u=c[0],m=c[d-1];if(d>l)return wi(e,c,d/l),bi(e);if(i=vi(c,e,o,l),d>0){for(t=0,a=d-1;t<a;t++)Ci(e,i,c[t],c[t+1]);return n=d>1?(m-u)/(d-1):null,Ci(e,i,ce.isNullOrUndef(n)?0:u-n,u),Ci(e,i,m,ce.isNullOrUndef(n)?e.length:m+n),bi(e)}return Ci(e,i),bi(e)},_tickSize:function(){var e=this,t=e.options.ticks,a=ce.toRadians(e.labelRotation),i=Math.abs(Math.cos(a)),n=Math.abs(Math.sin(a)),r=e._getLabelSizes(),s=t.autoSkipPadding||0,o=r?r.widest.width+s:0,l=r?r.highest.height+s:0;return e.isHorizontal()?l*i>o*n?o/i:l/n:l*n<o*i?l/i:o/n},_isVisible:function(){var e,t,a,i=this,n=i.chart,r=i.options.display;if("auto"!==r)return!!r;for(e=0,t=n.data.datasets.length;e<t;++e)if(n.isDatasetVisible(e)&&(a=n.getDatasetMeta(e),a.xAxisID===i.id||a.yAxisID===i.id))return!0;return!1},_computeGridLineItems:function(e){var t,a,i,n,r,s,o,l,c,d,u,m,p,h,f,b,g,v=this,y=v.chart,w=v.options,C=w.gridLines,x=w.position,_=C.offsetGridLines,D=v.isHorizontal(),k=v._ticksToDraw,S=k.length+(_?1:0),M=mi(C),T=[],R=C.drawBorder?oi(C.lineWidth,0,0):0,A=R/2,$=ce._alignPixel,B=function(e){return $(y,e,R)};for("top"===x?(t=B(v.bottom),o=v.bottom-M,c=t-A,u=B(e.top)+A,p=e.bottom):"bottom"===x?(t=B(v.top),u=e.top,p=B(e.bottom)-A,o=t+A,c=v.top+M):"left"===x?(t=B(v.right),s=v.right-M,l=t-A,d=B(e.left)+A,m=e.right):(t=B(v.left),d=e.left,m=B(e.right)-A,s=t+A,l=v.left+M),a=0;a<S;++a)i=k[a]||{},ri(i.label)&&a<k.length||(a===v.zeroLineIndex&&w.offset===_?(h=C.zeroLineWidth,f=C.zeroLineColor,b=C.zeroLineBorderDash||[],g=C.zeroLineBorderDashOffset||0):(h=oi(C.lineWidth,a,1),f=oi(C.color,a,"rgba(0,0,0,0.1)"),b=C.borderDash||[],g=C.borderDashOffset||0),n=ci(v,i._index||a,_),void 0!==n&&(r=$(y,n,h),D?s=l=d=m=r:o=c=u=p=r,T.push({tx1:s,ty1:o,tx2:l,ty2:c,x1:d,y1:u,x2:m,y2:p,width:h,color:f,borderDash:b,borderDashOffset:g})));return T.ticksLength=S,T.borderValue=t,T},_computeLabelItems:function(){var e,t,a,i,n,r,s,o,l,c,d,u,m=this,p=m.options,h=p.ticks,f=p.position,b=h.mirror,g=m.isHorizontal(),v=m._ticksToDraw,y=fi(h),w=h.padding,C=mi(p.gridLines),x=-ce.toRadians(m.labelRotation),_=[];for("top"===f?(r=m.bottom-C-w,s=x?"left":"center"):"bottom"===f?(r=m.top+C+w,s=x?"right":"center"):"left"===f?(n=m.right-(b?0:C)-w,s=b?"left":"right"):(n=m.left+(b?0:C)+w,s=b?"right":"left"),e=0,t=v.length;e<t;++e)a=v[e],i=a.label,ri(i)||(o=m.getPixelForTick(a._index||e)+h.labelOffset,l=a.major?y.major:y.minor,c=l.lineHeight,d=ni(i)?i.length:1,g?(n=o,u="top"===f?((x?1:.5)-d)*c:(x?0:.5)*c):(r=o,u=(1-d)*c/2),_.push({x:n,y:r,rotation:x,label:i,font:l,textOffset:u,textAlign:s}));return _},_drawGrid:function(e){var t=this,a=t.options.gridLines;if(a.display){var i,n,r,s,o,l=t.ctx,c=t.chart,d=ce._alignPixel,u=a.drawBorder?oi(a.lineWidth,0,0):0,m=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(r=0,s=m.length;r<s;++r)o=m[r],i=o.width,n=o.color,i&&n&&(l.save(),l.lineWidth=i,l.strokeStyle=n,l.setLineDash&&(l.setLineDash(o.borderDash),l.lineDashOffset=o.borderDashOffset),l.beginPath(),a.drawTicks&&(l.moveTo(o.tx1,o.ty1),l.lineTo(o.tx2,o.ty2)),a.drawOnChartArea&&(l.moveTo(o.x1,o.y1),l.lineTo(o.x2,o.y2)),l.stroke(),l.restore());if(u){var p,h,f,b,g=u,v=oi(a.lineWidth,m.ticksLength-1,1),y=m.borderValue;t.isHorizontal()?(p=d(c,t.left,g)-g/2,h=d(c,t.right,v)+v/2,f=b=y):(f=d(c,t.top,g)-g/2,b=d(c,t.bottom,v)+v/2,p=h=y),l.lineWidth=u,l.strokeStyle=oi(a.color,0),l.beginPath(),l.moveTo(p,f),l.lineTo(h,b),l.stroke()}}},_drawLabels:function(){var e=this,t=e.options.ticks;if(t.display){var a,i,n,r,s,o,l,c,d=e.ctx,u=e._labelItems||(e._labelItems=e._computeLabelItems());for(a=0,n=u.length;a<n;++a){if(s=u[a],o=s.font,d.save(),d.translate(s.x,s.y),d.rotate(s.rotation),d.font=o.string,d.fillStyle=o.color,d.textBaseline="middle",d.textAlign=s.textAlign,l=s.label,c=s.textOffset,ni(l))for(i=0,r=l.length;i<r;++i)d.fillText(""+l[i],0,c),c+=o.lineHeight;else d.fillText(l,0,c);d.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,a=e.options,i=a.scaleLabel;if(i.display){var n,r,s=si(i.fontColor,X.global.defaultFontColor),o=ce.options._parseFont(i),l=ce.options.toPadding(i.padding),c=o.lineHeight/2,d=a.position,u=0;if(e.isHorizontal())n=e.left+e.width/2,r="bottom"===d?e.bottom-c-l.bottom:e.top+c+l.top;else{var m="left"===d;n=m?e.left+c+l.top:e.right-c-l.top,r=e.top+e.height/2,u=m?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(n,r),t.rotate(u),t.textAlign="center",t.textBaseline="middle",t.fillStyle=s,t.font=o.string,t.fillText(i.labelString,0,0),t.restore()}},draw:function(e){var t=this;t._isVisible()&&(t._drawGrid(e),t._drawTitle(),t._drawLabels())},_layers:function(){var e=this,t=e.options,a=t.ticks&&t.ticks.z||0,i=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&a!==i&&e.draw===e._draw?[{z:i,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:a,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:a,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,a=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter((function(i){return(!e||i.type===e)&&(a?i.xAxisID===t.id:i.yAxisID===t.id)}))}});xi.prototype._draw=xi.prototype.draw;var _i=xi,Di=ce.isNullOrUndef,ki={position:"bottom"},Si=_i.extend({determineDataLimits:function(){var e,t=this,a=t._getLabels(),i=t.options.ticks,n=i.min,r=i.max,s=0,o=a.length-1;void 0!==n&&(e=a.indexOf(n),e>=0&&(s=e)),void 0!==r&&(e=a.indexOf(r),e>=0&&(o=e)),t.minIndex=s,t.maxIndex=o,t.min=a[s],t.max=a[o]},buildTicks:function(){var e=this,t=e._getLabels(),a=e.minIndex,i=e.maxIndex;e.ticks=0===a&&i===t.length-1?t:t.slice(a,i+1)},getLabelForIndex:function(e,t){var a=this,i=a.chart;return i.getDatasetMeta(t).controller._getValueScaleId()===a.id?a.getRightValue(i.data.datasets[t].data[e]):a._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,a=e.ticks;_i.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),a&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(a.length-(t?0:1),1))},getPixelForValue:function(e,t,a){var i,n,r,s=this;return Di(t)||Di(a)||(e=s.chart.data.datasets[a].data[t]),Di(e)||(i=s.isHorizontal()?e.x:e.y),(void 0!==i||void 0!==e&&isNaN(t))&&(n=s._getLabels(),e=ce.valueOrDefault(i,e),r=n.indexOf(e),t=-1!==r?r:t,isNaN(t)&&(t=e)),s.getPixelForDecimal((t-s._startValue)/s._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=this,a=Math.round(t._startValue+t.getDecimalForPixel(e)*t._valueRange);return Math.min(Math.max(a,0),t.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Mi=ki;Si._defaults=Mi;var Ti=ce.noop,Ri=ce.isNullOrUndef;function Ai(e,t){var a,i,n,r,s=[],o=1e-14,l=e.stepSize,c=l||1,d=e.maxTicks-1,u=e.min,m=e.max,p=e.precision,h=t.min,f=t.max,b=ce.niceNum((f-h)/d/c)*c;if(b<o&&Ri(u)&&Ri(m))return[h,f];r=Math.ceil(f/b)-Math.floor(h/b),r>d&&(b=ce.niceNum(r*b/d/c)*c),l||Ri(p)?a=Math.pow(10,ce._decimalPlaces(b)):(a=Math.pow(10,p),b=Math.ceil(b*a)/a),i=Math.floor(h/b)*b,n=Math.ceil(f/b)*b,l&&(!Ri(u)&&ce.almostWhole(u/b,b/1e3)&&(i=u),!Ri(m)&&ce.almostWhole(m/b,b/1e3)&&(n=m)),r=(n-i)/b,r=ce.almostEquals(r,Math.round(r),b/1e3)?Math.round(r):Math.ceil(r),i=Math.round(i*a)/a,n=Math.round(n*a)/a,s.push(Ri(u)?i:u);for(var g=1;g<r;++g)s.push(Math.round((i+g*b)*a)/a);return s.push(Ri(m)?n:m),s}var $i=_i.extend({getRightValue:function(e){return"string"===typeof e?+e:_i.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options,a=t.ticks;if(a.beginAtZero){var i=ce.sign(e.min),n=ce.sign(e.max);i<0&&n<0?e.max=0:i>0&&n>0&&(e.min=0)}var r=void 0!==a.min||void 0!==a.suggestedMin,s=void 0!==a.max||void 0!==a.suggestedMax;void 0!==a.min?e.min=a.min:void 0!==a.suggestedMin&&(null===e.min?e.min=a.suggestedMin:e.min=Math.min(e.min,a.suggestedMin)),void 0!==a.max?e.max=a.max:void 0!==a.suggestedMax&&(null===e.max?e.max=a.suggestedMax:e.max=Math.max(e.max,a.suggestedMax)),r!==s&&e.min>=e.max&&(r?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,a.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this,a=t.options.ticks,i=a.stepSize,n=a.maxTicksLimit;return i?e=Math.ceil(t.max/i)-Math.floor(t.min/i)+1:(e=t._computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Ti,buildTicks:function(){var e=this,t=e.options,a=t.ticks,i=e.getTickLimit();i=Math.max(2,i);var n={maxTicks:i,min:a.min,max:a.max,precision:a.precision,stepSize:ce.valueOrDefault(a.fixedStepSize,a.stepSize)},r=e.ticks=Ai(n,e);e.handleDirectionalChanges(),e.max=ce.max(r),e.min=ce.min(r),a.reverse?(r.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),_i.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,a=t.getTicks(),i=t.min,n=t.max;_i.prototype._configure.call(t),t.options.offset&&a.length&&(e=(n-i)/Math.max(a.length-1,1)/2,i-=e,n+=e),t._startValue=i,t._endValue=n,t._valueRange=n-i}}),Bi={position:"left",ticks:{callback:ii.formatters.linear}},Pi=0,Ni=1;function Ii(e,t,a){var i=[a.type,void 0===t&&void 0===a.stack?a.index:"",a.stack].join(".");return void 0===e[i]&&(e[i]={pos:[],neg:[]}),e[i]}function Oi(e,t,a,i){var n,r,s=e.options,o=s.stacked,l=Ii(t,o,a),c=l.pos,d=l.neg,u=i.length;for(n=0;n<u;++n)r=e._parseValue(i[n]),isNaN(r.min)||isNaN(r.max)||a.data[n].hidden||(c[n]=c[n]||0,d[n]=d[n]||0,s.relativePoints?c[n]=100:r.min<0||r.max<0?d[n]+=r.min:c[n]+=r.max)}function Yi(e,t,a){var i,n,r=a.length;for(i=0;i<r;++i)n=e._parseValue(a[i]),isNaN(n.min)||isNaN(n.max)||t.data[i].hidden||(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}var Ei=$i.extend({determineDataLimits:function(){var e,t,a,i,n=this,r=n.options,s=n.chart,o=s.data.datasets,l=n._getMatchingVisibleMetas(),c=r.stacked,d={},u=l.length;if(n.min=Number.POSITIVE_INFINITY,n.max=Number.NEGATIVE_INFINITY,void 0===c)for(e=0;!c&&e<u;++e)t=l[e],c=void 0!==t.stack;for(e=0;e<u;++e)t=l[e],a=o[t.index].data,c?Oi(n,d,t,a):Yi(n,t,a);ce.each(d,(function(e){i=e.pos.concat(e.neg),n.min=Math.min(n.min,ce.min(i)),n.max=Math.max(n.max,ce.max(i))})),n.min=ce.isFinite(n.min)&&!isNaN(n.min)?n.min:Pi,n.max=ce.isFinite(n.max)&&!isNaN(n.max)?n.max:Ni,n.handleTickRangeOptions()},_computeTickLimit:function(){var e,t=this;return t.isHorizontal()?Math.ceil(t.width/40):(e=ce.options._parseFont(t.options.ticks),Math.ceil(t.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this;return t.getPixelForDecimal((+t.getRightValue(e)-t._startValue)/t._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),Fi=Bi;Ei._defaults=Fi;var qi=ce.valueOrDefault,Li=ce.math.log10;function Ui(e,t){var a,i,n=[],r=qi(e.min,Math.pow(10,Math.floor(Li(t.min)))),s=Math.floor(Li(t.max)),o=Math.ceil(t.max/Math.pow(10,s));0===r?(a=Math.floor(Li(t.minNotZero)),i=Math.floor(t.minNotZero/Math.pow(10,a)),n.push(r),r=i*Math.pow(10,a)):(a=Math.floor(Li(r)),i=Math.floor(r/Math.pow(10,a)));var l=a<0?Math.pow(10,Math.abs(a)):1;do{n.push(r),++i,10===i&&(i=1,++a,l=a>=0?1:l),r=Math.round(i*Math.pow(10,a)*l)/l}while(a<s||a===s&&i<o);var c=qi(e.max,r);return n.push(c),n}var Vi={position:"left",ticks:{callback:ii.formatters.logarithmic}};function zi(e,t){return ce.isFinite(e)&&e>=0?e:t}var ji=_i.extend({determineDataLimits:function(){var e,t,a,i,n,r,s=this,o=s.options,l=s.chart,c=l.data.datasets,d=s.isHorizontal();function u(e){return d?e.xAxisID===s.id:e.yAxisID===s.id}s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,s.minNotZero=Number.POSITIVE_INFINITY;var m=o.stacked;if(void 0===m)for(e=0;e<c.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&u(t)&&void 0!==t.stack){m=!0;break}if(o.stacked||m){var p={};for(e=0;e<c.length;e++){t=l.getDatasetMeta(e);var h=[t.type,void 0===o.stacked&&void 0===t.stack?e:"",t.stack].join(".");if(l.isDatasetVisible(e)&&u(t))for(void 0===p[h]&&(p[h]=[]),i=c[e].data,n=0,r=i.length;n<r;n++){var f=p[h];a=s._parseValue(i[n]),isNaN(a.min)||isNaN(a.max)||t.data[n].hidden||a.min<0||a.max<0||(f[n]=f[n]||0,f[n]+=a.max)}}ce.each(p,(function(e){if(e.length>0){var t=ce.min(e),a=ce.max(e);s.min=Math.min(s.min,t),s.max=Math.max(s.max,a)}}))}else for(e=0;e<c.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&u(t))for(i=c[e].data,n=0,r=i.length;n<r;n++)a=s._parseValue(i[n]),isNaN(a.min)||isNaN(a.max)||t.data[n].hidden||a.min<0||a.max<0||(s.min=Math.min(a.min,s.min),s.max=Math.max(a.max,s.max),0!==a.min&&(s.minNotZero=Math.min(a.min,s.minNotZero)));s.min=ce.isFinite(s.min)?s.min:null,s.max=ce.isFinite(s.max)?s.max:null,s.minNotZero=ce.isFinite(s.minNotZero)?s.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks,a=1,i=10;e.min=zi(t.min,e.min),e.max=zi(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(Li(e.min))-1),e.max=Math.pow(10,Math.floor(Li(e.max))+1)):(e.min=a,e.max=i)),null===e.min&&(e.min=Math.pow(10,Math.floor(Li(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(Li(e.min))+1):i),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(Li(e.max))):e.minNotZero=a)},buildTicks:function(){var e=this,t=e.options.ticks,a=!e.isHorizontal(),i={min:zi(t.min),max:zi(t.max)},n=e.ticks=Ui(i,e);e.max=ce.max(n),e.min=ce.min(n),t.reverse?(a=!a,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),a&&n.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),_i.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(Li(e)),a=Math.floor(e/Math.pow(10,t));return a*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,a=0;_i.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),a=qi(e.options.ticks.fontSize,X.global.defaultFontSize)/e._length),e._startValue=Li(t),e._valueOffset=a,e._valueRange=(Li(e.max)-Li(t))/(1-a)},getPixelForValue:function(e){var t=this,a=0;return e=+t.getRightValue(e),e>t.min&&e>0&&(a=(Li(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(a)},getValueForPixel:function(e){var t=this,a=t.getDecimalForPixel(e);return 0===a&&0===t.min?0:Math.pow(10,t._startValue+(a-t._valueOffset)*t._valueRange)}}),Wi=Vi;ji._defaults=Wi;var Hi=ce.valueOrDefault,Ki=ce.valueAtIndexOrDefault,Gi=ce.options.resolve,Zi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:ii.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Xi(e){var t=e.ticks;return t.display&&e.display?Hi(t.fontSize,X.global.defaultFontSize)+2*t.backdropPaddingY:0}function Ji(e,t,a){return ce.isArray(a)?{w:ce.longestText(e,e.font,a),h:a.length*t}:{w:e.measureText(a).width,h:t}}function Qi(e,t,a,i,n){return e===i||e===n?{start:t-a/2,end:t+a/2}:e<i||e>n?{start:t-a,end:t}:{start:t,end:t+a}}function en(e){var t,a,i,n=ce.options._parseFont(e.options.pointLabels),r={l:0,r:e.width,t:0,b:e.height-e.paddingTop},s={};e.ctx.font=n.string,e._pointLabelSizes=[];var o=e.chart.data.labels.length;for(t=0;t<o;t++){i=e.getPointPosition(t,e.drawingArea+5),a=Ji(e.ctx,n.lineHeight,e.pointLabels[t]),e._pointLabelSizes[t]=a;var l=e.getIndexAngle(t),c=ce.toDegrees(l)%360,d=Qi(c,i.x,a.w,0,180),u=Qi(c,i.y,a.h,90,270);d.start<r.l&&(r.l=d.start,s.l=l),d.end>r.r&&(r.r=d.end,s.r=l),u.start<r.t&&(r.t=u.start,s.t=l),u.end>r.b&&(r.b=u.end,s.b=l)}e.setReductions(e.drawingArea,r,s)}function tn(e){return 0===e||180===e?"center":e<180?"left":"right"}function an(e,t,a,i){var n,r,s=a.y+i/2;if(ce.isArray(t))for(n=0,r=t.length;n<r;++n)e.fillText(t[n],a.x,s),s+=i;else e.fillText(t,a.x,s)}function nn(e,t,a){90===e||270===e?a.y-=t.h/2:(e>270||e<90)&&(a.y-=t.h)}function rn(e){var t=e.ctx,a=e.options,i=a.pointLabels,n=Xi(a),r=e.getDistanceFromCenterForValue(a.ticks.reverse?e.min:e.max),s=ce.options._parseFont(i);t.save(),t.font=s.string,t.textBaseline="middle";for(var o=e.chart.data.labels.length-1;o>=0;o--){var l=0===o?n/2:0,c=e.getPointPosition(o,r+l+5),d=Ki(i.fontColor,o,X.global.defaultFontColor);t.fillStyle=d;var u=e.getIndexAngle(o),m=ce.toDegrees(u);t.textAlign=tn(m),nn(m,e._pointLabelSizes[o],c),an(t,e.pointLabels[o],c,s.lineHeight)}t.restore()}function sn(e,t,a,i){var n,r=e.ctx,s=t.circular,o=e.chart.data.labels.length,l=Ki(t.color,i-1),c=Ki(t.lineWidth,i-1);if((s||o)&&l&&c){if(r.save(),r.strokeStyle=l,r.lineWidth=c,r.setLineDash&&(r.setLineDash(t.borderDash||[]),r.lineDashOffset=t.borderDashOffset||0),r.beginPath(),s)r.arc(e.xCenter,e.yCenter,a,0,2*Math.PI);else{n=e.getPointPosition(0,a),r.moveTo(n.x,n.y);for(var d=1;d<o;d++)n=e.getPointPosition(d,a),r.lineTo(n.x,n.y)}r.closePath(),r.stroke(),r.restore()}}function on(e){return ce.isNumber(e)?e:0}var ln=$i.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Xi(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;ce.each(t.data.datasets,(function(n,r){if(t.isDatasetVisible(r)){var s=t.getDatasetMeta(r);ce.each(n.data,(function(t,n){var r=+e.getRightValue(t);isNaN(r)||s.data[n].hidden||(a=Math.min(r,a),i=Math.max(r,i))}))}})),e.min=a===Number.POSITIVE_INFINITY?0:a,e.max=i===Number.NEGATIVE_INFINITY?0:i,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Xi(this.options))},convertTicksToLabels:function(){var e=this;$i.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map((function(){var t=ce.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""}))},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this,t=e.options;t.display&&t.pointLabels.display?en(e):e.setCenterPoint(0,0,0,0)},setReductions:function(e,t,a){var i=this,n=t.l/Math.sin(a.l),r=Math.max(t.r-i.width,0)/Math.sin(a.r),s=-t.t/Math.cos(a.t),o=-Math.max(t.b-(i.height-i.paddingTop),0)/Math.cos(a.b);n=on(n),r=on(r),s=on(s),o=on(o),i.drawingArea=Math.min(Math.floor(e-(n+r)/2),Math.floor(e-(s+o)/2)),i.setCenterPoint(n,r,s,o)},setCenterPoint:function(e,t,a,i){var n=this,r=n.width-t-n.drawingArea,s=e+n.drawingArea,o=a+n.drawingArea,l=n.height-n.paddingTop-i-n.drawingArea;n.xCenter=Math.floor((s+r)/2+n.left),n.yCenter=Math.floor((o+l)/2+n.top+n.paddingTop)},getIndexAngle:function(e){var t=this.chart,a=360/t.data.labels.length,i=t.options||{},n=i.startAngle||0,r=(e*a+n)%360;return(r<0?r+360:r)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(ce.isNullOrUndef(e))return NaN;var a=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*a:(e-t.min)*a},getPointPosition:function(e,t){var a=this,i=a.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(i)*t+a.xCenter,y:Math.sin(i)*t+a.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this,a=t.min,i=t.max;return t.getPointPositionForValue(e||0,t.beginAtZero?0:a<0&&i<0?i:a>0&&i>0?a:0)},_drawGrid:function(){var e,t,a,i=this,n=i.ctx,r=i.options,s=r.gridLines,o=r.angleLines,l=Hi(o.lineWidth,s.lineWidth),c=Hi(o.color,s.color);if(r.pointLabels.display&&rn(i),s.display&&ce.each(i.ticks,(function(e,a){0!==a&&(t=i.getDistanceFromCenterForValue(i.ticksAsNumbers[a]),sn(i,s,t,a))})),o.display&&l&&c){for(n.save(),n.lineWidth=l,n.strokeStyle=c,n.setLineDash&&(n.setLineDash(Gi([o.borderDash,s.borderDash,[]])),n.lineDashOffset=Gi([o.borderDashOffset,s.borderDashOffset,0])),e=i.chart.data.labels.length-1;e>=0;e--)t=i.getDistanceFromCenterForValue(r.ticks.reverse?i.min:i.max),a=i.getPointPosition(e,t),n.beginPath(),n.moveTo(i.xCenter,i.yCenter),n.lineTo(a.x,a.y),n.stroke();n.restore()}},_drawLabels:function(){var e=this,t=e.ctx,a=e.options,i=a.ticks;if(i.display){var n,r,s=e.getIndexAngle(0),o=ce.options._parseFont(i),l=Hi(i.fontColor,X.global.defaultFontColor);t.save(),t.font=o.string,t.translate(e.xCenter,e.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",ce.each(e.ticks,(function(a,s){(0!==s||i.reverse)&&(n=e.getDistanceFromCenterForValue(e.ticksAsNumbers[s]),i.showLabelBackdrop&&(r=t.measureText(a).width,t.fillStyle=i.backdropColor,t.fillRect(-r/2-i.backdropPaddingX,-n-o.size/2-i.backdropPaddingY,r+2*i.backdropPaddingX,o.size+2*i.backdropPaddingY)),t.fillStyle=l,t.fillText(a,0,-n))})),t.restore()}},_drawTitle:ce.noop}),cn=Zi;ln._defaults=cn;var dn=ce._deprecated,un=ce.options.resolve,mn=ce.valueOrDefault,pn=Number.MIN_SAFE_INTEGER||-9007199254740991,hn=Number.MAX_SAFE_INTEGER||9007199254740991,fn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bn=Object.keys(fn);function gn(e,t){return e-t}function vn(e){var t,a,i,n={},r=[];for(t=0,a=e.length;t<a;++t)i=e[t],n[i]||(n[i]=!0,r.push(i));return r}function yn(e){return ce.valueOrDefault(e.time.min,e.ticks.min)}function wn(e){return ce.valueOrDefault(e.time.max,e.ticks.max)}function Cn(e,t,a,i){if("linear"===i||!e.length)return[{time:t,pos:0},{time:a,pos:1}];var n,r,s,o,l,c=[],d=[t];for(n=0,r=e.length;n<r;++n)o=e[n],o>t&&o<a&&d.push(o);for(d.push(a),n=0,r=d.length;n<r;++n)l=d[n+1],s=d[n-1],o=d[n],void 0!==s&&void 0!==l&&Math.round((l+s)/2)===o||c.push({time:o,pos:n/(r-1)});return c}function xn(e,t,a){var i,n,r,s=0,o=e.length-1;while(s>=0&&s<=o){if(i=s+o>>1,n=e[i-1]||null,r=e[i],!n)return{lo:null,hi:r};if(r[t]<a)s=i+1;else{if(!(n[t]>a))return{lo:n,hi:r};o=i-1}}return{lo:r,hi:null}}function _n(e,t,a,i){var n=xn(e,t,a),r=n.lo?n.hi?n.lo:e[e.length-2]:e[0],s=n.lo?n.hi?n.hi:e[e.length-1]:e[1],o=s[t]-r[t],l=o?(a-r[t])/o:0,c=(s[i]-r[i])*l;return r[i]+c}function Dn(e,t){var a=e._adapter,i=e.options.time,n=i.parser,r=n||i.format,s=t;return"function"===typeof n&&(s=n(s)),ce.isFinite(s)||(s="string"===typeof r?a.parse(s,r):a.parse(s)),null!==s?+s:(n||"function"!==typeof r||(s=r(t),ce.isFinite(s)||(s=a.parse(s))),s)}function kn(e,t){if(ce.isNullOrUndef(t))return null;var a=e.options.time,i=Dn(e,e.getRightValue(t));return null===i||a.round&&(i=+e._adapter.startOf(i,a.round)),i}function Sn(e,t,a,i){var n,r,s,o=bn.length;for(n=bn.indexOf(e);n<o-1;++n)if(r=fn[bn[n]],s=r.steps?r.steps:hn,r.common&&Math.ceil((a-t)/(s*r.size))<=i)return bn[n];return bn[o-1]}function Mn(e,t,a,i,n){var r,s;for(r=bn.length-1;r>=bn.indexOf(a);r--)if(s=bn[r],fn[s].common&&e._adapter.diff(n,i,s)>=t-1)return s;return bn[a?bn.indexOf(a):0]}function Tn(e){for(var t=bn.indexOf(e)+1,a=bn.length;t<a;++t)if(fn[bn[t]].common)return bn[t]}function Rn(e,t,a,i){var n,r=e._adapter,s=e.options,o=s.time,l=o.unit||Sn(o.minUnit,t,a,i),c=un([o.stepSize,o.unitStepSize,1]),d="week"===l&&o.isoWeekday,u=t,m=[];if(d&&(u=+r.startOf(u,"isoWeek",d)),u=+r.startOf(u,d?"day":l),r.diff(a,t,l)>1e5*c)throw t+" and "+a+" are too far apart with stepSize of "+c+" "+l;for(n=u;n<a;n=+r.add(n,c,l))m.push(n);return n!==a&&"ticks"!==s.bounds||m.push(n),m}function An(e,t,a,i,n){var r,s,o=0,l=0;return n.offset&&t.length&&(r=_n(e,"time",t[0],"pos"),o=1===t.length?1-r:(_n(e,"time",t[1],"pos")-r)/2,s=_n(e,"time",t[t.length-1],"pos"),l=1===t.length?s:(s-_n(e,"time",t[t.length-2],"pos"))/2),{start:o,end:l,factor:1/(o+1+l)}}function $n(e,t,a,i){var n,r,s=e._adapter,o=+s.startOf(t[0].value,i),l=t[t.length-1].value;for(n=o;n<=l;n=+s.add(n,1,i))r=a[n],r>=0&&(t[r].major=!0);return t}function Bn(e,t,a){var i,n,r=[],s={},o=t.length;for(i=0;i<o;++i)n=t[i],s[n]=i,r.push({value:n,major:!1});return 0!==o&&a?$n(e,r,s,a):r}var Pn={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Nn=_i.extend({initialize:function(){this.mergeTicksOptions(),_i.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,a=t.time||(t.time={}),i=e._adapter=new ai._date(t.adapters.date);return dn("time scale",a.format,"time.format","time.parser"),dn("time scale",a.min,"time.min","ticks.min"),dn("time scale",a.max,"time.max","ticks.max"),ce.mergeIf(a.displayFormats,i.formats()),_i.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),_i.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,a,i,n,r,s,o=this,l=o.chart,c=o._adapter,d=o.options,u=d.time.unit||"day",m=hn,p=pn,h=[],f=[],b=[],g=o._getLabels();for(e=0,a=g.length;e<a;++e)b.push(kn(o,g[e]));for(e=0,a=(l.data.datasets||[]).length;e<a;++e)if(l.isDatasetVisible(e))if(n=l.data.datasets[e].data,ce.isObject(n[0]))for(f[e]=[],t=0,i=n.length;t<i;++t)r=kn(o,n[t]),h.push(r),f[e][t]=r;else f[e]=b.slice(0),s||(h=h.concat(b),s=!0);else f[e]=[];b.length&&(m=Math.min(m,b[0]),p=Math.max(p,b[b.length-1])),h.length&&(h=a>1?vn(h).sort(gn):h.sort(gn),m=Math.min(m,h[0]),p=Math.max(p,h[h.length-1])),m=kn(o,yn(d))||m,p=kn(o,wn(d))||p,m=m===hn?+c.startOf(Date.now(),u):m,p=p===pn?+c.endOf(Date.now(),u)+1:p,o.min=Math.min(m,p),o.max=Math.max(m+1,p),o._table=[],o._timestamps={data:h,datasets:f,labels:b}},buildTicks:function(){var e,t,a,i=this,n=i.min,r=i.max,s=i.options,o=s.ticks,l=s.time,c=i._timestamps,d=[],u=i.getLabelCapacity(n),m=o.source,p=s.distribution;for(c="data"===m||"auto"===m&&"series"===p?c.data:"labels"===m?c.labels:Rn(i,n,r,u),"ticks"===s.bounds&&c.length&&(n=c[0],r=c[c.length-1]),n=kn(i,yn(s))||n,r=kn(i,wn(s))||r,e=0,t=c.length;e<t;++e)a=c[e],a>=n&&a<=r&&d.push(a);return i.min=n,i.max=r,i._unit=l.unit||(o.autoSkip?Sn(l.minUnit,i.min,i.max,u):Mn(i,d.length,l.minUnit,i.min,i.max)),i._majorUnit=o.major.enabled&&"year"!==i._unit?Tn(i._unit):void 0,i._table=Cn(i._timestamps.data,n,r,p),i._offsets=An(i._table,d,n,r,s),o.reverse&&d.reverse(),Bn(i,d,i._majorUnit)},getLabelForIndex:function(e,t){var a=this,i=a._adapter,n=a.chart.data,r=a.options.time,s=n.labels&&e<n.labels.length?n.labels[e]:"",o=n.datasets[t].data[e];return ce.isObject(o)&&(s=a.getRightValue(o)),r.tooltipFormat?i.format(Dn(a,s),r.tooltipFormat):"string"===typeof s?s:i.format(Dn(a,s),r.displayFormats.datetime)},tickFormatFunction:function(e,t,a,i){var n=this,r=n._adapter,s=n.options,o=s.time.displayFormats,l=o[n._unit],c=n._majorUnit,d=o[c],u=a[t],m=s.ticks,p=c&&d&&u&&u.major,h=r.format(e,i||(p?d:l)),f=p?m.major:m.minor,b=un([f.callback,f.userCallback,m.callback,m.userCallback]);return b?b(h,t,a):h},convertTicksToLabels:function(e){var t,a,i=[];for(t=0,a=e.length;t<a;++t)i.push(this.tickFormatFunction(e[t].value,t,e));return i},getPixelForOffset:function(e){var t=this,a=t._offsets,i=_n(t._table,"time",e,"pos");return t.getPixelForDecimal((a.start+i)*a.factor)},getPixelForValue:function(e,t,a){var i=this,n=null;if(void 0!==t&&void 0!==a&&(n=i._timestamps.datasets[a][t]),null===n&&(n=kn(i,e)),null!==n)return i.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,a=t._offsets,i=t.getDecimalForPixel(e)/a.factor-a.end,n=_n(t._table,"pos",i,"time");return t._adapter._create(n)},_getLabelSize:function(e){var t=this,a=t.options.ticks,i=t.ctx.measureText(e).width,n=ce.toRadians(t.isHorizontal()?a.maxRotation:a.minRotation),r=Math.cos(n),s=Math.sin(n),o=mn(a.fontSize,X.global.defaultFontSize);return{w:i*r+o*s,h:i*s+o*r}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,a=t.options.time,i=a.displayFormats,n=i[a.unit]||i.millisecond,r=t.tickFormatFunction(e,0,Bn(t,[e],t._majorUnit),n),s=t._getLabelSize(r),o=Math.floor(t.isHorizontal()?t.width/s.w:t.height/s.h);return t.options.offset&&o--,o>0?o:1}}),In=Pn;Nn._defaults=In;var On={category:Si,linear:Ei,logarithmic:ji,radialLinear:ln,time:Nn},Yn={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};ai._date.override("function"===typeof e?{_id:"moment",formats:function(){return Yn},parse:function(t,a){return"string"===typeof t&&"string"===typeof a?t=e(t,a):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,a){return e(t).format(a)},add:function(t,a,i){return e(t).add(a,i).valueOf()},diff:function(t,a,i){return e(t).diff(e(a),i)},startOf:function(t,a,i){return t=e(t),"isoWeek"===a?t.isoWeekday(i).valueOf():t.startOf(a).valueOf()},endOf:function(t,a){return e(t).endOf(a).valueOf()},_create:function(t){return e(t)}}:{}),X._set("global",{plugins:{filler:{propagate:!0}}});var En={dataset:function(e){var t=e.fill,a=e.chart,i=a.getDatasetMeta(t),n=i&&a.isDatasetVisible(t),r=n&&i.dataset._children||[],s=r.length||0;return s?function(e,t){return t<s&&r[t]._view||null}:null},boundary:function(e){var t=e.boundary,a=t?t.x:null,i=t?t.y:null;return ce.isArray(t)?function(e,a){return t[a]}:function(e){return{x:null===a?e.x:a,y:null===i?e.y:i}}}};function Fn(e,t,a){var i,n=e._model||{},r=n.fill;if(void 0===r&&(r=!!n.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(i=parseFloat(r,10),isFinite(i)&&Math.floor(i)===i)return"-"!==r[0]&&"+"!==r[0]||(i=t+i),!(i===t||i<0||i>=a)&&i;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function qn(e){var t,a=e.el._model||{},i=e.el._scale||{},n=e.fill,r=null;if(isFinite(n))return null;if("start"===n?r=void 0===a.scaleBottom?i.bottom:a.scaleBottom:"end"===n?r=void 0===a.scaleTop?i.top:a.scaleTop:void 0!==a.scaleZero?r=a.scaleZero:i.getBasePixel&&(r=i.getBasePixel()),void 0!==r&&null!==r){if(void 0!==r.x&&void 0!==r.y)return r;if(ce.isFinite(r))return t=i.isHorizontal(),{x:t?r:null,y:t?null:r}}return null}function Ln(e){var t,a,i,n,r,s=e.el._scale,o=s.options,l=s.chart.data.labels.length,c=e.fill,d=[];if(!l)return null;for(t=o.ticks.reverse?s.max:s.min,a=o.ticks.reverse?s.min:s.max,i=s.getPointPositionForValue(0,t),n=0;n<l;++n)r="start"===c||"end"===c?s.getPointPositionForValue(n,"start"===c?t:a):s.getBasePosition(n),o.gridLines.circular&&(r.cx=i.x,r.cy=i.y,r.angle=s.getIndexAngle(n)-Math.PI/2),d.push(r);return d}function Un(e){var t=e.el._scale||{};return t.getPointPositionForValue?Ln(e):qn(e)}function Vn(e,t,a){var i,n=e[t],r=n.fill,s=[t];if(!a)return r;while(!1!==r&&-1===s.indexOf(r)){if(!isFinite(r))return r;if(i=e[r],!i)return!1;if(i.visible)return r;s.push(r),r=i.fill}return!1}function zn(e){var t=e.fill,a="dataset";return!1===t?null:(isFinite(t)||(a="boundary"),En[a](e))}function jn(e){return e&&!e.skip}function Wn(e,t,a,i,n){var r,s,o,l;if(i&&n){for(e.moveTo(t[0].x,t[0].y),r=1;r<i;++r)ce.canvas.lineTo(e,t[r-1],t[r]);if(void 0===a[0].angle)for(e.lineTo(a[n-1].x,a[n-1].y),r=n-1;r>0;--r)ce.canvas.lineTo(e,a[r],a[r-1],!0);else for(s=a[0].cx,o=a[0].cy,l=Math.sqrt(Math.pow(a[0].x-s,2)+Math.pow(a[0].y-o,2)),r=n-1;r>0;--r)e.arc(s,o,l,a[r].angle,a[r-1].angle,!0)}}function Hn(e,t,a,i,n,r){var s,o,l,c,d,u,m,p,h=t.length,f=i.spanGaps,b=[],g=[],v=0,y=0;for(e.beginPath(),s=0,o=h;s<o;++s)l=s%h,c=t[l]._view,d=a(c,l,i),u=jn(c),m=jn(d),r&&void 0===p&&u&&(p=s+1,o=h+p),u&&m?(v=b.push(c),y=g.push(d)):v&&y&&(f?(u&&b.push(c),m&&g.push(d)):(Wn(e,b,g,v,y),v=y=0,b=[],g=[]));Wn(e,b,g,v,y),e.closePath(),e.fillStyle=n,e.fill()}var Kn={id:"filler",afterDatasetsUpdate:function(e,t){var a,i,n,r,s=(e.data.datasets||[]).length,o=t.propagate,l=[];for(i=0;i<s;++i)a=e.getDatasetMeta(i),n=a.dataset,r=null,n&&n._model&&n instanceof Ge.Line&&(r={visible:e.isDatasetVisible(i),fill:Fn(n,i,s),chart:e,el:n}),a.$filler=r,l.push(r);for(i=0;i<s;++i)r=l[i],r&&(r.fill=Vn(l,i,o),r.boundary=Un(r),r.mapper=zn(r))},beforeDatasetsDraw:function(e){var t,a,i,n,r,s,o,l=e._getSortedVisibleDatasetMetas(),c=e.ctx;for(a=l.length-1;a>=0;--a)t=l[a].$filler,t&&t.visible&&(i=t.el,n=i._view,r=i._children||[],s=t.mapper,o=n.backgroundColor||X.global.defaultColor,s&&o&&r.length&&(ce.canvas.clipArea(c,e.chartArea),Hn(c,r,s,n,o,i._loop),ce.canvas.unclipArea(c)))}},Gn=ce.rtl.getRtlAdapter,Zn=ce.noop,Xn=ce.valueOrDefault;function Jn(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}X._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var a=t.datasetIndex,i=this.chart,n=i.getDatasetMeta(a);n.hidden=null===n.hidden?!i.data.datasets[a].hidden:null,i.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,a=e.options.legend||{},i=a.labels&&a.labels.usePointStyle;return e._getSortedDatasetMetas().map((function(a){var n=a.controller.getStyle(i?0:void 0);return{text:t[a.index].label,fillStyle:n.backgroundColor,hidden:!e.isDatasetVisible(a.index),lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:n.borderWidth,strokeStyle:n.borderColor,pointStyle:n.pointStyle,rotation:n.rotation,datasetIndex:a.index}}),this)}}},legendCallback:function(e){var t,a,i,n,r=document.createElement("ul"),s=e.data.datasets;for(r.setAttribute("class",e.id+"-legend"),t=0,a=s.length;t<a;t++)i=r.appendChild(document.createElement("li")),n=i.appendChild(document.createElement("span")),n.style.backgroundColor=s[t].backgroundColor,s[t].label&&i.appendChild(document.createTextNode(s[t].label));return r.outerHTML}});var Qn=ge.extend({initialize:function(e){var t=this;ce.extend(t,e),t.legendHitBoxes=[],t._hoveredItem=null,t.doughnutMode=!1},beforeUpdate:Zn,update:function(e,t,a){var i=this;return i.beforeUpdate(),i.maxWidth=e,i.maxHeight=t,i.margins=a,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:Zn,beforeSetDimensions:Zn,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Zn,beforeBuildLabels:Zn,buildLabels:function(){var e=this,t=e.options.labels||{},a=ce.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(a=a.filter((function(a){return t.filter(a,e.chart.data)}))),e.options.reverse&&a.reverse(),e.legendItems=a},afterBuildLabels:Zn,beforeFit:Zn,fit:function(){var e=this,t=e.options,a=t.labels,i=t.display,n=e.ctx,r=ce.options._parseFont(a),s=r.size,o=e.legendHitBoxes=[],l=e.minSize,c=e.isHorizontal();if(c?(l.width=e.maxWidth,l.height=i?10:0):(l.width=i?10:0,l.height=e.maxHeight),i){if(n.font=r.string,c){var d=e.lineWidths=[0],u=0;n.textAlign="left",n.textBaseline="middle",ce.each(e.legendItems,(function(e,t){var i=Jn(a,s),r=i+s/2+n.measureText(e.text).width;(0===t||d[d.length-1]+r+2*a.padding>l.width)&&(u+=s+a.padding,d[d.length-(t>0?0:1)]=0),o[t]={left:0,top:0,width:r,height:s},d[d.length-1]+=r+a.padding})),l.height+=u}else{var m=a.padding,p=e.columnWidths=[],h=e.columnHeights=[],f=a.padding,b=0,g=0;ce.each(e.legendItems,(function(e,t){var i=Jn(a,s),r=i+s/2+n.measureText(e.text).width;t>0&&g+s+2*m>l.height&&(f+=b+a.padding,p.push(b),h.push(g),b=0,g=0),b=Math.max(b,r),g+=s+m,o[t]={left:0,top:0,width:r,height:s}})),f+=b,p.push(b),h.push(g),l.width+=f}e.width=l.width,e.height=l.height}else e.width=l.width=e.height=l.height=0},afterFit:Zn,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,a=t.labels,i=X.global,n=i.defaultColor,r=i.elements.line,s=e.height,o=e.columnHeights,l=e.width,c=e.lineWidths;if(t.display){var d,u=Gn(t.rtl,e.left,e.minSize.width),m=e.ctx,p=Xn(a.fontColor,i.defaultFontColor),h=ce.options._parseFont(a),f=h.size;m.textAlign=u.textAlign("left"),m.textBaseline="middle",m.lineWidth=.5,m.strokeStyle=p,m.fillStyle=p,m.font=h.string;var b=Jn(a,f),g=e.legendHitBoxes,v=function(e,t,i){if(!(isNaN(b)||b<=0)){m.save();var s=Xn(i.lineWidth,r.borderWidth);if(m.fillStyle=Xn(i.fillStyle,n),m.lineCap=Xn(i.lineCap,r.borderCapStyle),m.lineDashOffset=Xn(i.lineDashOffset,r.borderDashOffset),m.lineJoin=Xn(i.lineJoin,r.borderJoinStyle),m.lineWidth=s,m.strokeStyle=Xn(i.strokeStyle,n),m.setLineDash&&m.setLineDash(Xn(i.lineDash,r.borderDash)),a&&a.usePointStyle){var o=b*Math.SQRT2/2,l=u.xPlus(e,b/2),c=t+f/2;ce.canvas.drawPoint(m,i.pointStyle,o,l,c,i.rotation)}else m.fillRect(u.leftForLtr(e,b),t,b,f),0!==s&&m.strokeRect(u.leftForLtr(e,b),t,b,f);m.restore()}},y=function(e,t,a,i){var n=f/2,r=u.xPlus(e,b+n),s=t+n;m.fillText(a.text,r,s),a.hidden&&(m.beginPath(),m.lineWidth=2,m.moveTo(r,s),m.lineTo(u.xPlus(r,i),s),m.stroke())},w=function(e,i){switch(t.align){case"start":return a.padding;case"end":return e-i;default:return(e-i+a.padding)/2}},C=e.isHorizontal();d=C?{x:e.left+w(l,c[0]),y:e.top+a.padding,line:0}:{x:e.left+a.padding,y:e.top+w(s,o[0]),line:0},ce.rtl.overrideTextDirection(e.ctx,t.textDirection);var x=f+a.padding;ce.each(e.legendItems,(function(t,i){var n=m.measureText(t.text).width,r=b+f/2+n,p=d.x,h=d.y;u.setWidth(e.minSize.width),C?i>0&&p+r+a.padding>e.left+e.minSize.width&&(h=d.y+=x,d.line++,p=d.x=e.left+w(l,c[d.line])):i>0&&h+x>e.top+e.minSize.height&&(p=d.x=p+e.columnWidths[d.line]+a.padding,d.line++,h=d.y=e.top+w(s,o[d.line]));var _=u.x(p);v(_,h,t),g[i].left=u.leftForLtr(_,g[i].width),g[i].top=h,y(_,h,t,n),C?d.x+=r+a.padding:d.y+=x})),ce.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var a,i,n,r=this;if(e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom)for(n=r.legendHitBoxes,a=0;a<n.length;++a)if(i=n[a],e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height)return r.legendItems[a];return null},handleEvent:function(e){var t,a=this,i=a.options,n="mouseup"===e.type?"click":e.type;if("mousemove"===n){if(!i.onHover&&!i.onLeave)return}else{if("click"!==n)return;if(!i.onClick)return}t=a._getLegendItemAt(e.x,e.y),"click"===n?t&&i.onClick&&i.onClick.call(a,e.native,t):(i.onLeave&&t!==a._hoveredItem&&(a._hoveredItem&&i.onLeave.call(a,e.native,a._hoveredItem),a._hoveredItem=t),i.onHover&&t&&i.onHover.call(a,e.native,t))}});function er(e,t){var a=new Qn({ctx:e.ctx,options:t,chart:e});Kt.configure(e,a,t),Kt.addBox(e,a),e.legend=a}var tr={id:"legend",_element:Qn,beforeInit:function(e){var t=e.options.legend;t&&er(e,t)},beforeUpdate:function(e){var t=e.options.legend,a=e.legend;t?(ce.mergeIf(t,X.global.legend),a?(Kt.configure(e,a,t),a.options=t):er(e,t)):a&&(Kt.removeBox(e,a),delete e.legend)},afterEvent:function(e,t){var a=e.legend;a&&a.handleEvent(t)}},ar=ce.noop;X._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var ir=ge.extend({initialize:function(e){var t=this;ce.extend(t,e),t.legendHitBoxes=[]},beforeUpdate:ar,update:function(e,t,a){var i=this;return i.beforeUpdate(),i.maxWidth=e,i.maxHeight=t,i.margins=a,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:ar,beforeSetDimensions:ar,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:ar,beforeBuildLabels:ar,buildLabels:ar,afterBuildLabels:ar,beforeFit:ar,fit:function(){var e,t,a=this,i=a.options,n=a.minSize={},r=a.isHorizontal();i.display?(e=ce.isArray(i.text)?i.text.length:1,t=e*ce.options._parseFont(i).lineHeight+2*i.padding,a.width=n.width=r?a.maxWidth:t,a.height=n.height=r?t:a.maxHeight):a.width=n.width=a.height=n.height=0},afterFit:ar,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,a=e.options;if(a.display){var i,n,r,s=ce.options._parseFont(a),o=s.lineHeight,l=o/2+a.padding,c=0,d=e.top,u=e.left,m=e.bottom,p=e.right;t.fillStyle=ce.valueOrDefault(a.fontColor,X.global.defaultFontColor),t.font=s.string,e.isHorizontal()?(n=u+(p-u)/2,r=d+l,i=p-u):(n="left"===a.position?u+l:p-l,r=d+(m-d)/2,i=m-d,c=Math.PI*("left"===a.position?-.5:.5)),t.save(),t.translate(n,r),t.rotate(c),t.textAlign="center",t.textBaseline="middle";var h=a.text;if(ce.isArray(h))for(var f=0,b=0;b<h.length;++b)t.fillText(h[b],0,f,i),f+=o;else t.fillText(h,0,0,i);t.restore()}}});function nr(e,t){var a=new ir({ctx:e.ctx,options:t,chart:e});Kt.configure(e,a,t),Kt.addBox(e,a),e.titleBlock=a}var rr={id:"title",_element:ir,beforeInit:function(e){var t=e.options.title;t&&nr(e,t)},beforeUpdate:function(e){var t=e.options.title,a=e.titleBlock;t?(ce.mergeIf(t,X.global.title),a?(Kt.configure(e,a,t),a.options=t):nr(e,t)):a&&(Kt.removeBox(e,a),delete e.titleBlock)}},sr={},or=Kn,lr=tr,cr=rr;for(var dr in sr.filler=or,sr.legend=lr,sr.title=cr,Xa.helpers=ce,Ja(),Xa._adapters=ai,Xa.Animation=ye,Xa.animationService=we,Xa.controllers=Tt,Xa.DatasetController=Se,Xa.defaults=X,Xa.Element=ge,Xa.elements=Ge,Xa.Interaction=It,Xa.layouts=Kt,Xa.platform=Da,Xa.plugins=ka,Xa.Scale=_i,Xa.scaleService=Sa,Xa.Ticks=ii,Xa.Tooltip=La,Xa.helpers.each(On,(function(e,t){Xa.scaleService.registerScaleType(t,e,e._defaults)})),sr)sr.hasOwnProperty(dr)&&Xa.plugins.register(sr[dr]);Xa.platform.initialize();var ur=Xa;return"undefined"!==typeof window&&(window.Chart=Xa),Xa.Chart=Xa,Xa.Legend=sr.legend._element,Xa.Title=sr.title._element,Xa.pluginService=Xa.plugins,Xa.PluginBase=Xa.Element.extend({}),Xa.canvasHelpers=Xa.helpers.canvas,Xa.layoutService=Xa.layouts,Xa.LinearScaleBase=$i,Xa.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){Xa[e]=function(t,a){return new Xa(t,Xa.helpers.merge(a||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),ur}))},"33f9":function(e,t,a){"use strict";var i=a("1fca"),n=a("1450");t["a"]={name:"doughnut-chart",extends:i["b"],mixins:[i["c"].reactiveProp,n["a"]],props:{extraOptions:{type:Object,default:function(){return{}}}},data:function(){return{ctx:null}},mounted:function(){var e=this;this.$watch("chartData",(function(t,a){a||e.renderChart(e.chartData,e.extraOptions)}),{immediate:!0})}}},"3a7b":function(e,t,a){"use strict";a("b5bd")},"3ca3":function(e,t,a){"use strict";var i=a("6547").charAt,n=a("69f3"),r=a("7dd0"),s="String Iterator",o=n.set,l=n.getterFor(s);r(String,"String",(function(e){o(this,{type:s,string:String(e),index:0})}),(function(){var e,t=l(this),a=t.string,n=t.index;return n>=a.length?{value:void 0,done:!0}:(e=i(a,n),t.index+=e.length,{value:e,done:!1})}))},"40c2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},["Unpaid"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getBillingStatements("Unpaid")}}},[e._v("Unpaid")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["On Process"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getBillingStatements("On Process")}}},[e._v("On Process")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Paid"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getBillingStatements("Paid")}}},[e._v("Paid")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Cancel"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getBillingStatements("Cancel")}}},[e._v("Cancel")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getBillingStatements("All")}}},[e._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.getBillingStatements(e.listType)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==e.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.getBillingStatements(e.listType)}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"bs-table",attrs:{columns:e.columns,rows:e.billingStatements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["bsNumber"==t.column.field?a("span",[a("span",{staticClass:"pointer",attrs:{id:"sideBarTxt"},on:{click:function(a){return e.openViewBillingStatementModal(t.row)}}},[e._v(e._s(t.row.bsNumber))])]):e._e(),"bsDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.bsDate,"MMM DD, YYYY")))])]):e._e(),"type"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.type))])]):e._e(),"company"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.company))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.amount))])]):e._e(),"dueDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.dueDate,"MMM DD, YYYY")))])]):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("UNPAID")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("ON PROCESS")]):e._e(),3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("PAID")]):e._e(),0==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("CANCEL")]):e._e()]):e._e(),"action"==t.column.field&&"User"!=e.userRole?a("span",[1==t.row.status||2==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateBSModal(t.row)}}}):e._e(),3==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update Collection"},on:{click:function(a){return e.openUpdateCollectionModal(t.row)}}}):e._e(),0!=t.row.status?a("span",{staticClass:"pointer ml-2 far fa-comment",attrs:{id:"sideBarTxt",title:"Communication Made"},on:{click:function(a){return e.openCommunicationModal(t.row)}}}):e._e(),0!=t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}}):e._e(),2==t.row.status||0==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-square",attrs:{id:"sideBarTxt",title:"Unpaid"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e(),1==t.row.status||3==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-square",attrs:{id:"sideBarTxt",title:"On Process"},on:{click:function(a){return e.changeStatus(t.row,2)}}}):e._e(),2==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-thumbs-up",attrs:{id:"sideBarTxt",title:"Paid"},on:{click:function(a){return e.paidStatus(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Cancel"},on:{click:function(a){return e.changeStatus(t.row,0)}}}):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),e.billingStatements.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getBillingStatements(e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-billing-statement-modal",modifiers:{"new-billing-statement-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New Billing Statement")]),e.billingStatements.length>0?a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.printBillingStatement}},[e._v("Print")]):e._e(),e.billingStatements.length>0?a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.exportBillingStatement}},[e._v("Export")]):e._e()],1)]),a("b-modal",{attrs:{size:"xl",id:"new-billing-statement-modal",title:"New Billing Statement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.newBillingStatement(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-billing-statement-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bsSeries,reduce:function(e){return e.billingStatementSeriesId},label:"series",clearable:!1},on:{input:function(t){return e.getSeriesNumber(e.newBSSeries,"add")}},model:{value:e.newBSSeries,callback:function(t){e.newBSSeries=t},expression:"newBSSeries"}}),e.$v.newBSSeries.$anyDirty&&!e.$v.newBSSeries.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bsNumbers,reduce:function(e){return e.number},label:"number",clearable:!1},model:{value:e.newBSNumber,callback:function(t){e.newBSNumber=t},expression:"newBSNumber"}}),e.$v.newBSNumber.$anyDirty&&!e.$v.newBSNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Terms:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.newBSDate,callback:function(t){e.newBSDate=t},expression:"newBSDate"}}),e.$v.newBSDate.$anyDirty&&!e.$v.newBSDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"number",placeholder:"Terms (Ex. 30)"},on:{input:function(t){return e.getDueDate(e.newTerms)}},model:{value:e.newTerms,callback:function(t){e.newTerms=t},expression:"newTerms"}}),e.$v.newTerms.$anyDirty&&!e.$v.newTerms.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newTerms.$anyDirty&&!e.$v.newTerms.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type of Service:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Company:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.serviceTypes,reduce:function(e){return e.serviceTypeId},label:"type",clearable:!1},model:{value:e.newServiceType,callback:function(t){e.newServiceType=t},expression:"newServiceType"}}),e.$v.newServiceType.$anyDirty&&!e.$v.newServiceType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.companies,reduce:function(e){return e.companyId},label:"company",clearable:!1},model:{value:e.newCompany,callback:function(t){e.newCompany=t},expression:"newCompany"}}),e.$v.newCompany.$anyDirty&&!e.$v.newCompany.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Total Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Due Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Amount",readonly:""},model:{value:e.newBSAmount,callback:function(t){e.newBSAmount=t},expression:"newBSAmount"}}),e.$v.newBSAmount.$anyDirty&&!e.$v.newBSAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newBSAmount.$anyDirty&&!e.$v.newBSAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",readonly:""},model:{value:e.newDueDate,callback:function(t){e.newDueDate=t},expression:"newDueDate"}}),e.$v.newDueDate.$anyDirty&&!e.$v.newDueDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0 mt-3"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"}),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-billing-particular-modal",modifiers:{"new-billing-particular-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add Particulars")])],1)]),a("hr"),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.particularColumns,rows:e.billingParticulars,"search-options":{enabled:!1},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:!1},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["Description"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.description))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.amount))])]):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 fa fa-trash",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return e.removeItem(t.row.id)}}})]):e._e()])]}}])})],1)]),a("b-modal",{attrs:{size:"xl",id:"view-billing-statement-modal",title:"View Billing Statement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("view-billing-statement-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Date:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.view.bsNumber))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e._f("moment")(e.view.bsDate,"MMM DD, YYYY")))]),a("hr")])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Terms:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type of Service:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.view.terms))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.view.type))]),a("hr")])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Company:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.view.company))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v("₱ "+e._s(e.view.amount))]),a("hr")])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Due Date:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Description:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e._f("moment")(e.view.dueDate,"MMM DD, YYYY")))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.view.description))]),a("hr")])]),2==e.view.status||3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount Paid:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date Paid:")])])]):e._e(),2==e.view.status||3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v("₱ "+e._s(e.view.amountPaid))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e._f("moment")(e.view.datePaid,"MMM DD, YYYY")))]),a("hr")])]):e._e(),"3"==e.view.status?a("hr"):e._e(),"3"==e.view.status?a("h2",[e._v("Collection Information")]):e._e(),3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Date:")])])]):e._e(),3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.viewCol.orNumber))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e._f("moment")(e.viewCol.orDate,"MMM DD, YYYY")))]),a("hr")])]):e._e(),3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Collected Amount:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Date:")])])]):e._e(),3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v("₱ "+e._s(e.viewCol.collectedAmount))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e._f("moment")(e.viewCol.checkDate,"MMM DD, YYYY")))]),a("hr")])]):e._e(),3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Name:")])])]):e._e(),3==e.view.status?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.viewCol.checkNumber))]),a("hr")]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",[e._v(e._s(e.viewCol.bankName))]),a("hr")])]):e._e()]),a("b-modal",{attrs:{size:"xl",id:"edit-billing-statement-modal",title:"Edit Billing Statement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateBillingStatement(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-billing-statement-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bsSeries,reduce:function(e){return e.billingStatementSeriesId},label:"series",clearable:!1},on:{input:function(t){return e.getSeriesNumber(e.edit.bsSeries,"edit")}},model:{value:e.edit.bsSeries,callback:function(t){e.$set(e.edit,"bsSeries",t)},expression:"edit.bsSeries"}}),e.$v.edit.$anyDirty&&!e.$v.edit.bsSeries.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.bsNumbers,reduce:function(e){return e.number},label:"number",clearable:!1},model:{value:e.edit.bsNumber,callback:function(t){e.$set(e.edit,"bsNumber",t)},expression:"edit.bsNumber"}}),e.$v.edit.$anyDirty&&!e.$v.edit.bsNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("BS Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Terms:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.edit.bsDate,callback:function(t){e.$set(e.edit,"bsDate",t)},expression:"edit.bsDate"}}),e.$v.edit.$anyDirty&&!e.$v.edit.bsDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Terms"},model:{value:e.edit.terms,callback:function(t){e.$set(e.edit,"terms",t)},expression:"edit.terms"}})],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Type of Service:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Company:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.serviceTypes,reduce:function(e){return e.serviceTypeId},label:"type",clearable:!1},model:{value:e.edit.serviceType,callback:function(t){e.$set(e.edit,"serviceType",t)},expression:"edit.serviceType"}}),e.$v.edit.$anyDirty&&!e.$v.edit.serviceType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.companies,reduce:function(e){return e.companyId},label:"company",clearable:!1},model:{value:e.edit.company,callback:function(t){e.$set(e.edit,"company",t)},expression:"edit.company"}}),e.$v.edit.$anyDirty&&!e.$v.edit.company.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Due Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount"},model:{value:e.edit.bsAmount,callback:function(t){e.$set(e.edit,"bsAmount",t)},expression:"edit.bsAmount"}}),e.$v.edit.$anyDirty&&!e.$v.edit.bsAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.bsAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.edit.dueDate,callback:function(t){e.$set(e.edit,"dueDate",t)},expression:"edit.dueDate"}}),e.$v.edit.$anyDirty&&!e.$v.edit.dueDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Desciption:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.description,expression:"edit.description"}],attrs:{rows:"4",cols:"59",id:"inputStyle",placeholder:"Desciption"},domProps:{value:e.edit.description},on:{input:function(t){t.target.composing||e.$set(e.edit,"description",t.target.value)}}})])]),2==e.edit.status||3==e.edit.status?a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount Paid:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Date Paid:")])])]):e._e(),2==e.edit.status||3==e.edit.status?a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount"},model:{value:e.edit.amountPaid,callback:function(t){e.$set(e.edit,"amountPaid",t)},expression:"edit.amountPaid"}}),e.$v.edit.$anyDirty&&!e.$v.edit.amountPaid.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.amountPaid.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.edit.datePaid,callback:function(t){e.$set(e.edit,"datePaid",t)},expression:"edit.datePaid"}}),e.$v.edit.$anyDirty&&!e.$v.edit.datePaid.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]):e._e()]),a("b-modal",{attrs:{size:"xl",id:"communication-made-modal",title:"Communication Made",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.show("new-communication-modal")}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" New ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("communication-made-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("vue-good-table",{attrs:{columns:e.communicationColumn,rows:e.communications,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.communicationLoading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["communicationStatus"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.communicationStatus))])]):e._e(),"communicationDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.communicationDate,"MMM DD, YYYY")))])]):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateBSCModal(t.row)}}})]):e._e()])]}}])})],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-communication-modal",title:"New Communication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addCommunication(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-communication-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Follow Up (Status):")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Follow Up Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Follow Up"},model:{value:e.newFollowUpStatus,callback:function(t){e.newFollowUpStatus=t},expression:"newFollowUpStatus"}}),e.$v.newFollowUpStatus.$anyDirty&&!e.$v.newFollowUpStatus.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.newFollowUpDate,callback:function(t){e.newFollowUpDate=t},expression:"newFollowUpDate"}}),e.$v.newFollowUpDate.$anyDirty&&!e.$v.newFollowUpDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-communication-modal",title:"Edit Communication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateCommunication(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-communication-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Follow Up (Status):")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Follow Up Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Follow Up"},model:{value:e.editCom.followUpStatus,callback:function(t){e.$set(e.editCom,"followUpStatus",t)},expression:"editCom.followUpStatus"}}),e.$v.editCom.$anyDirty&&!e.$v.editCom.followUpStatus.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.editCom.followUpDate,callback:function(t){e.$set(e.editCom,"followUpDate",t)},expression:"editCom.followUpDate"}}),e.$v.editCom.$anyDirty&&!e.$v.editCom.followUpDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"paid-status-modal",title:"Change Status to Paid",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.changePaidStatus()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Change Status ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("paid-status-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount Paid:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Paid Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount Paid"},model:{value:e.paid.amountPaid,callback:function(t){e.$set(e.paid,"amountPaid",t)},expression:"paid.amountPaid"}}),e.$v.paid.$anyDirty&&!e.$v.paid.amountPaid.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.paid.$anyDirty&&!e.$v.paid.amountPaid.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.paid.datePaid,callback:function(t){e.$set(e.paid,"datePaid",t)},expression:"paid.datePaid"}}),e.$v.paid.$anyDirty&&!e.$v.paid.datePaid.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.orSeries,reduce:function(e){return e.orSeriesId},label:"series",clearable:!1},on:{input:function(t){return e.getORSeriesNumber(e.newORSeries,"add")}},model:{value:e.newORSeries,callback:function(t){e.newORSeries=t},expression:"newORSeries"}}),e.$v.newORSeries.$anyDirty&&!e.$v.newORSeries.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.orNumbers,reduce:function(e){return e.number},label:"number",clearable:!1},model:{value:e.newORNumber,callback:function(t){e.newORNumber=t},expression:"newORNumber"}}),e.$v.newORNumber.$anyDirty&&!e.$v.newORNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Date:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.newORDate,callback:function(t){e.newORDate=t},expression:"newORDate"}}),e.$v.newORDate.$anyDirty&&!e.$v.newORDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.newCheckDate,callback:function(t){e.newCheckDate=t},expression:"newCheckDate"}})],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Name:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newCheckNumber,callback:function(t){e.newCheckNumber=t},expression:"newCheckNumber"}}),e.$v.newCheckNumber.$anyDirty&&!e.$v.newCheckNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.newBankName,callback:function(t){e.newBankName=t},expression:"newBankName"}}),e.$v.newBankName.$anyDirty&&!e.$v.newBankName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-collection-modal",title:"Edit Collection",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateCollection(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-collection-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Series:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.orSeries,reduce:function(e){return e.orSeriesId},label:"series",clearable:!1},on:{input:function(t){return e.getORSeriesNumber(e.editCol.orSeries,"edit")}},model:{value:e.editCol.orSeries,callback:function(t){e.$set(e.editCol,"orSeries",t)},expression:"editCol.orSeries"}}),e.$v.editCol.$anyDirty&&!e.$v.editCol.orSeries.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.orNumbers,reduce:function(e){return e.number},label:"number",clearable:!1},model:{value:e.editCol.orNumber,callback:function(t){e.$set(e.editCol,"orNumber",t)},expression:"editCol.orNumber"}}),e.$v.editCol.$anyDirty&&!e.$v.editCol.orNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("OR Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Collected Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.editCol.orDate,callback:function(t){e.$set(e.editCol,"orDate",t)},expression:"editCol.orDate"}}),e.$v.editCol.$anyDirty&&!e.$v.editCol.orDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.editCol.collectedAmount,callback:function(t){e.$set(e.editCol,"collectedAmount",t)},expression:"editCol.collectedAmount"}}),e.$v.editCol.$anyDirty&&!e.$v.editCol.collectedAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.editCol.$anyDirty&&!e.$v.editCol.collectedAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Date:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Check Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:e.editCol.checkDate,callback:function(t){e.$set(e.editCol,"checkDate",t)},expression:"editCol.checkDate"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.editCol.checkNumber,callback:function(t){e.$set(e.editCol,"checkNumber",t)},expression:"editCol.checkNumber"}}),e.$v.editCol.$anyDirty&&!e.$v.editCol.checkNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Bank Name:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text"},model:{value:e.editCol.bankName,callback:function(t){e.$set(e.editCol,"bankName",t)},expression:"editCol.bankName"}}),e.$v.editCol.$anyDirty&&!e.$v.editCol.bankName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addAttachments()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Attachment ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("attachment-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e.loadAttachment?a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12 text-center"},[a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}})],1)])]):e._e(),e.attachments.length>0&&!e.loadAttachment?a("card",{attrs:{shadow:""}},[e.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},e._l(e.attachments,(function(t){return a("span",{key:t.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return e.removeAttachment(t.name)}}})]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:t.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:t.url}})])])])])})),0):e._e()]):e._e(),0!=e.attachments.length||e.loadAttachment?e._e():a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("h2",{staticClass:"text-center"},[e._v("NO ATTACHMENT")])])])])],1)],1)])],1)},n=[],r=(a("a4d3"),a("e01a"),a("4de4"),a("4160"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),s=a("56d7"),o=a("b5ae"),l=a("add5"),c=a.n(l),d=a("4627"),u=a("68a2"),m=o["helpers"].regex("alphaNumAndDot",/^[ 0-9 ., ]*$/),p=o["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),h=o["helpers"].regex("alphaNumAndDot",/^[ 0-9A-Za-z ., ]*$/),f=a("c1df"),b=a("e966"),g=b.bindWith(",","."),v=new Date,y=a("9f25"),w={components:{},data:function(){return{columns:[{label:"BS Number",field:"bsNumber"},{label:"BS Date",field:"bsDate"},{label:"Service Type",field:"type"},{label:"Company",field:"company"},{label:"Amount",field:"amount"},{label:"Due Date",field:"dueDate"},{label:"Status",field:"status",sortable:!1},{label:"",field:"action",width:"120px",sortable:!1}],loading:!0,billingStatements:[],particularColumns:[{label:"Desciption",field:"description"},{label:"Amount",field:"amount"},{label:"",field:"action",sortable:!1,width:"80px"}],purchaseItems:[],userRole:"",views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"}],filter:"month",dateCreated:f().format("YYYY-MM"),maxDate:f().format("YYYY-MM"),listType:"",currentMonth:f().format("MMMM"),requestProcessing:!1,types:[{type:"Check"},{type:"Cash"},{type:"E Wallet"}],bsSeries:[],bsNumbers:[],serviceTypes:[],companies:[],newBSSeries:"",newBSNumber:"",newBSDate:f().format("YYYY-MM-DD"),newTerms:"",newServiceType:"",newCompany:"",newBSAmount:"",newDueDate:f().format("YYYY-MM-DD"),view:{bsNumber:"",bsDate:"",terms:"",type:"",company:"",amount:"",dueDate:"",amountPaid:"",datePaid:"",description:"",status:""},edit:{id:"",bsId:"",bsSeries:"",bsNumber:"",bsDate:"",terms:"",serviceType:"",company:"",amount:"",dueDate:"",description:"",amountPaid:"",datePaid:""},newComBSID:"",newFollowUpStatus:"",newFollowUpDate:f().format("YYYY-MM-DD"),communications:[],communicationColumn:[{label:"Follow Up (Status)",field:"communicationStatus"},{label:"Follow Up Date",field:"communicationDate"},{label:"",field:"action",width:"50px",sortable:!1}],communicationLoading:!1,editCom:{id:"",bsComId:"",followUpStatus:"",followUpDate:""},paid:{id:"",bsId:"",amountPaid:"",datePaid:"",currentStatus:"",status:""},orSeries:[],orNumbers:[],newBSCId:"",newBSColId:"",newORSeries:"",newORNumber:"",newORDate:f().format("YYYY-MM-DD"),newCheckDate:"",newCheckNumber:"",newBankName:"",viewCol:{orNumber:"",orDate:"",collectedAmount:"",checkDate:"",checkNumber:"",bankName:""},editCol:{id:"",collectionId:"",orSeries:"",orNumber:"",orDate:"",collectedAmount:"",checkDate:"",checkNumber:"",bankName:"",bsRef:""},attachment:"",attachmentData:null,attachments:[],bsAId:"",bsAStat:"",uploadValue:0,loadAttachment:!0}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole(),e.getBillingStatements("Unpaid"),e.getBSSeries(),e.getServiceTypes(),e.getCompany();case 5:case"end":return t.stop()}}),t)})))()},validations:{newBSSeries:{required:o["required"]},newBSNumber:{required:o["required"]},newBSDate:{required:o["required"]},newTerms:{required:o["required"],numCustomValidator:p},newServiceType:{required:o["required"]},newCompany:{required:o["required"]},newBSAmount:{required:o["required"],amountCustomValidator:m},newDueDate:{required:o["required"]},edit:{bsSeries:{required:o["required"]},bsNumber:{required:o["required"]},bsDate:{required:o["required"]},serviceType:{required:o["required"]},company:{required:o["required"]},bsAmount:{required:o["required"],amountCustomValidator:m},dueDate:{required:o["required"]},amountPaid:{required:o["required"],amountCustomValidator:m},datePaid:{required:o["required"]}},newFollowUpStatus:{required:o["required"]},newFollowUpDate:{required:o["required"]},editCom:{followUpStatus:{required:o["required"]},followUpDate:{required:o["required"]}},paid:{amountPaid:{required:o["required"],amountCustomValidator:m},datePaid:{required:o["required"]}},newORSeries:{required:o["required"]},newORNumber:{required:o["required"]},newORDate:{required:o["required"]},newCheckNumber:{numCustomValidator:p},newBankName:{alphaNumCustomValidator:h},editCol:{orSeries:{required:o["required"]},orNumber:{required:o["required"]},orDate:{required:o["required"]},collectedAmount:{required:o["required"],amountCustomValidator:m},checkNumber:{numCustomValidator:p},bankName:{alphaNumCustomValidator:h}}},methods:{getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname");var t=s["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var i=s["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];i.get().then((function(t){t.empty||(t.forEach((function(e){n.push(e.data())})),e.userRole=n[0].userRole)}))}))},getDueDate:function(e){var t=this;t.newDueDate=e>0?1==e?f().add(1,"day").format("YYYY-MM-DD"):f().add(e,"days").format("YYYY-MM-DD"):f().format("YYYY-MM-DD")},getBSSeries:function(){var e=this,t=[],a=s["dbSales"].collection("billingStatementSeries").where("status","==",1);e.bsSeries=[],a.get().then((function(a){a.forEach((function(e){t.push(e.data())}));for(var i=0;i<t.length;i++)t[i]["series"]=t[i].startNumber+"-"+t[i].endNumber,e.bsSeries.push(t[i]);e.newBSSeries=t[0].billingStatementSeriesId,e.getSeriesNumber(e.newBSSeries,"add")}))},getSeriesNumber:function(e,t){var a=this,i=[],n=[],r=[],o=s["dbSales"].collection("billingStatementSeries").where("status","==",1).where("billingStatementSeriesId","==",e),l=s["dbSales"].collection("billingStatements").where("bsSeriesReference","==",e);a.bsNumbers=[],a.newBSNumber="",o.get().then((function(e){e.forEach((function(e){i.push(e.data())}));for(var s=0;s<i.length;s++){var o=0;o=i[s].startNumber.length;for(var c=parseInt(i[s].startNumber);c<=parseInt(i[s].endNumber);c++)n.push({number:y(c,o)})}l.get().then((function(e){if(e.forEach((function(e){r.push(e.data())})),r.length>0)for(var i=0;i<n.length;i++){for(var s=!1,o=0;o<r.length;o++)if(r[o].bsNumber==n[i].number){s=!0;break}s||a.bsNumbers.push(n[i])}else for(var l=0;l<n.length;l++)a.bsNumbers.push(n[l]);"add"==t?a.newBSNumber=a.bsNumbers[0].number:"edit"==t&&(a.edit.bsNumber=a.bsNumbers[0].number)}))}))},getServiceTypes:function(){var e=this,t=s["dbSales"].collection("serviceTypes").where("status","==",1).orderBy("type","asc");e.serviceTypes=[],t.get().then((function(t){t.forEach((function(t){e.serviceTypes.push(t.data())})),e.newServiceType=e.serviceTypes[0].serviceTypeId}))},getCompany:function(){var e=this,t=s["dbSales"].collection("company").where("status","==",1).orderBy("company","asc");e.companies=[],t.get().then((function(t){t.forEach((function(t){e.companies.push(t.data())})),e.newCompany=e.companies[0].companyId}))},newBillingStatement:function(){var e=this;if(e.$v.newBSSeries.$touch(),e.$v.newBSNumber.$touch(),e.$v.newServiceType.$touch(),e.$v.newCompany.$touch(),e.$v.newBSAmount.$touch(),e.$v.newTerms.$touch(),e.$v.newDueDate.$touch(),!e.$v.newBSSeries.$error&&!e.$v.newBSNumber.$error&&!e.$v.newServiceType.$error&&!e.$v.newCompany.$error&&!e.$v.newBSAmount.$error&&!e.$v.newTerms.$error&&!e.$v.newDueDate.$error){e.requestProcessing=!0;try{var t=s["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],i="BSI-"+v.getFullYear()+y(v.getMonth()+1,2)+v.getDate()+"-"+Math.floor(1e6*Math.random());t.get().then((function(t){t.forEach((function(e){a.push(e.data())})),s["dbSales"].collection("billingStatements").doc().set({billingStatementId:i,bsSeriesReference:e.newBSSeries,bsNumber:e.newBSNumber,bsDate:e.newBSDate,terms:e.newTerms,serviceTypeReference:e.newServiceType,companyReference:e.newCompany,amount:e.newBSAmount.replaceAll(",",""),amountPaid:"",dueDate:e.newDueDate,datePaid:"",status:1,userReference:a[0].userId,dateCreated:v,dateModified:v}).then((function(){e.newBSSeries="",e.newBSNumber="",e.newBSDate=f().format("YYYY-MM-DD"),e.newTerms="",e.newServiceType="",e.newCompany="",e.newBSAmount="",e.newDueDate=f().format("YYYY-MM-DD"),e.requestProcessing=!1,e.$v.newBSSeries.$reset(),e.$v.newBSNumber.$reset(),e.$v.newServiceType.$reset(),e.$v.newCompany.$reset(),e.$v.newBSAmount.$reset(),e.$v.newDueDate.$reset(),e.$bvModal.hide("new-billing-statement-modal"),e.$refs["bs-table"].reset(),e.getBSSeries(),e.getServiceTypes(),e.getCompany(),e.getBillingStatements(e.listType),e.$swal({title:"Success",text:"New billing statement added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}catch(n){console.log(n),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},getBillingStatements:function(e){var t=this,a=null,i=[],n=[],r=f(t.dateCreated).startOf("month").format("YYYY-MM-DD"),o=f(t.dateCreated).endOf("month").format("YYYY-MM-DD");t.username=localStorage.getItem("aisname");var l=s["dbUsers"].collection("users").where("username","==",t.username),c=[],d="";l.get().then((function(l){l.forEach((function(e){c.push(e.data())})),d=c[0].userId;var u=s["dbUsers"].collection("userRoles").where("userRoleId","==",c[0].userRoleReference),m="";u.get().then((function(l){l.forEach((function(e){m=e.data().userRole})),t.loading=!0,t.billingStatements=[],t.listType=e,"Manager"==m||"Administrator"==m?"Unpaid"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",1).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",1)):"On Process"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",2).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",2)):"Paid"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",3).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",3)):"Cancel"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",0).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("status","==",0)):"All"==e&&("all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o))):"User"==m&&("Unpaid"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",1).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",1)):"On Process"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",2).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",2)):"Paid"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",3).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",3)):"Cancel"==e?"all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",0).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).where("status","==",0)):"All"==e&&("all"!=t.limit?a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d).limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("billingStatements").where("bsDate",">=",r).where("bsDate","<=",o).where("userReference","==",d)))),a.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data()),i.push(e.id)}));var a=s["dbSales"].collection("serviceTypes").orderBy("type","asc"),r=s["dbSales"].collection("company").orderBy("company","asc"),o=[],l=[];a.get().then((function(e){e.forEach((function(e){o.push(e.data())})),r.get().then((function(e){e.forEach((function(e){l.push(e.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=i[a],n[a]["type"]="",n[a]["company"]="",n[a].amount=g(parseFloat(n[a].amount).toFixed(2)),""!=n[a].amountPaid&&(n[a].amountPaid=g(parseFloat(n[a].amountPaid).toFixed(2)));for(var r=0;r<o.length;r++)o[r].serviceTypeId==n[a].serviceTypeReference&&(n[a].type=o[r].type);for(var s=0;s<l.length;s++)l[s].companyId==n[a].companyReference&&(n[a].company=l[s].company);t.billingStatements.push(n[a])}}))}))}setTimeout((function(){t.loading=!1}),1e3)}))}))}))},openViewBillingStatementModal:function(e){var t=this;t.view={bsNumber:e.bsNumber,bsDate:e.bsDate,terms:e.terms,type:e.type,company:e.company,amount:e.amount,dueDate:e.dueDate,description:e.description,amountPaid:e.amountPaid,datePaid:e.datePaid,status:e.status},3==e.status&&t.viewCollection(e.billingStatementId),t.$bvModal.show("view-billing-statement-modal")},openUpdateBSModal:function(e){var t=this;t.edit={id:e.id,bsId:e.billingStatementId,bsSeries:e.bsSeriesReference,bsNumber:e.bsNumber,bsDate:e.bsDate,terms:e.terms,serviceType:e.serviceTypeReference,company:e.companyReference,bsAmount:e.amount,dueDate:e.dueDate,description:e.description,amountPaid:e.amountPaid,datePaid:e.datePaid,status:e.status},t.getSeriesNumber(e.bsSeriesReference,"openEdit"),t.$bvModal.show("edit-billing-statement-modal")},updateBillingStatement:function(){var e=this,t=!1;if(e.$v.edit.$touch(),1==e.edit.status||0==e.edit.status?(e.$v.edit.bsSeries.$error||e.$v.edit.bsNumber.$error||e.$v.edit.serviceType.$error||e.$v.edit.company.$error||e.$v.edit.bsAmount.$error||e.$v.edit.dueDate.$error)&&(t=!0):2!=e.edit.status&&3!=e.edit.status||e.$v.edit.$error&&(t=!0),!t){e.requestProcessing=!0;try{s["dbSales"].collection("billingStatements").doc(e.edit.id).update({bsSeriesReference:e.edit.bsSeries,bsNumber:e.edit.bsNumber,bsDate:e.edit.bsDate,terms:e.edit.terms,serviceTypeReference:e.edit.serviceType,companyReference:e.edit.company,description:e.edit.description,amount:e.edit.bsAmount.replaceAll(",",""),dueDate:e.edit.dueDate,amountPaid:e.edit.amountPaid.replaceAll(",",""),datePaid:e.edit.datePaid,dateModified:v}).then((function(){e.edit={id:"",bsId:"",bsSeries:"",bsNumber:"",terms:"",serviceType:"",company:"",description:"",amount:"",dueDate:"",amountPaid:"",datePaid:""},e.requestProcessing=!1,e.$v.edit.$reset(),e.$bvModal.hide("edit-billing-statement-modal"),e.$refs["bs-table"].reset(),e.getBillingStatements(e.listType),e.$swal({title:"Success",text:"Billing statement updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},openCommunicationModal:function(e){var t=this;t.newComBSID=e.billingStatementId,t.$bvModal.show("communication-made-modal"),t.getCommunications(e.billingStatementId)},addCommunication:function(){var e=this;if(e.$v.newFollowUpStatus.$touch(),e.$v.newFollowUpDate.$touch(),!e.$v.newFollowUpStatus.$error&&!e.$v.newFollowUpDate.$error)try{e.requestProcessing=!0;var t=s["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],i="BSCI-"+v.getFullYear()+y(v.getMonth()+1,2)+v.getDate()+"-"+Math.floor(1e6*Math.random());t.get().then((function(t){t.forEach((function(e){a.push(e.data())})),s["dbSales"].collection("bsCommunicationMade").doc().set({communicationMadeId:i,communicationStatus:e.newFollowUpStatus,communicationDate:e.newFollowUpDate,bsReference:e.newComBSID,status:1,userReference:a[0].userId,dateCreated:v,dateModified:v}).then((function(){e.newFollowUpStatus="",e.newFollowUpDate=f().format("YYYY-MM-DD"),e.requestProcessing=!1,e.$v.newFollowUpStatus.$reset(),e.$v.newFollowUpDate.$reset(),e.$bvModal.hide("new-communication-modal"),e.getCommunications(e.newComBSID),e.$swal({title:"Success",text:"New communication added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}catch(n){console.log(n),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},getCommunications:function(e){var t=this;try{var a=this,i=null,n=[],r=[];a.username=localStorage.getItem("aisname");var o=s["dbUsers"].collection("users").where("username","==",a.username),l=[],c="";o.get().then((function(t){t.forEach((function(e){l.push(e.data())})),c=l[0].userId;var o=s["dbUsers"].collection("userRoles").where("userRoleId","==",l[0].userRoleReference),d="";o.get().then((function(t){t.forEach((function(e){d=e.data().userRole})),a.communicationLoading=!0,a.communications=[],"Manager"==d||"Administrator"==d?i=s["dbSales"].collection("bsCommunicationMade").where("bsReference","==",e).where("status","==",1):"User"==d&&(i=s["dbSales"].collection("bsCommunicationMade").where("bsReference","==",e).where("userReference","==",c).where("status","==",1)),i.get().then((function(e){if(!e.empty){e.forEach((function(e){r.push(e.data()),n.push(e.id)}));for(var t=0;t<r.length;t++)r[t]["id"]=n[t],a.communications.push(r[t])}setTimeout((function(){a.communicationLoading=!1}),1e3)}))}))}))}catch(d){console.log(d),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},openUpdateBSCModal:function(e){var t=this;t.editCom={id:e.id,bsComId:e.communicationMadeId,bsId:e.bsReference,followUpStatus:e.communicationStatus,followUpDate:e.communicationDate},t.$bvModal.show("edit-communication-modal")},updateCommunication:function(){var e=this;if(e.$v.editCom.$touch(),!e.$v.editCom.$error)try{e.requestProcessing=!1,s["dbSales"].collection("bsCommunicationMade").doc(e.editCom.id).update({communicationStatus:e.editCom.followUpStatus,communicationDate:e.editCom.followUpDate,dateModified:v}).then((function(){e.edit={id:"",bsComId:"",bsId:"",followUpStatus:"",followUpDate:""},e.requestProcessing=!1,e.$v.editCom.$reset(),e.$bvModal.hide("edit-communication-modal"),e.getCommunications(e.editCom.bsId),e.$swal({title:"Success",text:"Commuication updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},paidStatus:function(e){var t=this;t.newBSCId=e.id,t.newBSColId=e.billingStatementId,t.paid.amountPaid=e.amount,t.getORSeries(),t.$bvModal.show("paid-status-modal")},getORSeries:function(){var e=this,t=[],a=s["dbSales"].collection("officialReceiptSeries").where("status","==",1);e.orSeries=[],a.get().then((function(a){a.forEach((function(e){t.push(e.data())}));for(var i=0;i<t.length;i++)t[i]["series"]=t[i].startNumber+"-"+t[i].endNumber,e.orSeries.push(t[i]);e.newORSeries=t[0].orSeriesId,e.getORSeriesNumber(e.newORSeries,"add")}))},getORSeriesNumber:function(e,t){var a=this,i=[],n=[],r=[],o=s["dbSales"].collection("officialReceiptSeries").where("status","==",1).where("orSeriesId","==",e),l=s["dbSales"].collection("bsCollections").where("status","==",1).where("orReference","==",e);a.orNumbers=[],a.newORNumber="",o.get().then((function(e){e.forEach((function(e){i.push(e.data())}));for(var s=0;s<i.length;s++){var o=0;o=i[s].startNumber.length;for(var c=parseInt(i[s].startNumber);c<=parseInt(i[s].endNumber);c++)n.push({number:y(c,o)})}l.get().then((function(e){if(e.forEach((function(e){r.push(e.data())})),r.length>0)for(var i=0;i<n.length;i++){for(var s=!1,o=0;o<r.length;o++)if(r[o].orNumber==n[i].number){s=!0;break}s||a.orNumbers.push(n[i])}else for(var l=0;l<n.length;l++)a.orNumbers.push(n[l]);"add"==t?a.newORNumber=a.orNumbers[0].number:"edit"==t&&(a.edit.orNumber=a.orNumbers[0].number)}))}))},changePaidStatus:function(){var e=this;if(e.$v.paid.$touch(),e.$v.newORSeries.$touch(),e.$v.newORNumber.$touch(),e.$v.newORDate.$touch(),e.$v.newCheckNumber.$touch(),e.$v.newBankName.$touch(),!e.$v.paid.$error&&!e.$v.newORSeries.$error&&!e.$v.newORNumber.$error&&!e.$v.newORDate.$error&&!e.newCheckNumber.$error&&!e.$v.newBankName.$error)try{e.$swal({title:"Are you sure?",text:"You want to change the status to PAID",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(t){t.value&&(e.requestProcessing=!0,s["dbSales"].collection("billingStatements").doc(e.newBSCId).update({amountPaid:e.paid.amountPaid.replaceAll(",",""),datePaid:e.paid.datePaid,status:3,dateModified:v}).then((function(){var t=s["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],i="BSCI-"+v.getFullYear()+y(v.getMonth()+1,2)+v.getDate()+"-"+Math.floor(1e6*Math.random());t.get().then((function(t){t.forEach((function(e){a.push(e.data())})),s["dbSales"].collection("bsCollections").doc().set({bsCollectionId:i,orDate:e.newORDate,orNumber:e.newORNumber,collectedAmount:e.paid.amountPaid.replaceAll(",",""),checkDate:e.newCheckDate,checkNumber:e.newCheckNumber,bankName:e.newBankName,orReference:e.newORSeries,bsReference:e.newBSColId,status:1,userReference:a[0].userId,dateCreated:v,dateModified:v}).then((function(){e.newORSeries="",e.newORNumber="",e.newORDate=f().format("YYYY-MM-DD"),e.newCheckDate="",e.newCheckNumber="",e.newBankName="",e.requestProcessing=!1,e.$v.newORSeries.$reset(),e.$v.newORNumber.$reset(),e.$v.newORDate.$reset(),e.$v.newCheckNumber.$reset(),e.$v.newBankName.$reset(),e.$bvModal.hide("paid-status-modal"),e.$refs["bs-table"].reset(),e.getBillingStatements("Paid"),e.$swal({title:"Success",text:"Billing statement status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))})))}))}catch(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},viewCollection:function(e){var t=this,a=s["dbSales"].collection("bsCollections").where("bsReference","==",e);a.get().then((function(e){e.forEach((function(e){t.viewCol.orNumber=e.data().orNumber,t.viewCol.orDate=e.data().orDate,t.viewCol.collectedAmount=g(parseFloat(e.data().collectedAmount).toFixed(2)),t.viewCol.checkDate=e.data().checkDate,t.viewCol.checkNumber=e.data().checkNumber,t.viewCol.bankName=e.data().bankName}))}))},openUpdateCollectionModal:function(e){var t=this,a=s["dbSales"].collection("bsCollections").where("bsReference","==",e.billingStatementId);a.get().then((function(e){e.forEach((function(e){t.editCol.id=e.id,t.editCol.collectionId=e.data().bsCollectionId,t.editCol.orSeries=e.data().orReference,t.editCol.orNumber=e.data().orNumber,t.editCol.orDate=f(e.data().orDate).format("YYYY-MM-DD"),t.editCol.collectedAmount=e.data().collectedAmount,t.editCol.checkDate=f(e.data().checkDate).format("YYYY-MM-DD"),t.editCol.checkNumber=e.data().checkNumber,t.editCol.bankName=e.data().bankName,t.editCol.bsRef=e.data().bsReference}))})),t.getORSeries(),t.$bvModal.show("edit-collection-modal")},updateCollection:function(){var e=this;if(e.$v.editCol.$touch(),!e.$v.editCol.$error)try{e.requestProcessing=!0,s["dbSales"].collection("bsCollections").doc(e.editCol.id).update({orReference:e.editCol.orSeries,orNumber:e.editCol.orNumber,orDate:e.editCol.orDate,collectedAmount:e.editCol.collectedAmount.replaceAll(",",""),checkDate:e.editCol.checkDate,checkNumber:e.editCol.checkNumber,bankName:e.editCol.bankName,dateModified:v}).then((function(){e.editCol={id:"",collectionId:"",orSeries:"",orDate:"",orNumber:"",collectedAmount:"",checkDate:"",checkNumber:"",bankName:""},e.requestProcessing=!1,e.$v.editCol.$reset(),e.$bvModal.hide("edit-collection-modal"),e.$swal({title:"Success",text:"Collection updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},changeStatus:function(e,t){var a=this,i="";1==t?i="Unpaid":2==t?i="On Process":0==t&&(i="Cancel"),a.$swal({title:"Are you sure?",text:"You want to change the status to "+i,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){n.value&&s["dbSales"].collection("billingStatements").doc(e.id).update({status:t,dateModified:v}).then((function(){a.$refs["bs-table"].reset(),a.getBillingStatements(i),a.$swal({title:"Success",text:"Billing statement status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))},openAttachments:function(e){this.bsAId=e.billingStatementId,this.bsAmount=e.status,this.$bvModal.show("attachment-modal"),this.getAttachments(this.bsAId)},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(e){var t=this,a={maxSizeMB:1,useWebWorker:!0};t.uploadValue=0,t.attachment=null,t.attachments=[],t.attachmentData=e.target.files[0],Object(d["a"])(t.attachmentData,a).then((function(e){t.attachmentData=e,t.onUpload(t.attachmentData)}))},onUpload:function(e){var t=this,a=s["salesStorage"].ref("billingStatement/"+t.bsAId+"/"+e.name).put(e);t.requestProcessing=!1;try{t.attachment=null,t.requestProcessing=!0,a.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadValue=100,t.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1,t.getAttachments(t.bsAId),1==t.bsAStat?t.getBillingStatements("Unpaid"):2==t.bsAStat?t.getBillingStatements("Paid"):3==t.bsAStat&&t.getBillingStatements("Collected")}))}catch(i){console.log("error"),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}},getAttachments:function(e){var t=this,a=0,i=s["salesStorage"].ref("billingStatement/"+e);t.loadAttachment=!0,t.attachments=[],i.listAll().then((function(i){i.items.forEach((function(i){s["salesStorage"].ref("billingStatement/"+e+"/"+i.name).getDownloadURL().then((function(e){a+=1,t.attachments.push({rowNum:a,name:i.name,url:e,path:i.fullPath,status:1})}))}))})).catch((function(e){console.log(e)})),setTimeout((function(){t.loadAttachment=!1}),5e3)},removeAttachment:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var i=s["salesStorage"].ref("billingStatement/"+t.bsAId+"/"+e);try{i.delete().then((function(){t.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getAttachments(t.bsAId)}))}))}catch(n){console.log(n),t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}}))},printBillingStatement:function(){var e=this,t=null,a=[],i=[],n=f(e.dateCreated).startOf("month").format("YYYY-MM-DD"),r=f(e.dateCreated).endOf("month").format("YYYY-MM-DD"),o=[],l=[],d="",u="";e.username=localStorage.getItem("aisname"),u=f(n).format("MMMM DD, YYYY")+" to "+f(r).format("MMMM DD, YYYY");var m=s["dbUsers"].collection("users").where("username","==",e.username),p=[],h="";m.get().then((function(m){m.forEach((function(e){p.push(e.data())})),h=p[0].userId;var b=s["dbUsers"].collection("userRoles").where("userRoleId","==",p[0].userRoleReference),v="";b.get().then((function(m){m.forEach((function(e){v=e.data().userRole})),"Manager"==v||"Administrator"==v?"Unpaid"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("status","==",1):"Paid"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("status","==",2):"Collected"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("status","==",3):"Cancel"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("status","==",0):"All"==e.listType&&(t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r)):"User"==v&&("Unpaid"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("userReference","==",h).where("status","==",1):"Paid"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("userReference","==",h).where("status","==",2):"Collected"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("userReference","==",h).where("status","==",3):"Cancel"==e.listType?t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("userReference","==",h).where("status","==",0):"All"==e.listType&&(t=s["dbSales"].collection("billingStatements").where("bsDate",">=",n).where("bsDate","<=",r).where("userReference","==",h))),t.get().then((function(t){if(!t.empty){t.forEach((function(e){i.push(e.data()),a.push(e.id)}));var n=s["dbSales"].collection("serviceTypes").orderBy("type","asc"),r=s["dbSales"].collection("company").orderBy("company","asc"),m=[],p=[];n.get().then((function(t){t.forEach((function(e){m.push(e.data())})),r.get().then((function(t){t.forEach((function(e){p.push(e.data())}));for(var n=0;n<i.length;n++){i[n]["id"]=a[n],i[n]["type"]="",i[n]["company"]="",i[n]["stat"]="",i[n].amount=g(parseFloat(i[n].amount).toFixed(2)),""!=i[n].amountPaid&&(i[n].amountPaid=g(parseFloat(i[n].amountPaid).toFixed(2)));for(var r=0;r<m.length;r++)m[r].serviceTypeId==i[n].serviceTypeReference&&(i[n].type=m[r].type);for(var s=0;s<p.length;s++)p[s].companyId==i[n].companyReference&&(i[n].company=p[s].company);1==i[n].status?(i[n].stat="Unpaid",i[n].datePaid=""):2==i[n].status?i[n].stat="Paid":3==i[n].status?i[n].stat="Collected":0==i[n].status&&(i[n].stat="Cancel",i[n].datePaid=""),o.push(i[n])}l=[{field:"bsNumber",displayName:"BS Number"},{field:"bsDate",displayName:"BS Date"},{field:"terms",displayName:"Terms"},{field:"type",displayName:"Service Type"},{field:"company",displayName:"Company"},{field:"amount",displayName:"Amount"},{field:"dueDate",displayName:"Due Date"},{field:"datePaid",displayName:"Date Paid"},{field:"stat",displayName:"Status"}],d=e.listType+" Billing Statement",c()({printable:o,properties:l,type:"json",header:"<h2>"+d+"</h2><br><h4>DATE: "+u+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:d+" "+f().format("MMMM YYYY")})}))}))}}))}))}))},exportBillingStatement:function(){var e=new u["b"],t=this,a=null,i=[],n=[],r=[],o="",l="",c=[],d=[],m="";"Unpaid"==t.listType?r.push(1):"Paid"==t.listType?r.push(2):"Collected"==t.listType?r.push(3):"Cancel"==t.listType?r.push(0):"All"==t.listType&&(r.push(1),r.push(2),r.push(3),r.push(0)),"month"==t.filter?(o=f(t.dateCreated).startOf("month").format("YYYY-MM-DD"),l=f(t.dateCreated).endOf("month").format("YYYY-MM-DD"),m=f(o).format("MMMM YYYY")):"dateRange"==t.filter&&(o=f(t.startDate).format("YYYY-MM-DD"),l=f(t.endDate).format("YYYY-MM-DD"),m=f(o).format("MMMM DD, YYYY")+" to "+f(l).format("MMMM DD, YYYY")),a=s["dbSales"].collection("billingStatements").where("bsDate",">=",o).where("bsDate","<=",l).where("status","in",r),a.get().then((function(t){if(!t.empty){t.forEach((function(e){n.push(e.data()),i.push(e.id)}));var a=s["dbSales"].collection("billingStatementSeries").orderBy("dateCreated","asc"),r=s["dbSales"].collection("serviceTypes").orderBy("dateCreated","asc"),o=s["dbSales"].collection("company").orderBy("dateCreated","asc"),l=[],p=[],h=[];a.get().then((function(t){t.forEach((function(e){l.push(e.data())})),r.get().then((function(t){t.forEach((function(e){p.push(e.data())})),o.get().then((function(t){t.forEach((function(e){h.push(e.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=i[a],n[a]["bsSeries"]="",n[a]["serviceType"]="",n[a]["company"]="",n[a]["stat"]="",n[a].amount=g(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2));for(var r=0;r<l.length;r++)l[r].billingStatementSeriesId==n[a].bsSeriesReference&&(n[a].bsSeries=l[r].startNumber+"-"+l[r].endNumber);for(var s=0;s<p.length;s++)p[s].serviceTypeId==n[a].serviceTypeReference&&(n[a].serviceType=p[s].type);for(var o=0;o<h.length;o++)h[o].companyId==n[a].companyReference&&(n[a].company=h[o].company);1==n[a].status?n[a].stat="Unpaid":2==n[a].status?(n[a].stat="Paid",console.log(n[a].stat+" "+n[a].status)):3==n[a].status?n[a].stat="Collected":0==n[a].status&&(n[a].stat="Cancel"),c.push(n[a])}d=[{name:"Number",key:"num",width:10},{key:"bsNumber",name:"BS Number",width:18,style:{alignment:u["a"].middleCenter}},{key:"bsDate",name:"BS Date",width:18,style:{alignment:u["a"].middleCenter}},{key:"company",name:"Company",width:28,style:{alignment:u["a"].middleCenter}},{key:"amount",name:"Amount",width:18,style:{alignment:u["a"].middleCenter}},{key:"amountPaid",name:"Amount Paid",width:18,style:{alignment:u["a"].middleCenter}},{key:"dueDate",name:"Due Date",width:18,style:{alignment:u["a"].middleCenter}},{key:"datePaid",name:"Date Paid ",width:18,style:{alignment:u["a"].middleCenter}},{key:"bsSeries",name:"BS Series",width:18,style:{alignment:u["a"].middleCenter}},{key:"terms",name:"Terms",width:18,style:{alignment:u["a"].middleCenter}},{key:"serviceType",name:"Service Type",width:18,style:{alignment:u["a"].middleCenter}},{key:"description",name:"Desciption",width:38,style:{alignment:u["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:u["a"].middleCenter}}];for(var b={fileName:"Billing Statement ("+f().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Billing Statement",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Billing Statement: ("+m+")",headerDefinition:d}}}]},v=[],y=0;y<c.length;y++)c[y]["num"]=y+1;v.push({data:c}),e.downloadExcel(b,v)}))}))}))}}))}}},C=w,x=(a("57e7"),a("2877")),_=Object(x["a"])(C,i,n,!1,null,null,null);t["default"]=_.exports},"492b":function(e,t,a){},"4b8d":function(e,t,a){"use strict";a("e204")},"4e4e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("h3",[e._v(e._s(e.types.type)+" Signatory")]),a("hr"),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"signatory-table",attrs:{columns:e.columns,rows:e.signatories,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["orderNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.orderNumber))])]):e._e(),"label"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.label))])]):e._e(),"name"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.name))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(i){return a("span",{key:i.userId},[i.userId==t.row.userReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateSignatory(t.row)}}})]):e._e()])]}}])})],1)]),a("div",{staticClass:"text-right pt-4 pb-4"},[a("base-button",{staticClass:"col-md-2 ml-2 mr-3",attrs:{id:"darkInlineBtn"},nativeOn:{click:function(t){return e.$router.push("/settings/print/signatory")}}},[e._v("Close")])],1),a("b-modal",{attrs:{size:"md",id:"new-signatory-modal",title:"New Signatory",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addSignatory(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-signatory-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Signatory Order Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"0"},model:{value:e.newOrderNumber,callback:function(t){e.newOrderNumber=t},expression:"newOrderNumber"}}),e.$v.newOrderNumber.$anyDirty&&!e.$v.newOrderNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newOrderNumber.$anyDirty&&!e.$v.newOrderNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Label Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Prepared by"},model:{value:e.newLabelName,callback:function(t){e.newLabelName=t},expression:"newLabelName"}}),e.$v.newLabelName.$anyDirty&&!e.$v.newLabelName.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newLabelName.$anyDirty&&!e.$v.newLabelName.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Name:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Juan Dela Cruz"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}),e.$v.newName.$anyDirty&&!e.$v.newName.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-signatory-modal",title:"Edit Signatory",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateSignatory(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-signatory-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Signatory Order Number:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"0",disabled:""},model:{value:e.edit.orderNumber,callback:function(t){e.$set(e.edit,"orderNumber",t)},expression:"edit.orderNumber"}}),e.$v.edit.orderNumber.$anyDirty&&!e.$v.edit.orderNumber.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.orderNumber.$anyDirty&&!e.$v.edit.orderNumber.numCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Label Name:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Prepared by",disabled:""},model:{value:e.edit.label,callback:function(t){e.$set(e.edit,"label",t)},expression:"edit.label"}}),e.$v.edit.label.$anyDirty&&!e.$v.edit.label.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.label.$anyDirty&&!e.$v.edit.label.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Name:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Juan Dela Cruz"},model:{value:e.edit.name,callback:function(t){e.$set(e.edit,"name",t)},expression:"edit.name"}}),e.$v.edit.name.$anyDirty&&!e.$v.edit.name.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)],1)},n=[],r=(a("4160"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),s=a("5530"),o=a("56d7"),l=a("b5ae"),c=a("2f62"),d=a("ac3f"),u=a("7ff6"),m=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z ]*$/),p=l["helpers"].regex("alphaNumAndDot",/^[ 0.-9 ]*$/),h=new Date,f={computed:Object(s["a"])({},Object(c["b"])({types:"PrintSignatory/signatoryType",validationMessage:"PrintSignatory/validationMessage",errorMessage:"PrintSignatory/errorMessage",users:"Users/users",signatories:"PrintSignatory/signatories"})),data:function(){return{newOrderNumber:"",newLabelName:"",newName:"",requestProcessing:!1,columns:[{label:"Order Number",field:"orderNumber",width:"100px"},{label:"Label",field:"label"},{label:"Name",field:"name"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,loadError:!1,edit:{id:"",signatoryId:"",orderNumber:"",labelName:"",name:""}}},validations:{newOrderNumber:{required:l["required"],numCustomValidator:p},newLabelName:{required:l["required"],alphaCustomValidator:m},newName:{alphaCustomValidator:m},edit:{orderNumber:{required:l["required"],numCustomValidator:p},label:{required:l["required"],alphaCustomValidator:m},name:{alphaCustomValidator:m}}},beforeRouteEnter:function(e,t,a){var i=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",i),r=[];n.get().then((function(e){if(!e.empty){e.forEach((function(e){r.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",r[0].userRoleReference),i=[];t.get().then((function(e){e.forEach((function(e){i.push(e.data())})),"User"==i[0].userRole||"Manager"==i[0].userRole?a("/main/home"):"Administrator"==i[0].userRole&&a()}))}}))},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("PrintSignatory/getSignatoryType",{id:e.$router.currentRoute.params.id});case 2:e.getSignatories();case 3:case"end":return t.stop()}}),t)})))()},methods:{addSignatory:function(){var e=this;if(e.requestProcessing=!1,e.$v.newOrderNumber.$touch(),e.$v.newLabelName.$touch(),e.$v.newName.$touch(),!e.$v.newOrderNumber.$error&&!e.$v.newLabelName.$error&&!e.$v.newName.$error){e.requestProcessing=!0;var t={signatoryId:"",orderNumber:e.newOrderNumber,label:Object(d["a"])(e.newLabelName),name:Object(u["a"])(e.newName)||"",signatoryTypeReference:e.$router.currentRoute.params.id,createdBy:"",userReference:"",status:1,dateCreated:h,dateModified:h};e.$store.dispatch("PrintSignatory/saveSignatory",t).then((function(){setTimeout((function(){e.requestProcessing=!1,0==e.errorMessage?(e.newOrderNumber="",e.newLabelName="",e.newName="",e.$v.newOrderNumber.$reset(),e.$v.newLabelName.$reset(),e.$v.newName.$reset(),e.$bvModal.hide("new-signatory-modal"),e.$swal({title:"Success",text:"New print signatory added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getSignatories()}))):1==e.errorMessage&&e.signatoryErrorMessage()}),1e3)}))}},signatoryInvalidMessage:function(){var e=this;e.$swal({title:"Invalid",text:"Print signatory label name already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),e.requestProcessing=!1},signatoryErrorMessage:function(){var e=this;e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},getSignatories:function(){var e=this;e.loading=!0,e.loadError=!1,e.$store.dispatch("PrintSignatory/getSignatories",{id:e.$router.currentRoute.params.id}),setTimeout((function(){e.loading=!1}),1e3)},openUpdateSignatory:function(e){var t=this;t.edit={id:e.id,signatoryId:e.signatoryId,orderNumber:e.orderNumber,label:e.label,name:e.name},t.$bvModal.show("update-signatory-modal")},updateSignatory:function(){var e=this;e.requestProcessing=!0,e.$v.edit.$touch(),e.$v.edit.$error||e.$store.dispatch("PrintSignatory/checkUpdateSignatory",e.edit).then((function(){setTimeout((function(){1==e.validationMessage?e.signatoryInvalidMessage():0==e.validationMessage&&(e.edit.label=Object(d["a"])(e.edit.label),e.edit.name=Object(u["a"])(e.edit.name),e.$store.dispatch("PrintSignatory/updateSignatory",e.edit).then((function(){e.requestProcessing=!1,0==e.errorMessage?(e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-signatory-modal"),e.$refs["signatory-table"].reset(),e.getSignatories(),e.$swal({title:"Success",text:"Signatory updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==e.errorMessage&&e.signatoryErrorMessage()})))}),1e3)}))},removeSignatory:function(e){var t=this;t.requestProcessing=!0,t.$swal({title:"Are you sure?",text:"You want to remove this signatory",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){a.value&&t.$store.dispatch("PrintSignatory/deleteSignatory",{id:e.id}).then((function(){t.requestProcessing=!1,0==t.errorMessage?(t.$refs["signatory-table"].reset(),t.getSignatories(),t.$swal({title:"Success",text:"Signatory remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==t.errorMessage&&t.signatoryErrorMessage()}))}))}}},b=f,g=(a("6415"),a("2877")),v=Object(g["a"])(b,i,n,!1,null,null,null);t["default"]=v.exports},"53f9":function(e,t,a){"use strict";a("180c")},"57e7":function(e,t,a){"use strict";a("bb02")},6415:function(e,t,a){"use strict";a("e4ad")},6547:function(e,t,a){var i=a("a691"),n=a("1d80"),r=function(e){return function(t,a){var r,s,o=String(n(t)),l=i(a),c=o.length;return l<0||l>=c?e?"":void 0:(r=o.charCodeAt(l),r<55296||r>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):r:e?o.slice(l,l+2):s-56320+(r-55296<<10)+65536)}};e.exports={codeAt:r(!1),charAt:r(!0)}},"8af8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Nearly Clearing"}},[a("nearly-clearing-checks")],1),a("tab-pane",{attrs:{title:"For Clearing"}},[a("for-clearing-checks")],1),a("tab-pane",{attrs:{title:"Post-Dated"}},[a("post-dated-checks")],1)],1)],1)])],1)},n=[],r=(a("4160"),a("b680"),a("159b"),a("96cf"),a("1da1")),s=a("56d7"),o=a("93b4"),l=a("c1df"),c=a("e966"),d=c.bindWith(",","."),u={components:{},data:function(){return{totalChecks:0,clearingCheckCount:0,clearingCheckAmount:"₱ 0.00",postdatedCheckCount:0,postdatedCheckAmount:"₱ 0.00",clearedCheckCount:0,clearedCheckAmount:"₱ 0.00",checkChart:{allData:[],chartData:{datasets:[],labels:[]},extraOptions:o["b"]},year:(new Date).getFullYear(),clearingAmounts:[],userRole:"",clearedMonth:l().format("MMMM")}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole();case 1:case"end":return t.stop()}}),t)})))()},methods:{getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=s["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var i=s["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];i.get().then((function(t){t.empty||(t.forEach((function(e){n.push(e.data())})),e.userRole=n[0].userRole)}))}))},getCheckData:function(){var e=this,t=l().add(6,"days").format("YYYY-MM-DD"),a=l().format("YYYY-MM-DD"),i=l(a).subtract(6,"days").format("YYYY-MM-DD"),n=l(a).subtract(1,"day").format("YYYY-MM-DD"),r=null,o=null,c=null;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var u=s["dbUsers"].collection("users").where("username","==",e.username),m=[],p="",h="";u.get().then((function(l){l.forEach((function(e){m.push(e.data())})),h=m[0].userId;var u=s["dbUsers"].collection("userRoles").where("userRoleId","==",m[0].userRoleReference),f=[];u.get().then((function(l){l.forEach((function(e){f.push(e.data())})),p=f[0].userRole,"Administrator"==p||"Manager"==p?(r=s["db"].collection("bankChecks").where("bankCheckDate",">=",a).where("bankCheckDate","<=",t).where("status","in",[1,2,3]),o=s["db"].collection("bankChecks").where("bankCheckDate",">",t).where("status","in",[1,2,3]),c=s["db"].collection("bankChecks").where("bankCheckDate",">=",i).where("bankCheckDate","<=",n).where("status","in",[1,3])):"User"==p&&(r=s["db"].collection("bankChecks").where("bankCheckDate",">=",a).where("bankCheckDate","<=",t).where("status","in",[1,2,3]).where("userRoleReference","==",h),o=s["db"].collection("bankChecks").where("bankCheckDate",">",t).where("userRoleReference","==",h).where("status","in",[1,2,3]),c=s["db"].collection("bankChecks").where("bankCheckDate",">=",i).where("bankCheckDate","<=",n).where("userRoleReference","==",h).where("status","in",[1,3]));var u=[],m=[],b=[];r.get().then((function(t){t.forEach((function(e){u.push(e.data())}));for(var a=0,i=0,n=0,r=0,s=0,l=0,p=0;p<u.length;p++)a++,r=parseFloat(r)+parseFloat(u[p].bankCheckAmount);o.get().then((function(t){t.forEach((function(e){m.push(e.data())}));for(var o=0;o<m.length;o++)i++,s=parseFloat(s)+parseFloat(m[o].bankCheckAmount);c.get().then((function(t){t.forEach((function(e){b.push(e.data())}));for(var o=0;o<b.length;o++)n++,l=parseFloat(l)+parseFloat(b[o].bankCheckAmount);e.clearingCheckCount=a,e.clearingCheckAmount="₱ "+d(r.toFixed(2)),e.postdatedCheckCount=i,e.postdatedCheckAmount="₱ "+d(s.toFixed(2)),e.clearedCheckCount=n,e.clearedCheckAmount="₱ "+d(l.toFixed(2))}))}))}))}))}))}}},m=u,p=(a("8c65"),a("2877")),h=Object(p["a"])(m,i,n,!1,null,null,null);t["default"]=h.exports},"8ba0":function(e,t,a){},"8c65":function(e,t,a){"use strict";a("492b")},"93b4":function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));a("4160"),a("159b");var i=a("5530");a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var a in t)"object"!==n(t[a])?e[a]=t[a]:r(e[a],t[a])}var s=a("e966"),o=s.bindWith(",","."),l={mode:"light",fonts:{base:"Open Sans"},colors:{gray:{100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},theme:{default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#F1CA0D",success:"#2dce89",danger:"#C72111",warning:"#fb6340"},black:"#12263F",white:"#ffffff",transparent:"transparent"}};function c(e){var t=l.colors,a=l.mode,i=l.fonts,n={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:"dark"==a?t.gray[700]:t.gray[600],defaultFontColor:"dark"==a?t.gray[700]:t.gray[600],defaultFontFamily:i.base,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"right",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:t.theme["info"]},line:{tension:.4,borderWidth:4,borderColor:t.theme["danger"],backgroundColor:t.theme["default"],borderCapStyle:"rounded"},rectangle:{borderWidth:0,borderColor:t.theme["primary"],backgroundColor:t.theme["default"]},arc:{backgroundColor:t.theme["danger"],borderColor:"dark"==a?t.gray[800]:t.white,borderWidth:0}},tooltips:{enabled:!0,mode:"index",intersect:!0}},doughnut:{cutoutPercentage:50,legendCallback:function(e){var t=e.data,a="";return t.labels.forEach((function(e,i){var n=t.datasets[0].backgroundColor[i];a+='<span class="chart-legend-item">',a+='<i class="chart-legend-indicator" style="background-color: '+n+'"></i>',a+=e,a+="</span>"})),a}}}};return e.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:"dark"==a?t.gray[900]:t.gray[300],drawBorder:!0,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:"dark"==a?t.gray[900]:t.gray[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%1))return o(e)}}}),e.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!0,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20},maxBarThickness:85}),n}function d(e){r(e,c(e))}var u={maintainAspectRatio:!1,legend:{display:!1},responsive:!0},m={scales:{yAxes:[{gridLines:{color:l.colors.gray[700],zeroLineColor:l.colors.gray[700]},ticks:{callback:function(e){if(!(e%10))return"$"+e+"k"}}}]}},p=(Object(i["a"])(Object(i["a"])({},u),{},{tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},responsive:!0,scales:{yAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.0)",zeroLineColor:"transparent"},ticks:{suggestedMin:60,suggestedMax:125,padding:20,fontColor:"#9e9e9e"}}],xAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#9e9e9e"}}]}}),Object(i["a"])(Object(i["a"])({},u),{},{tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},options:{plugins:{legend:{display:!1}}},responsive:!0,scales:{yAxes:[{gridLines:{drawBorder:!1,color:"rgba(253,93,147,0.1)",zeroLineColor:"transparent"},ticks:{suggestedMin:60,suggestedMax:125,padding:20,fontColor:"#9e9e9e"}}],xAxes:[{gridLines:{drawBorder:!1,color:"rgba(253,93,147,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#9e9e9e"}}]}}));Object(i["a"])(Object(i["a"])({},u),{},{cutoutPercentage:70,tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{display:0,ticks:{display:!1},gridLines:{drawBorder:!1,zeroLineColor:"transparent",color:"rgba(255,255,255,0.05)"}}],xAxes:[{display:0,barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(255,255,255,0.1)",zeroLineColor:"transparent"},ticks:{display:!1}}]}}),Object(i["a"])(Object(i["a"])({},u),{},{tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.0)",zeroLineColor:"transparent"},ticks:{suggestedMin:60,suggestedMax:125,padding:20,fontColor:"#9a9a9a"}}],xAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(225,78,202,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#9a9a9a"}}]}}),Object(i["a"])(Object(i["a"])({},u),{},{tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.0)",zeroLineColor:"transparent"},ticks:{suggestedMin:50,suggestedMax:110,padding:20,fontColor:"#ff8a76"}}],xAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(220,53,69,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#ff8a76"}}]}}),Object(i["a"])(Object(i["a"])({},u),{},{tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.0)",zeroLineColor:"transparent"},ticks:{suggestedMin:50,suggestedMax:125,padding:20,fontColor:"#9e9e9e"}}],xAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(0,242,195,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#9e9e9e"}}]}}),Object(i["a"])(Object(i["a"])({},u),{},{tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.1)",zeroLineColor:"transparent"},ticks:{suggestedMin:60,suggestedMax:120,padding:20,fontColor:"#9e9e9e"}}],xAxes:[{gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#9e9e9e"}}]}})},"96ce":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"user-role-table",attrs:{columns:e.columns,rows:e.userRoles,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["userRole"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.userRole))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(i){return a("span",{key:i.userId},[i.userId==t.row.userReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateUserRoleModal(t.row)}}})]):e._e()])]}}])})],1),a("hr"),!e.loading&&e.userRoles.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedUserRoles(1,"")}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr"),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-user-role-modal",modifiers:{"new-user-role-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[e._v("New User Role")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-user-role-modal",title:"New User Role",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addUserRole(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-user-role-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("User Role:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"User Role"},model:{value:e.newUserRole,callback:function(t){e.newUserRole=t},expression:"newUserRole"}}),e.$v.newUserRole.$anyDirty&&!e.$v.newUserRole.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newUserRole.$anyDirty&&!e.$v.newUserRole.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-user-role-modal",title:"Edit User Role",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateUserRole(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("update-user-role-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("User Role:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"User Role"},model:{value:e.edit.userRole,callback:function(t){e.$set(e.edit,"userRole",t)},expression:"edit.userRole"}}),e.$v.edit.userRole.$anyDirty&&!e.$v.edit.userRole.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.userRole.$anyDirty&&!e.$v.edit.userRole.alphaCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])])],1)],1)},n=[],r=(a("99af"),a("4160"),a("159b"),a("5530")),s=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("7ff6"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z ]*$/),m=["#","Role","Actions"],p=a("c1df"),h=new Date,f=a("9f25"),b={components:{},data:function(){return{columns:[{label:"Role",field:"userRole"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,loadError:!1,userRoleTable:{title:"User Role Table",subTitle:"",columns:[].concat(m)},userRolesCount:0,userRoles:[],currentPage:1,searchTerm:"",searching:!1,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newUserRole:"",edit:{id:"",userRoleId:"",userRole:""}}},beforeRouteEnter:function(e,t,a){var i=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",i),r=[];n.get().then((function(e){if(!e.empty){e.forEach((function(e){r.push(e.data())}));var t=o["dbUsers"].collection("userRoles").where("userRoleId","==",r[0].userRoleReference),i=[];t.get().then((function(e){e.forEach((function(e){i.push(e.data())})),"User"==i[0].userRole||"Manager"==i[0].userRole?a("/main/home"):"Administrator"==i[0].userRole&&a()}))}}))},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPaginatedUserRoles(1,"");case 1:case"end":return t.stop()}}),t)})))()},computed:Object(r["a"])({},Object(d["b"])({users:"Users/users"})),validations:{newUserRole:{required:l["required"],alphaCustomValidator:u},edit:{userRole:{required:l["required"],alphaCustomValidator:u}}},methods:{getPaginatedUserRoles:function(e,t){var a=this,i=null,n=[],r=[];a.loading=!0,a.loadError=!1,a.userRoles=[],t&&(a.searching=!0),t?"all"!=a.limit?i=o["dbUsers"].collection("userRoles").where("userRole","==",Object(c["a"])(t)).orderBy("dateCreated","asc").limit(a.limit):"all"==a.limit&&(i=o["dbUsers"].collection("userRoles").where("userRole","==",Object(c["a"])(t)).orderBy("dateCreated","asc")):"all"!=a.limit?i=o["dbUsers"].collection("userRoles").orderBy("userRole","asc").limit(a.limit):"all"==a.limit&&(i=o["dbUsers"].collection("userRoles").orderBy("userRole","asc")),i.get().then((function(t){if(!t.empty){t.forEach((function(e){n.push(e.data()),r.push(e.id)})),n.sort((function(e,t){return e.userRole-t.userRole}));for(var i=0;i<n.length;i++)n[i]["rowNum"]=1+i,n[i]["id"]=r[i],n[i].dateCreated=p.unix(n[i].dateCreated.seconds),a.userRoles.push(n[i]);a.userRolesCount=n.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))},onPageChange:function(e){var t=this.searchTerm;this.getPaginatedUserRoles(e,t)},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getPaginatedUserRoles(1,"")},reloadData:function(){this.searchTerm="",this.searching=!1,this.getPaginatedUserRoles(1,"")},search:function(){var e=this.searchTerm;e&&this.getPaginatedUserRoles(1,e)},addUserRole:function(){var e=this;if(e.requestProcessing=!1,e.$v.newUserRole.$touch(),!e.$v.newUserRole.$error){var t=null;e.requestProcessing=!0,t=o["dbUsers"].collection("userRoles").where("userRole","==",Object(c["a"])(e.newUserRole)),t.get().then((function(t){if(t.empty){if(t){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),i=[],n="UR-"+h.getFullYear()+f(h.getMonth()+1,2)+h.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&i.push(e.data())}));try{o["dbUsers"].collection("userRoles").doc().set({userRoleId:n,userRole:Object(c["a"])(e.newUserRole),userReference:i[0].userId,status:1,dateCreated:h,dateModified:h}).then((function(){e.newUserRole="",e.requestProcessing=!1,e.$v.newUserRole.$reset(),e.$bvModal.hide("new-user-role-modal"),e.$refs["user-role-table"].reset(),e.getPaginatedUserRoles(1,""),e.$swal({title:"Success",text:"New user role added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"User role already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},openUpdateUserRoleModal:function(e){this.edit={id:e.id,userRoleId:e.userRoleId,userRole:e.userRole},this.$bvModal.show("update-user-role-modal")},updateUserRole:function(){var e=this;if(e.requestProcessing=!0,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;t=o["dbUsers"].collection("userRoles").where("userRole","==",Object(c["a"])(e.edit.userRole)).where("userRoleId","!=",e.edit.userRoleId),t.get().then((function(t){if(t.empty){if(t)try{o["dbUsers"].collection("userRoles").doc(e.edit.id).update({userRole:Object(c["a"])(e.edit.userRole),dateModified:h}).then((function(){e.edit={},e.$v.edit.$reset(),e.$bvModal.hide("update-user-role-modal"),e.requestProcessing=!1,e.$refs["user-role-table"].reset(),e.getPaginatedUserRoles(1,""),e.$swal({title:"Success",text:"User role updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"User role already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}}}},g=b,v=(a("53f9"),a("2877")),y=Object(v["a"])(g,i,n,!1,null,null,null);t["default"]=y.exports},b3f1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},["Reimbursement"==e.listType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"For Approval")}}},[e._v("For Approval")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Approved")}}},[e._v("Approved")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Processed")}}},[e._v("Processed")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Received")}}},[e._v("Received")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Rejected")}}},[e._v("Rejected")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"All")}}},[e._v("All")])])],1)]):e._e(),"Petty Cash"==e.listType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Current")}}},[e._v("Current")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Checked")}}},[e._v("Checked")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Processed")}}},[e._v("Processed")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"All")}}},[e._v("All")])])],1)]):e._e(),"Cash Advance"==e.listType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Release")}}},[e._v("Release")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"Cleared")}}},[e._v("Cleared")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getItems(e.listType,"All")}}},[e._v("All")])])],1)]):e._e(),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-2 pb-3 pl-4 text-right"},[a("b",[e._v("Expenditures:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"170px"},attrs:{id:"inputStyle",options:e.listTypes,reduce:function(e){return e.listType},label:"listType",clearable:!1,readonly:""},on:{input:function(t){return e.changeExpense(e.listType)}},model:{value:e.listType,callback:function(t){e.listType=t},expression:"listType"}})],1),a("span",{staticClass:"col-sm-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),"month"==e.filter?a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"200px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}})],1):e._e(),"dateRange"==e.filter?a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"150px"},attrs:{type:"date",max:e.maxDateRange,min:"1997-01-01",id:"inputStyle"},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1):e._e(),"dateRange"==e.filter?a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"150px"},attrs:{type:"date",max:e.maxDateRange,min:"1997-01-01",id:"inputStyle"},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1):e._e()]),a("div",{staticClass:"table-full-width"},["Reimbursement"==e.listType?a("vue-good-table",{attrs:{columns:e.reimColumns,rows:e.reimbursements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["nameReference"==t.column.field?a("span",e._l(e.names,(function(i){return a("span",{key:i.userId},[i.userId==t.row.nameReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),0):e._e(),"totalAmount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("₱ "+e._s(t.row.totalAmount))])]):e._e(),"processDate"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(""==t.row.processDate?"---------":t.row.processDate,"MMM DD, YYYY")))])]):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("FOR APPROVAL")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("APPROVED")]):e._e(),3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("PROCESSED")]):e._e(),4==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("RECEIVED")]):e._e(),0==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("REJECTED")]):e._e()]):e._e()])]}}],null,!1,3976621108)}):e._e(),"Petty Cash"==e.listType?a("vue-good-table",{attrs:{columns:e.pettyColumns,rows:e.pettyCash,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["pettyCashNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.pettyCashNumber))])]):e._e(),"department"==t.column.field?a("span",e._l(e.departments,(function(i){return a("span",{key:i.departmentUid},[i.departmentUid==t.row.departmentReference?a("span",[e._v(e._s(i.departmentName))]):e._e()])})),0):e._e(),"nameToReference"==t.column.field?a("span",e._l(e.names,(function(i){return a("span",{key:i.userId},[i.userId==t.row.nameToReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),0):e._e(),"amountReceive"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("₱ "+e._s(t.row.amountReceive))])]):e._e(),"pettyCashDate"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(t.row.pettyCashDate,"MMM DD, YYYY")))])]):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("CURRENT")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("CHECKED")]):e._e(),3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("PROCESSED")]):e._e()]):e._e()])]}}],null,!1,697824698)}):e._e(),"Cash Advance"==e.listType?a("vue-good-table",{attrs:{columns:e.caColumns,rows:e.cas,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["name"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.cashAdvanceName))])]):e._e(),"cashAdvanceAmount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("₱ "+e._s(t.row.cashAdvanceAmount))])]):e._e(),"type"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.type))])]):e._e(),"caType"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.caType))])]):e._e(),"cashAdvanceDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.cashAdvanceDate,"MMM DD, YYYY")))])]):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("RELEASE")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("CLEARED")]):e._e()]):e._e()])]}}],null,!1,2721534254)}):e._e()],1),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.reimbursements.length?a("div",{staticClass:"row pl-4 mt-2 mb-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),!e.loading&&e.pettyCash.length?a("div",{staticClass:"row pl-4 mt-2 mb-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),!e.loading&&e.cas.length?a("div",{staticClass:"row pl-4 mt-2 mb-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getItems(e.listType,e.stat)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),"Reimbursement"==e.listType?a("div",{staticClass:"text-right pt-2"},[0!=e.reimbursements.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.exportItem}},[e._v("Export")]):e._e(),0!=e.reimbursements.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.printItem}},[e._v("Print")]):e._e()],1):e._e(),"Petty Cash"==e.listType?a("div",{staticClass:"text-right pt-2"},[0!=e.pettyCash.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.exportItem}},[e._v("Export")]):e._e(),0!=e.pettyCash.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.printItem}},[e._v("Print")]):e._e()],1):e._e(),"Cash Advance"==e.listType?a("div",{staticClass:"text-right pt-2"},[0!=e.cas.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.exportItem}},[e._v("Export")]):e._e(),0!=e.cas.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:e.printItem}},[e._v("Print")]):e._e()],1):e._e()])],1)],1)},n=[],r=(a("4de4"),a("4160"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),s=a("56d7"),o=a("add5"),l=a.n(o),c=a("68a2"),d=a("c1df"),u=a("e966"),m=u.bindWith(",","."),p={components:{},data:function(){return{reimColumns:[{label:"Name",field:"nameReference"},{label:"Total Amount",field:"totalAmount"},{label:"Process Date",field:"processDate"},{label:"Status",field:"status",sortable:!1}],reimbursements:[],pettyColumns:[{label:"Petty Cash No",field:"pettyCashNumber"},{label:"Department",field:"department"},{label:"Name",field:"nameToReference"},{label:"Amount",field:"amountReceive"},{label:"Date",field:"pettyCashDate"},{label:"Status",field:"status"}],pettyCash:[],caColumns:[{label:"Name",field:"name"},{label:"Amount",field:"cashAdvanceAmount"},{label:"Release Type",field:"type"},{label:"CA Type",field:"caType"},{label:"Date",field:"cashAdvanceDate"},{label:"Status",field:"status"}],cas:[],loading:!1,companies:[],requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",listTypes:[{listType:"Reimbursement"},{listType:"Petty Cash"},{listType:"Cash Advance"}],filters:[{filterId:"month",filter:"Month"},{filterId:"dateRange",filter:"Date Range"}],filter:"month",dateCreated:d().format("YYYY-MM"),startDate:d().subtract(6,"days").format("YYYY-MM-DD"),endDate:d().format("YYYY-MM-DD"),maxDate:d().format("YYYY-MM"),maxDateRange:d().format("YYYY-MM-DD"),listType:"Reimbursement",stat:"",names:[],departments:[]}},beforeRouteEnter:function(e,t,a){var i=localStorage.getItem("aisname"),n=s["dbUsers"].collection("users").where("username","==",i),r=[];n.get().then((function(e){if(!e.empty){e.forEach((function(e){r.push(e.data())}));var t=s["dbUsers"].collection("userRoles").where("userRoleId","==",r[0].userRoleReference),i=[];t.get().then((function(e){e.forEach((function(e){i.push(e.data())})),"User"==i[0].userRole?a("/main/home"):"Manager"!=i[0].userRole&&"Administrator"!=i[0].userRole||a()}))}}))},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"Reimbursement"==e.listType?e.stat="For Approval":"Petty Cash"==e.listType?e.stat="Current":"Cash Advance"==e.listType&&(e.stat="Release"),e.getItems(e.listType,e.stat),e.getDepartments(),e.getNames();case 4:case"end":return t.stop()}}),t)})))()},methods:{getNames:function(){var e=this,t=s["dbUsers"].collection("users");e.names=[],t.get().then((function(t){t.empty||t.forEach((function(t){e.names.push(t.data())}))}))},getDepartments:function(){var e=this,t=s["dbUsers"].collection("departments");e.departments=[],t.get().then((function(t){t.empty||t.forEach((function(t){e.departments.push(t.data())}))}))},changeExpense:function(e){"Reimbursement"==e?this.stat="For Approval":"Petty Cash"==e?this.stat="Current":"Cash Advance"==e&&(this.stat="Release"),this.getItems(e,this.stat)},getItems:function(e,t){var a=this,i=null,n=[],r=0,o=null,l=[],c="",u="";a.loading=!0,a.reimbursements=[],a.pettyCash=[],a.cas=[],a.listType=e,a.stat=t,"month"==a.filter?(c=d(a.dateCreated).startOf("month").format("YYYY-MM-DD"),u=d(a.dateCreated).endOf("month").format("YYYY-MM-DD")):"dateRange"==a.filter&&(c=d(a.startDate).format("YYYY-MM-DD"),u=d(a.endDate).format("YYYY-MM-DD")),"Reimbursement"==e?("For Approval"==a.stat?r=1:"Approved"==a.stat?r=2:"Processed"==a.stat?r=3:"Received"==a.stat?r=4:"Rejected"==a.stat&&(r=0),"all"!=a.limit?"All"!=a.stat?i=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(c)).where("dateCreated","<=",new Date(u)).where("status","==",r).limit(a.limit):"All"==a.stat&&(i=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(c)).where("dateCreated","<=",new Date(u)).limit(a.limit)):"all"==a.limit&&("All"!=a.stat?i=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(c)).where("dateCreated","<=",new Date(u)).where("status","==",r):"All"==a.stat&&(i=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(c)).where("dateCreated","<=",new Date(u))))):"Petty Cash"==e?("Current"==a.stat?r=1:"Checked"==a.stat?r=2:"Processed"==a.stat&&(r=3),"all"!=a.limit?"All"!=a.stat?i=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",c).where("pettyCashDate","<=",u).where("status","==",r).limit(a.limit):"All"==a.stat&&(i=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",c).where("pettyCashDate","<=",u).limit(a.limit)):"all"==a.limit&&("All"!=a.stat?i=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",c).where("pettyCashDate","<=",u).where("status","==",r):"All"==a.stat&&(i=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",c).where("pettyCashDate","<=",u)))):"Cash Advance"==e&&("Release"==a.stat?r=1:"Cleared"==a.stat&&(r=2),"all"!=a.limit?"All"!=a.stat?i=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",c).where("cashAdvanceDate","<=",u).where("status","==",r).limit(a.limit):"All"==a.stat&&(i=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",c).where("cashAdvanceDate","<=",u).limit(a.limit)):"all"==a.limit&&("All"!=a.stat?i=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",c).where("cashAdvanceDate","<=",u).where("status","==",r):"All"==a.stat&&(i=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",c).where("cashAdvanceDate","<=",u))),o=s["dbExpense"].collection("cashAdvanceTypes")),i.get().then((function(e){if(!e.empty){e.forEach((function(e){n.push(e.data())}));for(var t=0;t<n.length;t++)n[t].dateCreated=d.unix(n[t].dateCreated.seconds),"Reimbursement"==a.listType?(n[t].totalAmount=m(parseFloat(n[t].totalAmount.replaceAll(",","")).toFixed(2)),a.reimbursements.push(n[t])):"Petty Cash"==a.listType&&(n[t].amountReceive=m(parseFloat(n[t].amountReceive.replaceAll(",","")).toFixed(2)),a.pettyCash.push(n[t]));"Cash Advance"==a.listType&&o.get().then((function(e){e.forEach((function(e){l.push(e.data())}));for(var t=0;t<n.length;t++){n[t]["caType"]="";for(var i=0;i<l.length;i++)l[i].cashAdvanceTypeId==n[t].caTypeReference&&(n[t].caType=l[i].type);n[t].cashAdvanceAmount=m(parseFloat(n[t].cashAdvanceAmount.replaceAll(",","")).toFixed(2)),a.cas.push(n[t])}}))}setTimeout((function(){a.loading=!1}),1e3)}))},printItem:function(){var e=this,t=null,a=[],i=0,n=null,r=null,o=[],c=[],u=null,p=[],h="",f="",b=[],g=[],v="",y="";"month"==e.filter?(h=d(e.dateCreated).startOf("month").format("YYYY-MM-DD"),f=d(e.dateCreated).endOf("month").format("YYYY-MM-DD"),y=d(h).format("MMMM YYYY")):"dateRange"==e.filter&&(h=d(e.startDate).format("YYYY-MM-DD"),f=d(e.endDate).format("YYYY-MM-DD"),y=d(h).format("MMMM DD, YYYY")+" to "+d(f).format("MMMM DD, YYYY")),"Reimbursement"==e.listType?("For Approval"==e.stat?i=1:"Approved"==e.stat?i=2:"Processed"==e.stat?i=3:"Received"==e.stat?i=4:"Rejected"==e.stat&&(i=0),n=s["dbUsers"].collection("departments").orderBy("departmentName","asc"),r=s["dbUsers"].collection("users").where("status","==",1).orderBy("lastname","asc"),"All"!=e.stat?t=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(h)).where("dateCreated","<=",new Date(f)).where("status","==",i):"All"==e.stat&&(t=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(h)).where("dateCreated","<=",new Date(f)))):"Petty Cash"==e.listType?("Current"==e.stat?i=1:"Checked"==e.stat?i=2:"Processed"==e.stat&&(i=3),n=s["dbUsers"].collection("departments").orderBy("departmentName","asc"),r=s["dbUsers"].collection("users").where("status","==",1).orderBy("lastname","asc"),"All"!=e.stat?t=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",h).where("pettyCashDate","<=",f).where("status","==",i):"All"==e.stat&&(t=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",h).where("pettyCashDate","<=",f))):"Cash Advance"==e.listType&&("Release"==e.stat?i=1:"Cleared"==e.stat&&(i=2),"All"!=e.stat?t=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",h).where("cashAdvanceDate","<=",f).where("status","==",i):"All"==e.stat&&(t=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",h).where("cashAdvanceDate","<=",f))),t.get().then((function(t){t.empty||(t.forEach((function(e){a.push(e.data())})),"Reimbursement"==e.listType?n.get().then((function(e){e.forEach((function(e){o.push(e.data())})),r.get().then((function(e){e.forEach((function(e){c.push(e.data())}));for(var t=0;t<a.length;t++){a[t]["company"]="",a[t]["department"]="",a[t]["name"]="",a[t]["stat"]="",""!=a[t].processDate&&(a[t].processDate=d(a[t].processDate).format("MMM DD, YYYY")),""!=a[t].monthOf&&(a[t].monthOf=d(a[t].monthOf).format("MMM YYYY"));for(var i=0;i<o.length;i++)a[t].departmentReference==o[i].departmentUid&&(a[t].department=o[i].departmentName);for(var n=0;n<c.length;n++)a[t].nameReference==c[n].userId&&(a[t].name=c[n].firstname+" "+c[n].lastname);1==a[t].status?a[t].stat="For Approval":2==a[t].status?a[t].stat="Approved":3==a[t].status?a[t].stat="Processed":4==a[t].status?a[t].stat="Received":0==a[t].status&&(a[t].stat="Rejected"),a[t].totalAmount=m(parseFloat(a[t].totalAmount.replaceAll(",","")).toFixed(2)),b.push(a[t])}g=[{field:"name",displayName:"Name"},{field:"processDate",displayName:"Process Date"},{field:"monthOf",displayName:"Month"},{field:"totalAmount",displayName:"Total Amount"},{field:"voucherNumber",displayName:"Voucher No."},{field:"department",displayName:"Department"},{field:"stat",displayName:"Status"}],v="Reimbursement",l()({printable:b,properties:g,type:"json",header:"<h2>"+v+"</h2><br><h4>DATE: "+y+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:v+" "+d().format("MMMM YYYY")})}))})):"Petty Cash"==e.listType?n.get().then((function(e){e.forEach((function(e){o.push(e.data())})),r.get().then((function(e){e.forEach((function(e){c.push(e.data())}));for(var t=0;t<a.length;t++){a[t]["department"]="",a[t]["name"]="",a[t]["stat"]="",a[t].pettyCashDate=d(a[t].pettyCashDate).format("MMM DD, YYYY");for(var i=0;i<o.length;i++)a[t].departmentReference==o[i].departmentUid&&(a[t].department=o[i].departmentName);for(var n=0;n<c.length;n++)a[t].nameToReference==c[n].userId&&(a[t].name=c[n].firstname+" "+c[n].lastname);1==a[t].status?a[t].stat="Current":2==a[t].status?a[t].stat="Checked":3==a[t].status&&(a[t].stat="Processed"),a[t].amountReceive=m(parseFloat(a[t].amountReceive.replaceAll(",","")).toFixed(2)),b.push(a[t])}g=[{field:"pettyCashNumber",displayName:"Petty Cash No."},{field:"department",displayName:"Department"},{field:"name",displayName:"Name"},{field:"amountReceive",displayName:"Amount"},{field:"stat",displayName:"Status"}],v="Petty Cash",l()({printable:b,properties:g,type:"json",header:"<h2>"+v+"</h2><br><h4>DATE: "+y+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:v+" "+d().format("MMMM YYYY")})}))})):"Cash Advance"==e.listType&&(u=s["dbExpense"].collection("cashAdvanceTypes"),u.get().then((function(e){e.forEach((function(e){p.push(e.data())}));for(var t=0;t<a.length;t++){a[t]["caType"]="";for(var i=0;i<p.length;i++)p[i].cashAdvanceTypeId==a[t].caTypeReference&&(a[t].caType=p[i].type);1==a[t].status?a[t].stat="Release":2==a[t].status&&(a[t].stat="Cleared"),a[t].cashAdvanceDate=d(a[t].cashAdvanceDate).format("MMM DD, YYYY"),b.push(a[t])}g=[{field:"cashAdvanceName",displayName:"Name"},{field:"cashAdvanceAmount",displayName:"Amount"},{field:"caType",displayName:"Type"},{field:"type",displayName:"Release Type"},{field:"cashAdvanceDate",displayName:"Date"},{field:"stat",displayName:"Status"}],v="Cash Advance",l()({printable:b,properties:g,type:"json",header:"<h2>"+v+"</h2><br><h4>DATE: "+y+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:v+" "+d().format("MMMM YYYY")})}))))}))},exportItem:function(){var e=new c["b"],t=this,a=null,i=[],n=0,r=null,o=null,l=[],u=[],m=null,p=[],h="",f="",b=[],g=[],v="";"month"==t.filter?(h=d(t.dateCreated).startOf("month").format("YYYY-MM-DD"),f=d(t.dateCreated).endOf("month").format("YYYY-MM-DD"),v=d(h).format("MMMM YYYY")):"dateRange"==t.filter&&(h=d(t.startDate).format("YYYY-MM-DD"),f=d(t.endDate).format("YYYY-MM-DD"),v=d(h).format("MMMM DD, YYYY")+" to "+d(f).format("MMMM DD, YYYY")),"Reimbursement"==t.listType?("For Approval"==t.stat?n=1:"Approved"==t.stat?n=2:"Processed"==t.stat?n=3:"Received"==t.stat?n=4:"Rejected"==t.stat&&(n=0),r=s["dbUsers"].collection("departments").orderBy("departmentName","asc"),o=s["dbUsers"].collection("users").where("status","==",1).orderBy("lastname","asc"),"All"!=t.stat?a=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(h)).where("dateCreated","<=",new Date(f)).where("status","==",n):"All"==t.stat&&(a=s["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(h)).where("dateCreated","<=",new Date(f)))):"Petty Cash"==t.listType?("Current"==t.stat?n=1:"Checked"==t.stat?n=2:"Processed"==t.stat&&(n=3),r=s["dbUsers"].collection("departments").orderBy("departmentName","asc"),o=s["dbUsers"].collection("users").where("status","==",1).orderBy("lastname","asc"),"All"!=t.stat?a=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",h).where("pettyCashDate","<=",f).where("status","==",n):"All"==t.stat&&(a=s["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",h).where("pettyCashDate","<=",f))):"Cash Advance"==t.listType&&("Release"==t.stat?n=1:"Cleared"==t.stat&&(n=2),"All"!=t.stat?a=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",h).where("cashAdvanceDate","<=",f).where("status","==",n):"All"==t.stat&&(a=s["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",h).where("cashAdvanceDate","<=",f))),a.get().then((function(a){a.empty||(a.forEach((function(e){i.push(e.data())})),"Reimbursement"==t.listType?r.get().then((function(t){t.forEach((function(e){l.push(e.data())})),o.get().then((function(t){t.forEach((function(e){u.push(e.data())}));for(var a=0;a<i.length;a++){i[a]["company"]="",i[a]["department"]="",i[a]["name"]="",i[a]["stat"]="",""!=i[a].processDate&&(i[a].processDate=d(i[a].processDate).format("MMM DD, YYYY")),""!=i[a].monthOf&&(i[a].monthOf=d(i[a].monthOf).format("MMM YYYY")),i[a].voucherDate=d(d.unix(i[a].voucherDate.seconds)).format("MMM DD, YYYY");for(var n=0;n<l.length;n++)i[a].departmentReference==l[n].departmentUid&&(i[a].department=l[n].departmentName);for(var r=0;r<u.length;r++)i[a].nameReference==u[r].userId&&(i[a].name=u[r].firstname+" "+u[r].lastname);1==i[a].status?i[a].stat="For Approval":2==i[a].status?i[a].stat="Approved":3==i[a].status?i[a].stat="Processed":4==i[a].status?i[a].stat="Received":0==i[a].status&&(i[a].stat="Rejected"),b.push(i[a])}g=[{name:"Number",key:"num",width:10},{key:"name",name:"Name",width:38,style:{alignment:c["a"].middleCenter}},{key:"processDate",name:"Process Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"monthOf",name:"Month",width:28,style:{alignment:c["a"].middleCenter}},{key:"totalAmount",name:"Total Amount",width:28,style:{alignment:c["a"].middleCenter}},{key:"voucherNumber",name:"Voucher No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"voucherDate",name:"Voucher Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"department",name:"Department",width:28,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var s={fileName:"Reimbursement ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Reimbursement",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Reimbursement: ("+v+")",headerDefinition:g}}}]},o=[],m=0;m<b.length;m++)b[m]["num"]=m+1;o.push({data:b}),e.downloadExcel(s,o)}))})):"Petty Cash"==t.listType?r.get().then((function(t){t.forEach((function(e){l.push(e.data())})),o.get().then((function(t){t.forEach((function(e){u.push(e.data())}));for(var a=0;a<i.length;a++){i[a]["department"]="",i[a]["name"]="",i[a]["stat"]="",i[a].pettyCashDate=d(i[a].processDate).format("MMM DD, YYYY");for(var n=0;n<l.length;n++)i[a].departmentReference==l[n].departmentUid&&(i[a].department=l[n].departmentName);for(var r=0;r<u.length;r++)i[a].nameToReference==u[r].userId&&(i[a].name=u[r].firstname+" "+u[r].lastname);1==i[a].status?i[a].stat="Current":2==i[a].status?i[a].stat="Checked":3==i[a].status&&(i[a].stat="Processed"),b.push(i[a])}g=[{name:"Number",key:"num",width:10},{key:"pettyCashNumber",name:"Petty Cash No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"name",name:"Name",width:38,style:{alignment:c["a"].middleCenter}},{key:"department",name:"Department",width:28,style:{alignment:c["a"].middleCenter}},{key:"pettyCashDate",name:"Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"amountReceive",name:"Amount Receive",width:18,style:{alignment:c["a"].middleCenter}},{key:"cashOnHand",name:"Cash On Hand",width:18,style:{alignment:c["a"].middleCenter}},{key:"totalPetty",name:"Total Petty",width:18,style:{alignment:c["a"].middleCenter}},{key:"type",name:"Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"checkReference",name:"Check No.",width:28,style:{alignment:c["a"].middleCenter}},{key:"from",name:"From",width:38,style:{alignment:c["a"].middleCenter}},{key:"receivedBy",name:"Received by",width:38,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var s={fileName:"Petty Cash ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Petty Cash",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Petty Cash: ("+v+")",headerDefinition:g}}}]},o=[],m=0;m<b.length;m++)b[m]["num"]=m+1;o.push({data:b}),e.downloadExcel(s,o)}))})):"Cash Advance"==t.listType&&(m=s["dbExpense"].collection("cashAdvanceTypes"),m.get().then((function(t){t.forEach((function(e){p.push(e.data())}));for(var a=0;a<i.length;a++){i[a]["caType"]="";for(var n=0;n<p.length;n++)p[n].cashAdvanceTypeId==i[a].caTypeReference&&(i[a].caType=p[n].type);1==i[a].status?i[a].stat="Release":2==i[a].status&&(i[a].stat="Cleared"),b.push(i[a])}g=[{name:"Number",key:"num",width:10},{key:"cashAdvanceName",name:"Name",width:38,style:{alignment:c["a"].middleCenter}},{key:"cashAdvanceAmount",name:"Amount",width:18,style:{alignment:c["a"].middleCenter}},{key:"type",name:"Release Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"caType",name:"CA Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"cashAdvanceDate",name:"Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var r={fileName:"Cash Advance ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Cash Advance",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Cash Advance: ("+v+")",headerDefinition:g}}}]},s=[],o=0;o<b.length;o++)b[o]["num"]=o+1;s.push({data:b}),e.downloadExcel(r,s)}))))}))}}},h=p,f=(a("e46e"),a("2877")),b=Object(f["a"])(h,i,n,!1,null,null,null);t["default"]=b.exports},b5bd:function(e,t,a){},bb02:function(e,t,a){},d28b:function(e,t,a){var i=a("746f");i("iterator")},d6e5:function(e,t,a){"use strict";a("8ba0")},d742:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedSales("Unpaid")}}},[e._v("Unpaid")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedSales("Paid")}}},[e._v("Paid")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedSales("All")}}},[e._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.getPaginatedSales(e.listType)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==e.filter?a("date-picker",{staticClass:"pb-2",attrs:{type:"month",format:"YYYY MMMM"},on:{input:function(t){return e.getPaginatedSales(e.listType)}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:e.columns,rows:e.sales,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"siNumber",type:"desc"}},"line-numbers":!0,isLoading:e.loading,"fixed-header":!0},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["invoiceDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.invoiceDate,"DD-MM-YY")))])]):e._e(),"siNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.siNumber))])]):e._e(),"drNumber"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.drNumber))])]):e._e(),"clientPO"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.clientPO))])]):e._e(),"item"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.item))])]):e._e(),"customer"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.customer))])]):e._e(),"distri"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.distri))])]):e._e(),"quantity"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.quantity))])]):e._e(),"totalAmount"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.totalAmount))])]):e._e(),"vatableSales"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.vatableSales))])]):e._e(),"outputTax"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.outputTax))])]):e._e(),"status"==t.column.field?a("span",[3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("UNPAID")]):e._e(),4==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("PAID")]):e._e()]):e._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),e.sales.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-6"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedSales(e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e()])],1)])],1)},n=[],r=(a("4160"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),s=a("56d7"),o=a("ec45"),l=(a("411c"),a("c1df")),c=a("e966"),d=c.bindWith(",","."),u={components:{DatePicker:o["a"]},data:function(){return{columns:[{label:"SI Date",field:"invoiceDate"},{label:"SI No",field:"siNumber"},{label:"DR No",field:"drNumber"},{label:"Client PO",field:"clientPO"},{label:"Item",field:"item",width:"80px"},{label:"Client",field:"customer",width:"80px"},{label:"Distri",field:"distri",width:"80px"},{label:"QTY",field:"quantity"},{label:"Total Amount",field:"totalAmount"},{label:"Vatable Sales",field:"vatableSales"},{label:"Output Tax",field:"outputTax"},{label:"Status",field:"status",sortable:!1}],loading:!1,sales:[],customers:[],suppliers:[],requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"}],filter:"month",filterName:"",dateCreated:new Date,maxDate:l().format("YYYY-MM"),listType:""}},validations:{},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getCustomers(),e.getSuppliers(),e.getPaginatedSales("Unpaid");case 3:case"end":return t.stop()}}),t)})))()},methods:{getCompany:function(){var e=this,t=[],a=s["dbMains"].collection("companyProfile");e.company=[],a.get().then((function(a){a.forEach((function(e){t.push(e.data())})),e.companyName=t[0].name,e.address=t[0].address}))},getCustomers:function(){var e=this,t=s["dbMains"].collection("customers").orderBy("name","asc");e.customers=[],t.get().then((function(t){t.empty||t.forEach((function(t){e.customers.push(t.data())}))}))},getSuppliers:function(){var e=this,t=s["dbMains"].collection("suppliers").orderBy("supplierName","asc");e.suppliers=[],t.get().then((function(t){t.empty||t.forEach((function(t){e.suppliers.push(t.data())}))}))},getPaginatedSales:function(e){var t=this,a=null,i=[],n=[],r=l(t.dateCreated).startOf("month").format("YYYY-MM-DD"),o=l(t.dateCreated).endOf("month").format("YYYY-MM-DD");t.loading=!0,t.sales=[],t.listType=e,t.month=l(t.dateCreated).format("MMMM YYYY"),"Unpaid"==e?"all"!=t.limit?a=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",r).where("invoiceDate","<=",o).where("status","==",3).orderBy("invoiceDate","desc").limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",r).where("invoiceDate","<=",o).where("status","==",3).orderBy("invoiceDate","desc")):"Paid"==e?"all"!=t.limit?a=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",r).where("invoiceDate","<=",o).where("status","==",4).orderBy("invoiceDate","desc").limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",r).where("invoiceDate","<=",o).where("status","==",4).orderBy("invoiceDate","desc")):"All"==e&&("all"!=t.limit?a=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",r).where("invoiceDate","<=",o).where("status","in",[3,4]).orderBy("invoiceDate","desc").limit(t.limit):"all"==t.limit&&(a=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",r).where("invoiceDate","<=",o).where("status","in",[3,4]).orderBy("invoiceDate","desc")));var c=[];a.get().then((function(e){e.forEach((function(e){c.push(e.data()),i.push(e.id)}));for(var a=0;a<c.length;a++){c[a]["siReference"]=c[a].salesInvoiceId,c[a]["customer"]="",c[a]["tinNumber"]="",c[a]["address"]="";for(var r=0;r<t.customers.length;r++)t.customers[r].customerId==c[a].customerReference&&(c[a].customer=t.customers[r].name,c[a].tinNumber=t.customers[r].tin,c[a].address=t.customers[r].address)}for(var o=function(e){var a=s["dbSales"].collection("salesInvoiceItems").where("siReference","==",c[e].siReference);a.get().then((function(a){a.forEach((function(e){n.push(e.data())}));for(var i=function(a){if(n[a].siReference==c[e].siReference){var i=s["dbSales"].collection("items").where("itemId","==",n[a].itemReference);n[a]["vatableSales"]=parseFloat(n[a].amount.replaceAll(",",""))/1.12,n[a].vatableSales=d(parseFloat(n[a].vatableSales).toFixed(2)),n[a]["outputTax"]=.12*parseFloat(n[a].amount.replaceAll(",","")),n[a].outputTax=d(parseFloat(n[a].outputTax).toFixed(2)),n[a]["invoiceDate"]=c[e].invoiceDate,n[a]["siNumber"]=c[e].siNumber,n[a]["drNumber"]=c[e].drNumber,n[a]["clientPO"]=c[e].clientPO,n[a]["tinNumber"]=c[e].tinNumber,n[a]["customer"]=c[e].customer,n[a]["address"]=c[e].address,n[a]["totalAmount"]=d(n[a].amount),n[a]["status"]=c[e].status,i.get().then((function(e){e.forEach((function(e){n[a]["item"]=e.data().itemName,n[a]["supplierReference"]=e.data().supplierReference}));for(var i=0;i<t.suppliers.length;i++)n[a].supplierReference==t.suppliers[i].supplierId&&(n[a]["distri"]=t.suppliers[i].supplierName);t.sales.push(n[a])}))}},r=0;r<n.length;r++)i(r)}))},l=0;l<c.length;l++)o(l)})),setTimeout((function(){t.loading=!1}),1e3)},getSummaryData:function(){var e=this,t=null,a=l(e.dateCreated).startOf("month").format("YYYY-MM-DD"),i=l(e.dateCreated).endOf("month").format("YYYY-MM-DD"),n=0,r=0,o=0,c=0,u=0,m=0;t=s["dbSales"].collection("salesInvoices").where("invoiceDate",">=",a).where("invoiceDate","<=",i).where("status","==",4).orderBy("invoiceDate","desc"),e.totalSIAmount="₱ 0.00",e.totalVatAmount="₱ 0.00",e.totalOutputTax="₱ 0.00",e.totalCOG="₱ 0.00",e.grossMargin="₱ 0.00",e.totalCollectedAmount="",t.get().then((function(t){t.forEach((function(e){n=parseFloat(n)+parseFloat(e.data().totalAmount.replaceAll(",",""))})),r=n/1.12,o=.12*r,c=0,u=n-c,m=n,e.totalSIAmount="₱ "+d(parseFloat(n).toFixed(2)),e.totalVatAmount="₱ "+d(parseFloat(r).toFixed(2)),e.totalOutputTax="₱ "+d(parseFloat(o).toFixed(2)),e.totalCOG="₱ "+d(parseFloat(c).toFixed(2)),e.grossMargin="₱ "+d(parseFloat(u).toFixed(2)),e.totalCollectedAmount="₱ "+d(parseFloat(m).toFixed(2))}))}}},m=u,p=(a("d6e5"),a("2877")),h=Object(p["a"])(m,i,n,!1,null,null,null);t["default"]=h.exports},ddb0:function(e,t,a){var i=a("da84"),n=a("fdbc"),r=a("e260"),s=a("9112"),o=a("b622"),l=o("iterator"),c=o("toStringTag"),d=r.values;for(var u in n){var m=i[u],p=m&&m.prototype;if(p){if(p[l]!==d)try{s(p,l,d)}catch(f){p[l]=d}if(p[c]||s(p,c,u),n[u])for(var h in r)if(p[h]!==r[h])try{s(p,h,r[h])}catch(f){p[h]=r[h]}}}},e204:function(e,t,a){},e46e:function(e,t,a){"use strict";a("2fc5")},e4ad:function(e,t,a){},f1ab:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"},[a("card",{staticClass:"mt-5"},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-sm-2 pb-2 text-right"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.getBillings()}},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}})],1)]),a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-sm-6"},[a("card-widget",{attrs:{icon:"fas fa-credit-card",title:"Unpaid Billings",subTitle:e.unpaidBillAmount,footerText:e.unpaidBillCount}})],1),a("div",{staticClass:"col-sm-6"},[a("card-widget",{attrs:{icon:"fa fa-check-square",title:"Paid Billings",subTitle:e.paidBillAmount,footerText:e.paidBillCount}})],1)])])],1),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--8"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Unpaid Billings"}},[a("card",{staticClass:"pt-4"},[a("vue-good-table",{ref:"unpaid-billing-table",attrs:{columns:e.unpaidColumns,rows:e.unpaidBillings,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"dueDate",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["billing"==t.column.field?a("span",[a("span",{attrs:{id:"sideBarTxt",title:"View"},on:{click:function(a){return e.viewBilling(t.row)}}},[e._v(e._s(t.row.billing))])]):e._e(),"billingType"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.billingType))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.amount))])]):e._e(),"stat"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.stat))])]):e._e(),"dueDate"==t.column.field?a("span",[t.row.dueDate==e.dateToday?a("span",{attrs:{id:"redTxt"}},[a("b",[e._v("Due Today ")])]):t.row.dueDate<e.dateToday?a("span",{attrs:{id:"sideBarTxt"}},[a("b",[e._v("Due last ("+e._s(e._f("moment")(t.row.dueDate,"dddd"))+")")])]):t.row.dueDate==e.dateTom?a("span",{attrs:{id:"sideBarTxt"}},[a("b",[e._v("Due Tomorrow ("+e._s(e._f("moment")(t.row.dueDate,"dddd"))+")")])]):a("span",{attrs:{id:"sideBarTxt"}},[t.row.day<=5?a("b",[e._v("Due on "+e._s(e._f("moment")(t.row.dueDate,"dddd")))]):e._e(),t.row.day>5?a("b",[e._v("Clearing on Monday")]):e._e()]),a("span",[e._v("("+e._s(e._f("moment")(t.row.dueDate,"MMMM DD, YYYY"))+")")])]):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateBillingModal(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Paid"},on:{click:function(a){return e.changeStatus(t.row,2)}}}):e._e(),2==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Unpaid"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e(),a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.billings.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getBillings()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e()],1)],1),a("tab-pane",{attrs:{title:"Paid Billings"}},[a("card",{staticClass:"pt-4"},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-sm-2 pb-2 text-right"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.getBillings()}},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}})],1)]),a("vue-good-table",{ref:"paid-billing-table",attrs:{columns:e.paidColumns,rows:e.paidBillings,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"dueDate",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["billing"==t.column.field?a("span",[a("span",{attrs:{id:"sideBarTxt",title:"View"},on:{click:function(a){return e.viewBilling(t.row)}}},[e._v(e._s(t.row.billing))])]):e._e(),"billingType"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.billingType))])]):e._e(),"dueDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.dueDate,"MMMM DD, YYYY")))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.amount))])]):e._e(),"stat"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.stat))])]):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateBillingModal(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Paid"},on:{click:function(a){return e.changeStatus(t.row,2)}}}):e._e(),2==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Unpaid"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e(),a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.billings.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getBillings()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e()],1)],1),a("tab-pane",{attrs:{title:"Billing List"}},[a("card",{staticClass:"pt-4"},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-sm-2 pb-2 text-right"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.getBillings()}},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}})],1)]),a("vue-good-table",{ref:"billing-table",attrs:{columns:e.columns,rows:e.billings,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"dueDate",type:"asc"}},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["billing"==t.column.field?a("span",[a("span",{attrs:{id:"sideBarTxt",title:"View"},on:{click:function(a){return e.viewBilling(t.row)}}},[e._v(e._s(t.row.billing))])]):e._e(),"billingType"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.billingType))])]):e._e(),"dueDate"==t.column.field?a("span",[a("span",[e._v(e._s(e._f("moment")(t.row.dueDate,"MMMM DD, YYYY")))])]):e._e(),"amount"==t.column.field?a("span",[a("span",[e._v("₱ "+e._s(t.row.amount))])]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(i){return a("span",{key:i.userId},[i.userId==t.row.userReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"stat"==t.column.field?a("span",[a("span",[e._v(e._s(t.row.stat))])]):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return e.openUpdateBillingModal(t.row)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Paid"},on:{click:function(a){return e.changeStatus(t.row,2)}}}):e._e(),2==t.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Unpaid"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e(),a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return e.openAttachments(t.row)}}})]):e._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!e.loading&&e.billings.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getBillings()}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-billing-modal",modifiers:{"new-billing-modal":!0}}],attrs:{id:"darkBtn"}},[e._v("New Billing")])],1)],1)],1)],1)],1)]),a("b-modal",{attrs:{size:"xl",id:"new-billing-modal",title:"New Billing",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addBilling(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-billing-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Billing Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Billing:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.billingTypes,reduce:function(e){return e.billingTypeId},label:"type",clearable:!1},model:{value:e.newBillingType,callback:function(t){e.newBillingType=t},expression:"newBillingType"}}),e.$v.newBillingType.$anyDirty&&!e.$v.newBillingType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-billing-type-modal",modifiers:{"new-billing-type-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:e.requestProcessing}},[e._v("Add")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Billing"},model:{value:e.newBilling,callback:function(t){e.newBilling=t},expression:"newBilling"}}),e.$v.newBilling.$anyDirty&&!e.$v.newBilling.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newBilling.$anyDirty&&!e.$v.newBilling.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Due Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"date"},model:{value:e.newDueDate,callback:function(t){e.newDueDate=t},expression:"newDueDate"}}),e.$v.newDueDate.$anyDirty&&!e.$v.newDueDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newAmount.$anyDirty&&!e.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Remarks:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newRemarks,expression:"newRemarks"}],attrs:{rows:"4",cols:"59",id:"inputStyle"},domProps:{value:e.newRemarks},on:{input:function(t){t.target.composing||(e.newRemarks=t.target.value)}}})])])]),a("b-modal",{attrs:{size:"md",id:"new-billing-type-modal",title:"New Billing Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addBillingType(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("new-billing-type-modal")}}},[e._v(" Close ")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Billing Type"},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}}),e.$v.newType.$anyDirty&&!e.$v.newType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.newType.$anyDirty&&!e.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"view-billing-modal",title:"View Billing",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("view-billing-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("card",{staticClass:"pl-4 pt-2 pb-2 shadow",attrs:{id:"singleView"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[e._v(e._s(e.view.billing))])])]),a("hr",{staticClass:"mt-2"}),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Due Date: ")]),e._v(e._s(e._f("moment")(e.view.dueDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Amount: ")]),e._v("₱ "+e._s(e.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Type: ")]),e._v(e._s(e.view.billingType)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[e._v("Status: ")]),e._v(e._s("1"==e.view.status?"Unpaid":"Paid")+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[e._v("Remarks: ")]),e._v(e._s(e.view.remarks)+" ")])])])],1),a("b-modal",{attrs:{size:"xl",id:"edit-billing-modal",title:"Edit Billing",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.updateBilling(t)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("edit-billing-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Billing Type:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Billing:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:e.billingTypes,reduce:function(e){return e.billingTypeId},label:"type",clearable:!1},model:{value:e.edit.billingType,callback:function(t){e.$set(e.edit,"billingType",t)},expression:"edit.billingType"}}),e.$v.edit.$anyDirty&&!e.$v.edit.billingType.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Billing"},model:{value:e.edit.billing,callback:function(t){e.$set(e.edit,"billing",t)},expression:"edit.billing"}}),e.$v.edit.$anyDirty&&!e.$v.edit.billing.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.billing.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Due Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Amount:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"date"},model:{value:e.edit.dueDate,callback:function(t){e.$set(e.edit,"dueDate",t)},expression:"edit.dueDate"}}),e.$v.edit.$anyDirty&&!e.$v.edit.dueDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount"},model:{value:e.edit.amount,callback:function(t){e.$set(e.edit,"amount",t)},expression:"edit.amount"}}),e.$v.edit.$anyDirty&&!e.$v.edit.amount.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e(),e.$v.edit.$anyDirty&&!e.$v.edit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[e._v("Invalid Characters")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[e._v("Remarks:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.edit.remarks,expression:"edit.remarks"}],attrs:{rows:"4",cols:"59",id:"inputStyle"},domProps:{value:e.edit.remarks},on:{input:function(t){t.target.composing||e.$set(e.edit,"remarks",t.target.value)}}})])])]),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.addAttachments()}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Add Attachment ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("attachment-modal")}}},[e._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e.loadAttachment?a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12 text-center"},[a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}})],1)])]):e._e(),e.attachments.length>0&&!e.loadAttachment?a("card",{attrs:{shadow:""}},[e.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},e._l(e.attachments,(function(t){return a("span",{key:t.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return e.removeAttachment(t.name)}}})]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:t.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:t.url}})])])])])})),0):e._e()]):e._e(),0!=e.attachments.length||e.loadAttachment?e._e():a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("h2",{staticClass:"text-center"},[e._v("NO ATTACHMENT")])])])])],1)],1)},n=[],r=(a("4160"),a("b0c0"),a("b680"),a("159b"),a("5530")),s=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=/\b(?:an?d?|a[st]|because|but|by|en|for|i[fn]|neither|nor|o[fnr]|only|over|per|so|some|tha[tn]|the|to|up|upon|vs?\.?|versus|via|when|with|without|yet)\b/i,u=/[^\s:–—-]+|./g,m=/\s/,p=/.(?=[A-Z]|\..)/,h=/[A-Za-z0-9\u00C0-\u00FF]/;function f(e){var t,a="";while(null!==(t=u.exec(e))){var i=t[0],n=t.index;p.test(i)||d.test(i)&&0!==n&&n+i.length!==e.length||":"===e.charAt(n+i.length)&&!m.test(e.charAt(n+i.length+1))?a+=i:a+=i.replace(h,(function(e){return e.toUpperCase()}))}return a}var b=a("4627"),g=a("2f62"),v=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),y=l["helpers"].regex("alphaNumAndDot",/^[ 0-9., ]*$/),w=a("c1df"),C=new Date,x=a("9f25"),_=a("e966"),D=_.bindWith(",","."),k={components:{},data:function(){return{unpaidBillCount:0,unpaidBillAmount:"₱ 0.00",paidBillCount:0,paidBillAmount:"₱ 0.00",graphMonth:"",dateToday:w().format("YYYY-MM-DD"),dateTom:w().add(1,"day").format("YYYY-MM-DD"),userRole:"",columns:[{label:"Billing",field:"billing"},{label:"Type",field:"billingType"},{label:"Due Date",field:"dueDate"},{label:"Amount",field:"amount"},{label:"Created by",field:"userReference"},{label:"Status",field:"stat"},{label:"",field:"action",sortable:!1,width:"100px"}],billings:[],unpaidColumns:[{label:"Billing",field:"billing"},{label:"Type",field:"billingType"},{label:"Amount",field:"amount"},{label:"Status",field:"stat"},{label:"Due Date",field:"dueDate"},{label:"",field:"action",sortable:!1,width:"100px"}],unpaidBillings:[],paidColumns:[{label:"Billing",field:"billing"},{label:"Type",field:"billingType"},{label:"Due Date",field:"dueDate"},{label:"Amount",field:"amount"},{label:"Status",field:"stat"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,paidBillings:[],billingTypes:[],newBillingType:"",newBilling:"",newDueDate:w().format("YYYY-MM-DD"),newAmount:"",newRemarks:"",newType:"",view:{billingType:"",billing:"",dueDate:"",amount:"",remarks:"",status:""},edit:{id:"",billingId:"",billingType:"",billing:"",dueDate:"",amount:"",remarks:""},requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",attachment:"",attachmentData:null,attachments:[],loadAttachment:!0,bId:"",uploadValue:0,dateFilter:w().format("YYYY-MM"),maxDate:w().format("YYYY-MM"),alertTypes:[{type:"Daily"},{type:"Weekly"},{type:"Monthly"},{type:"Yearly"}],newAlertType:"Yearly",newAlertDate:"",newAlertMessage:"",dateType:"datetime",dateFormat:"YYYY-MM-DD hh:mm:ss"}},validations:{newBillingType:{required:l["required"]},newBilling:{required:l["required"],alphaNumCustomValidator:v},newDueDate:{required:l["required"]},newAmount:{required:l["required"],amountCustomValidator:y},newType:{required:l["required"],alphaNumCustomValidator:v},edit:{billingType:{required:l["required"]},billing:{required:l["required"],alphaNumCustomValidator:v},dueDate:{required:l["required"]},amount:{required:l["required"],amountCustomValidator:y}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole(),e.getBillingTypes(),e.getBillings();case 3:case"end":return t.stop()}}),t)})))()},computed:Object(r["a"])({},Object(g["b"])({users:"Users/users"})),methods:{getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=o["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var i=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];i.get().then((function(t){t.empty||(t.forEach((function(e){n.push(e.data())})),e.userRole=n[0].userRole)}))}))},showNotification:function(){var e=this,t=null,a=[],i="",n=w().subtract(7,"days").format("YYYY-MM-DD");e.$bvToast.hide(),t=o["dbExpense"].collection("billings").where("dueDate",">=",n).where("status","==",1).orderBy("dueDate","desc"),t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));for(var n=0;n<a.length;n++)i=w(a[n].dueDate).format("MMM DD, YYYY")==w().format("MMM DD, YYYY")?"DUE TODAY : "+w(a[n].dueDate).format("MMM DD, YYYY"):w(a[n].dueDate).format("MMM DD, YYYY")==w().add(1,"day").format("MMM DD, YYYY")?"DUE TOMORROW : "+w(a[n].dueDate).format("MMM DD, YYYY"):"DUE ON "+w(a[n].dueDate).format("dddd")+" : "+w(a[n].dueDate).format("MMM DD, YYYY"),e.$bvToast.toast(a[n].billing,{title:i,toaster:"b-toaster-top-right",solid:!1,variant:"danger",noAutoHide:!0})}}))},getBillingTypes:function(){var e=this,t=o["dbExpense"].collection("billingTypes").orderBy("type","asc");e.billingTypes=[],t.get().then((function(t){t.forEach((function(t){e.billingTypes.push(t.data())})),e.newBillingType=e.billingTypes[0].billingTypeId}))},addBillingType:function(){var e=this;if(e.requestProcessing=!1,e.$v.newType.$touch(),!e.$v.newType.$error){var t=null;e.requestProcessing=!0,t=o["dbExpense"].collection("billingTypes").where("type","==",Object(c["a"])(e.newType)),t.get().then((function(t){if(t.empty){if(t){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),i=[],n="BTI-"+C.getFullYear()+x(C.getMonth()+1,2)+C.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&i.push(e.data())}));try{o["dbExpense"].collection("billingTypes").doc().set({billingTypeId:n,type:Object(c["a"])(e.newType),userReference:i[0].userId,status:1,dateCreated:C,dateModified:C}).then((function(){e.newType="",e.requestProcessing=!1,e.$v.newType.$reset(),e.$bvModal.hide("new-billing-type-modal"),e.getBillingTypes(),e.$swal({title:"Success",text:"New billing type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Billing type already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},getBillings:function(){var e=this,t=null,a=null,i=[],n=[],r=[],s=0,l=0,c=0,d=0,u=w(e.dateFilter).startOf("month").format("YYYY-MM-DD"),m=w(e.dateFilter).endOf("month").format("YYYY-MM-DD");e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var p=o["dbUsers"].collection("users").where("username","==",e.username),h=[],f="",b="";p.get().then((function(p){p.forEach((function(e){h.push(e.data())})),b=h[0].userId;var g=o["dbUsers"].collection("userRoles").where("userRoleId","==",h[0].userRoleReference),v=[];g.get().then((function(p){p.forEach((function(e){v.push(e.data())})),f=v[0].userRole,e.loading=!0,e.billings=[],e.unpaidBillings=[],e.paidBillings=[],e.graphMonth=w(e.dateFilter).format("YYYY"),"Administrator"==f||"Manager"==f?"all"!=e.limit?t=o["dbExpense"].collection("billings").where("dueDate",">=",u).where("dueDate","<=",m).orderBy("dueDate","desc").limit(e.limit):"all"==e.limit&&(t=o["dbExpense"].collection("billings").where("dueDate",">=",u).where("dueDate","<=",m).orderBy("dueDate","asc")):"User"==f&&("all"!=e.limit?t=o["dbExpense"].collection("billings").where("dueDate",">=",u).where("dueDate","<=",m).where("userReference","==",b).orderBy("dueDate","desc").limit(e.limit):"all"==e.limit&&(t=o["dbExpense"].collection("billings").where("dueDate",">=",u).where("dueDate","<=",m).where("userReference","==",b).orderBy("dueDate","asc"))),t.get().then((function(t){t.empty||(t.forEach((function(e){i.push(e.data()),n.push(e.id)})),a=o["dbExpense"].collection("billingTypes").orderBy("type","asc"),a.get().then((function(t){t.forEach((function(e){r.push(e.data())}));for(var a=0;a<i.length;a++){i[a]["id"]=n[a],i[a]["billingType"]="",i[a]["stat"]="",i[a].amount=D(i[a].amount.replaceAll(",",""));for(var o=0;o<r.length;o++)i[a].billingTypeReference==r[o].billingTypeId&&(i[a].billingType=r[o].type);1==i[a].status?(s=parseFloat(s)+parseFloat(i[a].amount.replaceAll(",","")),l+=1,i[a]["day"]=w(i[a].dueDate).day(),i[a].stat="Unpaid",e.unpaidBillings.push(i[a])):2==i[a].status&&(c=parseFloat(c)+parseFloat(i[a].amount.replaceAll(",","")),d+=1,i[a].stat="Paid",e.paidBillings.push(i[a])),e.billings.push(i[a])}e.unpaidBillAmount="₱ "+D(parseFloat(s).toFixed(2)),e.unpaidBillCount=l,e.paidBillAmount="₱ "+D(parseFloat(c).toFixed(2)),e.paidBillCount=d}))),setTimeout((function(){e.loading=!1}),1e3)}))}))}))},addBilling:function(){var e=this;if(e.requestProcessing=!1,e.$v.newBillingType.$touch(),e.$v.newBilling.$touch(),e.$v.newDueDate.$touch(),e.$v.newAmount.$touch(),!e.$v.newBillingType.$error&&!e.$v.newBilling.$error&&!e.$v.newDueDate.$error&&!e.$v.newAmount.$error){e.requestProcessing=!0;var t=null;t=o["dbExpense"].collection("billings").where("billing","==",f(e.newBilling)).where("dueDate","==",w(e.newDueDate).format("YYYY-MM-DD")),t.get().then((function(t){if(t.empty){if(t){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),i=[],n="BI-"+C.getFullYear()+x(C.getMonth()+1,2)+C.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(t){t.forEach((function(e){e.exists&&i.push(e.data())}));try{o["dbExpense"].collection("billings").doc().set({billingId:n,billingTypeReference:e.newBillingType,billing:f(e.newBilling),dueDate:w(e.newDueDate).format("YYYY-MM-DD"),amount:e.newAmount,remarks:e.newRemarks,userReference:i[0].userId,status:1,dateCreated:C,dateModified:C}).then((function(){e.newBillingType="",e.newBilling="",e.newDueDate=w().format("YYYY-MM-DD"),e.newAmount="",e.newRemarks="",e.$v.newBillingType.$reset(),e.$v.newBilling.$reset(),e.$v.newDueDate.$reset(),e.$v.newAmount.$reset(),e.requestProcessing=!1,e.$bvModal.hide("new-billing-modal"),e.$refs["billing-table"].reset(),e.getBillingTypes(),e.getBillings(),e.showNotification(),e.$swal({title:"Success",text:"New billing added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Billing already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},viewBilling:function(e){var t=this;t.view={billingType:e.billingType,billing:e.billing,dueDate:e.dueDate,amount:e.amount,remarks:e.remarks,status:e.status},t.$bvModal.show("view-billing-modal")},openUpdateBillingModal:function(e){this.edit={id:e.id,billingId:e.billingId,billingType:e.billingTypeReference,billing:e.billing,dueDate:e.dueDate,amount:e.amount,remarks:e.remarks},this.$bvModal.show("edit-billing-modal")},updateBilling:function(){var e=this;if(e.requestProcessing=!1,e.$v.edit.$touch(),!e.$v.edit.$error){var t=null;e.requestProcessing=!0,t=o["dbExpense"].collection("billings").where("billing","==",f(e.edit.billing)).where("dueDate","==",w(e.edit.dueDate).format("YYYY-MM-DD")).where("billingId","!=",e.edit.billingId),t.get().then((function(t){if(t.empty){if(t)try{o["dbExpense"].collection("billings").doc(e.edit.id).update({billingTypeReference:e.edit.billingType,billing:f(e.edit.billing),dueDate:w(e.edit.dueDate).format("YYYY-MM-DD"),amount:e.edit.amount.replaceAll(",",""),remarks:e.edit.remarks,dateModified:C}).then((function(){e.$v.edit.$reset(),e.$bvModal.hide("edit-billing-modal"),e.$refs["unpaid-billing-table"].reset(),e.$refs["paid-billing-table"].reset(),e.$refs["billing-table"].reset(),e.getBillings(),e.showNotification(),e.requestProcessing=!1,e.$swal({title:"Success",text:"Billing updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else t.forEach((function(t){t.exists&&(e.$swal({title:"Invalid",text:"Billing already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1)}))}))}},changeStatus:function(e,t){var a=this,i="";1==t?i="Unpaid":2==t&&(i="Paid"),a.$swal({title:"Are you sure?",text:"You want to change the status to "+i,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(i){i.value&&o["dbExpense"].collection("billings").doc(e.id).update({status:t,dateModified:C}).then((function(){a.$refs["billing-table"].reset(),a.getBillings(),a.showNotification(),a.$swal({title:"Success",text:"Billing status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))},openAttachments:function(e){this.bId=e.billingId,this.$bvModal.show("attachment-modal"),this.getAttachments(this.bId)},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(e){var t=this,a={maxSizeMB:1,useWebWorker:!0};t.uploadValue=0,t.attachment=null,t.attachments=[],t.attachmentData=e.target.files[0],Object(b["a"])(t.attachmentData,a).then((function(e){t.attachmentData=e,t.onUpload(t.attachmentData)}))},onUpload:function(e){var t=this,a=o["expenseStorage"].ref("billings/"+t.bId+"/"+e.name).put(e);t.requestProcessing=!1;try{t.attachment=null,t.requestProcessing=!0,a.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadValue=100,t.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1,t.getAttachments(t.bId)}))}catch(i){console.log("error"),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}},getAttachments:function(e){var t=this,a=0,i=o["expenseStorage"].ref("billings/"+e);t.loadAttachment=!0,t.attachments=[],i.listAll().then((function(i){i.items.forEach((function(i){o["expenseStorage"].ref("billings/"+e+"/"+i.name).getDownloadURL().then((function(e){a+=1,t.attachments.push({rowNum:a,name:i.name,url:e,path:i.fullPath,status:1})}))}))})).catch((function(e){console.log(e)})),setTimeout((function(){t.loadAttachment=!1}),5e3)},removeAttachment:function(e){var t=this;t.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var i=o["expenseStorage"].ref("billings/"+t.bId+"/"+e);try{i.delete().then((function(){t.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getAttachments(t.cdId)}))}))}catch(n){console.log(n),t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}}))}}},S=k,M=(a("fbec"),a("2877")),T=Object(M["a"])(S,i,n,!1,null,null,null);t["default"]=T.exports},f1d9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"},[a("card",{staticClass:"mt-5"},["Administrator"==e.userRole||"Manager"==e.userRole?a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right",attrs:{id:"darkTxt"}},[a("b",[e._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:e.filters,reduce:function(e){return e.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(t){return e.reloadData()}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==e.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:e.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(t){return e.reloadData()}},model:{value:e.dateCreated,callback:function(t){e.dateCreated=t},expression:"dateCreated"}}):e._e(),"name"==e.filter?a("v-select",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{id:"inputStyle",options:e.names,reduce:function(e){return e.userId},label:"fullName",clearable:!1},on:{input:function(t){return e.reloadData()}},model:{value:e.filterName,callback:function(t){e.filterName=t},expression:"filterName"}}):e._e()],1)]):e._e(),a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-sm-3"},[a("card-widget",{attrs:{icon:"fa fa-adjust",title:"For Approvals",subTitle:e.forApprovalReimAmount,footerText:e.forApprovalReimCount}})],1),a("div",{staticClass:"col-sm-3"},[a("card-widget",{attrs:{icon:"fas fa fa-thumbs-up",title:"Approved",subTitle:e.approvedReimAmount,footerText:e.approvedReimCount}})],1),a("div",{staticClass:"col-sm-3"},[a("card-widget",{attrs:{icon:"fa fa-check-circle",title:"Processed",subTitle:e.processedReimAmount,footerText:e.processedReimCount}})],1),a("div",{staticClass:"col-sm-3"},[a("card-widget",{attrs:{icon:"fa fa-circle",title:"Received",subTitle:e.receivedReimAmount,footerText:e.receivedReimCount}})],1)])])],1),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--8"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},["Administrator"==e.userRole||"Manager"==e.userRole?a("tab-pane",{attrs:{title:"Reimbursements"}},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},["For Approval"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"For Approval")}}},[e._v("For Approval")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Approved"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Approved")}}},[e._v("Approved")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Processed"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Processed")}}},[e._v("Processed")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Received"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Received")}}},[e._v("Received")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Rejected"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"Rejected")}}},[e._v("Rejected")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==e.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(t){return e.getPaginatedReimbursements(1,"All")}}},[e._v("All")])])],1)]),a("vue-good-table",{attrs:{columns:e.columns,rows:e.reimbursements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:e.loading},scopedSlots:e._u([{key:"table-row",fn:function(t){return[a("b",["name"==t.column.field?a("span",e._l(e.names,(function(i){return a("span",{key:i.userId},[i.userId==t.row.nameReference?a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/reimbursement/"+t.row.reimbursementId,id:"sideBarTxt",title:"View Reimbursement"}},[e._v(e._s(i.firstname)+" "+e._s(i.lastname))])],1):e._e()])})),0):e._e(),"totalAmount"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v("₱ "+e._s(t.row.totalAmount))])]):e._e(),"dateCreated"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(t.row.dateCreated,"MMM DD, YYYY")))])]):e._e(),"processDate"==t.column.field?a("span",[a("span",{staticClass:"tableSpan"},[e._v(e._s(e._f("moment")(""==t.row.processDate?"---------":t.row.processDate,"MMM DD, YYYY")))])]):e._e(),"company"==t.column.field?a("span",[e._l(e.companies,(function(i){return a("span",{key:i.companyId},[i.companyId==t.row.companyReference?a("span",[e._v(e._s(i.companyName))]):e._e()])})),""==t.row.companyReference||void 0==t.row.companyReference?a("span",[e._v("----------")]):e._e()],2):e._e(),"status"==t.column.field?a("span",[1==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("FOR APPROVAL")]):e._e(),2==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("APPROVED")]):e._e(),3==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("PROCESSED")]):e._e(),4==t.row.status?a("span",{attrs:{id:"sideBarTxt"}},[e._v("RECEIVED")]):e._e(),0==t.row.status?a("span",{attrs:{id:"redTxt"}},[e._v("REJECTED")]):e._e()]):e._e(),"userReference"==t.column.field?a("span",[e._l(e.users,(function(i){return a("span",{key:i.userId},[i.userId==t.row.userReference?a("span",[e._v(e._s(i.firstname)+" "+e._s(i.lastname))]):e._e()])})),""==t.row.userReference?a("span",[a("span",[e._v("----------")])]):e._e()],2):e._e(),"action"==t.column.field?a("span",[1==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-up",attrs:{id:"sideBarTxt",title:"Approve"},on:{click:function(a){return e.openApprovedModal(t.row,2)}}}):e._e(),1==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-down",attrs:{id:"redTxt",title:"Reject"},on:{click:function(a){return e.openRejectedModal(t.row,0)}}}):e._e(),2==t.row.status|0==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-adjust",attrs:{id:"sideBarTxt",title:"For Approval"},on:{click:function(a){return e.changeStatus(t.row,1)}}}):e._e(),3==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-circle",attrs:{id:"sideBarTxt",title:"Receive"},on:{click:function(a){return e.openReceivedModal(t.row,4)}}}):e._e(),4==t.row.status?a("span",{staticClass:"pointer ml-2 fa fa-check-circle",attrs:{id:"sideBarTxt",title:"Processed"},on:{click:function(a){return e.changeStatus(t.row,3)}}}):e._e()]):e._e()])]}}],null,!1,3037043813)}),a("hr"),e.reimbursements.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[e._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:e.views,reduce:function(e){return e.limitId},label:"limit",clearable:!1},on:{input:function(t){return e.getPaginatedReimbursements(1,"",e.listType)}},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]):e._e(),a("hr"),a("div",{staticClass:"text-right"},["Administrator"==e.userRole?a("base-button",{staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"},nativeOn:{click:function(t){return e.reimSummary(t)}}},[e._v("Reimbursement Summary")]):e._e()],1),a("b-modal",{attrs:{size:"md",id:"approved-modal",title:"Approved Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.changeStatus(e.edit,2)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Approved ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("approved-modal")}}},[e._v("Close")])],1)])]},proxy:!0}],null,!1,713619621)},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Process Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"date",placeholder:"Process Date"},model:{value:e.edit.processDate,callback:function(t){e.$set(e.edit,"processDate",t)},expression:"edit.processDate"}}),e.$v.edit.$anyDirty&&!e.$v.edit.processDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"received-modal",title:"Received Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.changeStatus(e.receive,4)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Received ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("received-modal")}}},[e._v("Close")])],1)])]},proxy:!0}],null,!1,3842734004)},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Receive Date:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"date",placeholder:"Process Date"},model:{value:e.receive.receivedDate,callback:function(t){e.$set(e.receive,"receivedDate",t)},expression:"receive.receivedDate"}}),e.$v.receive.$anyDirty&&!e.$v.receive.receivedDate.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Remarks:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.receive.remarks,expression:"receive.remarks"}],attrs:{id:"inputStyle",cols:"53",rows:"4",placeholder:"Remarks"},domProps:{value:e.receive.remarks},on:{input:function(t){t.target.composing||e.$set(e.receive,"remarks",t.target.value)}}})])])]),a("b-modal",{attrs:{size:"md",id:"rejected-modal",title:"Reject Reimbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.changeStatus(e.reject,0)}}},[e.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e(),e._v(" Reject ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:e.requestProcessing},nativeOn:{click:function(t){return e.$bvModal.hide("rejected-modal")}}},[e._v("Close")])],1)])]},proxy:!0}],null,!1,2940479285)},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[e._v("Remarks:")]),a("b",{staticClass:"text-red"},[e._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reject.remarks,expression:"reject.remarks"}],attrs:{id:"inputStyle",cols:"53",rows:"4",placeholder:"Remarks"},domProps:{value:e.reject.remarks},on:{input:function(t){t.target.composing||e.$set(e.reject,"remarks",t.target.value)}}}),e.$v.reject.$anyDirty&&!e.$v.reject.remarks.required?a("i",{staticClass:"text-red"},[e._v("Field Required")]):e._e()])])])],1)],1):a("tab-pane",{attrs:{title:"Reimbursements"}},[a("user-reim-list")],1),"Administrator"==e.userRole||"Manager"==e.userRole?a("tab-pane",{attrs:{title:"New Reimbursement"}},[a("new-reimbursement-admin")],1):a("tab-pane",{attrs:{title:"New Reimbursement"}},[a("new-reimbursement-user")],1)],1)],1)])],1)},n=[],r=(a("99af"),a("4de4"),a("4160"),a("b680"),a("159b"),a("5530")),s=(a("96cf"),a("1da1")),o=a("56d7"),l=a("93b4"),c=a("b5ae"),d=a("2f62"),u=["#","Name","Total Amount","Date Created","Process Date","Status","Actions"],m=a("c1df"),p=a("e966"),h=p.bindWith(",","."),f=new Date,b={components:{},data:function(){return{columns:[{label:"Name",field:"name"},{label:"Total Amount",field:"totalAmount"},{label:"Process Date",field:"dateCreated"},{label:"Company",field:"company"},{label:"Created by",field:"userReference"},{label:"Status",field:"status",sortable:!1},{label:"",field:"action",sortable:!1,width:"100px"}],companies:[],loading:!0,loadError:!1,reimbursementTable:{title:"Reimbursements Table",subTitle:"",columns:[].concat(u)},reimbursementsCount:0,reimbursements:[],names:[],currentPage:1,searching:!1,totalChecks:0,forApprovalReimCount:0,forApprovalReimAmount:"₱ 0.00",approvedReimCount:0,approvedReimAmount:"₱ 0.00",rejectedReimCount:0,rejectedReimAmount:"₱ 0.00",processedReimCount:0,processedReimAmount:"₱ 0.00",receivedReimCount:0,receivedReimAmount:"₱ 0.00",checkChart:{allData:[],chartData:{datasets:[],labels:[]},extraOptions:l["b"]},year:(new Date).getFullYear(),currentMonth:m().format("MMMM"),userRole:"",requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"},{filterId:"name",filter:"Name"}],filter:"month",filterName:"",dateCreated:m().format("YYYY-MM"),maxDate:m().format("YYYY-MM"),listType:"",pageNum:1,edit:{id:"",processDate:"",monthOf:""},receive:{id:"",receivedDate:"",remarks:""},reject:{id:"",remarks:""}}},validations:{edit:{processDate:{required:c["required"]}},receive:{receivedDate:{required:c["required"]}},reject:{remarks:{required:c["required"]}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getUserRole(),e.getPaginatedReimbursements(1,"For Approval"),e.getNames(),e.getCompanies();case 4:case"end":return t.stop()}}),t)})))()},computed:Object(r["a"])({},Object(d["b"])({users:"Users/users"})),methods:{getUserRole:function(){var e=this;e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var t=o["dbUsers"].collection("users").where("username","==",e.username),a=[];t.get().then((function(t){t.empty||t.forEach((function(e){a.push(e.data())}));var i=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];i.get().then((function(t){t.empty||(t.forEach((function(e){n.push(e.data())})),e.userRole=n[0].userRole,e.getReimData(e.userRole))}))}))},getReimData:function(e){var t=this,a=m(t.dateCreated).startOf("month").format("YYYY-MM-DD"),i=m(t.dateCreated).endOf("month").format("YYYY-MM-DD"),n=new Date(a),r=new Date(i),s=null,l=null,c=null,d=null,u=null,p=[],f=[],b=[],g=[],v=[];if("Administrator"==e)s=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("status","==",1).orderBy("dateCreated","desc"),l=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("status","==",2).orderBy("dateCreated","desc"),c=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("status","==",3).orderBy("dateCreated","desc"),d=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("status","==",4).orderBy("dateCreated","desc"),u=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("status","==",0).orderBy("dateCreated","desc"),s.get().then((function(e){e.forEach((function(e){p.push(e.data())}));var a=0,i=0,n=0,r=0,s=0;t.forApprovalReimCount=0,t.approvedReimCount=0,t.processedReimCount=0,t.receivedReimCount=0,t.rejectedReimCount=0;for(var o=0;o<p.length;o++)a=parseFloat(a)+parseFloat(p[o].totalAmount.replaceAll(",",""));l.get().then((function(e){e.forEach((function(e){f.push(e.data())}));for(var o=0;o<f.length;o++)i=parseFloat(i)+parseFloat(f[o].totalAmount.replaceAll(",",""));c.get().then((function(e){e.forEach((function(e){b.push(e.data())}));for(var o=0;o<b.length;o++)n=parseFloat(n)+parseFloat(b[o].totalAmount.replaceAll(",",""));d.get().then((function(e){e.forEach((function(e){g.push(e.data())}));for(var o=0;o<g.length;o++)r=parseFloat(r)+parseFloat(g[o].totalAmount.replaceAll(",",""));u.get().then((function(e){e.forEach((function(e){v.push(e.data())}));for(var o=0;o<v.length;o++)s=parseFloat(s)+parseFloat(v[o].totalAmount.replaceAll(",",""));t.forApprovalReimCount=p.length,t.approvedReimCount=f.length,t.processedReimCount=b.length,t.receivedReimCount=g.length,t.rejectedReimCount=v.length,t.forApprovalReimAmount="₱ "+h(a.toFixed(2)),t.approvedReimAmount="₱ "+h(i.toFixed(2)),t.processedReimAmount="₱ "+h(n.toFixed(2)),t.receivedReimAmount="₱ "+h(r.toFixed(2)),t.rejectedReimAmount="₱ "+h(s.toFixed(2))}))}))}))}))}));else if("Administrator"!=e){var y=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),w="";y.get().then((function(e){e.forEach((function(e){w=e.data().userId})),s=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("nameReference","==",w).where("status","==",1).orderBy("dateCreated","desc"),l=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("nameReference","==",w).where("status","==",2).orderBy("dateCreated","desc"),c=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("nameReference","==",w).where("status","==",3).orderBy("dateCreated","desc"),d=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("nameReference","==",w).where("status","==",4).orderBy("dateCreated","desc"),u=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",n).where("dateCreated","<=",r).where("nameReference","==",w).where("status","==",0).orderBy("dateCreated","desc"),s.get().then((function(e){e.forEach((function(e){p.push(e.data())}));var a=0,i=0,n=0,r=0,s=0;t.forApprovalReimCount=0,t.approvedReimCount=0,t.processedReimCount=0,t.receivedReimCount=0,t.rejectedReimCount=0;for(var o=0;o<p.length;o++)a=parseFloat(a)+parseFloat(p[o].totalAmount.replaceAll(",",""));l.get().then((function(e){e.forEach((function(e){f.push(e.data())}));for(var o=0;o<f.length;o++)i=parseFloat(i)+parseFloat(f[o].totalAmount.replaceAll(",",""));c.get().then((function(e){e.forEach((function(e){b.push(e.data())}));for(var o=0;o<b.length;o++)n=parseFloat(n)+parseFloat(b[o].totalAmount.replaceAll(",",""));d.get().then((function(e){e.forEach((function(e){g.push(e.data())}));for(var o=0;o<g.length;o++)r=parseFloat(r)+parseFloat(g[o].totalAmount.replaceAll(",",""));u.get().then((function(e){e.forEach((function(e){v.push(e.data())}));for(var o=0;o<v.length;o++)s=parseFloat(s)+parseFloat(v[o].totalAmount.replaceAll(",",""));t.forApprovalReimCount=p.length,t.approvedReimCount=f.length,t.processedReimCount=b.length,t.receivedReimCount=g.length,t.rejectedReimCount=v.length,t.forApprovalReimAmount="₱ "+h(a.toFixed(2)),t.approvedReimAmount="₱ "+h(i.toFixed(2)),t.processedReimAmount="₱ "+h(n.toFixed(2)),t.receivedReimAmount="₱ "+h(r.toFixed(2)),t.rejectedReimAmount="₱ "+h(s.toFixed(2))}))}))}))}))}))}))}},getNames:function(){var e=this,t=o["dbUsers"].collection("users"),a=[];t.get().then((function(t){if(!t.empty){t.forEach((function(e){a.push(e.data())}));for(var i=0;i<a.length;i++)a[i]["fullName"]=a[i].firstname+" "+a[i].lastname,e.names.push(a[i]);e.filterName=e.names[0].userId}}))},getCompanies:function(){var e=this,t=o["dbMains"].collection("companies");t.get().then((function(t){t.empty||t.forEach((function(t){e.companies.push(t.data())}))}))},getPaginatedReimbursements:function(e,t){var a=this,i=null,n=[],r=[],s=m(a.dateCreated).startOf("month").format("YYYY-MM-DD"),l=m(a.dateCreated).endOf("month").format("YYYY-MM-DD"),c=new Date(s),d=new Date(l);a.loading=!0,a.loadError=!1,a.reimbursements=[],a.listType=t,a.pageNum=e,"For Approval"==t?"all"!=a.limit?"month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",1).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",1).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",1).orderBy("dateCreated","desc"):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",1).orderBy("dateCreated","desc"))):"Approved"==t?"all"!=a.limit?"month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",2).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",2).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",2).orderBy("dateCreated","desc"):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",2).orderBy("dateCreated","desc"))):"Processed"==t?"all"!=a.limit?"month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",3).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",3).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",3).orderBy("dateCreated","desc"):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",3).orderBy("dateCreated","desc"))):"Received"==t?"all"!=a.limit?"month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",4).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",4).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",4).orderBy("dateCreated","desc"):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",4).orderBy("dateCreated","desc"))):"Rejected"==t?"all"!=a.limit?"month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",0).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",0).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).where("status","==",0).orderBy("dateCreated","desc"):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).where("status","==",0).orderBy("dateCreated","desc"))):"All"==t&&("all"!=a.limit?"month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).orderBy("dateCreated","desc").limit(a.limit):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).orderBy("dateCreated","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?i=o["dbExpense"].collection("reimbursements").where("dateCreated",">=",c).where("dateCreated","<=",d).orderBy("dateCreated","desc"):"name"==a.filter&&(i=o["dbExpense"].collection("reimbursements").where("nameReference","==",a.filterName).orderBy("dateCreated","desc")))),i.get().then((function(t){if(!t.empty){t.forEach((function(e){r.push(e.data()),n.push(e.id)}));for(var i=0;i<r.length;i++)r[i]["rowNum"]=1+i,r[i]["id"]=n[i],r[i].totalAmount=h(parseFloat(r[i].totalAmount.replaceAll(",","")).toFixed(2)),r[i].dateCreated=m.unix(r[i].dateCreated.seconds),a.reimbursements.push(r[i]);a.reimbursementsCount=r.length,a.currentPage=e}setTimeout((function(){a.loading=!1}),1e3)}))},onPageChange:function(e){this.getPaginatedReimbursements(e,this.listType)},resetData:function(){this.getPaginatedReimbursements(1,this.listType)},reloadData:function(){this.getPaginatedReimbursements(1,this.listType),this.getReimData(this.userRole)},openApprovedModal:function(e){var t=this,a="",i="";a=""==e.processDate?m().format("YYYY-MM-DD"):e.processDate,i=""==e.monthOf?m().format("YYYY-MM"):e.monthOf,t.edit={id:e.id,processDate:a,monthOf:i},t.$bvModal.show("approved-modal")},openReceivedModal:function(e){var t=this;t.receive.id=e.id,t.$bvModal.show("received-modal")},openRejectedModal:function(e){var t=this;t.reject={id:e.id,remarks:e.remarks},t.$bvModal.show("rejected-modal")},changeStatus:function(e,t){var a=this,i="";1==t?(i="For Approval",e.processDate="",e.monthOf="",e.remarks=""):2==t?(i="Approved",e.remarks=""):0==t?(i="Rejected",e.processDate="",e.monthOf=""):3==t?(i="Processed",e.receiveDate="",e.remarks=""):4==t&&(i="Received"),a.$swal({title:"Are you sure?",text:"You want to change the reimbursement status to "+i,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value)try{if(1==t||2==t||0==t){var r=!1;1==t?(a.$v.edit.$touch(),a.$v.edit.$error||(r=!0)):0==t&&(a.$v.reject.$touch(),a.$v.reject.$error&&(r=!0)),r||o["dbExpense"].collection("reimbursements").doc(e.id).update({processDate:e.processDate,monthOf:e.monthOf,remarks:e.remarks,status:t,dateModified:f}).then((function(){a.$swal({title:"Success",text:"Reimbursement change status to "+i+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){a.getPaginatedReimbursements(1,i),a.$bvModal.hide("approved-modal"),a.$bvModal.hide("rejected-modal"),a.getUserRole(),a.$v.edit.$reset(),a.$v.reject.$reset()}))}))}else if(3==t||4==t){var s=!1;3==t&&(a.$v.receive.$touch(),a.$v.receive.$error||(s=!0)),s||o["dbExpense"].collection("reimbursements").doc(e.id).update({receivedDate:e.receivedDate,remarks:e.remarks,status:t,dateModified:f}).then((function(){a.$swal({title:"Success",text:"Reimbursement change status to "+i+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){a.getPaginatedReimbursements(1,i),a.$bvModal.hide("received-modal"),a.getUserRole(),a.$v.receive.$reset()}))}))}}catch(l){console.log(l),a.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))},reimSummary:function(){this.$router.push("/reimbursement/summary")}}},g=b,v=(a("4b8d"),a("2877")),y=Object(v["a"])(g,i,n,!1,null,null,null);t["default"]=y.exports},f6ac:function(e,t,a){"use strict";a("0db8")},fbec:function(e,t,a){"use strict";a("0828")}}]);
//# sourceMappingURL=chunk-6010d55c.9b21f307.js.map