(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c8140ba"],{"0580":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"},[a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-xl-4 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Done ("+t.currentMonth+")",type:"gradient-danger","sub-title":t.donePOAmount,icon:"fa fa-thumbs-up"}},[a("template",{slot:"footer"},[a("span",{staticClass:"mr-2",attrs:{id:"sideBarTxt"}},[a("b",[t._v(t._s(t.donePOCount)+" Done")])])])],2)],1),a("div",{staticClass:"col-xl-4 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Delivered ("+t.currentMonth+")",type:"gradient-danger","sub-title":t.deliveredPOAmount,icon:"fa fa-truck"}},[a("template",{slot:"footer"},[a("span",{staticClass:"mr-2",attrs:{id:"sideBarTxt"}},[a("b",[t._v(t._s(t.deliveredPOCount)+" Delivered")])])])],2)],1),a("div",{staticClass:"col-xl-4 col-lg-6"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"Sent ("+t.currentMonth+")",type:"gradient-danger","sub-title":t.sentPOAmount,icon:"fa fa-paper-plane"}},[a("template",{slot:"footer"},[a("span",{staticClass:"mr-2",attrs:{id:"sideBarTxt"}},[a("b",[t._v(t._s(t.sentPOCount)+" Sent")])])])],2)],1)])]),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Purchase Order"}},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("Pending")}}},[t._v("Pending")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("Sent")}}},[t._v("Sent")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("Delivered")}}},[t._v("Delivered")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("Done")}}},[t._v("Done")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("Reject")}}},[t._v("Reject")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("Cancel")}}},[t._v("Cancel")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPurchaseOrder("All")}}},[t._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[t._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.getPaginatedPurchaseOrder(t.listType)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==t.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:t.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(e){return t.getPaginatedPurchaseOrder(t.listType)}},model:{value:t.dateCreated,callback:function(e){t.dateCreated=e},expression:"dateCreated"}}):t._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.purchaseOrders,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["poNumber"==e.column.field?a("span",[a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/purchase/order/"+e.row.purchaseOrderId,id:"sideBarTxt",title:"View Purchase Order"}},[t._v(t._s(e.row.poNumber)+" ")])],1)]):t._e(),"distributor"==e.column.field?a("span",[a("span",[t._v(t._s(t.supplier.distributor))])]):t._e(),"deliveryAddress"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.deliveryAddress))])]):t._e(),"terms"==e.column.field?a("span",[a("span",[t._v(t._s(t.terms))])]):t._e(),"poDate"==e.column.field?a("span",[a("span",{staticClass:"tableSpan"},[t._v(t._s(t._f("moment")(e.row.poDate,"MMM DD, YYYY")))])]):t._e(),"totalAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.totalAmount))])]):t._e(),"status"==e.column.field?a("span",[1==e.row.status?a("span",{attrs:{id:"redTxt"}},[t._v("PENDING")]):t._e(),2==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("SENT")]):t._e(),3==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("DELIVERED")]):t._e(),4==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("DONE")]):t._e(),5==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("REJECT")]):t._e(),0==e.row.status?a("span",{attrs:{id:"redTxt"}},[t._v("CANCEL")]):t._e()]):t._e(),"action"==e.column.field?a("span",[1==e.row.status||3==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-paper-plane",attrs:{id:"sideBarTxt",title:"Sent"},on:{click:function(a){return t.changeStatus(e.row,2)}}}):t._e(),2==e.row.status||5==e.row.status||0==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-dot-circle",attrs:{id:"sideBarTxt",title:"Pending"},on:{click:function(a){return t.changeStatus(e.row,1)}}}):t._e(),1==e.row.status||0==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-down",attrs:{id:"sideBarTxt",title:"Reject"},on:{click:function(a){return t.changeStatus(e.row,5)}}}):t._e(),1==e.row.status||5==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-times-circle",attrs:{id:"sideBarTxt",title:"Cancel"},on:{click:function(a){return t.changeStatus(e.row,0)}}}):t._e(),2==e.row.status||4==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-truck",attrs:{id:"sideBarTxt",title:"Delivered"},on:{click:function(a){return t.changeStatus(e.row,3)}}}):t._e(),3==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-up",attrs:{id:"sideBarTxt",title:"Done"},on:{click:function(a){return t.changeStatus(e.row,4)}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),t.purchaseOrders.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-6"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getPaginatedPurchaseOrder(t.listType)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e()])],1),a("tab-pane",{attrs:{title:"New Purchase Order"}},[a("new-purchase-order")],1)],1)],1)])],1)},n=[],i=(a("a4d3"),a("e01a"),a("4160"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("68a2"),l=a("c1df"),c=a("e966"),d=c.bindWith(",","."),u=new Date,m={components:{},data:function(){return{columns:[{label:"PO Number",field:"poNumber"},{label:"Distributor",field:"distributor"},{label:"Delivery Address",field:"deliveryAddress",width:"200px"},{label:"Terms",field:"terms"},{label:"PO Date",field:"poDate"},{label:"Status",field:"status"},{label:"",field:"action",sortable:!1,width:"90px"}],userRole:"",loading:!0,purchaseOrders:[],requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"}],filter:"month",filterName:"",dateCreated:l().format("YYYY-MM"),maxDate:l().format("YYYY-MM"),listType:"",currentMonth:l().format("MMMM"),donePOCount:0,donePOAmount:"₱ 0.00",deliveredPOCount:0,deliveredPOAmount:"₱ 0.00",sentPOCount:0,sentPOAmount:"₱ 0.00"}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.getPaginatedPurchaseOrder("Pending");case 2:case"end":return e.stop()}}),e)})))()},methods:{getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname"),t.accountName=t.username.toUpperCase();var e=r["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())}));var s=r["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},getPaginatedPurchaseOrder:function(t){var e=this,a=null,s=[],n=[],i=l(e.dateCreated).startOf("month").format("YYYY-MM-DD"),o=l(e.dateCreated).endOf("month").format("YYYY-MM-DD");e.loading=!0,e.purchaseOrders=[],e.listType=t,"Pending"==t?"all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",1).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",1).orderBy("poDate","desc")):"Sent"==t?"all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",2).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",2).orderBy("poDate","desc")):"Delivered"==t?"all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",3).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",3).orderBy("poDate","desc")):"Done"==t?"all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",4).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",4).orderBy("poDate","desc")):"Reject"==t?"all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",5).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",5).orderBy("poDate","desc")):"Cancel"==t?"all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",0).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).where("status","==",0).orderBy("poDate","desc")):"All"==t&&("all"!=e.limit?a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).orderBy("poDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("purchaseOrders").where("poDate",">=",i).where("poDate","<=",o).orderBy("poDate","desc"))),a.get().then((function(t){if(!t.empty){t.forEach((function(t){n.push(t.data()),s.push(t.id)}));for(var a=0;a<n.length;a++)n[a]["rowNum"]=1+a,n[a]["id"]=s[a],n[a].totalAmount=d(parseFloat(n[a].totalAmount.replaceAll(",","")).toFixed(2)),e.purchaseOrders.push(n[a])}e.getPOData(),setTimeout((function(){e.loading=!1}),1e3)}))},getPOData:function(){var t=this,e=l().format("YYYY-MM-DD"),a=l(e).startOf("month").format("YYYY-MM-DD"),s=l(e).endOf("month").format("YYYY-MM-DD"),n=[],i=null;i=r["dbSales"].collection("purchaseOrders").where("poDate",">=",a).where("poDate","<=",s).where("status","in",[2,3,4]).orderBy("poDate","desc"),i.get().then((function(e){e.forEach((function(t){n.push(t.data())}));var a=0,s=0,i=0;t.donePOCount=0,t.deliveredPOCount=0,t.sentPOCount=0;for(var r=0;r<n.length;r++)4==n[r].status?(a=parseFloat(a)+parseFloat(n[r].totalAmount.replaceAll(",","")),t.donePOCount+=1):3==n[r].status?(s=parseFloat(s)+parseFloat(n[r].totalAmount.replaceAll(",","")),t.deliveredPOCount+=1):2==n[r].status&&(i=parseFloat(i)+parseFloat(n[r].totalAmount.replaceAll(",","")),t.sentPOCount+=1);t.donePOAmount="₱ "+d(a.toFixed(2)),t.deliveredPOAmount="₱ "+d(s.toFixed(2)),t.sentPOAmount="₱ "+d(i.toFixed(2))}))},changeStatus:function(t,e){var a=this,s="";1==e?s="Pending":2==e?s="Sent":3==e?s="Delivered":4==e?s="Done":5==e?s="Reject":0==e&&(s="Cancel"),a.$swal({title:"Are you sure?",text:"You want to change the status to "+s,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value){a.requestProcessing=!0;try{r["dbSales"].collection("purchaseOrders").doc(t.id).update({status:e,dateModified:u}).then((function(){a.requestProcessing=!1,a.getPaginatedPurchaseOrder(s),a.$swal({title:"Success",text:"Status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(i){console.log(i),a.requestProcessing=!1,a.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))},exportItem:function(){var t=new o["b"],e=this,a=[],s=null,n="",i=r["dbMains"].collection("companyProfile"),c=l(e.dateCreated).startOf("month").format("YYYY-MM-DD"),d=l(e.dateCreated).endOf("month").format("YYYY-MM-DD");"Pending"==e.listType?s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).where("status","==",1).orderBy("poDate","desc"):"Sent"==e.listType?s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).where("status","==",2).orderBy("poDate","desc"):"Delivered"==e.listType?s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).where("status","==",3).orderBy("poDate","desc"):"Done"==e.listType?s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).where("status","==",4).orderBy("poDate","desc"):"Reject"==e.listType?s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).where("status","==",5).orderBy("poDate","desc"):"Cancel"==e.listType?s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).where("status","==",0).orderBy("poDate","desc"):"All"==e.listType&&(s=r["dbSales"].collection("purchaseOrders").where("poDate",">=",c).where("poDate","<=",d).orderBy("poDate","desc")),s.get().then((function(s){s.forEach((function(t){a.push(t.data())}));for(var r=0;r<a.length;r++){for(var c=0;c<e.suppliers.length;c++)a[r].supplierReference==e.suppliers[c].supplierId&&(a[r]["supplier"]=e.suppliers[c].supplierName);for(var d=0;d<e.paymentTerms.length;d++)a[r].paymentTermReference==e.paymentTerms[d].paymentTermId&&(a[r]["paymentTerm"]=e.paymentTerms[d].description)}i.get().then((function(s){s.forEach((function(t){n=t.data().name}));for(var i={fileName:n+" - "+e.listType+" Purchase Order ("+l(e.dateCreated).format("MMMM YYYY")+")",workSheets:[{sheetName:"Purchase Orders",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:n+" - "+e.listType+" Purchase Orders: ("+l(e.dateCreated).format("MMMM YYYY")+")",headerDefinition:[{name:"Number",key:"num",width:10},{name:"PO Number",key:"poNumber",width:18,style:{alignment:o["a"].middleCenter}},{name:"Supplier",key:"supplier",width:50,style:{alignment:o["a"].middleCenter}},{name:"Delivery Address",key:"deliveryAddress",width:60,style:{alignment:o["a"].middleCenter}},{name:"Total Amount",key:"totalAmount",width:18,style:{alignment:o["a"].middleCenter}},{name:"Terms",key:"paymentTerm",width:18,style:{alignment:o["a"].middleCenter}},{name:"Date",key:"poDate",width:18,style:{alignment:o["a"].middleCenter}},{name:"Delivery Date",key:"expectedDeliveryDate",width:18,style:{alignment:o["a"].middleCenter}},{name:"Attention",key:"attention",width:30,style:{alignment:o["a"].middleCenter}},{name:"Remarks",key:"remarks",width:60,style:{alignment:o["a"].middleCenter}},{name:"Status",key:"poStatus",width:18,style:{alignment:o["a"].middleCenter}}]}}}]},r=[],c=0;c<a.length;c++)a[c]["num"]=c+1,1==a[c].status?a[c]["poStatus"]="Pending":2==a[c].status?a[c]["poStatus"]="Sent":3==a[c].status?a[c]["poStatus"]="Delivered":4==a[c].status?a[c]["poStatus"]="Done":5==a[c].status?a[c]["poStatus"]="Reject":0==a[c].status&&(a[c]["poStatus"]="Cancel");r.push({data:a}),t.downloadExcel(i,r)}))}))}}},p=m,h=(a("75da"),a("2877")),f=Object(h["a"])(p,s,n,!1,null,null,null);e["default"]=f.exports},"0f55":function(t,e,a){"use strict";a("a371")},"0ffd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==t.categoryStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getProductCategories(1)}}},[t._v("Enabled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==t.categoryStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getProductCategories(0)}}},[t._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"product-category-table",attrs:{columns:t.columns,rows:t.categories,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["category"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.category))])]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return t.openEditProductCategoryModal(e.row)}}}):t._e(),1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return t.changeStatus(e.row.id,0,"Disable")}}}):t._e(),0==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable"},on:{click:function(a){return t.changeStatus(e.row.id,1,"Enable")}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.categories.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getProductCategories(t.categoryStat)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-product-category-modal",modifiers:{"new-product-category-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Product Category")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-product-category-modal",title:"New Product Category",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addProductCategory(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-product-category-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Category:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Product Category"},model:{value:t.newCategory,callback:function(e){t.newCategory=e},expression:"newCategory"}}),t.$v.newCategory.$anyDirty&&!t.$v.newCategory.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newCategory.$anyDirty&&!t.$v.newCategory.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"edit-product-category-modal",title:"Edit Product Category",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateProductCategory(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-product-category-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Category:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Distributor"},model:{value:t.edit.category,callback:function(e){t.$set(t.edit,"category",e)},expression:"edit.category"}}),t.$v.edit.category.$anyDirty&&!t.$v.edit.category.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.category.$anyDirty&&!t.$v.edit.category.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("2f62"),d=a("c6f8"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&, ]*$/),m=new Date,p={components:{},data:function(){return{columns:[{label:"Category",field:"category"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",requestProcessing:!1,newCategory:"",edit:{id:"",productCategoryId:"",category:""},categoryStat:1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getProductCategories(t.categoryStat);case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(c["b"])({valid:"Products/valid",error:"Products/error",categories:"Products/categories"})),validations:{newCategory:{required:l["required"],alphaNumCustomValidator:u},edit:{category:{required:l["required"],alphaNumCustomValidator:u}}},methods:{addProductCategory:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.$v.newCategory.$touch(),a.$v.newCategory.$error||(a.requestProcessing=!0,s={productCategoryId:"",category:Object(d["a"])(a.newCategory),userReference:"",status:1,dateCreated:m,dateModified:m},a.$store.dispatch("Products/checkCategory",{newCategory:a.newCategory}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Product category"):0==a.valid&&a.$store.dispatch("Products/newCategory",s).then((function(){setTimeout((function(){0==a.error?(a.newCategory="",a.requestProcessing=!1,a.$v.newCategory.$reset(),a.$refs["product-category-table"].reset(),a.getProductCategories(a.categoryStat),a.$bvModal.hide("new-product-category-modal"),a.$swal({title:"Success",text:"New product category added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}),500)}))}),500)})));case 3:case"end":return e.stop()}}),e)})))()},validationMessage:function(t){var e=this;e.$swal({title:"Invalid",text:t+" already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1},errorMessage:function(){var t=this;t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},getProductCategories:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e,s.loading=!0,s.categoryStat=t,s.$store.dispatch("Products/getCategories",{limit:s.limit,stat:t}),setTimeout((function(){s.loading=!1}),1e3);case 5:case"end":return a.stop()}}),a)})))()},openEditProductCategoryModal:function(t){this.edit={id:t.id,productCategoryId:t.productCategoryId,category:t.category},this.$bvModal.show("edit-product-category-modal")},updateProductCategory:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.$v.edit.$touch(),a.$v.edit.$error||(a.requestProcessing=!0,a.$store.dispatch("Products/checkEditCategory",{category:a.edit.category,productCategoryId:a.edit.productCategoryId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Product category"):0==a.valid&&(a.requestProcessing=!1,a.edit.category=Object(d["a"])(a.edit.category),console.log(a.edit),a.$store.dispatch("Products/editCategory",a.edit).then((function(){0==a.error?(a.$v.edit.$reset(),a.$refs["product-category-table"].reset(),a.getProductCategories(a.categoryStat),a.$bvModal.hide("edit-product-category-modal"),a.$swal({title:"Success",text:"Product category updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()})))}),1e3)})));case 3:case"end":return e.stop()}}),e)})))()},changeStatus:function(t,e,a){var s=this;s.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){n.value&&s.$store.dispatch("Products/categoryStatus",{id:t,stat:e}).then((function(){setTimeout((function(){0==s.error?s.$swal({title:"Success",text:"Product category change status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){s.$refs["product-category-table"].reset(),s.getProductCategories(e)})):1==s.error&&s.errorMessage()}),1e3)}))}))}}},h=p,f=(a("58e0"),a("2877")),b=Object(f["a"])(h,s,n,!1,null,null,null);e["default"]=b.exports},"10a9":function(t,e,a){"use strict";a("cc32")},"15f9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("vue-good-table",{ref:"billing-type-table",attrs:{columns:t.columns,rows:t.billingTypes,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"type",type:"asc"}},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["type"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.type))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateBillingTypeModal(e.row)}}})]):t._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.billingTypes.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getBillingTypes(1,"")}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-billing-type-modal",modifiers:{"new-billing-type-modal":!0}}],staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Billing Type")])],1)],1),a("b-modal",{attrs:{size:"md",id:"new-billing-type-modal",title:"New Billing Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addBillingType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-billing-type-modal")}}},[t._v(" Close ")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Billing Type"},model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}}),t.$v.newType.$anyDirty&&!t.$v.newType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newType.$anyDirty&&!t.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"edit-billing-type-modal",title:"Edit Billing Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateBillingType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-billing-type-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"E Wallet"},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}}),t.$v.edit.$anyDirty&&!t.$v.edit.type.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.type.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z -./, ]*$/),m=new Date,p=a("9f25"),h={components:{},data:function(){return{columns:[{label:"Type",field:"type"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,billingTypes:[],views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newType:"",edit:{id:"",btId:null,type:""},banksUid:"",requestProcessing:!1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getBillingTypes();case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(d["b"])({users:"Users/users"})),validations:{newType:{required:l["required"],alphaNumCustomValidator:u},edit:{type:{required:l["required"],alphaNumCustomValidator:u}}},methods:{getBillingTypes:function(){var t=this,e=null,a=[],s=[];t.loading=!0,t.billingTypes=[],"all"!=t.limit?e=o["dbExpense"].collection("billingTypes").orderBy("type","asc").limit(t.limit):"all"==t.limit&&(e=o["dbExpense"].collection("billingTypes").orderBy("type","asc")),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)}));for(var n=0;n<a.length;n++)a[n]["rowNum"]=1+n,a[n]["id"]=s[n],t.billingTypes.push(a[n])}setTimeout((function(){t.loading=!1}),1e3)}))},addBillingType:function(){var t=this;if(t.requestProcessing=!1,t.$v.newType.$touch(),!t.$v.newType.$error){var e=null;t.requestProcessing=!0,e=o["dbExpense"].collection("billingTypes").where("type","==",Object(c["a"])(t.newType)),e.get().then((function(e){if(e.empty){if(e){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="BTI-"+m.getFullYear()+p(m.getMonth()+1,2)+m.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{o["dbExpense"].collection("billingTypes").doc().set({billingTypeId:n,type:Object(c["a"])(t.newType),userReference:s[0].userId,status:1,dateCreated:m,dateModified:m}).then((function(){t.newType="",t.requestProcessing=!1,t.$v.newType.$reset(),t.$bvModal.hide("new-billing-type-modal"),t.$refs["billing-type-table"].reset(),t.getBillingTypes(),t.$swal({title:"Success",text:"New billing type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Billing type already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},openUpdateBillingTypeModal:function(t){this.edit={id:t.id,btId:t.billingTypeId,type:t.type},this.$bvModal.show("edit-billing-type-modal")},updateBillingType:function(){var t=this;if(t.requestProcessing=!0,t.$v.edit.$touch(),!t.$v.edit.$error){var e=null;e=o["dbExpense"].collection("billingTypes").where("type","==",Object(c["a"])(t.edit.type)).where("billingTypeId","!=",t.edit.btId),e.get().then((function(e){if(e.empty){if(e)try{o["dbExpense"].collection("billingTypes").doc(t.edit.id).update({type:Object(c["a"])(t.edit.type),dateModified:m}).then((function(){t.$v.edit.$reset(),t.$bvModal.hide("edit-billing-type-modal"),t.requestProcessing=!1,t.$refs["billing-type-table"].reset(),t.getBillingTypes(),t.$swal({title:"Success",text:"Billing type updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Billing type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}}},f=h,b=(a("10a9"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,null,null);e["default"]=v.exports},"17a3":function(t,e,a){},"1c95":function(t,e,a){},2129:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},["clearing"==this.$router.currentRoute.params.name?a("card",[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h2",[t._v("Nearly Clearing Checks")])])]),a("vue-good-table",{attrs:{columns:t.columns,rows:t.clearingChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["bankCheckNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bankCheckNumber))])]):t._e(),"payee"==e.column.field?a("span",t._l(t.suppliers,(function(s){return a("span",{key:s.supplierId},[s.supplierId==e.row.payeeReference?a("span",[t._v(t._s(s.supplier))]):t._e()])})),0):t._e(),"voucherNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.voucherNumber))])]):t._e(),"bankCheckAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.bankCheckAmount))])]):t._e(),"bankCheckDate"==e.column.field?a("span",[e.row.bankCheckDate==t.dateToday?a("span",{attrs:{id:"redTxt"}},[a("b",[t._v("Clearing Today ")])]):e.row.bankCheckDate==t.dateTom?a("span",{attrs:{id:"sideBarTxt"}},[a("b",[t._v("Clearing Tomorrow ")])]):a("span",{attrs:{id:"sideBarTxt"}},[a("b",[t._v("Clearing on "+t._s(t._f("moment")(e.row.bankCheckDate,"dddd"))+" ")])]),a("span",[t._v("("+t._s(t._f("moment")(e.row.bankCheckDate,"MMMM DD, YYYY"))+")")])]):t._e()])]}}],null,!1,1497278949)}),a("hr",{staticClass:"mt-2 mb-2"}),0!=t.clearingTodayAmount?a("div",{staticClass:"pl-6 pt-2"},t._l(t.clearingAmounts,(function(e){return a("span",{key:e.bankId,staticClass:"row"},[a("span",{staticClass:"col-sm-4 text-left"},[a("b",[t._v(t._s(e.bank)+" Account No. "+t._s(e.account)+":")])]),a("span",{staticClass:"col-sm-2 text-left"},[t._v("₱ "+t._s(e.amount))])])})),0):t._e(),0!=t.clearingTodayAmount?a("hr",{staticClass:"mt-2 mb-2"}):t._e(),0!=t.clearingTodayAmount?a("div",{staticClass:"text-right pt-2 pr-6"},[a("b",[t._v("Total Amount: ")]),t._v(" ₱ "+t._s(t.clearingTodayAmount)+" ")]):t._e(),0!=t.clearingTodayAmount?a("hr",{staticClass:"mt-2 mb-2"}):t._e(),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4 pt-2"},[a("base-button",{attrs:{id:"darkInlineBtn",block:""},nativeOn:{click:function(e){return t.cancelCheckDashboard(e)}}},[t._v("Close")])],1)])],1):t._e(),"postdated"==this.$router.currentRoute.params.name?a("card",[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h2",[t._v("Postdated Checks")])])]),a("vue-good-table",{attrs:{columns:t.columns,rows:t.postdatedChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["bankCheckNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bankCheckNumber))])]):t._e(),"payee"==e.column.field?a("span",t._l(t.suppliers,(function(s){return a("span",{key:s.supplierId},[s.supplierId==e.row.payeeReference?a("span",[t._v(t._s(s.supplier))]):t._e()])})),0):t._e(),"voucherNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.voucherNumber))])]):t._e(),"bankCheckAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.bankCheckAmount))])]):t._e(),"bankCheckDate"==e.column.field?a("span",[a("span",[t._v("("+t._s(t._f("moment")(e.row.bankCheckDate,"MMMM DD, YYYY"))+")")])]):t._e()])]}}],null,!1,3662961074)}),a("hr",{staticClass:"mt-2 mb-2"}),t.postdatedChecks.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(e){return t.getPostdatedCheck(1)}},model:{value:t.limitPostdated,callback:function(e){t.limitPostdated=e},expression:"limitPostdated"}})],1)]):t._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkInlineBtn",block:""},nativeOn:{click:function(e){return t.cancelCheckDashboard(e)}}},[t._v("Close")])],1)])],1):t._e(),"cleared"==this.$router.currentRoute.params.name?a("card",[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h2",[t._v("For Clearing Checks")])])]),a("div",{staticClass:"row pl-4 pt-2"},[a("span",{staticClass:"col-2 pt-2"},[a("b",[t._v("Filter by week:")])]),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"date",min:"1997-01-01",max:t.maxDate},on:{input:function(e){return t.getClearedCheck(1)}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"date",min:"1997-01-01",max:t.maxDate},on:{input:function(e){return t.getClearedCheck(1)}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)]),a("vue-good-table",{attrs:{columns:t.columns,rows:t.clearedChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["bankCheckNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bankCheckNumber))])]):t._e(),"payee"==e.column.field?a("span",t._l(t.suppliers,(function(s){return a("span",{key:s.supplierId},[s.supplierId==e.row.payeeReference?a("span",[t._v(t._s(s.supplier))]):t._e()])})),0):t._e(),"voucherNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.voucherNumber))])]):t._e(),"bankCheckAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.bankCheckAmount))])]):t._e(),"bankCheckDate"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.bankCheckDate,"MMMM DD, YYYY")))])]):t._e()])]}}],null,!1,2191772019)}),a("hr",{staticClass:"mt-2 mb-2"}),t.clearedChecks.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(e){return t.getClearedCheck(1)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkInlineBtn",block:""},nativeOn:{click:function(e){return t.cancelCheckDashboard(e)}}},[t._v("Close")])],1)])],1):t._e()],1)],1)},n=[],i=(a("99af"),a("4160"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=["#","Check No.","Payee","Voucher No.","Amount","Check Date"],l=a("c1df"),c=a("e966"),d=c.bindWith(",","."),u={components:{},data:function(){return{columns:[{label:"Check No",field:"bankCheckNumber"},{label:"Payee",field:"payee"},{label:"Voucher No",field:"voucherNumber"},{label:"Amount",field:"bankCheckAmount"},{label:"Check Date",field:"bankCheckDate"}],loading:!0,loadError:!1,clearingChecks:[],clearingCheckCount:1,dateToday:l().format("YYYY-MM-DD"),dateTom:l().add(1,"day").format("YYYY-MM-DD"),clearingTable:{title:"Clearing Checks Table",subTitle:"",columns:[].concat(o)},currentPage:1,postdatedChecks:[],postdatedCheckCount:1,postdatedTable:{title:"Postdated Checks Table",subTitle:"",columns:[].concat(o)},currentPostdatedPage:1,clearedChecks:[],clearedCheckCount:1,clearedTable:{title:"Cleared Checks Table",subTitle:"",columns:[].concat(o)},currentClearedPage:1,clearingTodayAmount:0,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All"}],limit:"30",limitPostdated:"30",clearingAmounts:[],endDate:l().subtract(1,"day").format("YYYY-MM-DD"),startDate:l().subtract(6,"days").format("YYYY-MM-DD"),maxDate:l().format("YYYY-MM-DD"),suppliers:[]}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getClearingCheck(1),t.getPostdatedCheck(1),t.getClearedCheck(1),t.getSuppliers();case 4:case"end":return e.stop()}}),e)})))()},methods:{cancelCheckDashboard:function(){this.$router.push("/check/dashboard")},getClearingCheck:function(t){var e=this,a=null,s=[],n=[],i=[],o=(new Date).getFullYear(),c=o.toString()+"-01-01",u=l().add(6,"days").format("YYYY-MM-DD"),m=l().format("YYYY-MM-DD"),p=0,h=[],f=r["db"].collection("banks").orderBy("bank","asc"),b=r["db"].collection("bankAccounts").orderBy("bankAccountName","asc"),v=[],C=[],y=[];e.clearingChecks=[],e.clearingCheckCount=0,e.clearingTodayAmount=0,a=r["db"].collection("bankChecks").where("bankCheckDate",">=",c).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc"),a.get().then((function(a){a.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var r=0;r<s.length;r++)l(s[r].bankCheckDate).format("YYYY-MM-DD")>=m&&l(s[r].bankCheckDate).format("YYYY-MM-DD")<=u&&i.push(s[r]);for(var o=0;o<i.length;o++)i[o]["rowNum"]=1+o,p=parseFloat(p)+parseFloat(i[o].bankCheckAmount),h.push(i[o]),i[o].bankCheckAmount=d(parseFloat(i[o].bankCheckAmount).toFixed(2)),e.clearingChecks.push(i[o]);b.get().then((function(t){t.forEach((function(t){v.push(t.data())}));for(var a=0;a<v.length;a++){for(var s="",n=0,i="",r=0;r<h.length;r++)v[a].bankAccountUid==h[r].bankAccountReference&&(s=v[a].bankAccountNumber,i=v[a].bankReference,n=parseFloat(n)+parseFloat(h[r].bankCheckAmount.replaceAll(",","")));""!=s&&0!=n&&C.push({account:s,amount:n,bankId:i})}f.get().then((function(t){t.forEach((function(t){y.push(t.data())}));for(var a=0;a<C.length;a++)for(var s=0;s<y.length;s++)y[s].bankUid==C[a].bankId&&(C[a]["bank"]=y[s].bank,C[a].amount=d(parseFloat(C[a].amount).toFixed(2)),e.clearingAmounts.push(C[a]))}))})),e.currentClearingPage=t,e.clearingCheckCount=i.length,p>0&&(e.clearingTodayAmount=d(parseFloat(p).toFixed(2)))})),setTimeout((function(){e.loading=!1}),1e3)},onPageChange:function(t){this.getClearingCheck(t)},getPostdatedCheck:function(t){var e=this,a=null,s=[],n=[],i=l().add(6,"days").format("YYYY-MM-DD"),o=[];e.postdatedChecks=[],e.postdatedCheckCount=0,"all"!=e.limitPostdated?a=r["db"].collection("bankChecks").where("bankCheckDate",">",i).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc").limit(e.limitPostdated):"all"==e.limitPostdated&&(a=r["db"].collection("bankChecks").where("bankCheckDate",">",i).where("status","in",[1,2,3]).orderBy("bankCheckDate","asc")),a.get().then((function(a){a.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var i=0;i<s.length;i++)o.push(s[i]);for(var r=0;r<o.length;r++)o[r]["rowNum"]=1+r,o[r].bankCheckAmount=d(parseFloat(o[r].bankCheckAmount).toFixed(2)),e.postdatedChecks.push(o[r]);e.currentPostdatedPage=t,e.postdatedCheckCount=o.length})),setTimeout((function(){e.loading=!1}),1e3)},onPostdatedPageChange:function(t){this.getPostdatedCheck(t)},getClearedCheck:function(t){var e=this,a=null,s=[],n=[],i=l(e.startDate).format("YYYY-MM-DD"),o=l(e.endDate).format("YYYY-MM-DD"),c=l().format("YYYY-MM-DD"),u=[];e.clearedChecks=[],e.clearedCheckCount=0,"all"!=e.limit?a=r["db"].collection("bankChecks").where("bankCheckDate",">=",i).where("bankCheckDate","<=",o).where("status","in",[1,3]).orderBy("bankCheckDate","desc").limit(e.limit):"all"==e.limit&&(a=r["db"].collection("bankChecks").where("bankCheckDate",">=",i).where("bankCheckDate","<=",o).where("status","in",[1,3]).orderBy("bankCheckDate","desc")),a.get().then((function(a){a.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var i=0;i<s.length;i++)l(s[i].bankCheckDate).format("YYYY-MM-DD")<c&&u.push(s[i]);for(var r=0;r<u.length;r++)u[r]["rowNum"]=1+r,u[r].bankCheckAmount=d(parseFloat(u[r].bankCheckAmount).toFixed(2)),e.clearedChecks.push(u[r]);e.clearedChecks.sort((function(t,e){return e.backCheckDate-t.bankCheckDate})),e.currentClearedPage=t,e.clearedCheckCount=u.length})),setTimeout((function(){e.loading=!1}),1e3)},onClearedPageChange:function(t){this.getClearedCheck(t)},getSuppliers:function(){var t=this,e=r["db"].collection("suppliers").orderBy("supplier","asc");t.suppliers=[],e.get().then((function(e){e.forEach((function(e){t.suppliers.push(e.data())}))}))}}},m=u,p=a("2877"),h=Object(p["a"])(m,s,n,!1,null,null,null);e["default"]=h.exports},"2c6e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"E Transactions"}},[a("card",[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[t._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.getPaginatedETransactions(t.listType)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==t.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:t.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(e){return t.getPaginatedETransactions(t.listType)}},model:{value:t.dateCreated,callback:function(e){t.dateCreated=e},expression:"dateCreated"}}):t._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.eTransactions,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["payee"==e.column.field?a("span",[a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/electronic/transaction/"+e.row.eTransactionId,id:"sideBarTxt",title:"View E Transaction"}},[t._v(t._s(e.row.payee)+" ")])],1)]):t._e(),"payeeAccount"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.payeeAccountNumber))])]):t._e(),"voucherNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.voucherNumber))])]):t._e(),"eWallet"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.eWallet))])]):t._e(),"eWalletAccount"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.eWalletAccount))])]):t._e(),"transactionDate"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.transactionDate,"MMM DD, YYYY")))])]):t._e(),"totalAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.totalAmount))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),t.eTransactions.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-6"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getPaginatedETransaction(t.listType)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),a("base-button",{staticClass:"col-2 ml-2 mr-2",attrs:{id:"darkBtn",block:""},on:{click:t.exportET}},[t._v("Export")])],1):t._e()])],1),a("tab-pane",{attrs:{title:"New E Transaction"}},[a("new-e-transaction")],1)],1)],1)])],1)},n=[],i=(a("4160"),a("b0c0"),a("b680"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("68a2"),c=a("2f62"),d=a("c1df"),u=a("e966"),m=u.bindWith(",","."),p={components:{},data:function(){return{columns:[{label:"Payee",field:"payee"},{label:"Payee Account",field:"payeeAccount"},{label:"Voucher No.",field:"voucherNumber"},{label:"E Wallet",field:"eWallet"},{label:"E Wallet Account",field:"eWalletAccount"},{label:"Transaction Date",field:"transactionDate"},{label:"Total Amount",field:"totalAmount"},{label:"Created by",field:"userReference"}],loading:!0,eTransactions:[],eWallets:[],eWAccounts:[],userRole:"",requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"}],filter:"month",filterName:"",dateCreated:d().format("YYYY-MM"),maxDate:d().format("YYYY-MM"),listType:""}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.getPaginatedETransactions();case 2:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(c["b"])({users:"Users/users"})),methods:{getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname"),t.accountName=t.username.toUpperCase();var e=o["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())}));var s=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},getPaginatedETransactions:function(t){var e=this,a=null,s=[],n=[],i=d(e.dateCreated).startOf("month").format("YYYY-MM-DD"),r=d(e.dateCreated).endOf("month").format("YYYY-MM-DD");e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var l=o["dbUsers"].collection("users").where("username","==",e.username),c=[],u="",p="";l.get().then((function(l){l.forEach((function(t){c.push(t.data())})),p=c[0].userId;var d=o["dbUsers"].collection("userRoles").where("userRoleId","==",c[0].userRoleReference),h=[];d.get().then((function(l){l.forEach((function(t){h.push(t.data())})),u=h[0].userRole,e.loading=!0,e.eTransactions=[],e.listType=t,"Administrator"==u||"Manager"==u?"all"!=e.limit?a=o["dbUsers"].collection("eTransactions").where("transactionDate",">=",i).where("transactionDate","<=",r).orderBy("transactionDate","desc").limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("eTransactions").where("transactionDate",">=",i).where("transactionDate","<=",r).orderBy("transactionDate","desc")):"User"==u&&("all"!=e.limit?a=o["dbUsers"].collection("eTransactions").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",p).orderBy("transactionDate","desc").limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("eTransactions").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",p).orderBy("transactionDate","desc"))),a.get().then((function(t){if(!t.empty){t.forEach((function(t){n.push(t.data()),s.push(t.id)}));for(var a=function(t){n[t]["rowNum"]=1+t,n[t]["id"]=s[t],n[t].totalAmount=m(parseFloat(n[t].totalAmount.replaceAll(",","")).toFixed(2)),n[t]["eWallet"]="",n[t]["eWalletAccount"]="";var a=o["dbMains"].collection("eWallets").where("eWalletId","==",n[t].eWalletReference),i=o["dbMains"].collection("eWalletAccounts").where("eWalletAccountId","==",n[t].eWalletAccountReference);a.get().then((function(a){a.forEach((function(e){n[t].eWallet=e.data().eWalletName})),i.get().then((function(a){a.forEach((function(e){n[t].eWalletAccount=e.data().eWalletAccountNumber})),e.eTransactions.push(n[t])}))}))},i=0;i<n.length;i++)a(i)}setTimeout((function(){e.loading=!1}),1e3)}))}))}))},exportET:function(){var t=this,e=[],a=null,s=[],n=[],i=d(t.dateCreated).startOf("month").format("YYYY-MM-DD"),r=d(t.dateCreated).endOf("month").format("YYYY-MM-DD");a=o["dbUsers"].collection("eTransactions").where("transactionDate",">=",i).where("transactionDate","<=",r).orderBy("transactionDate","desc"),a.get().then((function(a){if(!a.empty){a.forEach((function(t){n.push(t.data()),s.push(t.id)}));for(var i=0;i<n.length;i++)n[i]["rowNum"]=1+i,n[i]["id"]=s[i],n[i].totalAmount=m(parseFloat(n[i].totalAmount.replaceAll(",","")).toFixed(2)),n[i]["eWallet"]="",n[i]["eWalletAccount"]="",e.push(n[i]);t.excelData(e)}}))},excelData:function(t){for(var e=new l["b"],a=this,s=t,n="",i=o["dbMains"].collection("companyProfile"),r=function(t){s[t].voucherDate=d.unix(s[t].voucherDate.seconds).format("YYYY-MM-DD");var e=o["dbMains"].collection("eWallets").where("eWalletId","==",s[t].eWalletReference),a=o["dbMains"].collection("eWalletAccounts").where("eWalletAccountId","==",s[t].eWalletAccountReference);e.get().then((function(e){e.forEach((function(e){s[t].eWallet=e.data().eWalletName}))})),a.get().then((function(e){e.forEach((function(e){s[t].eWalletAccount=e.data().eWalletAccountNumber}))}))},c=0;c<s.length;c++)r(c);i.get().then((function(t){t.forEach((function(t){n=t.data().name}));for(var i={fileName:n+" -  E Transactions ("+d(a.dateCreated).format("MMMM YYYY")+")",workSheets:[{sheetName:"E Transactions",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:n+" -  E Transactions: ("+d(a.dateCreated).format("MMMM YYYY")+")",headerDefinition:[{name:"Number",key:"num",width:10},{name:"Payee",key:"payee",width:18,style:{alignment:l["a"].middleCenter}},{name:"Payee Account",key:"payeeAccountNumber",width:18,style:{alignment:l["a"].middleCenter}},{name:"Voucher Number",key:"voucherNumber",width:18,style:{alignment:l["a"].middleCenter}},{name:"Voucher Date",key:"voucherDate",width:18,style:{alignment:l["a"].middleCenter}},{name:"E Wallet",key:"eWallet",width:36,style:{alignment:l["a"].middleCenter}},{name:"E Wallet Account",key:"eWalletAccount",width:18,style:{alignment:l["a"].middleCenter}},{name:"Transaction No.",key:"transactionNumber",width:18,style:{alignment:l["a"].middleCenter}},{name:"Transaction Date",key:"transactionDate",width:18,style:{alignment:l["a"].middleCenter}},{name:"Total Amount",key:"totalAmount",width:20,style:{alignment:l["a"].middleCenter}}]}}}]},r=[],o=0;o<s.length;o++)s[o]["num"]=o+1;r.push({data:s}),e.downloadExcel(i,r)}))}}},h=p,f=(a("a016"),a("2877")),b=Object(f["a"])(h,s,n,!1,null,null,null);e["default"]=b.exports},"2f9f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Cash Disbursement Type"}},[a("cash-disbursement-type")],1),a("tab-pane",{attrs:{title:"Remittance Disbursement Type"}},[a("remittance-disbursement-type")],1)],1)],1)],1)},n=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o={components:{},data:function(){return{}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},validations:{},methods:{}},l=o,c=(a("5109"),a("2877")),d=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},3738:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v(t._s(t.etrans.eWallet))])])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Number: ")]),t._v(t._s(t.etrans.eWalletAccountNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Name: ")]),t._v(t._s(t.etrans.eWalletAccountName)+" ")])]),a("hr"),a("div",{staticClass:"row pl-4 pt-2"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee:")]),t._v(" "+t._s(t.etrans.payee)+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher No.:")]),t._v(" "+t._s(t.etrans.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Date:")]),t._v(" "+t._s(t.etrans.voucherDate)+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction No.:")]),t._v(" "+t._s(t.etrans.transactionNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date:")]),t._v(" "+t._s(t._f("moment")(t.etrans.transactionDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount Total:")]),t._v(" ₱ "+t._s(t.etrans.totalAmount)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Payee Account No.:")]),t._v(" "+t._s(t.etrans.payeeAccountNumber)+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Created by: ")]),t._l(t.users,(function(e){return a("span",{key:e.userId},[e.userId==t.etrans.userReference?a("span",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]):""==t.etrans.userReference?a("span",[t._v("----------")]):t._e()])}))],2)]),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"text-left pl-2"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[t._v("Particulars")])]),a("div",{staticClass:"table-full-width pt-2"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.particulars,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["particular"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.particular))])]):t._e(),"quantity"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.quantity))])]):t._e(),"unitPrice"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.unitPrice))])]):t._e(),"referenceNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.referenceNumber))])]):t._e(),"amount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.amount))])]):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return t.openAttachments(e.row)}}}),a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateParticularModal(e.row)}}}),a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return t.removeParticular(e.row)}}})]):t._e()])]}}])})],1),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.openUpdateETransactionModal(t.etrans)}}},[t._v("Update")])],1),a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.$bvModal.show("add-particular-modal")}}},[t._v("Add Particular")])],1),a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.printETransaction()}}},[t._v("Print")])],1),a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.closeETransaction(e)}}},[t._v("Close")])],1)])]),a("card",{staticClass:"pl-4 pt-5 pb-5",attrs:{id:"viewSummary"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v(t._s(t.etrans.eWallet))])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Number: ")]),t._v(t._s(t.etrans.eWalletAccountNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Name: ")]),t._v(t._s(t.etrans.eWalletAccountName)+" ")])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee:")]),t._v(" "+t._s(t.etrans.payee)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher No.:")]),t._v(" "+t._s(t.etrans.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Date:")]),t._v(" "+t._s(t.etrans.voucherDate)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction No.:")]),t._v(" "+t._s(t.etrans.transactionNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date:")]),t._v(" "+t._s(t._f("moment")(t.etrans.transactionDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount Total:")]),t._v(" ₱ "+t._s(t.etrans.totalAmount)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Payee Account No.:")]),t._v(" "+t._s(t.etrans.payeeAccountNumber)+" ")])]),a("hr"),a("div",{staticClass:"row pb-2",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4"},[a("b",[t._v("PARTICULAR")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("QTY")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("PRICE")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("REF. NO.")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("AMOUNT")])])]),t._l(t.particulars,(function(e){return a("div",{key:e.eTransactionParticularId,staticClass:"row",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4",attrs:{id:"docStyle"}},[t._v(t._s(e.particular))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v(t._s(e.quantity))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v("₱ "+t._s(e.unitPrice))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v(t._s(e.referenceNumber))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v("₱ "+t._s(e.amount))])])})),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Received Payment by : ")]),t._v(" "+t._s(t.eTransactionSignatory.receivedPayment)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Prepared by :")]),t._v(" "+t._s(t.eTransactionSignatory.prepared||t.user.firstname+" "+t.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Certified by : ")]),t._v(" "+t._s(t.eTransactionSignatory.certified)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Approved by : ")]),t._v(" "+t._s(t.eTransactionSignatory.approved)+" ")])])],2),a("div",{staticClass:"col-12",attrs:{id:"duplicateView"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v(t._s(t.etrans.eWallet))])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Number: ")]),t._v(t._s(t.etrans.eWalletAccountNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Name: ")]),t._v(t._s(t.etrans.eWalletAccountName)+" ")])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee:")]),t._v(" "+t._s(t.etrans.payee)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher No.:")]),t._v(" "+t._s(t.etrans.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Date:")]),t._v(" "+t._s(t.etrans.voucherDate)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction No.:")]),t._v(" "+t._s(t.etrans.transactionNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date:")]),t._v(" "+t._s(t._f("moment")(t.etrans.transactionDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount Total:")]),t._v(" ₱ "+t._s(t.etrans.totalAmount)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Payee Account No.:")]),t._v(" "+t._s(t.etrans.payeeAccountNumber)+" ")])]),a("hr"),t._m(0),t._l(t.particulars,(function(e){return a("div",{key:e.eTransactionParticularId,staticClass:"row"},[a("span",{staticClass:"col-sm-4",attrs:{id:"docStyle"}},[t._v(t._s(e.particular))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v(t._s(e.quantity))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v("₱ "+t._s(e.unitPrice))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v(t._s(e.referenceNumber))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v("₱ "+t._s(e.amount))])])})),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Received Payment by : ")]),t._v(" "+t._s(t.eTransactionSignatory.receivedPayment)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Prepared by :")]),t._v(" "+t._s(t.eTransactionSignatory.prepared||t.user.firstname+" "+t.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Certified by : ")]),t._v(" "+t._s(t.eTransactionSignatory.certified)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Approved by : ")]),t._v(" "+t._s(t.eTransactionSignatory.approved)+" ")])]),a("br"),t._l(t.breakCounts,(function(t){return a("span",{key:t},[a("br")])})),a("br"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v(t._s(t.etrans.eWallet))])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Number: ")]),t._v(t._s(t.etrans.eWalletAccountNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Name: ")]),t._v(t._s(t.etrans.eWalletAccountName)+" ")])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee:")]),t._v(" "+t._s(t.etrans.payee)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher No.:")]),t._v(" "+t._s(t.etrans.voucherNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Date:")]),t._v(" "+t._s(t.etrans.voucherDate)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction No.:")]),t._v(" "+t._s(t.etrans.transactionNumber)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date:")]),t._v(" "+t._s(t._f("moment")(t.etrans.transactionDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount Total:")]),t._v(" ₱ "+t._s(t.etrans.totalAmount)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Payee Account No.:")]),t._v(" "+t._s(t.etrans.payeeAccountNumber)+" ")])]),a("hr"),t._m(1),t._l(t.particulars,(function(e){return a("div",{key:e.eTransactionParticularId,staticClass:"row",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4",attrs:{id:"docStyle"}},[t._v(t._s(e.particular))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v(t._s(e.quantity))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v("₱ "+t._s(e.unitPrice))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v(t._s(e.referenceNumber))]),a("span",{staticClass:"col-sm-2",attrs:{id:"docStyle"}},[t._v("₱ "+t._s(e.amount))])])})),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Received Payment by : ")]),t._v(" "+t._s(t.eTransactionSignatory.receivedPayment)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Prepared by :")]),t._v(" "+t._s(t.eTransactionSignatory.prepared||t.user.firstname+" "+t.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Certified by : ")]),t._v(" "+t._s(t.eTransactionSignatory.certified)+" ")]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Approved by : ")]),t._v(" "+t._s(t.eTransactionSignatory.approved)+" ")])])],2),a("b-modal",{attrs:{size:"xl",id:"update-modal",title:"Edit E Transactions",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateETransaction()}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("E Wallet:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("E Wallet Account:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.eWallets,reduce:function(t){return t.eWalletId},label:"eWalletName",clearable:!1},on:{input:function(e){return t.getEWalletAccounts(t.edit.eWallet)}},model:{value:t.edit.eWallet,callback:function(e){t.$set(t.edit,"eWallet",e)},expression:"edit.eWallet"}}),t.$v.edit.eWallet.$anyDirty&&!t.$v.edit.eWallet.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),t.ewAccounts.length>0?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.ewAccounts,reduce:function(t){return t.eWalletAccountId},label:"eWalletAccountNumber",clearable:!1},model:{value:t.edit.ewAccount,callback:function(e){t.$set(t.edit,"ewAccount",e)},expression:"edit.ewAccount"}}),t.$v.edit.ewAccount.$anyDirty&&!t.$v.edit.ewAccount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1):t._e(),t.ewAccounts.length<=0?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[t._v("No Account")])]):t._e()]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Payee:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Payee Account No.:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:t.edit.payee,callback:function(e){t.$set(t.edit,"payee",e)},expression:"edit.payee"}}),t.$v.edit.payee.$anyDirty&&!t.$v.edit.payee.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.payee.$anyDirty&&!t.$v.edit.payee.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:t.edit.payeeAccount,callback:function(e){t.$set(t.edit,"payeeAccount",e)},expression:"edit.payeeAccount"}}),t.$v.edit.payeeAccount.$anyDirty&&!t.$v.edit.payeeAccount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.payeeAccount.$anyDirty&&!t.$v.edit.payeeAccount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transaction No.:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle"},model:{value:t.edit.transactionNumber,callback:function(e){t.$set(t.edit,"transactionNumber",e)},expression:"edit.transactionNumber"}}),t.$v.edit.transactionNumber.$anyDirty&&!t.$v.edit.transactionNumber.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-6"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:t.edit.transactionDate,callback:function(e){t.$set(t.edit,"transactionDate",e)},expression:"edit.transactionDate"}}),t.$v.edit.transactionDate.$anyDirty&&!t.$v.edit.transactionDate.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"add-particular-modal",title:"Add Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addParticular(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("add-particular-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Particular:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Quantity:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Particular"},model:{value:t.newParticular,callback:function(e){t.newParticular=e},expression:"newParticular"}}),t.$v.newParticular.$anyDirty&&!t.$v.newParticular.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newParticular.$anyDirty&&!t.$v.newParticular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Quantity"},on:{input:function(e){return t.computeAmount(t.newQuantity,t.newUnitPrice,"add")}},model:{value:t.newQuantity,callback:function(e){t.newQuantity=e},expression:"newQuantity"}}),t.$v.newQuantity.$anyDirty&&!t.$v.newQuantity.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newQuantity.$anyDirty&&!t.$v.newQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Unit Price:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Unit Price"},on:{input:function(e){return t.computeAmount(t.newQuantity,t.newUnitPrice,"add")}},model:{value:t.newUnitPrice,callback:function(e){t.newUnitPrice=e},expression:"newUnitPrice"}}),t.$v.newUnitPrice.$anyDirty&&!t.$v.newUnitPrice.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newUnitPrice.$anyDirty&&!t.$v.newUnitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Reference Number"},model:{value:t.newReferenceNumber,callback:function(e){t.newReferenceNumber=e},expression:"newReferenceNumber"}}),t.$v.newReferenceNumber.$anyDirty&&!t.$v.newReferenceNumber.refNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Amount",disabled:""},model:{value:t.newAmount,callback:function(e){t.newAmount=e},expression:"newAmount"}}),t.$v.newAmount.$anyDirty&&!t.$v.newAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newAmount.$anyDirty&&!t.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-particular-modal",title:"Edit Particular",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateParticular(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-particular-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Particular:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Quantity:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Particular"},model:{value:t.editP.particular,callback:function(e){t.$set(t.editP,"particular",e)},expression:"editP.particular"}}),t.$v.editP.particular.$anyDirty&&!t.$v.editP.particular.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editP.particular.$anyDirty&&!t.$v.editP.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Quantity"},on:{input:function(e){return t.computeAmount(t.editP.quantity,t.editP.unitPrice,"edit")}},model:{value:t.editP.quantity,callback:function(e){t.$set(t.editP,"quantity",e)},expression:"editP.quantity"}}),t.$v.editP.quantity.$anyDirty&&!t.$v.editP.quantity.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editP.quantity.$anyDirty&&!t.$v.editP.quantity.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Unit Price:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Unit Price"},on:{input:function(e){return t.computeAmount(t.editP.quantity,t.editP.unitPrice,"edit")}},model:{value:t.editP.unitPrice,callback:function(e){t.$set(t.editP,"unitPrice",e)},expression:"editP.unitPrice"}}),t.$v.editP.unitPrice.$anyDirty&&!t.$v.editP.unitPrice.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editP.unitPrice.$anyDirty&&!t.$v.editP.unitPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Reference Number"},model:{value:t.editP.referenceNumber,callback:function(e){t.$set(t.editP,"referenceNumber",e)},expression:"editP.referenceNumber"}}),t.$v.editP.referenceNumber.$anyDirty&&!t.$v.editP.referenceNumber.refNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Amount",disabled:""},model:{value:t.editP.amount,callback:function(e){t.$set(t.editP,"amount",e)},expression:"editP.amount"}}),t.$v.editP.amount.$anyDirty&&!t.$v.editP.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editP.amount.$anyDirty&&!t.$v.editP.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[1==t.attachmentStatus?a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addAttachments()}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add Attachment ")]):t._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("attachment-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.previewImage}}),t.uploadValue<100&&t.attachments.length>0?a("div",{staticClass:"text-center"},[a("b-spinner",{staticClass:"ml-2",attrs:{variant:"danger",type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-2",attrs:{variant:"danger",type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-2",attrs:{variant:"danger",type:"grow",label:"Spinning"}})],1):t._e(),t.attachments.length>0?a("card",{attrs:{shadow:""}},[t.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},t._l(t.attachments,(function(e){return a("span",{key:e.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[1==t.attachmentStatus?a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return t.removeAttachment(e.name)}}}):t._e()]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:e.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:e.url}})])])])])})),0):t._e()]):t._e()],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row pb-2",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4"},[a("b",[t._v("PARTICULAR")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("QTY")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("PRICE")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("REF. NO.")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("AMOUNT")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row pb-2",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-4"},[a("b",[t._v("PARTICULAR")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("QTY")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("PRICE")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("REF. NO.")])]),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("AMOUNT")])])])}],i=(a("4160"),a("b0c0"),a("b680"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("add5"),d=a.n(c),u=a("4627"),m=a("2f62"),p=a("7ff6"),h=a("c1df"),f=new Date,b=l["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),v=l["helpers"].regex("alphaNumAndDot",/^[ ,. 0-9 ]*$/),C=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),y=l["helpers"].regex("alphaNumAndDot",/^[ - 0-9 ]*$/),g=a("9f25"),w=a("e966"),_=w.bindWith(",","."),x={components:{},data:function(){return{columns:[{label:"Particular",field:"particular"},{label:"Quantity",field:"quantity"},{label:"Unit Price",field:"unitPrice"},{label:"Reference No.",field:"referenceNumber"},{label:"Amount",field:"amount"},{label:"",field:"action",width:"100px",sortable:!1}],particulars:[],etrans:[],loading:!1,user:{firstname:"",lastname:""},eWallets:[],ewAccounts:[],requestProcessing:!1,edit:{id:"",eTransId:"",eWallet:"",ewAccount:"",payee:"",payeeAccount:"",transactionNumber:"",transactionDate:""},newParticular:"",newQuantity:"",newUnitPrice:"",newReferenceNumber:"",newAmount:"",editP:{id:"",particularId:"",particular:"",quantity:"",unitPrice:"",referenceNumber:"",amount:"",oldAmount:""},breakCounts:0,attachment:"",attachmentData:null,attachments:[],etId:"",uploadValue:0,eTransactionSignatory:{receivedPayment:"",prepared:"",certified:"",approved:""}}},validations:{edit:{eWallet:{required:l["required"]},ewAccount:{required:l["required"]},payee:{required:l["required"],alphaNumCustomValidator:b},payeeAccount:{required:l["required"],alphaNumCustomValidator:b},transactionNumber:{alphaNumCustomValidator:b},transactionDate:{required:l["required"]}},newParticular:{required:l["required"],alphaNumCustomValidator:b},newQuantity:{required:l["required"],numCustomValidator:C},newUnitPrice:{required:l["required"],amountCustomValidator:v},newReferenceNumber:{refNumCustomValidator:y},newAmount:{required:l["required"],amountCustomValidator:v},editP:{particular:{required:l["required"],alphaNumCustomValidator:b},quantity:{required:l["required"],numCustomValidator:C},unitPrice:{required:l["required"],amountCustomValidator:v},referenceNumber:{refNumCustomValidator:y},amount:{required:l["required"],amountCustomValidator:v}}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getETransactions(),t.getUser(),t.getEWallets();case 3:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(m["b"])({users:"Users/users"})),methods:{getSignatory:function(){var t=this,e=o["dbMains"].collection("printSignatoryTypes").where("type","==",Object(p["a"])("E Transactions")),a="";e.get().then((function(e){if(!e.empty){e.forEach((function(t){a=t.data().printSignatoryId}));var s=o["dbMains"].collection("printSignatories").where("signatoryTypeReference","==",a).orderBy("orderNumber","asc"),n=[],i=[],r=[];s.get().then((function(e){if(!e.empty){e.forEach((function(t){n.push(t.data()),i.push(t.id)}));for(var a=0;a<n.length;a++)n[a]["rowNum"]=a+1,n[a]["id"]=i[a],r.push(n[a]);t.eTransactionSignatory={receivedPayment:r[0].name,prepared:r[1].name,certified:r[2].name,approved:r[3].name}}}))}}))},closeETransaction:function(){this.$router.push("/electronic/transaction")},getUser:function(){var t=this;t.username=localStorage.getItem("aisname");var e=o["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||(e.forEach((function(t){a.push(t.data())})),t.user.firstname=a[0].firstname,t.user.lastname=a[0].lastname)}))},getETransactions:function(){var t=this,e="",a="",s="",n="",i=o["dbUsers"].collection("eTransactions").where("eTransactionId","==",this.$router.currentRoute.params.id);t.etrans=[],t.getSignatory(),i.get().then((function(i){i.forEach((function(a){t.etrans.push(a.data()),e=a.id}));var r=o["dbMains"].collection("eWallets").where("eWalletId","==",t.etrans[0].eWalletReference),l=o["dbMains"].collection("eWalletAccounts").where("eWalletAccountId","==",t.etrans[0].eWalletAccountReference);r.get().then((function(i){i.forEach((function(t){a=t.data().eWalletName})),l.get().then((function(i){i.forEach((function(t){s=t.data().eWalletAccountName,n=t.data().eWalletAccountNumber})),t.etrans[0]["id"]=e,t.etrans[0]["eWallet"]=a,t.etrans[0]["eWalletAccountName"]=s,t.etrans[0]["eWalletAccountNumber"]=n,t.etrans[0].voucherDate=h.unix(t.etrans[0].voucherDate.seconds).format("MMMM DD, YYYY"),t.etrans[0].totalAmount=_(parseFloat(t.etrans[0].totalAmount).toFixed(2)),t.etrans=t.etrans[0]}))}))})),t.getParticulars(this.$router.currentRoute.params.id)},getParticulars:function(t){var e=this,a=[],s=o["dbUsers"].collection("eTransactionParticulars").where("eTransactionReference","==",t);e.particulars=[],e.loading=!0,s.get().then((function(t){t.forEach((function(t){e.particulars.push(t.data()),a.push(t.id)}));for(var s=0;s<e.particulars.length;s++)e.particulars[s]["id"]=a[s],e.particulars[s].amount=_(parseFloat(e.particulars[s].amount.replaceAll(",","")).toFixed(2))})),e.particulars.length<=1?e.breakCounts=11:e.particulars.length>1&&e.particulars.length<11&&(e.breakCounts=12-e.particulars.length),setTimeout((function(){e.loading=!1}),1e3)},getEWallets:function(){var t=this,e=o["dbMains"].collection("eWallets").orderBy("eWalletName","asc");t.eWallets=[],e.get().then((function(e){e.forEach((function(e){t.eWallets.push(e.data())}))}))},getEWalletAccounts:function(t){var e=this,a=o["dbMains"].collection("eWalletAccounts").where("eWalletReference","==",t);e.ewAccounts=[],a.get().then((function(t){t.forEach((function(t){e.ewAccounts.push(t.data())})),e.edit.ewAccount=e.ewAccounts[0].eWalletAccountId}))},openUpdateETransactionModal:function(t){var e=this;e.getEWalletAccounts(t.eWalletReference),e.edit.id=t.id,e.edit.eTransId=t.eTransactionId,e.edit.eWallet=t.eWalletReference,e.edit.ewAccount=t.eWalletAccountReference,e.edit.payee=t.payee,e.edit.payeeAccount=t.payeeAccountNumber,e.edit.transactionNumber=t.transactionNumber,e.edit.transactionDate=t.transactionDate,e.$bvModal.show("update-modal")},updateETransaction:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;try{o["dbUsers"].collection("eTransactions").doc(t.edit.id).update({payee:t.edit.payee,payeeAccountNumber:t.edit.payeeAccount,transactionNumber:t.edit.transactionNumber,transactionDate:t.edit.transactionDate,eWalletReference:t.edit.eWallet,eWalletAccountReference:t.edit.ewAccount}).then((function(){t.$swal({title:"Success",text:"Item updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$v.edit.$reset(),t.$bvModal.hide("update-modal"),t.getETransactions(),t.requestProcessing=!1}))}))}catch(e){console.log("error"),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}},computeAmount:function(t,e,a){e=e.replaceAll(",",""),"add"==a?(this.newAmount=e*t,this.newAmount=_(parseFloat(this.newAmount).toFixed(2))):"edit"==a&&(this.editP.amount=e*t,this.editP.amount=_(parseFloat(this.editP.amount).toFixed(2)))},addParticular:function(){var t=this;if(t.$v.newParticular.$touch(),t.$v.newQuantity.$touch(),t.$v.newUnitPrice.$touch(),t.$v.newReferenceNumber.$touch(),t.$v.newAmount.$touch(),!t.$v.newParticular.$error&&!t.$v.newQuantity.$error&&!t.$v.newUnitPrice.$error&&!t.$v.newReferenceNumber.$error&&!t.$v.newAmount.$error){t.requestProcessing=!0;try{var e=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],s="ETPI-"+f.getFullYear()+g(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());e.get().then((function(e){e.forEach((function(t){t.exists&&a.push(t.data())})),o["dbUsers"].collection("eTransactionParticulars").doc().set({eTransactionParticularId:s,particular:t.newParticular,quantity:t.newQuantity,unitPrice:t.newUnitPrice,referenceNumber:t.newReferenceNumber,amount:t.newAmount,eTransactionReference:t.$router.currentRoute.params.id,status:1,userReference:a[0].userId,dateCreated:f,dateModified:f}).then((function(){var e=parseFloat(t.newAmount.replaceAll(",",""))+parseFloat(t.etrans.totalAmount.replaceAll(",",""));o["dbUsers"].collection("eTransactions").doc(t.etrans.id).update({totalAmount:parseFloat(e).toFixed(2),dateModified:f}).then((function(){t.$swal({title:"Success",text:"New particular added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.newParticular="",t.newQuantity="",t.newUnitPrice="",t.newReferenceNumber="",t.newAmount="",t.$v.newParticular.$reset(),t.$v.newQuantity.$reset(),t.$v.newUnitPrice.$reset(),t.$v.newReferenceNumber.$reset(),t.$v.newAmount.$reset(),t.$bvModal.hide("add-particular-modal"),t.requestProcessing=!1,t.getETransactions()}))}))}))}))}catch(n){console.log(n),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}},openUpdateParticularModal:function(t){var e=this;e.editP={id:t.id,particularId:t.eTransactionParticularId,particular:t.particular,quantity:t.quantity,unitPrice:t.unitPrice,referenceNumber:t.referenceNumber,amount:t.amount,oldAmount:t.amount},e.$bvModal.show("edit-particular-modal")},updateParticular:function(){var t=this;if(t.$v.editP.$touch(),!t.$v.editP.$error){t.requestProcessing=!0;try{o["dbUsers"].collection("eTransactionParticulars").doc(t.editP.id).update({particular:t.editP.particular,quantity:t.editP.quantity,unitPrice:t.editP.unitPrice,referenceNumber:t.editP.referenceNumber,amount:t.editP.amount,dateModified:f}).then((function(){var e=parseFloat(t.etrans.totalAmount.replaceAll(",",""))-parseFloat(t.editP.oldAmount.replaceAll(",",""));e=e<=0?parseFloat(t.editP.amount.replaceAll(",","")):parseFloat(e)-parseFloat(t.editP.amount.replaceAll(",","")),o["dbUsers"].collection("eTransactions").doc(t.etrans.id).update({totalAmount:parseFloat(e).toFixed(2),dateModified:f}).then((function(){t.$swal({title:"Success",text:"Particular updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$v.editP.$reset(),t.$bvModal.hide("edit-particular-modal"),t.requestProcessing=!1,t.getETransactions()}))}))}))}catch(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}},removeParticular:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){e.requestProcessing=!0;try{o["dbUsers"].collection("eTransactionParticulars").doc(t.id).delete().then((function(){var a=parseFloat(e.etrans.totalAmount.replaceAll(",",""))-parseFloat(t.amount.replaceAll(",",""));o["dbUsers"].collection("eTransactions").doc(e.etrans.id).update({totalAmount:parseFloat(a).toFixed(2),dateModified:f}).then((function(){e.requestProcessing=!1,e.getETransactions(),e.$swal({title:"Success",text:"Particular removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}catch(s){console.log(s),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))},printETransaction:function(){this.$swal({title:"Print with duplicate?",text:"",icon:"question",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"YES",cancelButtonText:"NO"}).then((function(t){t.value?d()({printable:"duplicateView",type:"html",style:'#duplicateView {font-family: "Calibri";} #borderStyle {border-width: 1px; border-style: solid;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;}',documentTitle:"E Transaction Voucher"}):d()({printable:"viewSummary",type:"html",style:'#viewSummary {font-family: "Calibri";} #borderStyle {border-width: 1px; border-style: solid;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;}',documentTitle:"E Transaction Voucher"})}))},openAttachments:function(t){this.etId=t.eTransactionId,this.attachmentStatus=t.status,this.$bvModal.show("attachment-modal"),this.getAttachments(this.etId)},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(t){var e=this,a={maxSizeMB:1,useWebWorker:!0};e.uploadValue=0,e.attachment=null,e.attachments=[],e.attachmentData=t.target.files[0],Object(u["a"])(e.attachmentData,a).then((function(t){e.attachmentData=t,e.onUpload(e.attachmentData)}))},onUpload:function(t){var e=this,a=o["storageMains"].ref("eTransactions/"+e.etId+"/"+t.name).put(t);e.requestProcessing=!1;try{e.attachment=null,e.requestProcessing=!0,a.on("state_changed",(function(t){e.uploadValue=t.bytesTransferred/t.totalBytes*100}),(function(t){console.log(t.message)}),(function(){e.uploadValue=100,e.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1,e.getAttachments(e.rdId)}))}catch(s){console.log("error"),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}},getAttachments:function(t){var e=this,a=0,s=o["storageMains"].ref("eTransactions/"+t);e.requestProcessing=!1,e.attachments=[],e.uploadValue=0,s.listAll().then((function(s){s.items.forEach((function(s){o["storageMains"].ref("eTransactions/"+t+"/"+s.name).getDownloadURL().then((function(t){a+=1,e.attachments.push({rowNum:a,name:s.name,url:t,path:s.fullPath,status:1}),e.uploadValue=100}))}))})).catch((function(t){console.log(t)}))},removeAttachment:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var s=o["storageMains"].ref("eTransactions/"+e.etId+"/"+t);try{s.delete().then((function(){e.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getAttachments(e.etId)}))}))}catch(n){e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}}))}}},k=x,D=(a("ed2e"),a("2877")),$=Object(D["a"])(k,s,n,!1,null,null,null);e["default"]=$.exports},"37c0":function(t,e,a){"use strict";a("9968")},3897:function(t,e,a){},"3bcf":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"acct-equation-table",attrs:{columns:t.columns,rows:t.accountEquations,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["accountEquation"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.accountEquation))])]):t._e(),"code"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.code))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateAccountEquationModal(e.row)}}})]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.accountEquations.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getAccountEquations()}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-accounting-equation-modal",modifiers:{"new-accounting-equation-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Accounting Equation")])],1)]),a("b-modal",{attrs:{size:"lg",id:"new-accounting-equation-modal",title:"New Accounting Equation",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addAccountingEquation(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-accounting-equation-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Accounting Equation:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Code:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Accounting Equation"},model:{value:t.newEquation,callback:function(e){t.newEquation=e},expression:"newEquation"}}),t.$v.newEquation.$anyDirty&&!t.$v.newEquation.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newEquation.$anyDirty&&!t.$v.newEquation.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Code"},model:{value:t.newCode,callback:function(e){t.newCode=e},expression:"newCode"}}),t.$v.newCode.$anyDirty&&!t.$v.newCode.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newCode.$anyDirty&&!t.$v.newCode.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-account-equation-modal",title:"Edit Chart of Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateAccountEquation(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-account-equation-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Accounting Equation:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Code:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Accounting Equation"},model:{value:t.edit.equation,callback:function(e){t.$set(t.edit,"equation",e)},expression:"edit.equation"}}),t.$v.edit.$anyDirty&&!t.$v.edit.equation.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.equation.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Code"},model:{value:t.edit.code,callback:function(e){t.$set(t.edit,"code",e)},expression:"edit.code"}}),t.$v.edit.$anyDirty&&!t.$v.edit.code.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.code.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("fb6a"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./,]*$/),m=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),p=new Date,h=a("9f25"),f={components:{},data:function(){return{columns:[{label:"Account Equation",field:"accountEquation"},{label:"Code",field:"code"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,accountEquations:[],requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newEquation:"",newCode:"",edit:{id:"",equationId:"",equation:"",code:""}}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getAccountEquations();case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(d["b"])({users:"Users/users"})),validations:{newEquation:{required:l["required"],alphaNumCustomValidator:u},newCode:{required:l["required"],numCustomValidator:m},edit:{equation:{required:l["required"],alphaNumCustomValidator:u},code:{required:l["required"],numCustomValidator:m}}},methods:{addAccountingEquation:function(){var t=this;if(t.$v.newEquation.$touch(),t.$v.newCode.$touch(),!t.$v.newEquation.$error&&!t.$v.newCode.$error){t.requestProcessing=!0;var e=o["dbMains"].collection("accountEquations").where("accountEquation","==",Object(c["a"])(t.newEquation));e.get().then((function(e){if(e.empty){if(e){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="AEI-"+p.getFullYear()+h(p.getMonth()+1,2)+p.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{o["dbMains"].collection("accountEquations").doc().set({accountEquationId:n,accountEquation:Object(c["a"])(t.newEquation),code:t.newCode,userReference:s[0].userId,status:1,dateCreated:p,dateModified:p}).then((function(){t.newEquation="",t.newCode="",t.requestProcessing=!1,t.$v.newEquation.$reset(),t.$v.newCode.$reset(),t.getAccountEquations(),t.$bvModal.hide("new-accounting-equation-modal"),t.$swal({title:"Success",text:"New account equation added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Account equation already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},getAccountEquations:function(){var t=this,e=null,a=[],s=[];t.loading=!0,t.accountEquations=[],"all"!=t.limit?e=o["dbMains"].collection("accountEquations").orderBy("accountEquation","asc").limit(t.limit):"all"==t.limit&&(e=o["dbMains"].collection("accountEquations").orderBy("accountEquation","asc")),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)}));for(var n=0;n<a.length;n++)a[n]["id"]=s[n],t.accountEquations.push(a[n])}setTimeout((function(){t.loading=!1}),1e3)})),t.$store.dispatch("ChartOfAccounts/getAccountingEquations")},openUpdateAccountEquationModal:function(t){this.edit={id:t.id,equationId:t.accountEquationId,equation:t.accountEquation,code:t.code},this.$bvModal.show("edit-account-equation-modal")},updateAccountEquation:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;var e=o["dbMains"].collection("accountEquations").where("accountEquation","==",Object(c["a"])(t.edit.equation)).where("accountEquationId","!=",t.edit.equationId);e.get().then((function(e){if(e.empty){if(e)try{o["dbMains"].collection("accountEquations").doc(t.edit.id).update({accountEquation:Object(c["a"])(t.edit.equation),code:t.edit.code,dateModified:p}).then((function(){var e=o["dbMains"].collection("chartOfAccounts").where("accountEquationReference","==",t.edit.equationId),a=[],s=[];e.get().then((function(e){e.forEach((function(t){a.push(t.id),s.push(t.data())}));for(var n=0;n<s.length;n++)o["dbMains"].collection("chartOfAccounts").doc(a[n]).update({code:t.edit.code+""+s[n].code.slice(1),dateModified:p})})),t.$v.edit.$reset(),t.$bvModal.hide("edit-account-equation-modal"),t.requestProcessing=!1,t.$refs["acct-equation-table"].reset(),t.getAccountEquations(),t.$swal({title:"Success",text:"Account equation updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Accounting equation already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}}},b=f,v=(a("cdad"),a("2877")),C=Object(v["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports},"3daa":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"navbar-top",attrs:{id:"redBg"}},[a("div",{staticClass:"row mr-0"},[a("span",{staticClass:"col-sm-6 pt-2"},[a("img",{staticClass:"pr-1 pb-0 ml-3 pl-2 mt-0",attrs:{src:"img/icons/AVASIA-NEW-LOGO_B.png",alt:"Avasia",width:"140px",height:"40px"}})]),a("span",{staticClass:"col-sm-4"}),a("span",{staticClass:"col-sm-1 pt-3 pb-3 align-items-center"},[a("h3",[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/user/profile",id:"goldTxt"}},[t._v(" PROFILE ")])],1)]),a("span",{staticClass:"col-sm-1 pt-3 pb-3 pl-1 align-items-center"},[a("h3",[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/login",id:"goldTxt"},nativeOn:{click:function(e){return t.logout(e)}}},[t._v(" LOGOUT ")])],1)])])]),a("div",{staticClass:"container-fluid mt-2 pb-2 mb-5"},[a("transition",{attrs:{name:"slideUp"}},[t.show?a("div",{staticClass:"row text-center",staticStyle:{"animation-duration":"1.0s"}},[a("div",{staticClass:"col-sm-12 text-center pt-5"},[a("h2",[t._v("INTERNAL BUSINESS PROCESS")])])]):t._e()]),a("div",{staticClass:"row text-center pt-6"},[a("transition",{attrs:{name:"slideUp"}},[t.show?a("div",{staticClass:"col-sm-4 mb-2",staticStyle:{"animation-duration":"1.0s"},attrs:{id:"popover-accounting-finance"}},[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/accounting/finance/dashboard"}},[a("stats-card",{staticClass:"ml-2 mr-2 pt-4",attrs:{title:"",type:"red","sub-title":"Accounting & Finance",icon:"fas fa-calculator",id:"redInlineBtn"}})],1)],1):t._e()]),a("b-popover",{attrs:{target:"popover-accounting-finance",triggers:"hover",placement:"top"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Accounting & Finance")]},proxy:!0}])},[t._v(" Banking, Vouchers, Expenses & Disbursements. ")]),a("transition",{attrs:{name:"slideUp"}},[t.show?a("div",{staticClass:"col-xl-4 col-lg-4 mb-2",staticStyle:{"animation-duration":"1.0s"},attrs:{id:"popover-technical-services"}},[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/technical/dashboard"}},[a("stats-card",{staticClass:"ml-2 mr-2 pt-4",attrs:{title:"",type:"red","sub-title":"Technical Services",icon:"fas fa-th-list",id:"redInlineBtn"}})],1)],1):t._e()]),a("b-popover",{attrs:{target:"popover-technical-services",triggers:"hover",placement:"top"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Technical Services")]},proxy:!0}])},[t._v(" Billing Statement & Official Receipts. ")]),t._v(" "),a("transition",{attrs:{name:"slideUp"}},[t.show?a("div",{staticClass:"col-xl-4 col-lg-4 mb-2",staticStyle:{"animation-duration":"1.0s"},attrs:{id:"popover-user-account"}},[a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/user/profile/"}},[a("stats-card",{staticClass:"ml-2 mr-2 pt-4",attrs:{title:"",type:"red","sub-title":"User Account",icon:"fas fa-address-book",id:"redInlineBtn"}})],1)],1):t._e()]),a("b-popover",{attrs:{target:"popover-user-account",triggers:"hover",placement:"top"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("User Accounts")]},proxy:!0}])},[t._v(" User accounts, profile & settings. ")])],1)],1),t.$route.meta.hideFooter?t._e():a("content-footer",{staticClass:"fixed-bottom"})],1)},n=[],i=(a("4160"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("0a0f"),l=a("986d"),c=new l["IdleSessionTimeout"](3e5),d={components:{ContentFooter:o["a"]},data:function(){return{username:"",userRole:"",accountName:"",bgImage:["img/theme/mainImageI.jpg"],imageUrl:"",show:!1}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.changeImage(),c.onTimeOut=function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),t.$router.push("/login"),c.dispose(),self.$bvToast.hide()},c.start(),t.show=!0;case 5:case"end":return e.stop()}}),e)})))()},computed:{buildImageUrl:function(){return"min-height: 550px; background-image: url("+this.imageUrl+"); background-size: cover; background-position: center top;"}},methods:{logout:function(){localStorage.removeItem("aistoken"),localStorage.removeItem("aisname"),this.$router.push("/login"),this.$bvToast.hide()},getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname");var e=r["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())})),t.accountName=a[0].firstname;var s=r["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},changeImage:function(){var t=Math.floor(Math.random()*this.bgImage.length);this.imageUrl=this.bgImage[t].toString()}}},u=d,m=(a("4be0"),a("2877")),p=Object(m["a"])(u,s,n,!1,null,null,null);e["default"]=p.exports},"3e99":function(t,e,a){},"411c":function(t,e,a){},4385:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"header pb-8 pt-3 pt-lg-6 d-flex align-items-center",style:t.buildImageUrl},[a("span",{staticClass:"mask opacity-7",attrs:{id:"mainBg"}}),a("div",{staticClass:"container-fluid d-flex align-items-center"},[a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-md-12 pt-2"},[a("p",{staticClass:"text-white pt-2",staticStyle:{"font-size":"18px"}},[a("b",[t._v("All the time saving tools you need to grow to your business")])]),a("br"),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"font-size":"18px"}},[a("b",[t._v("Bank Synchronization")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"text-indent":"50px","font-size":"18px"}},[a("b",[t._v("Get your bank statement synched with your bank automatically, or import files.")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"font-size":"18px"}},[a("b",[t._v("Invoicing")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"text-indent":"50px","font-size":"18px"}},[a("b",[t._v("Create sharp and professional invoices, manage recurring billings and easily track payments.")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"font-size":"18px"}},[a("b",[t._v("Manage Bills and Expenses")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"text-indent":"50px","font-size":"18px"}},[a("b",[t._v("Control supplier invoices and get a clear forecast of your future bills to pay.")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"font-size":"18px"}},[a("b",[t._v("Clear dynamic statements")])]),a("p",{staticClass:"text-white pt-0 mb-0",staticStyle:{"text-indent":"50px","font-size":"18px"}},[a("b",[t._v("Easily create you earning report, balance sheet or cash flow statements.")])])])])])]),t._m(0)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid mt--7 pb-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-4 order-xl-2 mb-5 mb-xl-0"}),a("div",{staticClass:"col-xl-8 order-xl-1"})])])}],i=(a("4160"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o={data:function(){return{username:"",userRole:"",accountName:"",bgImage:["img/theme/mainImageI.jpg"],imageUrl:""}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.changeImage();case 2:case"end":return e.stop()}}),e)})))()},computed:{buildImageUrl:function(){return"min-height: 550px; background-image: url("+this.imageUrl+"); background-size: cover; background-position: center top;"}},methods:{getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname");var e=r["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())})),t.accountName=a[0].firstname;var s=r["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},changeImage:function(){var t=Math.floor(Math.random()*this.bgImage.length);this.imageUrl=this.bgImage[t].toString()}}},l=o,c=(a("f927"),a("2877")),d=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"46e7":function(t,e,a){"use strict";a("46f1")},"46f1":function(t,e,a){},"488c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"signatory-type-table",attrs:{columns:t.columns,rows:t.signatoryTypes,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["type"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.type))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"action"==e.column.field?a("span",[a("router-link",{staticClass:"pointer ml-2 fa fa-print",attrs:{to:"/view/print/signatory/"+e.row.printSignatoryId,id:"sideBarTxt",title:"View Signatory"}})],1):t._e()])]}}])})],1),a("hr"),!t.loading&&t.signatoryTypes.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getSignatoryType(1,"")}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr")]),a("b-modal",{attrs:{size:"md",id:"new-signatory-type-modal",title:"New Signatory Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addSignatoryType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-signatory-type-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Signatory Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Signatory Type"},model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}}),t.$v.newType.$anyDirty&&!t.$v.newType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-signatory-type-modal",title:"Edit Signatory Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateSignatoryType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-signatory-type-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Signatory Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Signatory Type"},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}}),t.$v.edit.type.$anyDirty&&!t.$v.edit.type.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("7ff6"),d=a("2f62"),u=new Date,m={components:{},data:function(){return{columns:[{label:"Signatory Type",field:"type"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,loadError:!1,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newType:"",edit:{id:"",printSignatoryTypeId:"",type:""}}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole||"Manager"==s[0].userRole?a("/main/home"):"Administrator"==s[0].userRole&&a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getSignatoryTypes();case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(d["b"])({users:"Users/users",validationMessage:"PrintSignatory/validationMessage",errorMessage:"PrintSignatory/errorMessage",signatoryTypes:"PrintSignatory/signatoryTypes"})),validations:{newType:{required:l["required"]},edit:{type:{required:l["required"]}}},methods:{addSignatoryType:function(){var t=this;t.requestProcessing=!1,t.$v.newType.$touch(),t.$v.newType.$error||(t.requestProcessing=!0,t.$store.dispatch("PrintSignatory/checkSignatoryType",{newType:t.newType}).then((function(){setTimeout((function(){if(1==t.validationMessage)t.signatoryTypeInvalidMessage(),t.requestProcessing=!1;else if(0==t.validationMessage){var e={printSignatoryId:"",type:Object(c["a"])(t.newType),createdBy:"",userReference:"",status:1,dateCreated:u,dateModified:u};t.$store.dispatch("PrintSignatory/saveSignatoryType",e).then((function(){t.requestProcessing=!1,0==t.errorMessage?(t.newType="",t.$v.newType.$reset(),t.$bvModal.hide("new-signatory-type-modal"),t.$swal({title:"Success",text:"New print signatory type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.getSignatoryTypes()}))):1==t.errorMessage&&t.signatoryTypeErrorMessage()}))}}),1e3)})))},signatoryTypeInvalidMessage:function(){var t=this;t.$swal({title:"Invalid",text:"Print signatory type already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),t.requestProcessing=!1},signatoryTypeErrorMessage:function(){var t=this;t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},getSignatoryTypes:function(){var t=this;t.loading=!0,t.loadError=!1,t.$store.dispatch("PrintSignatory/getSignatoryTypes",{limit:t.limit}),setTimeout((function(){t.loading=!1}),1e3)},openUpdateSignatoryType:function(t){this.edit={id:t.id,printSignatoryTypeId:t.printSignatoryId,type:t.type},this.$bvModal.show("update-signatory-type-modal")},updateSignatoryType:function(){var t=this;t.requestProcessing=!0,t.$v.edit.type.$touch(),t.$v.edit.type.$error||t.$store.dispatch("PrintSignatory/checkUpdateSignatoryType",t.edit).then((function(){setTimeout((function(){1==t.validationMessage?t.signatoryTypeInvalidMessage():0==t.validationMessage&&(t.edit.type=Object(c["a"])(t.edit.type),t.$store.dispatch("PrintSignatory/updateSignatoryType",t.edit).then((function(){t.requestProcessing=!1,0==t.errorMessage?(t.edit={},t.$v.edit.type.$reset(),t.$bvModal.hide("update-signatory-type-modal"),t.requestProcessing=!1,t.$refs["signatory-type-table"].reset(),t.getSignatoryTypes(),t.$swal({title:"Success",text:"Signatory type updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==t.errorMessage&&t.signatoryTypeErrorMessage()})))}),1e3)}))}}},p=m,h=(a("7c82"),a("2877")),f=Object(h["a"])(p,s,n,!1,null,null,null);e["default"]=f.exports},"4be0":function(t,e,a){"use strict";a("d3b4")},"50a4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"},[a("card",{staticClass:"mt-5"},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[t._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},["Administrator"==t.userRole?a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.reloadData()}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e(),"Administrator"!=t.userRole?a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.userFilters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.reloadData()}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e()],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==t.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:t.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(e){return t.reloadData()}},model:{value:t.dateCreated,callback:function(e){t.dateCreated=e},expression:"dateCreated"}}):t._e(),"name"==t.filter&&"Administrator"==t.userRole?a("v-select",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{id:"inputStyle",options:t.names,reduce:function(t){return t.userId},label:"fullName",clearable:!1},on:{input:function(e){return t.reloadData()}},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}}):t._e()],1)]),a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-sm-4"},[a("card-widget",{attrs:{icon:"fa fa-square",title:"Current",subTitle:t.currentPettyAmount,footerText:t.currentPettyCount}})],1),a("div",{staticClass:"col-sm-4"},[a("card-widget",{attrs:{icon:"fa fa-check-square",title:"Checked",subTitle:t.checkedPettyAmount,footerText:t.checkedPettyCount}})],1),a("div",{staticClass:"col-sm-4"},[a("card-widget",{attrs:{icon:"fa fa-circle",title:"Processed",subTitle:t.processedPettyAmount,footerText:t.processedPettyCount}})],1)])])],1),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--8"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Petty Cash"}},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},["Current"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPettyCash(1,"Current")}}},[t._v("Current")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Checked"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPettyCash(1,"Checked")}}},[t._v("Checked")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Processed"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPettyCash(1,"Processed")}}},[t._v("Processed")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getPaginatedPettyCash(1,"All")}}},[t._v("All")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.pettyCash,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["pettyCashNumber"==e.column.field?a("span",[a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/petty/cash/"+e.row.pettyCashId,id:"sideBarTxt",title:"View Petty Cash"}},[t._v(t._s(e.row.pettyCashNumber)+" ")])],1)]):t._e(),"department"==e.column.field?a("span",t._l(t.departments,(function(s){return a("span",{key:s.departmentUid},[s.departmentUid==e.row.departmentReference?a("span",[t._v(t._s(s.departmentName))]):t._e()])})),0):t._e(),"name"==e.column.field?a("span",t._l(t.names,(function(s){return a("span",{key:s.userId},[s.userId==e.row.nameToReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),0):t._e(),"amountReceive"==e.column.field?a("span",[a("span",{staticClass:"tableSpan"},[t._v("₱ "+t._s(e.row.amountReceive))])]):t._e(),"pettyCashDate"==e.column.field?a("span",[a("span",{staticClass:"tableSpan"},[t._v(t._s(t._f("moment")(e.row.pettyCashDate,"MMM DD, YYYY")))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"status"==e.column.field?a("span",[1==e.row.status?a("span",{attrs:{id:"redTxt"}},[t._v("CURRENT")]):t._e(),2==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("CHECKED")]):t._e(),3==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("PROCESSED")]):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),t.pettyCash.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getPaginatedPettyCash(1,"",t.listType)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e()])],1),"Administrator"==t.userRole?a("tab-pane",{attrs:{title:"New Petty Cash"}},[a("new-petty-cash")],1):t._e()],1)],1)])],1)},n=[],i=(a("99af"),a("4de4"),a("4160"),a("b680"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("2f62"),c=["#","Petty Cash No.","Department","Name","Amount","Date","Status"],d=a("c1df"),u=a("e966"),m=u.bindWith(",","."),p={components:{},data:function(){return{columns:[{label:"Petty Cash No",field:"pettyCashNumber"},{label:"Department",field:"department"},{label:"Name",field:"name"},{label:"Amount",field:"amountReceive"},{label:"Date",field:"pettyCashDate"},{label:"Created by",field:"userReference"},{label:"Status",field:"status"}],loading:!0,loadError:!1,pettyTable:{title:"Petty Cash Table",subTitle:"",columns:[].concat(c)},pettyCashCount:0,pettyCash:[],names:[],departments:[],currentPage:1,searching:!1,userRole:"",requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"},{filterId:"name",filter:"Name"}],userFilters:[{filterId:"month",filter:"Month"}],filter:"month",filterName:"",dateCreated:d().format("YYYY-MM"),maxDate:d().format("YYYY-MM"),listType:"",pageNum:1,currentMonth:d().format("MMMM"),currentPettyCount:0,currentPettyAmount:"₱ 0.00",checkedPettyCount:0,checkedPettyAmount:"₱ 0.00",processedPettyCount:0,processedPettyAmount:"₱ 0.00"}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.getDepartments(),t.getNames(),t.getPaginatedPettyCash(1,"Current");case 4:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(l["b"])({users:"Users/users"})),methods:{getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname"),t.accountName=t.username.toUpperCase();var e=o["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())}));var s=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole,t.getPettyData(t.userRole))}))}))},getDepartments:function(){var t=this,e=o["dbUsers"].collection("departments");t.departments=[],e.get().then((function(e){e.empty||e.forEach((function(e){t.departments.push(e.data())}))}))},getNames:function(){var t=this,e=o["dbUsers"].collection("users").where("status","==",1),a=[];e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data())}));for(var s=0;s<a.length;s++)a[s]["fullName"]=a[s].firstname+" "+a[s].lastname,t.names.push(a[s]);t.filterName=t.names[0].userId}}))},getPaginatedPettyCash:function(t,e){var a=this,s=null,n=[],i=[],r=d(a.dateCreated).startOf("month").format("YYYY-MM-DD"),l=d(a.dateCreated).endOf("month").format("YYYY-MM-DD");a.loading=!0,a.loadError=!1,a.pettyCash=[],a.listType=e,a.pageNum=t;var c=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),u=[],p="";c.get().then((function(c){c.forEach((function(t){u.push(t.data()),p=t.data().userId}));var d=o["dbUsers"].collection("userRoles").where("userRoleId","==",u[0].userRoleReference),h="";d.get().then((function(c){c.forEach((function(t){h=t.data().userRole})),"Administrator"==h?("Current"==e?"all"!=a.limit?"month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",1).orderBy("pettyCashDate","desc").limit(a.limit):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameToReference","==",a.filterName).where("status","==",1).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",1).orderBy("pettyCashDate","desc"):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameToReference","==",a.filterName).where("status","==",1).orderBy("pettyCashDate","desc"))):"Checked"==e?"all"!=a.limit?"month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",2).orderBy("pettyCashDate","desc").limit(a.limit):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameReference","==",a.filterName).where("status","==",2).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",2).orderBy("pettyCashDate","desc"):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameToReference","==",a.filterName).where("status","==",2).orderBy("pettyCashDate","desc"))):"Processed"==e?"all"!=a.limit?"month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",3).orderBy("pettyCashDate","desc").limit(a.limit):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameReference","==",a.filterName).where("status","==",3).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",3).orderBy("pettyCashDate","desc"):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameToReference","==",a.filterName).where("status","==",3).orderBy("pettyCashDate","desc"))):"All"==e&&("all"!=a.limit?"month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).orderBy("pettyCashDate","desc").limit(a.limit):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameToReference","==",a.filterName).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&("month"==a.filter?s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).orderBy("pettyCashDate","desc"):"name"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("nameToReference","==",a.filterName).orderBy("pettyCashDate","desc")))),s.get().then((function(e){if(!e.empty){e.forEach((function(t){i.push(t.data()),n.push(t.id)}));for(var s=0;s<i.length;s++)i[s]["rowNum"]=1+s,i[s]["id"]=n[s],i[s].amountReceive=m(parseFloat(i[s].amountReceive.replaceAll(",","")).toFixed(2)),a.pettyCash.push(i[s]);a.pettyCashCount=i.length,a.currentPage=t}setTimeout((function(){a.loading=!1}),1e3)}))):"Administrator"!=h&&("Current"==e?"all"!=a.limit?"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",1).where("nameToReference","==",p).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",1).where("nameToReference","==",p).orderBy("pettyCashDate","desc")):"Checked"==e?"all"!=a.limit?"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",2).where("nameToReference","==",p).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",2).where("nameToReference","==",p).orderBy("pettyCashDate","desc")):"Processed"==e?"all"!=a.limit?"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",3).where("nameToReference","==",p).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("status","==",3).where("nameToReference","==",p).orderBy("pettyCashDate","desc")):"All"==e&&("all"!=a.limit?"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("nameToReference","==",p).orderBy("pettyCashDate","desc").limit(a.limit)):"all"==a.limit&&"month"==a.filter&&(s=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",r).where("pettyCashDate","<=",l).where("nameToReference","==",p).orderBy("pettyCashDate","desc"))),s.get().then((function(e){if(!e.empty){e.forEach((function(t){i.push(t.data()),n.push(t.id)}));for(var s=0;s<i.length;s++)i[s]["rowNum"]=1+s,i[s]["id"]=n[s],i[s].amountReceive=m(parseFloat(i[s].amountReceive.replaceAll(",","")).toFixed(2)),a.pettyCash.push(i[s]);a.pettyCashCount=i.length,a.currentPage=t}setTimeout((function(){a.loading=!1}),1e3)})))}))}))},onPageChange:function(t){this.getPaginatedPettyCash(t,this.listType)},resetData:function(){this.getPaginatedPettyCash(1,this.listType)},reloadData:function(){this.getPaginatedPettyCash(1,this.listType),this.getPettyData(this.userRole)},getPettyData:function(t){var e=this,a=d(e.dateCreated).startOf("month").format("YYYY-MM-DD"),s=d(e.dateCreated).endOf("month").format("YYYY-MM-DD"),n=[],i=null;if("Administrator"==t)i=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",a).where("pettyCashDate","<=",s).where("status","in",[1,2,3]).orderBy("pettyCashDate","desc"),i.get().then((function(t){t.forEach((function(t){n.push(t.data())}));var a=0,s=0,i=0;e.currentPettyCount=0,e.checkedPettyCount=0,e.processedPettyCount=0;for(var r=0;r<n.length;r++)1==n[r].status?(a=parseFloat(a)+parseFloat(n[r].amountReceive.replaceAll(",","")),e.currentPettyCount+=1):2==n[r].status?(s=parseFloat(s)+parseFloat(n[r].amountReceive.replaceAll(",","")),e.checkedPettyCount+=1):3==n[r].status&&(i=parseFloat(i)+parseFloat(n[r].amountReceive.replaceAll(",","")),e.processedPettyCount+=1);e.currentPettyAmount="₱ "+m(a.toFixed(2)),e.checkedPettyAmount="₱ "+m(s.toFixed(2)),e.processedPettyAmount="₱ "+m(i.toFixed(2))}));else if("Administrator"!=t){var r=o["dbUsers"].collection("users").where("username","==",e.username),l="";r.get().then((function(t){t.forEach((function(t){l=t.data().userId})),i=o["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",a).where("pettyCashDate","<=",s).where("nameToReference","==",l).where("status","in",[1,2,3]).orderBy("pettyCashDate","desc"),i.get().then((function(t){t.forEach((function(t){n.push(t.data())}));var a=0,s=0,i=0;e.currentPettyCount=0,e.checkedPettyCount=0,e.processedPettyCount=0;for(var r=0;r<n.length;r++)1==n[r].status?(a=parseFloat(a)+parseFloat(n[r].amountReceive.replaceAll(",","")),e.currentPettyCount+=1):2==n[r].status?(s=parseFloat(s)+parseFloat(n[r].amountReceive.replaceAll(",","")),e.checkedPettyCount+=1):3==n[r].status&&(i=parseFloat(i)+parseFloat(n[r].amountReceive.replaceAll(",","")),e.processedPettyCount+=1);e.currentPettyAmount="₱ "+m(a.toFixed(2)),e.checkedPettyAmount="₱ "+m(s.toFixed(2)),e.processedPettyAmount="₱ "+m(i.toFixed(2))}))}))}}}},h=p,f=(a("c858"),a("2877")),b=Object(f["a"])(h,s,n,!1,null,null,null);e["default"]=b.exports},"50cb":function(t,e,a){},5109:function(t,e,a){"use strict";a("586e")},"586e":function(t,e,a){},5876:function(t,e,a){},"58e0":function(t,e,a){"use strict";a("3e99")},"5a04":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{staticClass:"container-fluid mt--7 ml-0 mr-0",staticStyle:{"padding-right":"0px !important","padding-left":"0px !important"}},[a("card",{staticClass:"ml-0 mr-0",attrs:{"header-classes":"bg-transparent"}},[a("div",{staticClass:"row mb-0 pb-2"},[a("span",{staticClass:"col-sm-6 pl-2 mt-1"},[a("date-picker",{staticStyle:{width:"230px"},attrs:{type:t.dateType,id:"inputStyle",range:t.dateRange,format:t.dateFormat},on:{input:function(e){return t.getChartData()}},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}})],1),a("span",{staticClass:"col-sm-2"}),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("day")}}},[a("b",[t._v("Day")]),"day"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()]),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("week")}}},[a("b",[t._v("Week")]),"week"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()]),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("month")}}},[a("b",[t._v("Month")]),"month"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()]),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("year")}}},[a("b",[t._v("Year")]),"year"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()])]),a("hr",{staticClass:"pt-0 mt-1"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-5 pb-2"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundB"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",{staticClass:"text-center"},[t._v("Total Uncollected Amount")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 text-center",staticStyle:{margin:"auto"}},[a("h1",[t._v("₱ "+t._s(t.totalUncollectedAmount))])])])]),a("br"),a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundB"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",{staticClass:"text-center"},[t._v("Total Collected Amount")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 text-center",staticStyle:{margin:"auto"}},[a("h1",[t._v("₱ "+t._s(t.totalCollectedAmount))])])])])],1),a("div",{staticClass:"col-sm-7 text-center"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundC"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",{staticClass:"text-center"},[t._v("A/R Distribution per Client")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-5 text-center",staticStyle:{margin:"auto"}},[a("doughnut-chart",{attrs:{height:150,"chart-data":t.clientARChart.chartData,"extra-options":t.clientARChart.extraOptions}})],1),a("div",{staticClass:"col-sm-7 text-left",staticStyle:{margin:"auto"}},t._l(t.companyLabels,(function(e){return a("span",{key:e.company},[0!=e.amount?a("span",[a("base-button",{staticClass:"pt-1 pb-1 mr-2",staticStyle:{"border-width":"0px"},style:"background-color:"+e.color}),a("span",[t._v(t._s(e.company))])],1):t._e(),a("br")])})),0)])])],1)]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("card",{staticClass:"mt-2 mb-0",attrs:{id:"cardBackgroundA"}},[a("div",{staticClass:"row mb-1 pb-1 pl-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",[t._v("OLDEST OVERDUE")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 pl-1 pr-1",staticStyle:{margin:"auto"}},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:!1,title:"","sub-title":"",data:t.oldestOverdues,columns:t.oldestOverdueTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.bsNumber))]),a("td",[t._v(t._s(s.company))]),a("td",{staticClass:"text-right"},[t._v(t._s(s.days)+" Day/s")])]}}])})],1),a("div",{staticClass:"col-sm-9"}),a("div",{staticClass:"col-sm-3 pt-3"},[a("pagination",{attrs:{totalPages:t.bills.length,dividePageNum:5,currentPage:t.oldestCurrentPage},on:{pagechanged:t.onOldestPageChange}})],1)])])],1),a("div",{staticClass:"col-sm-6"},[a("card",{staticClass:"mt-2 mb-0",attrs:{id:"cardBackgroundA"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",[t._v("LARGEST OVERDUE")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 pl-1 pr-1",staticStyle:{margin:"auto"}},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:!1,title:"","sub-title":"",data:t.largestOverdues,columns:t.largestOverdueTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.company))]),a("td",{staticClass:"text-right"},[t._v("₱ "+t._s(s.amount))])]}}])})],1),a("div",{staticClass:"col-sm-9"}),a("div",{staticClass:"col-sm-3 pt-3"},[a("pagination",{attrs:{totalPages:t.largest.length,dividePageNum:5,currentPage:t.largestCurrentPage},on:{pagechanged:t.onLargestPageChange}})],1)])])],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("card",{staticClass:"mt-4 mb-0",attrs:{id:"cardBackgroundB"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",[t._v("Communications Made")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 pl-1 pr-1",staticStyle:{margin:"auto"}},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:!1,title:"","sub-title":"",data:t.communications,columns:t.communicationTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.bsNumber))]),a("td",[t._v(t._s(s.company))]),a("td",{staticClass:"text-center"},[t._v(t._s(s.days)+" Day/s")]),a("td",[t._v("₱ "+t._s(s.amount))]),a("td",[t._v(t._s(s.status))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("moment")(s.latest,"MMMM DD, YYYY")))])]}}])})],1),a("div",{staticClass:"col-sm-10"}),a("div",{staticClass:"col-sm-2 pt-3 pl-5"},[a("pagination",{attrs:{totalPages:t.bills.length,dividePageNum:5,currentPage:t.comCurrentPage},on:{pagechanged:t.onComPageChange}})],1)])])],1)])])])])],1)],1)},n=[],i=(a("99af"),a("4de4"),a("4160"),a("b680"),a("159b"),a("56d7")),r=a("93b4"),o=a("ec45"),l=a("33f9"),c=(a("411c"),a("c1df")),d=a("e966"),u=d.bindWith(",","."),m=["BS No.","Company","Days"],p=["Company","Overall Amount"],h=["BS No.","Company","Days Overdue","Amount","Status","Latest Follow-Up Date"],f={components:{DatePicker:o["a"],DoughnutChart:l["a"]},data:function(){return{selectDate:c().format("MMMM YYYY"),filters:[{filterId:"month",filter:"Month"}],filter:"month",dateFilter:new Date,dateType:"",dateFormat:"",maxDate:c().format("YYYY-MM"),unpaid:0,paid:0,dateToday:c().format("YYYY-MM-DD"),dateRange:!1,totalUncollectedAmount:0,totalCollectedAmount:0,clientARChart:{chartData:{datasets:[],labels:[]},extraOptions:r["a"]},companyLabels:[],loading:!0,oldestOverdueTable:{title:"Oldest Overdue",subTitle:"",columns:[].concat(m)},oldestOverdues:[],largestOverdueTable:{title:"Largest Overdue",subTitle:"",columns:[].concat(p)},largestOverdues:[],communicationTable:{title:"Communications Made",subTitle:"",columns:[].concat(h)},communications:[],bills:[],oldestCurrentPage:1,comCurrentPage:1,largestCurrentPage:1,largest:[]}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=i["dbUsers"].collection("users").where("username","==",s),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){r.push(t.data())}));var e=i["dbUsers"].collection("userRoles").where("userRoleId","==",r[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/technical/main/page"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},methods:{changeFilter:function(t){var e=this;e.filter=t,"day"==t?(e.dateType="date",e.dateFormat="MMMM DD, YYYY",e.dateRange=!1,e.dateFilter=new Date):"week"==t?(e.dateType="date",e.dateFormat="MMM DD, YYYY",e.dateRange=!0,e.dateFilter=[new Date,new Date(c().add("6","days"))]):"month"==t?(e.dateType="month",e.dateFormat="MMMM YYYY",e.dateRange=!1,e.dateFilter=new Date):"year"==t&&(e.dateType="year",e.dateFormat="YYYY",e.dateRange=!1,e.dateFilter=new Date),e.getChartData()},getChartData:function(){this.getBSAmount(),this.getClientAR()},getBSAmount:function(){var t=this,e=[],a="",s="";"day"==t.filter?(a=c(t.dateFilter).format("YYYY-MM-DD"),s=c(t.dateFilter).format("YYYY-MM-DD")):"week"==t.filter?(a=c(t.dateFilter[0]).format("YYYY-MM-DD"),s=c(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=c(t.dateFilter).startOf("month").format("YYYY-MM-DD"),s=c(t.dateFilter).endOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=c(t.dateFilter).startOf("year").format("YYYY-MM-DD"),s=c(t.dateFilter).endOf("year").format("YYYY-MM-DD"));var n=i["dbSales"].collection("billingStatements").where("bsDate",">=",a).where("bsDate","<=",s),r=0,o=0;n.get().then((function(a){a.forEach((function(t){e.push(t.data())}));for(var s=0;s<e.length;s++)1==e[s].status||2==e[s].status?r=parseFloat(r)+parseFloat(e[s].amount.replaceAll(",","")):3==e[s].status&&(o=parseFloat(o)+parseFloat(e[s].amountPaid.replaceAll(",","")));t.totalUncollectedAmount=u(parseFloat(r).toFixed(2)),t.totalCollectedAmount=u(parseFloat(o).toFixed(2))}))},getClientAR:function(){var t=this,e=c(t.dateFilter).format("YYYY-MM-DD"),a="",s="";"day"==t.filter?(a=c(e).format("YYYY-MM-DD"),s=c(e).format("YYYY-MM-DD")):"week"==t.filter?(s=c(t.dateFilter[0]).format("YYYY-MM-DD"),a=c(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=c(e).endOf("month").format("YYYY-MM-DD"),s=c(e).startOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=c(e).endOf("year").format("YYYY-MM-DD"),s=c(e).startOf("year").format("YYYY-MM-DD"));var n=i["dbSales"].collection("company").where("status","==",1).orderBy("company","asc"),r=[];t.companyLabels=[],n.get().then((function(e){e.forEach((function(t){r.push(t.data())}));var n=i["dbSales"].collection("billingStatements").where("bsDate",">=",s).where("bsDate","<=",a).where("status","in",[1,2]),o=[],l=[],c=0;n.get().then((function(e){e.forEach((function(t){o.push(t.data())}));for(var a=0;a<r.length;a++){c=0;for(var s=0;s<o.length;s++)r[a].companyId==o[s].companyReference&&(c=parseFloat(c)+parseFloat(o[s].amount.replaceAll(",","")));0!=c&&l.push({company:r[a].company,amount:c,color:""})}for(var n=[],i=[],d=[],u=0,m=["#a20e0e","#ea756a","#F44B43","#FF9C9C","#800020","#FF695B","#CA251D","#FF7067","#EA8E85","#FF503F","#DD1200","#FF696F","#FF9697","#EF4D46","#E7131E","#F89A9A","#D22B2B","#F88379","#C41E3A","#D70040","#DE3163","#D2042D","#DC143C","#8B0000","#7B1818","#9A2A2A","#800000","#FAA0A0","#FA8072"],p=0;p<l.length;p++)n.push(l[p].amount),i.push(l[p].company),l[p].color=m[u],d.push(m[u]),t.companyLabels.push(l[p]),u++,p>=m.length&&(u=0);var h={datasets:[{data:n,backgroundColor:d}],labels:i};t.clientARChart.chartData=h}))}))},getOverdue:function(){var t=this,e=c().format("YYYY-MM-DD"),a=i["dbSales"].collection("billingStatements").where("dueDate","<",e).where("status","==",1).limit(10).orderBy("dueDate","asc");t.loading=!0,t.oldestOverdues=[],t.largestOverdues=[],t.communications=[],t.largest=[],a.get().then((function(e){e.forEach((function(e){t.bills.push(e.data())}));for(var a=0;a<5;a++)if(a<t.bills.length){var s=c().diff(c(t.bills[a].dueDate),"days");t.oldestOverdues.push({companyId:t.bills[a].companyReference,bsNumber:t.bills[a].bsNumber,company:"",days:s}),t.communications.push({bsId:t.bills[a].billingStatementId,companyId:t.bills[a].companyReference,bsNumber:t.bills[a].bsNumber,company:"",days:s,amount:u(parseFloat(t.bills[a].amount).toFixed(2)),status:"",latest:""})}else t.oldestOverdues.push({companyId:"",bsNumber:"",company:"",days:0}),t.communications.push({bsId:"",companyId:"",bsNumber:"",company:"",days:0,amount:"0.00",status:"",latest:""});var n=i["dbSales"].collection("company"),r=[];n.get().then((function(e){e.forEach((function(t){r.push(t.data())}));for(var a=0;a<r.length;a++){for(var s=0,n=0;n<t.bills.length;n++)r[a].companyId==t.bills[n].companyReference&&(s=parseFloat(s)+parseFloat(t.bills[n].amount));0!=s&&t.largest.push({company:r[a].company,amount:s})}for(var o=0;o<t.oldestOverdues.length;o++)for(var l=0;l<r.length;l++)t.oldestOverdues[o].companyId==r[l].companyId&&(t.oldestOverdues[o].company=r[l].company);t.largest.sort((function(t,e){return e.amount-t.amount}));for(var c=0;c<5;c++)c<t.largest.length?(t.largest[c].amount=u(parseFloat(t.largest[c].amount).toFixed(2)),t.largestOverdues.push(t.largest[c])):t.largestOverdues.push({company:"",amount:"0.00"});for(var d=function(e){for(var a=0;a<r.length;a++)t.communications[e].companyId==r[a].companyId&&(t.communications[e].company=r[a].company);var s=i["dbSales"].collection("bsCommunicationMade").where("bsReference","==",t.communications[e].bsId).orderBy("communicationDate","desc").limit(1);s.get().then((function(a){a.forEach((function(a){t.communications[e].status=a.data().communicationStatus,t.communications[e].latest=a.data().communicationDate}))}))},m=0;m<t.communications.length;m++)d(m)}))})),setTimeout((function(){t.loading=!1}),1e3)},onOldestPageChange:function(t){var e=this,a=5*t,s=a-5;e.oldestCurrentPage=t,e.oldestOverdues=[];for(var n=s;n<a;n++)n<e.bills.length?function(){var t=c().diff(c(e.bills[n].dueDate),"days");e.oldestOverdues.push({companyId:e.bills[n].companyReference,bsNumber:e.bills[n].bsNumber,company:"",days:t});var a=i["dbSales"].collection("company"),s=[];a.get().then((function(t){t.forEach((function(t){s.push(t.data())}));for(var a=0;a<e.oldestOverdues.length;a++)for(var n=0;n<s.length;n++)e.oldestOverdues[a].companyId==s[n].companyId&&(e.oldestOverdues[a].company=s[n].company)}))}():e.oldestOverdues.push({companyId:"",bsNumber:"",company:"",days:0})},onComPageChange:function(t){var e=this,a=5*t,s=a-5;e.comCurrentPage=t,e.communications=[];for(var n=s;n<a;n++)n<e.bills.length?function(){var t=c().diff(c(e.bills[n].dueDate),"days");e.communications.push({bsId:e.bills[n].billingStatementId,companyId:e.bills[n].companyReference,bsNumber:e.bills[n].bsNumber,company:"",days:t,amount:u(parseFloat(e.bills[n].amount).toFixed(2)),status:"",latest:""});var a=i["dbSales"].collection("company"),s=[];a.get().then((function(t){t.forEach((function(t){s.push(t.data())}));for(var a=function(t){for(var a=0;a<s.length;a++)e.communications[t].companyId==s[a].companyId&&(e.communications[t].company=s[a].company);var n=i["dbSales"].collection("bsCommunicationMade").where("bsReference","==",e.communications[t].bsId).orderBy("communicationDate","desc").limit(1);n.get().then((function(a){a.forEach((function(a){e.communications[t].status=a.data().communicationStatus,e.communications[t].latest=a.data().communicationDate}))}))},n=0;n<e.communications.length;n++)a(n)}))}():e.communications.push({bsId:"",companyId:"",bsNumber:"",company:"",days:0,amount:"0.00",status:"",latest:""})},onLargestPageChange:function(t){var e=this,a=5*t,s=a-5;e.largestCurrentPage=t,e.largestOverdues=[],e.largest=[];var n=i["dbSales"].collection("company"),r=[];n.get().then((function(t){t.forEach((function(t){r.push(t.data())}));for(var n=0;n<r.length;n++){for(var i=0,o=0;o<e.bills.length;o++)r[n].companyId==e.bills[o].companyReference&&(i=parseFloat(i)+parseFloat(e.bills[o].amount));e.largest.push({company:r[n].company,amount:i})}e.largest.sort((function(t,e){return e.amount-t.amount}));for(var l=s;l<a;l++)l<e.largest.length?(e.largest[l].amount=u(parseFloat(e.largest[l].amount).toFixed(2)),e.largestOverdues.push(e.largest[l])):e.largestOverdues.push({company:"",amount:"0.00"})}))}},mounted:function(){this.changeFilter("day"),this.getOverdue()}},b=f,v=a("2877"),C=Object(v["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports},"5e8b":function(t,e,a){},"61d3":function(t,e,a){},"624a":function(t,e,a){"use strict";a("5876")},"66b4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==t.distributorStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getDistributors(1)}}},[t._v("Enabled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==t.distributorStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getDistributors(0)}}},[t._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"distributor-table",attrs:{columns:t.columns,rows:t.distributors,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["distributorName"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.distributorName))])]):t._e(),"address"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.address))])]):t._e(),"tin"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.tin))])]):t._e(),"contactNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.contactNumber))])]):t._e(),"email"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.email))])]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return t.openEditDistributorModal(e.row)}}}):t._e(),1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return t.changeStatus(e.row.id,0,"Disable")}}}):t._e(),0==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable"},on:{click:function(a){return t.changeStatus(e.row.id,1,"Enable")}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.distributors.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getDistributors(t.distributorStat)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-distributor-modal",modifiers:{"new-distributor-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Distributor")])],1)]),a("b-modal",{attrs:{size:"lg",id:"new-distributor-modal",title:"New Distributor",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addDistributor(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-distributor-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Distributor:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Distributor"},model:{value:t.newDistributor,callback:function(e){t.newDistributor=e},expression:"newDistributor"}}),t.$v.newDistributor.$anyDirty&&!t.$v.newDistributor.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newDistributor.$anyDirty&&!t.$v.newDistributor.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:t.newAddress},on:{input:function(e){e.target.composing||(t.newAddress=e.target.value)}}}),t.$v.newAddress.$anyDirty&&!t.$v.newAddress.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:t.newTinNumber,callback:function(e){t.newTinNumber=e},expression:"newTinNumber"}}),t.$v.newTinNumber.$anyDirty&&!t.$v.newTinNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:t.newContactNumber,callback:function(e){t.newContactNumber=e},expression:"newContactNumber"}}),t.$v.newContactNumber.$anyDirty&&!t.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Person:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Email Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Person"},model:{value:t.newContactPerson,callback:function(e){t.newContactPerson=e},expression:"newContactPerson"}}),t.$v.newContactPerson.$anyDirty&&!t.$v.newContactPerson.alphaCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:t.newEmailAddress,callback:function(e){t.newEmailAddress=e},expression:"newEmailAddress"}}),t.$v.newEmailAddress.$anyDirty&&!t.$v.newEmailAddress.email?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-distributor-modal",title:"Edit Distributor",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateDistributor(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-distributor-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Distributor:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Distributor"},model:{value:t.edit.distributorName,callback:function(e){t.$set(t.edit,"distributorName",e)},expression:"edit.distributorName"}}),t.$v.edit.distributorName.$anyDirty&&!t.$v.edit.distributorName.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.distributorName.$anyDirty&&!t.$v.edit.distributorName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit.address,expression:"edit.address"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:t.edit.address},on:{input:function(e){e.target.composing||t.$set(t.edit,"address",e.target.value)}}}),t.$v.edit.address.$anyDirty&&!t.$v.edit.address.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:t.edit.tin,callback:function(e){t.$set(t.edit,"tin",e)},expression:"edit.tin"}}),t.$v.edit.tin.$anyDirty&&!t.$v.edit.tin.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:t.edit.contactNumber,callback:function(e){t.$set(t.edit,"contactNumber",e)},expression:"edit.contactNumber"}}),t.$v.edit.contactNumber.$anyDirty&&!t.$v.edit.contactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Person:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Email Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Person"},model:{value:t.edit.contactPerson,callback:function(e){t.$set(t.edit,"contactPerson",e)},expression:"edit.contactPerson"}}),t.$v.edit.contactPerson.$anyDirty&&!t.$v.edit.contactPerson.alphaCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:t.edit.email,callback:function(e){t.$set(t.edit,"email",e)},expression:"edit.email"}}),t.$v.edit.email.$anyDirty&&!t.$v.edit.email.email?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("2f62"),d=a("c6f8"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&, ]*$/),m=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),p=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z -. ]*$/),h=new Date,f={components:{},data:function(){return{columns:[{label:"Distributor",field:"distributorName"},{label:"Address",field:"address"},{label:"Tin",field:"tin"},{label:"Contact No.",field:"contactNumber"},{label:"Email",field:"email"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",requestProcessing:!1,newDistributor:"",newAddress:"",newTinNumber:"",newContactNumber:"",newContactPerson:"",newEmailAddress:"",edit:{id:"",distributorId:"",distributorName:"",address:"",tin:"",contactNumber:"",email:"",contactPerson:""},distributorStat:1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getDistributors(t.distributorStat);case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(c["b"])({valid:"Sales/valid",error:"Sales/error",clients:"Sales/clients",distributors:"Sales/distributors"})),validations:{newDistributor:{required:l["required"],alphaNumCustomValidator:u},newAddress:{required:l["required"]},newTinNumber:{numCustomValidator:m},newContactNumber:{numCustomValidator:m},newContactPerson:{alphaCustomValidator:p},newEmailAddress:{email:l["email"]},edit:{distributorName:{required:l["required"],alphaNumCustomValidator:u},address:{required:l["required"]},tin:{numCustomValidator:m},contactNumber:{numCustomValidator:m},email:{email:l["email"]},contactPerson:{alphaCustomValidator:p}}},methods:{addDistributor:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.$v.newDistributor.$touch(),a.$v.newAddress.$touch(),a.$v.newTinNumber.$touch(),a.$v.newContactNumber.$touch(),a.$v.newContactPerson.$touch(),a.$v.newEmailAddress.$touch(),a.$v.newDistributor.$error||a.$v.newAddress.$error||a.$v.newTinNumber.$error||a.$v.newContactNumber.$error||a.$v.newContactPerson.$error||a.$v.newEmailAddress.$error||(a.requestProcessing=!0,s={distributorId:"",distributorName:Object(d["a"])(a.newDistributor),address:a.newAddress,tin:a.newTinNumber,contactNumber:a.newContactNumber,contactPerson:a.newContactPerson,email:a.newEmailAddress,userReference:"",status:1,dateCreated:h,dateModified:h},a.$store.dispatch("Sales/checkDistributor",{validate:1,newDistributor:a.newDistributor}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Distributor"):0==a.valid&&a.$store.dispatch("Sales/checkDistributor",{validate:2,newTinNumber:a.newTinNumber}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Tin"):0==a.valid&&a.$store.dispatch("Sales/checkDistributor",{validate:3,newContactNumber:a.newContactNumber}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Contact number"):0==a.valid&&a.$store.dispatch("Sales/checkDistributor",{validate:4,newEmailAddress:a.newEmailAddress}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Email address"):0==a.valid&&a.$store.dispatch("Sales/newDistributor",s).then((function(){setTimeout((function(){0==a.error?(a.newDistributor="",a.newAddress="",a.newTinNumber="",a.newContactNumber="",a.newContactPerson="",a.newEmailAddress="",a.requestProcessing=!1,a.$v.newDistributor.$reset(),a.$v.newAddress.$reset(),a.$v.newTinNumber.$reset(),a.$v.newContactNumber.$reset(),a.$v.newContactPerson.$reset(),a.$v.newEmailAddress.$reset(),a.$refs["distributor-table"].reset(),a.getDistributors(a.distributorStat),a.$bvModal.hide("new-distributor-modal"),a.$swal({title:"Success",text:"New distributor added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}),500)}))}),500)}))}),500)}))}),500)}))}),500)})));case 8:case"end":return e.stop()}}),e)})))()},validationMessage:function(t){var e=this;e.$swal({title:"Invalid",text:t+" already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1},errorMessage:function(){var t=this;t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},getDistributors:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e,s.loading=!0,s.distributorStat=t,s.$store.dispatch("Sales/getDistributors",{limit:s.limit,stat:t}),setTimeout((function(){s.loading=!1}),1e3);case 5:case"end":return a.stop()}}),a)})))()},openEditDistributorModal:function(t){this.edit={id:t.id,distributorId:t.distributorId,distributorName:t.distributorName,address:t.address,tin:t.tin,contactNumber:t.contactNumber,email:t.email,contactPerson:t.contactPerson},this.$bvModal.show("edit-distributor-modal")},updateDistributor:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.$v.edit.$touch(),a.$v.edit.$error||(a.requestProcessing=!0,a.$store.dispatch("Sales/checkEditDistributor",{validate:1,distributorName:a.edit.distributorName,distributorId:a.edit.distributorId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Client name"):0==a.valid&&a.$store.dispatch("Sales/checkEditDistributor",{validate:2,tin:a.edit.tin,distributorId:a.edit.distributorId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Tin"):0==a.valid&&a.$store.dispatch("Sales/checkEditDistributor",{validate:3,contactNumber:a.edit.contactNumber,distributorId:a.edit.distributorId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Contact number"):0==a.valid&&a.$store.dispatch("Sales/checkEditDistributor",{validate:4,email:a.edit.email,distributorId:a.edit.distributorId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Email address"):0==a.valid&&(a.requestProcessing=!1,a.$store.dispatch("Sales/editDistributor",a.edit).then((function(){0==a.error?(a.$v.edit.$reset(),a.$refs["distributor-table"].reset(),a.getDistributors(a.distributorStat),a.$bvModal.hide("edit-client-modal"),a.$swal({title:"Success",text:"Distributor updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()})))}),500)}))}),500)}))}),500)}))}),500)})));case 3:case"end":return e.stop()}}),e)})))()},changeStatus:function(t,e,a){var s=this;s.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){n.value&&s.$store.dispatch("Sales/distributorStatus",{id:t,stat:e}).then((function(){setTimeout((function(){0==s.error?s.$swal({title:"Success",text:"Distributor status change to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){s.$refs["distributor-table"].reset(),s.getDistributors(e)})):1==s.error&&s.errorMessage()}),1e3)}))}))}}},b=f,v=(a("37c0"),a("2877")),C=Object(v["a"])(b,s,n,!1,null,null,null);e["default"]=C.exports},6844:function(t,e,a){"use strict";a("aa00")},"6ec9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.paymentTerms,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["description"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.description))])]):t._e(),"value"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.value))])]):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdatePaymentTermsModal(e.row)}}})]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.paymentTerms.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getPaginatedPaymentTerms()}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-payment-terms-modal",modifiers:{"new-payment-terms-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Payment Terms")])],1)]),a("b-modal",{attrs:{size:"lg",id:"new-payment-terms-modal",title:"New Payment Terms",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addPaymentTerms(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v("Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-payment-terms-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Description:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Value:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:t.newDescription,callback:function(e){t.newDescription=e},expression:"newDescription"}}),t.$v.newDescription.$anyDirty&&!t.$v.newDescription.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newDescription.$anyDirty&&!t.$v.newDescription.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Value"},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}}),t.$v.newValue.$anyDirty&&!t.$v.newValue.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newValue.$anyDirty&&!t.$v.newValue.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-payment-terms-modal",title:"Edit Payment Terms",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updatePaymentTerms(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-payment-terms-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Description:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Value:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Description"},model:{value:t.edit.description,callback:function(e){t.$set(t.edit,"description",e)},expression:"edit.description"}}),t.$v.edit.description.$anyDirty&&!t.$v.edit.description.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.description.$anyDirty&&!t.$v.edit.description.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Value"},model:{value:t.edit.value,callback:function(e){t.$set(t.edit,"value",e)},expression:"edit.value"}}),t.$v.edit.value.$anyDirty&&!t.$v.edit.value.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.value.$anyDirty&&!t.$v.edit.value.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("a4d3"),a("e01a"),a("4160"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("b5ae"),l=o["helpers"].regex("alphaNumAndDot",/^[ -./, A-Za-z0-9 ]*$/),c=o["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),d=new Date,u=a("9f25"),m={components:{},data:function(){return{columns:[{label:"Description",field:"description"},{label:"Value",field:"value",width:"100px"},{label:"",field:"action",sortable:!1,width:"25px"}],loading:!0,paymentTerms:[],requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",supplierTypes:[{typeId:"individual",type:"Individual"},{typeId:"corporate",type:"Corporate"}],newDescription:"",newValue:"",edit:{id:"",paymentTermId:"",description:"",value:""}}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"Administrator"!=s[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getPaginatedPaymentTerms();case 1:case"end":return e.stop()}}),e)})))()},validations:{newDescription:{required:o["required"],alphaNumCustomValidator:l},newValue:{required:o["required"],numCustomValidator:c},edit:{description:{required:o["required"],alphaNumCustomValidator:l},value:{required:o["required"],numCustomValidator:c}}},methods:{getPaginatedPaymentTerms:function(){var t=this,e=null,a=[],s=[];t.loading=!0,t.paymentTerms=[],"all"!=t.limit?e=r["dbMains"].collection("paymentTerms").orderBy("description","asc").limit(t.limit):"all"==t.limit&&(e=r["dbMains"].collection("paymentTerms").orderBy("description","asc")),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)})),a.sort((function(t,e){return t.description-e.description}));for(var n=0;n<a.length;n++)a[n]["rowNum"]=1+n,a[n]["id"]=s[n],t.paymentTerms.push(a[n])}setTimeout((function(){t.loading=!1}),1e3)}))},addPaymentTerms:function(){var t=this;if(t.requestProcessing=!1,t.$v.newDescription.$touch(),t.$v.newValue.$touch(),!t.$v.newDescription.$error&&!t.$v.newValue.$error){var e=null;t.requestProcessing=!0,e=r["dbMains"].collection("paymentTerms").where("description","==",t.newDescription),e.get().then((function(e){if(e.empty){if(e){var a=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="PTID-"+d.getFullYear()+u(d.getMonth()+1,2)+d.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{r["dbMains"].collection("paymentTerms").doc().set({paymentTermId:n,description:t.newDescription,value:t.newValue,userReference:s[0].userId,status:1,dateCreated:d,dateModified:d}).then((function(){t.newDescription="",t.newValue="",t.requestProcessing=!1,t.$v.newDescription.$reset(),t.$v.newValue.$reset(),t.$bvModal.hide("new-payment-terms-modal"),t.getPaginatedPaymentTerms(),t.$swal({title:"Success",text:"New payment term added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Payment term already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},openUpdatePaymentTermsModal:function(t){this.edit={id:t.id,paymentTermId:t.paymentTermId,description:t.description,value:t.value},this.$bvModal.show("update-payment-terms-modal")},updatePaymentTerms:function(){var t=this;if(t.requestProcessing=!0,t.$v.edit.$touch(),t.$v.edit.$error)t.requestProcessing=!1;else{var e=null;e=r["dbMains"].collection("paymentTerms").where("description","==",t.edit.description).where("paymentTermId","!=",t.edit.paymentTermId),e.get().then((function(e){if(e.empty){if(e)try{r["dbMains"].collection("paymentTerms").doc(t.edit.id).update({description:t.edit.description,value:t.edit.value,dateModified:d}).then((function(){t.edit={},t.$v.edit.$reset(),t.$bvModal.hide("update-payment-terms-modal"),t.requestProcessing=!1,t.getPaginatedPaymentTerms(),t.$swal({title:"Success",text:"Payment term updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Payment term already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}}},p=m,h=(a("6844"),a("2877")),f=Object(h["a"])(p,s,n,!1,null,null,null);e["default"]=f.exports},7157:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5",attrs:{type:"gradient-success"}}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("recon-button"),a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h4",[t._v("Summary")])]),a("div",{staticClass:"row pt-5"},[a("span",{staticClass:"col-2"},[a("b",[t._v("Choose Bank:")])]),a("span",{staticClass:"col-sm-4"},[a("v-select",{staticClass:"form-control-plaintext",attrs:{options:t.activateBanks,reduce:function(t){return t.bankUid},label:"bank"},on:{input:function(e){return t.getActivateBankAccounts(t.bank)}},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}}),t.$v.bank.$anyDirty&&!t.$v.bank.required?a("i",{staticClass:"text-danger"},[t._v("Field Required")]):t._e()],1),a("span",{staticClass:"col-sm-2"},[a("b",[t._v("Account Number:")])]),""==t.activateBankAccounts?a("div",{staticClass:"col-sm-4"},[a("span",{staticClass:"text-danger"},[t._v(" No Bank Account ")])]):a("div",{staticClass:"col-sm-4"},[a("v-select",{staticClass:"form-control-plaintext",attrs:{options:t.activateBankAccounts,reduce:function(t){return t.bankAccountUid},label:"bankAccountNumber"},on:{input:function(e){return t.getReconSummary()}},model:{value:t.bankAccount,callback:function(e){t.bankAccount=e},expression:"bankAccount"}}),t.$v.bankAccount.$anyDirty&&!t.$v.bankAccount.required?a("i",{staticClass:"text-danger"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-2"},[a("b",[t._v("Choose Date:")])]),a("span",{staticClass:"col-4"},[a("base-input",{attrs:{type:"month",min:"1997-01",max:t.maxDate},on:{input:function(e){return t.getReconSummary()}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)]),a("hr"),a("div",{attrs:{id:"reconSummary"}},[null!=t.totalCredits||null!=t.totalDebits?a("div",{staticClass:"row"},[a("span",{staticClass:"col-12"},[a("b",[t._v("ACCOUNT SUMMARY FOR THE PERIOD "+t._s(t.openingDate)+" - "+t._s(t.closingDate))])])]):t._e(),null!=t.beginningBalance?a("hr"):t._e(),null!=t.beginningBalance?a("div",{staticClass:"row pt-2"},[a("span",{staticClass:"col-6"},[a("b",[t._v("Beginning Balance:")])]),a("span",{staticClass:"col-6 text-right"},[a("b",[t._v("₱ "+t._s(t.beginningBalance))])])]):t._e(),null!=t.beginningBalance?a("hr"):t._e(),t._l(t.credits,(function(e){return a("div",{key:e.bankReconCheckId,staticClass:"row pt-2 pl-5 pr-5"},[2==e.status?a("span",{staticClass:"col-6"},[t._v(t._s(e.details))]):t._e(),2==e.status?a("span",{staticClass:"col-6 text-right"},[t._v(t._s(e.credit))]):t._e()])})),null!=t.totalCredits?a("div",{staticClass:"row pt-2 pl-2 pr-2"},[a("span",{staticClass:"col-6"},[a("b",[t._v("Total Credits:")])]),a("span",{staticClass:"col-6 text-right"},[a("b",[t._v("₱ "+t._s(t.totalCredits))])])]):t._e(),null!=t.totalCredits?a("hr"):t._e(),t._l(t.debits,(function(e){return a("div",{key:e.bankCheckUid,staticClass:"row pl-5 pr-5 pb-0"},[2==e.status?a("span",{staticClass:"col-6"},[t._v("CK# "+t._s(e.bankCheckNumber))]):t._e(),2==e.status?a("span",{staticClass:"col-6 text-right"},[t._v("₱ "+t._s(e.bankCheckAmount))]):t._e()])})),null!=t.totalDebits?a("div",{staticClass:"row pl-2 pr-2"},[a("span",{staticClass:"col-6"},[a("b",[t._v("Total Debits:")])]),a("span",{staticClass:"col-6 text-right"},[a("b",[t._v("₱ "+t._s(t.totalDebits))])])]):t._e(),null!=t.totalDebits?a("hr"):t._e(),null!=t.endingBalance?a("div",{staticClass:"row pt-2"},[a("span",{staticClass:"col-6"},[a("b",[t._v("Ending Balance:")])]),a("span",{staticClass:"col-6 text-right"},[a("b",[t._v("₱ "+t._s(t.endingBalance))])])]):t._e(),null!=t.endingBalance&&null!=t.beginningBalance?a("hr"):t._e()],2),a("div",{staticClass:"text-right pt-2"},[null!=t.totalDebits||null!=t.totalCredits?a("base-button",{staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"redBtn"},nativeOn:{click:function(e){return t.printReconSummary(e)}}},[t._v("Print")]):t._e()],1)])],1),a("b-modal",{attrs:{id:"authentication-modal",title:"AUTHENTICATION",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"pull-right"},[a("base-button",{attrs:{id:"redBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.authPassword(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Submit ")]),a("base-button",{attrs:{id:"goldBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("authentication-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-3 col-form-label"},[a("b",[t._v("Password:")])]),a("div",{staticClass:"col-sm-9"},[a("base-input",{staticClass:"form-control-plaintext",attrs:{type:"password",placeholder:"Password"},model:{value:t.checkPassword,callback:function(e){t.checkPassword=e},expression:"checkPassword"}}),t.$v.checkPassword.$anyDirty&&!t.$v.checkPassword.required?a("i",{staticClass:"text-danger"},[t._v("Field Required")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("b5ae"),l=a("add5"),c=a.n(l),d=a("c1df"),u=a("e966"),m=u.bindWith(",","."),p=a("323d"),h={components:{},data:function(){return{checkPassword:"",requestProcessing:!1,startDate:d().format("YYYY-MM"),maxDate:d().format("YYYY-MM"),activateBanks:[],activateBankAccounts:[],bank:"",bankAccount:"",bankReconId:"",openingDate:"",closingDate:"",beginningBalance:null,endingBalance:null,credits:[],totalCredits:null,debits:[],totalDebits:null}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"Administrator"!=s[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getActivateBanks(),t.getReconSummary();case 2:case"end":return e.stop()}}),e)})))()},validations:{checkPassword:{required:o["required"]},bank:{required:o["required"]},bankAccount:{required:o["required"]}},methods:{closePage:function(){this.$router.push("/check/dashboard")},getActivateBanks:function(){var t=this,e=r["db"].collection("banks").orderBy("bank","asc");t.activateBanks=[],e.get().then((function(e){e.forEach((function(e){t.activateBanks.push(e.data())})),t.bank=t.activateBanks[0].bankUid,t.getActivateBankAccounts(t.activateBanks[0].bankUid)}))},getActivateBankAccounts:function(t){var e=this,a=r["db"].collection("bankAccounts").where("bankReference","==",t);e.activateBankAccounts=[],e.bankAccount="",a.get().then((function(t){t.forEach((function(t){e.activateBankAccounts.push(t.data())})),0!=e.activateBankAccounts.length&&(e.bankAccount=e.activateBankAccounts[0].bankAccountUid),e.getReconSummary()}))},getReconSummary:function(){var t=this;if(t.beginningBalance=null,t.endingBalance=null,t.openingDate=d(t.startDate).startOf("month").format("MMM DD, YYYY"),t.closingDate=d(t.startDate).endOf("month").format("MMM DD, YYYY"),t.checkMinDate=d(t.startDate).startOf("month").format("YYYY-MM-DD"),t.checkMaxDate=d(t.startDate).endOf("month").format("YYYY-MM-DD"),t.$v.bank.$touch(),t.$v.bankAccount.$touch(),t.credits=[],t.debits=[],t.totalCredits=null,t.totalDebits=null,!t.$v.bank.$error&&!t.$v.bankAccount.$error){var e=new Date(t.startDate),a=e.getMonth()+1,s=e.getFullYear(),n=[],i=r["db"].collection("bankReconciliations").where("bankReference","==",t.bank).where("bankAccountReference","==",t.bankAccount).orderBy("bankReconDate","desc");i.get().then((function(e){if(!e.empty){e.forEach((function(t){n.push(t.data())}));for(var i=0;i<n.length;i++)d(n[i].bankReconDate).format("M").toString()==a.toString()&&d(n[i].bankReconDate).format("YYYY").toString()==s.toString()&&(t.beginningBalance=m(parseFloat(n[i].startBalance).toFixed(2)))}})),t.getReconCredits(t.startDate,t.bankAccount),t.getAccountChecks(t.startDate,t.bankAccount),t.$v.bank.$reset(),t.$v.bankAccount.$reset(),t.loading=!1}},getReconCredits:function(t,e){var a=this,s=new Date(t),n=s.getMonth()+1,i=s.getFullYear(),o=r["db"].collection("bankReconciliationChecks").where("bankAccounts","==",e),l=[];o.get().then((function(t){if(!t.empty){t.forEach((function(t){l.push(t.data())}));for(var e=0;e<l.length;e++)d(l[e].bankCheckDate).format("M").toString()==n.toString()&&d(l[e].bankCheckDate).format("YYYY").toString()==i.toString()&&2==l[e].status&&(a.totalCredits+=parseFloat(l[e].credit),l[e].credit=m(parseFloat(l[e].credit)),a.credits.push(l[e]));a.totalCredits>0?(null!=a.beginningBalance&&(a.endingBalance=parseFloat(a.beginningBalance.replaceAll(",",""))+parseFloat(a.totalCredits),a.endingBalance=m(parseFloat(a.endingBalance).toFixed(2))),a.totalCredits=m(a.totalCredits)):(null!=a.beginningBalance&&(a.endingBalance=parseFloat(a.beginningBalance.replaceAll(",",""))),a.totalCredits=m(a.totalCredits))}a.loading=!1}))},getAccountChecks:function(t,e){var a=this,s=new Date(t),n=s.getMonth()+1,i=s.getFullYear(),o=r["db"].collection("bankChecks").where("bankAccountReference","==",e).orderBy("bankCheckDate","asc"),l=[];o.get().then((function(t){if(!t.empty){t.forEach((function(t){l.push(t.data())}));for(var e=0;e<l.length;e++)d(l[e].bankCheckDate).format("M").toString()==n.toString()&&d(l[e].bankCheckDate).format("YYYY").toString()==i.toString()&&2==l[e].status&&a.debits.push(l[e]);for(var s=0;s<a.debits.length;s++)2==a.debits[s].status&&(a.totalDebits+=parseFloat(a.debits[s].bankCheckAmount),a.debits[s].bankCheckAmount=m(parseFloat(a.debits[s].bankCheckAmount).toFixed(2)));a.debits.sort((function(t,e){return t.bankCheckNumber-e.bankCheckNumber})),a.totalDebits>0&&(null!=a.endingBalance&&null!=a.totalCredits?a.endingBalance=parseFloat(a.endingBalance.replaceAll(",",""))-parseFloat(a.totalDebits):null!=a.beginningBalance&&(a.endingBalance=parseFloat(a.beginningBalance.replaceAll(",",""))-parseFloat(a.totalDebits)),a.endingBalance<=0?a.endingBalance=null:a.endingBalance=m(parseFloat(a.endingBalance).toFixed(2)),a.totalDebits=m(parseFloat(a.totalDebits).toFixed(2))),a.loading=!1}}))},printReconSummary:function(){var t=r["db"].collection("banks").where("bankUid","==",this.bank),e=r["db"].collection("bankAccounts").where("bankAccountUid","==",this.bankAccount),a="",s="";t.get().then((function(t){t.forEach((function(t){a=t.data().bank})),e.get().then((function(t){t.forEach((function(t){s=t.data().bankAccountNumber})),c()({printable:"reconSummary",type:"html",style:'#reconSummary { font-family: "Calibri"; padding-left: 2px;} #reconSummary div span{ padding-bottom: 4px; }',documentTitle:"Reconciliation Summary",header:"<h2>"+a+"</h2><h4>Account Number: "+s+"</h4>"})}))}))},authPassword:function(){var t=this,e=localStorage.getItem("aisname");if(t.requestProcessing=!1,t.$v.checkPassword.$touch(),!t.$v.checkPassword.$error){var a=r["dbUsers"].collection("users").where("username","==",e),s=[];a.get().then((function(e){e.forEach((function(t){s.push(t.data())})),p.verify(t.checkPassword,s[0].password)?(t.checkPassword="",t.$v.checkPassword.$reset(),t.requestProcessing=!1,t.$router.push("/bank/reconciliation")):p.verify(t.checkPassword,s[0].password)||(t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#096b85",confirmButtonText:"OK"}))}))}}}},f=h,b=(a("d282"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,null,null);e["default"]=v.exports},"73b2":function(t,e,a){},"75da":function(t,e,a){"use strict";a("a9c8")},"785e":function(t,e,a){},"78b6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{staticClass:"container-fluid mt--7 ml-0 mr-0",staticStyle:{"padding-right":"0px !important","padding-left":"0px !important"}},[a("card",{staticClass:"ml-0 mr-0",attrs:{"header-classes":"bg-transparent"}},[a("div",{staticClass:"row mb-0 pb-2"},[a("span",{staticClass:"col-sm-6 pl-2 mt-1"},[a("date-picker",{staticStyle:{width:"230px"},attrs:{type:t.dateType,id:"inputStyle",range:t.dateRange,format:t.dateFormat},on:{input:function(e){return t.getChartData()}},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}})],1),a("span",{staticClass:"col-sm-2"}),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("day")}}},[a("b",[t._v("Day")]),"day"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()]),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("week")}}},[a("b",[t._v("Week")]),"week"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()]),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("month")}}},[a("b",[t._v("Month")]),"month"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()]),a("span",{staticClass:"col-1 pb-0 mt-3 text-center",attrs:{id:"dateLink"},on:{click:function(e){return t.changeFilter("year")}}},[a("b",[t._v("Year")]),"year"==t.filter?a("hr",{staticClass:"pt-0 pb-0 mt-0 mb-0",attrs:{id:"dateLine"}}):t._e()])]),a("hr",{staticClass:"pt-0 mt-1"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 pb-2"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundA"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8"},[a("h4",{staticClass:"text-left"},[t._v("Billings")])]),a("div",{staticClass:"col-sm-4 text-right"},[a("router-link",{attrs:{to:"/billing",id:"sideBarTxt"}},[t._v("View")])],1)]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-5 text-center",staticStyle:{margin:"auto"}},[a("doughnut-chart",{attrs:{height:150,id:"bar-chart","chart-data":t.billingChart.chartData,"extra-options":t.billingChart.extraOptions}})],1),a("div",{staticClass:"col-sm-2",staticStyle:{margin:"auto"}},[a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"billingUnpaidColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"billingPaidColor"}})],1),a("div",{staticClass:"col-sm-5 text-left",staticStyle:{margin:"auto"}},[a("small",[a("b",[t._v("Unpaid")])]),a("br"),a("small",[a("b",[t._v("Paid")])])])])]),a("card",{staticClass:"mt-2 mb-0",attrs:{id:"cardBackgroundB"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8"},[a("h4",{staticClass:"text-left"},[t._v("Checks")])]),a("div",{staticClass:"col-sm-4 text-right"},[a("router-link",{attrs:{to:"/check/dashboard",id:"sideBarTxt"}},[t._v("View")])],1)]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-5 text-center",staticStyle:{margin:"auto"}},[a("doughnut-chart",{attrs:{height:150,id:"doughnut-chart","chart-data":t.checkChart.chartData}})],1),a("div",{staticClass:"col-sm-2",staticStyle:{margin:"auto"}},[a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"checksClearingColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"checksClearedColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"checksCancelledColor"}})],1),a("div",{staticClass:"col-sm-5 text-left",staticStyle:{margin:"auto"}},[a("small",[a("b",[t._v("Clearing")])]),a("br"),a("small",[a("b",[t._v("Cleared")])]),a("br"),a("small",[a("b",[t._v("Cancelled")])])])])])],1),a("div",{staticClass:"col-sm-8 text-left"},[a("card",{staticClass:"mt-2 mb-2",attrs:{id:"unpaidBillCard"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12"},[a("h4",[t._v("Unpaid Billings")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 pl-1 pr-1",staticStyle:{margin:"auto"}},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:!1,title:"","sub-title":"",data:t.unpaidBillings,columns:t.unpaidBillingTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[""!=s.billing?a("td",[t._v(t._s(s.billing))]):a("td"),""!=s.amount?a("td",[t._v("₱ "+t._s(s.amount))]):a("td"),""!=s.dueDate?a("td",{staticClass:"text-right"},[a("span",[t._v(t._s(t._f("moment")(s.dueDate,"MMMM DD, YYYY")))]),a("br"),s.dueDate==t.dateToday?a("span",{attrs:{id:"redTxt"}},[a("b",[t._v("Due Today")])]):s.dueDate<t.dateToday?a("span",{attrs:{id:"sideBarTxt"}},[a("b",[t._v("Overdue")])]):s.dueDate==t.dateTom?a("span",{attrs:{id:"sideBarTxt"}},[a("b",[t._v("Due Tomorrow ("+t._s(t._f("moment")(s.dueDate,"dddd"))+")")])]):a("span",{attrs:{id:"sideBarTxt"}},[s.day<=5?a("b",[t._v("Due on "+t._s(t._f("moment")(s.dueDate,"dddd")))]):t._e()])]):a("td",[a("span"),a("br"),a("span"),a("br"),a("span")])]}}])})],1)])])],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4 pb-2"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundA"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8"},[a("h4",{staticClass:"text-left"},[t._v("Reimbursements")])]),a("div",{staticClass:"col-sm-4 text-right"},[a("router-link",{attrs:{to:"/reimbursement",id:"sideBarTxt"}},[t._v("View")])],1)]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-5 text-center",staticStyle:{margin:"auto"}},[a("doughnut-chart",{attrs:{height:150,id:"doughnut-chart","chart-data":t.reimbursementChart.chartData}})],1),a("div",{staticClass:"col-sm-2",staticStyle:{margin:"auto"}},[a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"reimForApprovalColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"reimApprovedColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"reimProcessedColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"reimReceivedColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"reimRejectedColor"}})],1),a("div",{staticClass:"col-sm-5 text-left",staticStyle:{margin:"auto"}},[a("small",[a("b",[t._v("For Approval")])]),a("br"),a("small",[a("b",[t._v("Approved")])]),a("br"),a("small",[a("b",[t._v("Processed")])]),a("br"),a("small",[a("b",[t._v("Received")])]),a("br"),a("small",[a("b",[t._v("Rejected")])])])])])],1),a("div",{staticClass:"col-sm-4 pb-2"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundB"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8"},[a("h4",{staticClass:"text-left"},[t._v("Petty Cash")])]),a("div",{staticClass:"col-sm-4 text-right"},[a("router-link",{attrs:{to:"/petty/cash",id:"sideBarTxt"}},[t._v("View")])],1)]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-5 text-center",staticStyle:{margin:"auto"}},[a("doughnut-chart",{attrs:{height:150,id:"doughnut-chart","chart-data":t.pettyChart.chartData}})],1),a("div",{staticClass:"col-sm-2",staticStyle:{margin:"auto"}},[a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"pettyCurrentColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"pettyCheckedColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"pettyProcessedColor"}})],1),a("div",{staticClass:"col-sm-5 text-left",staticStyle:{margin:"auto"}},[a("small",[a("b",[t._v("Current")])]),a("br"),a("small",[a("b",[t._v("Checked")])]),a("br"),a("small",[a("b",[t._v("Processed")])])])])])],1),a("div",{staticClass:"col-sm-4 pb-2"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"cardBackgroundA"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8"},[a("h4",{staticClass:"text-left"},[t._v("Cash Advance")])]),a("div",{staticClass:"col-sm-4 text-right"},[a("router-link",{attrs:{to:"/expense/cash/advance",id:"sideBarTxt"}},[t._v("View")])],1)]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-5 text-center",staticStyle:{margin:"auto"}},[a("doughnut-chart",{attrs:{height:150,id:"doughnut-chart","chart-data":t.cashAdvanceChart.chartData}})],1),a("div",{staticClass:"col-sm-2",staticStyle:{margin:"auto"}},[a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"caReleasedColor"}}),a("br"),a("base-button",{staticClass:"pt-1 pb-1 text-right",attrs:{id:"caClearedColor"}})],1),a("div",{staticClass:"col-sm-5 text-left",staticStyle:{margin:"auto"}},[a("small",[a("b",[t._v("Released")])]),a("br"),a("small",[a("b",[t._v("Cleared")])])])])])],1)]),"day"!=t.filter&&"week"!=t.filter?a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"purchasesCard"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-8 mb-1 pb-1"},[a("h4",[t._v("Purchases")])]),a("div",{staticClass:"col-sm-4 text-right"},[a("router-link",{attrs:{to:"/purchases",id:"sideBarTxt"}},[t._v("View")])],1)]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-1 pl-0 pr-0 text-center",staticStyle:{margin:"auto"},attrs:{id:"rotateTxt"}},[a("small",[a("b",[t._v("Amount (₱)")])])]),a("div",{staticClass:"col-sm-11 pt-2 pl-0 ml-0 text-left",staticStyle:{margin:"auto"}},[a("bar-chart",{attrs:{height:250,"chart-data":t.purchaseChart.chartData,"extra-options":t.purchaseChart.extraOptions}})],1)])])],1)]):t._e(),a("div",{staticClass:"row pt-2"},[a("div",{staticClass:"col-xl-12"},[a("card",{staticClass:"mt-0 mb-0",attrs:{id:"disbursementCard"}},[a("div",{staticClass:"row mb-1 pb-1"},[a("div",{staticClass:"col-sm-12 mb-1 pb-1"},[a("h4",[t._v("Disbursements")])])]),a("div",{staticClass:"row mt-1 pt-1"},[a("div",{staticClass:"col-sm-12 pt-2 pl-0 ml-0 text-left",staticStyle:{margin:"auto"}},[a("bar-chart",{attrs:{height:250,id:"bar-chart","chart-data":t.disbursementChart.chartData}})],1),a("div",{staticClass:"col-sm-12 text-center",staticStyle:{margin:"auto"}},[a("base-button",{staticClass:"pt-1 pb-1 ml-2 mr-2 text-right",attrs:{id:"disbursementReleasedColor"}}),a("small",[a("b",[t._v("Released")])]),a("base-button",{staticClass:"pt-1 pb-1 ml-2 mr-2 text-right",attrs:{id:"disbursementClearedColor"}}),a("small",[a("b",[t._v("Cleared")])])],1)])])],1)])])])])],1)],1)},n=[],i=(a("99af"),a("4de4"),a("4160"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("56d7")),r=a("93b4"),o=a("1fca"),l=a("1450"),c={name:"bar-chart",extends:o["a"],mixins:[o["c"].reactiveProp,l["a"]],props:{extraOptions:{type:Object,default:function(){return{}}}},data:function(){return{ctx:null}},mounted:function(){var t=this;this.$watch("chartData",(function(e,a){a||t.renderChart(t.chartData,t.extraOptions)}),{immediate:!0})}},d=a("33f9"),u=a("ec45"),m=(a("411c"),a("c1df")),p=a("e966"),h=p.bindWith(",","."),f=["Billing","Amount","Due Date"],b={components:{BarChart:c,DoughnutChart:d["a"],DatePicker:u["a"]},data:function(){return{checkChart:{chartData:{datasets:[],labels:[]},extraOptions:r["b"]},nearlyClearing:0,clearing:0,cancelled:0,billingChart:{chartData:{datasets:[],labels:[]},extraOptions:r["a"]},unpaid:0,paid:0,unpaidBillingTable:{title:"Unpaid Billing Table",subTitle:"",columns:[].concat(f)},unpaidColumns:[{label:"Billing",field:"billing"},{label:"Amount",field:"amount"},{label:"Due Date",field:"dueDate"}],loading:!0,unpaidBillings:[],selectDate:m().format("MMMM YYYY"),filters:[{filterId:"month",filter:"Month"}],filter:"month",dateFilter:new Date,dateType:"",dateFormat:"",maxDate:m().format("YYYY-MM"),reimbursementChart:{chartData:{datasets:[],labels:[]}},forApproval:0,approved:0,processed:0,received:0,rejected:0,pettyChart:{chartData:{datasets:[],labels:[]}},current:0,checked:0,processedPetty:0,cashAdvanceChart:{chartData:{datasets:[],labels:[]}},caReleased:0,caCleared:0,disbursementChart:{chartData:{datasets:[],labels:[]}},cdReleased:0,cdCleared:0,ldReleased:0,ldCleared:0,rdReleased:0,rdCleared:0,reReleased:0,reCleared:0,purchaseChart:{allData:[],chartData:{datasets:[],labels:[]},extraOptions:r["b"]},dateToday:m().format("YYYY-MM-DD"),dateRange:!1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=i["dbUsers"].collection("users").where("username","==",s),r=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){r.push(t.data())}));var e=i["dbUsers"].collection("userRoles").where("userRoleId","==",r[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/page"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},methods:{changeFilter:function(t){var e=this;e.filter=t,"day"==t?(e.dateType="date",e.dateFormat="MMMM DD, YYYY",e.dateRange=!1,e.dateFilter=new Date):"week"==t?(e.dateType="date",e.dateFormat="MMM DD, YYYY",e.dateRange=!0,e.dateFilter=[new Date,new Date(m().add("6","days"))]):"month"==t?(e.dateType="month",e.dateFormat="MMMM YYYY",e.dateRange=!1,e.dateFilter=new Date):"year"==t&&(e.dateType="year",e.dateFormat="YYYY",e.dateRange=!1,e.dateFilter=new Date),e.getChartData()},getChartData:function(){this.getCheckChart(),this.getBillingChart(),this.getReimbursmentChart(),this.getPettyChart(),this.getCashAdvanceChart(),this.getDisbursementChart(),this.getPurchaseChart()},getCheckChart:function(){var t=this,e=m(t.dateFilter).format("YYYY-MM-DD"),a="",s="";"day"==t.filter?(a=m(e).format("YYYY-MM-DD"),s=m(e).format("YYYY-MM-DD")):"week"==t.filter?(s=m(t.dateFilter[0]).format("YYYY-MM-DD"),a=m(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=m(e).endOf("month").format("YYYY-MM-DD"),s=m(e).startOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=m(e).endOf("year").format("YYYY-MM-DD"),s=m(e).startOf("year").format("YYYY-MM-DD"));var n=i["db"].collection("bankChecks").where("bankCheckDate",">=",s).where("bankCheckDate","<=",a).where("status","in",[1,3,4]),r=i["db"].collection("bankChecks").where("bankCheckDate",">=",s).where("bankCheckDate","<=",a).where("status","in",[0]),o=i["db"].collection("bankChecks").where("bankCheckDate",">=",s).where("bankCheckDate","<=",a).where("status","in",[2]),l=[],c=[],d=[];n.get().then((function(e){e.forEach((function(t){l.push(t.data())}));for(var a=0,s=0,n=0,i=0;i<l.length;i++)a++;r.get().then((function(e){e.forEach((function(t){c.push(t.data())}));for(var i=0;i<c.length;i++)s++;o.get().then((function(e){e.forEach((function(t){d.push(t.data())}));for(var i=0;i<d.length;i++)n++;var r={datasets:[{data:[a,n,s],backgroundColor:["#F44B43","#FF9C9C","#FF695B"]}],labels:["Clearing","Cleared","Cancelled"]};t.nearlyClearing=a,t.clearing=n,t.cancelled=s,t.checkChart.chartData=r}))}))}))},getBillingChart:function(){var t=this,e=[],a="",s="";"day"==t.filter?(a=m(t.dateFilter).format("YYYY-MM-DD"),s=m(t.dateFilter).format("YYYY-MM-DD")):"week"==t.filter?(a=m(t.dateFilter[0]).format("YYYY-MM-DD"),s=m(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=m(t.dateFilter).startOf("month").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=m(t.dateFilter).startOf("year").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("year").format("YYYY-MM-DD"));var n=i["dbExpense"].collection("billings").where("dueDate",">=",a).where("dueDate","<=",s),r=0,o=0;n.get().then((function(a){a.forEach((function(t){e.push(t.data())}));for(var s=0;s<e.length;s++)1==e[s].status?r++:2==e[s].status&&o++;var n={labels:["Unpaid","Paid"],datasets:[{label:"",backgroundColor:["#a20e0e","#ea756a"],data:[r,o]}]};t.unpaid=r,t.paid=o,t.billingChart.chartData=n}))},getReimbursmentChart:function(){var t=this,e=[],a="",s="";"day"==t.filter?(a=m(t.dateFilter).format("YYYY-MM-DD"),s=m(t.dateFilter).format("YYYY-MM-DD")):"week"==t.filter?(a=m(t.dateFilter[0]).format("YYYY-MM-DD"),s=m(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=m(t.dateFilter).startOf("month").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=m(t.dateFilter).startOf("year").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("year").format("YYYY-MM-DD"));var n=i["dbExpense"].collection("reimbursements").where("dateCreated",">=",new Date(a)).where("dateCreated","<=",new Date(s)),r=0,o=0,l=0,c=0,d=0;n.get().then((function(a){a.forEach((function(t){e.push(t.data())}));for(var s=0;s<e.length;s++)1==e[s].status?r++:2==e[s].status?o++:3==e[s].status?l++:4==e[s].status?c++:0==e[s].status&&d++;var n={labels:["For Approval","Approved","Processed","Received","Rejected"],datasets:[{label:"",backgroundColor:["#CA251D","#FF7067","#EA8E85","#FF503F","#DD1200"],data:[r,o,l,c,d]}]};t.forApproval=r,t.approved=o,t.processed=l,t.received=c,t.rejected=d,t.reimbursementChart.chartData=n}))},getPettyChart:function(){var t=this,e=[],a="",s="";"day"==t.filter?(a=m(t.dateFilter).format("YYYY-MM-DD"),s=m(t.dateFilter).format("YYYY-MM-DD")):"week"==t.filter?(a=m(t.dateFilter[0]).format("YYYY-MM-DD"),s=m(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=m(t.dateFilter).startOf("month").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=m(t.dateFilter).startOf("year").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("year").format("YYYY-MM-DD"));var n=i["dbExpense"].collection("pettyCash").where("pettyCashDate",">=",a).where("pettyCashDate","<=",s),r=0,o=0,l=0;n.get().then((function(a){a.forEach((function(t){e.push(t.data())}));for(var s=0;s<e.length;s++)1==e[s].status?r++:2==e[s].status?o++:3==e[s].status&&l++;var n={labels:["Current","Checked","Processed"],datasets:[{label:"",backgroundColor:["#FF696F","#FF9697","#EF4D46"],data:[r,o,l]}]};t.current=r,t.checked=o,t.processedPetty=l,t.pettyChart.chartData=n}))},getCashAdvanceChart:function(){var t=this,e=[],a="",s="";"day"==t.filter?(a=m(t.dateFilter).format("YYYY-MM-DD"),s=m(t.dateFilter).format("YYYY-MM-DD")):"week"==t.filter?(a=m(t.dateFilter[0]).format("YYYY-MM-DD"),s=m(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(a=m(t.dateFilter).startOf("month").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(a=m(t.dateFilter).startOf("year").format("YYYY-MM-DD"),s=m(t.dateFilter).endOf("year").format("YYYY-MM-DD"));var n=i["dbExpense"].collection("cashAdvances").where("cashAdvanceDate",">=",a).where("cashAdvanceDate","<=",s),r=0,o=0;n.get().then((function(a){a.forEach((function(t){e.push(t.data())}));for(var s=0;s<e.length;s++)1==e[s].status?r++:2==e[s].status&&o++;var n={labels:["Released","Cleared"],datasets:[{label:"",backgroundColor:["#E7131E","#F89A9A"],data:[r,o]}]};t.caReleased=r,t.caCleared=o,t.cashAdvanceChart.chartData=n}))},getDisbursementChart:function(){var t=this,e=[],a=[],s=[],n=[],r="",o="";"day"==t.filter?(r=m(t.dateFilter).format("YYYY-MM-DD"),o=m(t.dateFilter).format("YYYY-MM-DD")):"week"==t.filter?(r=m(t.dateFilter[0]).format("YYYY-MM-DD"),o=m(t.dateFilter[1]).format("YYYY-MM-DD")):"month"==t.filter?(r=m(t.dateFilter).startOf("month").format("YYYY-MM-DD"),o=m(t.dateFilter).endOf("month").format("YYYY-MM-DD")):"year"==t.filter&&(r=m(t.dateFilter).startOf("year").format("YYYY-MM-DD"),o=m(t.dateFilter).endOf("year").format("YYYY-MM-DD"));var l=i["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",o),c=i["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",o),d=i["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",o),u=i["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",r).where("transactionDate","<=",o),p=0,h=0,f=0,b=0,v=0,C=0,y=0,g=0;l.get().then((function(i){i.forEach((function(t){e.push(t.data())}));for(var r=0;r<e.length;r++)1==e[r].status?p++:2==e[r].status&&v++;var o={labels:["Cash","Loan","Refund","Remittance"],datasets:[{label:"Released",backgroundColor:"#BA302D",data:[]},{label:"Cleared",backgroundColor:"#DE645B",data:[]}]};t.cdReleased=p,t.cdCleared=v,o.datasets[0].data[0]=p,o.datasets[1].data[0]=v,c.get().then((function(e){e.forEach((function(t){a.push(t.data())}));for(var i=0;i<a.length;i++)1==a[i].status?h++:2==a[i].status&&C++;t.ldReleased=h,t.ldCleared=C,o.datasets[0].data[1]=h,o.datasets[1].data[1]=C,d.get().then((function(e){e.forEach((function(t){s.push(t.data())}));for(var a=0;a<s.length;a++)1==s[a].status?f++:2==s[a].status&&y++;t.rdReleased=f,t.rdCleared=y,o.datasets[0].data[2]=f,o.datasets[1].data[2]=y,u.get().then((function(e){e.forEach((function(t){n.push(t.data())}));for(var a=0;a<n.length;a++)1==n[a].status?b++:2==s[a].status&&g++;t.reReleased=b,t.reCleared=g,o.datasets[0].data[3]=b,o.datasets[1].data[3]=g,t.disbursementChart.chartData=o}))}))}))}))},getPurchaseChart:function(){var t=this,e="",a="";if("month"==t.filter){e=m(t.dateFilter).startOf("month").format("YYYY-MM-DD"),a=m(t.dateFilter).endOf("month").format("YYYY-MM-DD");var s=i["dbExpense"].collection("purchases").where("purchaseDate",">=",e).where("purchaseDate","<=",a),n=[],r=[];t.purchaseChart.allData=[],s.get().then((function(e){e.forEach((function(t){n.push(t.data())}));for(var s=parseInt(m(a).format("DD")),i=["#000B49","#9B0000","#FF7272","#FFB5B5"],o=[],l=[],c=[],d=0;d<s;d++){var u=d+1;r.push({day:u,amount:0})}for(var p=0;p<n.length;p++)for(var h=parseInt(m(n[p].purchaseDate).format("DD")),f=0;f<r.length;f++)h==r[f].day&&(r[f].amount=parseFloat(r[f].amount)+parseFloat(n[p].salesAmount));for(var b=0;b<r.length;b++)l.push(r[b].day.toString()),c.push(r[b].amount);t.purchaseChart.allData.push(c);for(var v=0,C=0;C<t.purchaseChart.allData[0].length;C++)v==i.length&&(v=0),o.push(i[v]),v++;var y={datasets:[{labels:"Amount",backgroundColor:o,data:t.purchaseChart.allData[0]}],labels:l};t.purchaseChart.chartData=y}))}else if("year"==t.filter){var o=m(t.dateFilter).format("YYYY");e=o.toString()+"-01-01",a=o.toString()+"-12-31";var l=i["dbExpense"].collection("purchases").where("purchaseDate",">=",e).where("purchaseDate","<=",a),c=[],d=0,u=0,p=0,h=0,f=0,b=0,v=0,C=0,y=0,g=0,w=0,_=0;t.purchaseChart.allData=[],l.get().then((function(e){e.forEach((function(t){c.push(t.data())}));for(var a=0;a<c.length;a++){var s=m(c[a].purchaseDate).format("MM").toString();c[a].salesAmount=parseFloat(c[a].salesAmount).toFixed(2),"01"==s?d=parseFloat(d)+parseFloat(c[a].salesAmount):"02"==s?u=parseFloat(u)+parseFloat(c[a].salesAmount):"03"==s?p=parseFloat(p)+parseFloat(c[a].salesAmount):"04"==s?h=parseFloat(h)+parseFloat(c[a].salesAmount):"05"==s?f=parseFloat(f)+parseFloat(c[a].salesAmount):"06"==s?b=parseFloat(b)+parseFloat(c[a].salesAmount):"07"==s?v=parseFloat(v)+parseFloat(c[a].salesAmount):"08"==s?C=parseFloat(C)+parseFloat(c[a].salesAmount):"09"==s?y=parseFloat(y)+parseFloat(c[a].salesAmount):"10"==s?g=parseFloat(g)+parseFloat(c[a].salesAmount):"11"==s?w=parseFloat(w)+parseFloat(c[a].salesAmount):"12"==s&&(_=parseFloat(_)+parseFloat(c[a].salesAmount))}t.purchaseChart.allData.push([d,u,p,h,f,b,v,C,y,g,w,_]);for(var n=["#000B49","#9B0000","#FF7272","#FFB5B5"],i=[],r=0,o=0;o<t.purchaseChart.allData[0].length;o++)r==n.length&&(r=0),i.push(n[r]),r++;var l={datasets:[{labels:"Amount",backgroundColor:i,data:t.purchaseChart.allData[0]}],labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};t.purchaseChart.chartData=l}))}},getBillings:function(){var t=this,e=null,a=[],s=[];t.loading=!0,t.unpaidBillings=[],t.graphMonth=m(t.dateFilter).format("YYYY"),e=i["dbExpense"].collection("billings").where("status","==",1).orderBy("dueDate","asc").limit(5),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)}));for(var n=0;n<5;n++)n<a.length?(a[n]["day"]=m(a[n].dueDate).day(),a[n].amount=h(a[n].amount),t.unpaidBillings.push(a[n])):t.unpaidBillings.push({billing:"",amount:"",dueDate:""})}setTimeout((function(){t.loading=!1}),1e3)}))}},mounted:function(){this.changeFilter("day"),this.getBillings()}},v=b,C=a("2877"),y=Object(C["a"])(v,s,n,!1,null,null,null);e["default"]=y.exports},"799d":function(t,e,a){},"7c07":function(t,e,a){},"7c82":function(t,e,a){"use strict";a("1c95")},"812b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Banks"}},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("vue-good-table",{ref:"bank-table",attrs:{columns:t.columns,rows:t.banks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"bankName",type:"asc"}},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["bank"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bank))])]):t._e(),"bankName"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bankName))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateBankModal(e.row)}}})]):t._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.banks.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getBanks()}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-bank-modal",modifiers:{"new-bank-modal":!0}}],staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Bank")])],1)],1)],1),a("tab-pane",{attrs:{title:"Bank Accounts"}},[a("bank-accounts")],1),a("tab-pane",{attrs:{title:"Check Series"}},[a("check-series")],1),a("tab-pane",{attrs:{title:"Check Payee"}},[a("check-payee")],1)],1),a("b-modal",{attrs:{size:"lg",id:"new-bank-modal",title:"New Bank",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addBank(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-bank-modal")}}},[t._v(" Close ")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Bank Short Name/Acronym:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Bank Full Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Short Name"},model:{value:t.newBank,callback:function(e){t.newBank=e},expression:"newBank"}}),t.$v.newBank.$anyDirty&&!t.$v.newBank.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newBank.$anyDirty&&!t.$v.newBank.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Full Name"},model:{value:t.newBankName,callback:function(e){t.newBankName=e},expression:"newBankName"}}),t.$v.newBankName.$anyDirty&&!t.$v.newBankName.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newBankName.$anyDirty&&!t.$v.newBankName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"update-bank-modal",title:"Edit Bank",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateBank(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-bank-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Bank Short Name/Acronym:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Bank Full Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Short Name"},model:{value:t.selectedBank.bank,callback:function(e){t.$set(t.selectedBank,"bank",e)},expression:"selectedBank.bank"}}),t.$v.selectedBank.$anyDirty&&!t.$v.selectedBank.bank.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.selectedBank.$anyDirty&&!t.$v.selectedBank.bank.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"Full Name"},model:{value:t.selectedBank.bankName,callback:function(e){t.$set(t.selectedBank,"bankName",e)},expression:"selectedBank.bankName"}}),t.$v.selectedBank.$anyDirty&&!t.$v.selectedBank.bankName.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.selectedBank.$anyDirty&&!t.$v.selectedBank.bankName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("99af"),a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z . ]*$/),m=["#","Bank","","Actions"],p=new Date,h={components:{},data:function(){return{columns:[{label:"Bank",field:"bank"},{label:"",field:"bankName"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,loadError:!1,bankTable:{title:"Banks Table",subTitle:"",columns:[].concat(m)},banksCount:0,currentPage:1,searchTerm:"",searching:!1,lastData:"",views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",newBank:"",newBankName:"",selectedBank:{id:"",bankUid:null,bank:"",bankName:""},banksUid:"",requestProcessing:!1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"Administrator"!=s[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getBanks();case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(d["b"])({users:"Users/users",banks:"Banks/banks",validationMessage:"Banks/validationMessage",errorMessage:"Banks/errorMessage"})),validations:{newBank:{required:l["required"],alphaNumCustomValidator:u},newBankName:{required:l["required"],alphaNumCustomValidator:u},selectedBank:{bank:{required:l["required"],alphaNumCustomValidator:u},bankName:{required:l["required"],alphaNumCustomValidator:u}}},methods:{getBanks:function(){var t=this;t.loading=!0,t.loadError=!1,t.$store.dispatch("Banks/getBanks",{limit:t.limit}),setTimeout((function(){t.loading=!1}),1e3)},addBank:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.requestProcessing=!1,a.$v.newBank.$touch(),a.$v.newBank.$error||a.$v.newBankName.$error||(a.requestProcessing=!0,a.$store.dispatch("Banks/checkBanks",{newBank:a.newBank}).then((function(){setTimeout((function(){if(1==a.validationMessage)a.bankInvalidMessage();else if(0==a.validationMessage){var t={bankUid:"",bank:Object(c["a"])(a.newBank),bankName:a.newBankName,createdBy:"",userReference:"",status:1,dateCreated:p,dateModified:p};a.$store.dispatch("Banks/saveBank",t).then((function(){a.requestProcessing=!1,0==a.errorMessage?(a.newBank="",a.newBankName="",a.$v.newBank.$reset(),a.$v.newBankName.$reset(),a.$bvModal.hide("new-bank-modal"),a.getBanks(),a.$swal({title:"Success",text:"New Bank added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.errorMessage&&a.bankErrorMessage()}))}}),1e3)})));case 4:case"end":return e.stop()}}),e)})))()},bankInvalidMessage:function(){var t=this;t.$swal({title:"Invalid",text:"Bank already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),t.requestProcessing=!1},bankErrorMessage:function(){var t=this;t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},openUpdateBankModal:function(t){this.selectedBank={id:t.id,bankUid:t.bankUid,bank:t.bank,bankName:t.bankName},this.$bvModal.show("update-bank-modal")},updateBank:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.requestProcessing=!0,a.$v.selectedBank.$touch(),a.$v.selectedBank.$error||a.$store.dispatch("Banks/checkUpdateBanks",a.selectedBank).then((function(){setTimeout((function(){1==a.validationMessage?a.bankInvalidMessage():0==a.validationMessage&&(a.selectedBank.bank=Object(c["a"])(a.selectedBank.bank),a.$store.dispatch("Banks/updateBanks",a.selectedBank).then((function(){a.requestProcessing=!1,0==a.errorMessage?(a.selectedBank={},a.$v.selectedBank.$reset(),a.$bvModal.hide("update-bank-modal"),a.requestProcessing=!1,a.$refs["bank-table"].reset(),a.getBanks(),a.$swal({title:"Success",text:"Bank updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.errorMessage&&a.bankErrorMessage()})))}),1e3)}));case 4:case"end":return e.stop()}}),e)})))()}}},f=h,b=(a("edbe"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,null,null);e["default"]=v.exports},"84ad":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Petty Cash No. "+t._s(t.pettyCash.pettyCashNumber))]),1==t.pettyCash.status?a("b",[t._v(" (Current)")]):t._e(),2==t.pettyCash.status?a("b",[t._v(" (Checked)")]):t._e(),3==t.pettyCash.status?a("b",[t._v(" (Processed)")]):t._e()])]),a("hr"),a("div",{staticClass:"row pl-4 pt-2"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Date:")]),t._v(" "+t._s(t._f("moment")(t.pettyCash.pettyCashDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Department:")]),t._v(" "+t._s(t.pettyCash.department)+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("To:")]),t._v(" "+t._s(t.pettyCash.name)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("From:")]),t._v(" "+t._s(t.pettyCash.from)+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount Received:")]),t._v(" ₱ "+t._s(t.pettyCash.amountReceive)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Total Petty Cash:")]),t._v(" "+t._s(""==t.pettyCash.totalPetty?"----------":"₱ "+t.pettyCash.totalPetty)+" ")])]),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Type:")]),t._v(" "+t._s(t.pettyCash.pettyType)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Received By:")]),t._v(" "+t._s(t.pettyCash.receivedBy)+" ")])]),a("div",{staticClass:"row pl-4"},[""!=t.pettyCash.checkReference?a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Check No.:")]),t._v(" "+t._s(t.pettyCash.checkNumber)+" ")]):t._e()]),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("CASH ON HAND:")]),t._v(" ₱ "+t._s(t.pettyCash.cashOnHand)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Liquidation Amount:")]),t._v(" ₱ "+t._s(t.liquidateAmount)+" ")])]),a("hr",{staticClass:"mt-2 mb-2"}),3==t.pettyCash.status?a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Prepared by:")]),t._v(" "+t._s(t.pettySignatory.prepared||t.preparedBy)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Checked by:")]),t._v(" "+t._s(t.pettySignatory.checked)+" ")])]):t._e(),3==t.pettyCash.status?a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Approved by:")]),t._v(" "+t._s(t.pettySignatory.approved)+" ")])]):t._e(),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"text-left pl-2"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[t._v("Liquidations")])]),a("div",{staticClass:"table-full-width pt-2"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.liquidationList,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["date"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.date,"MMM DD, YYYY")))])]):t._e(),"name"==e.column.field?a("span",t._l(t.employees,(function(s){return a("span",{key:s.userId},[s.userId==e.row.nameReference?a("span",[t._v(t._s(s.name))]):t._e()])})),0):t._e(),"particular"==e.column.field?a("span",[a("span",{attrs:{id:"particular"}},[t._v(t._s(e.row.particular))])]):t._e(),"amountReceived"==e.column.field?a("span",[a("span",{attrs:{id:"particular"}},[t._v("₱ "+t._s(e.row.amountReceived))])]):t._e(),"totalAmount"==e.column.field?a("span",[a("span",{attrs:{id:"particular"}},[t._v("₱ "+t._s(e.row.totalAmount))])]):t._e(),"returnAmount"==e.column.field?a("span",[a("span",{attrs:{id:"particular"}},[t._v("₱ "+t._s(e.row.returnAmount))])]):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return t.openAttachments(e.row)}}}),1==t.pettyCash.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateLiquidateModal(e.row)}}}):t._e(),1==t.pettyCash.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(a){return t.removeLiquidation(e.row)}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mt-2 mb-2"}),"Administrator"!=t.userRole?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-6"}),2!=t.pettyCash.status?a("div",{staticClass:"col-3"}):t._e(),2==t.pettyCash.status|3==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.printLiqui()}}},[t._v("Print")])],1):t._e(),a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.closePetty(e)}}},[t._v("Close")])],1)]):t._e(),"Administrator"==t.userRole?a("div",{staticClass:"row pl-4"},[3==t.pettyCash.status?a("div",{staticClass:"col-3"}):t._e(),1==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.openAddLiquidationModal()}}},[t._v("Add Liquidation")])],1):t._e(),1==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.openUpdatePettyModal(t.pettyCash)}}},[t._v("Update")])],1):t._e(),2==t.pettyCash.status|3==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.printLiqui()}}},[t._v("Print")])],1):t._e(),2==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.changeStatus(t.pettyCash,1)}}},[t._v("Current")])],1):t._e(),1==t.pettyCash.status||3==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.changeStatus(t.pettyCash,2)}}},[t._v("Checked")])],1):t._e(),2==t.pettyCash.status?a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.changeStatus(t.pettyCash,3)}}},[t._v("Processed")])],1):t._e(),a("div",{staticClass:"col-3"},[a("base-button",{attrs:{id:"darkBtn",block:""},nativeOn:{click:function(e){return t.closePetty(e)}}},[t._v("Close")])],1)]):t._e()]),3==t.pettyCash.status|2==t.pettyCash.status?a("div",{staticClass:"col-10",attrs:{id:"viewSummary"}},[a("card",{staticClass:"pl-4 pt-2 pb-5 shadow"},[a("div",{staticClass:"row",attrs:{id:"centerStyle"}},[a("span",{staticClass:"col-sm-12 text-center",attrs:{id:"particular"}},[a("b",[t._v(t._s(t.company.name))])])]),a("div",{staticClass:"row",attrs:{id:"centerStyle"}},[a("span",{staticClass:"col-sm-12 text-center",attrs:{id:"particular"}},[a("b",[t._v(t._s(t.company.address))])])]),a("div",{staticClass:"row pt-4 pb-2",attrs:{id:"headerStyle"}},[a("span",{staticClass:"col-sm-12 text-center"},[a("b",[t._v("Liquidation")]),a("br"),a("b",[t._v(t._s(t.pettyCash.department))])])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Petty Cash No.:")]),t._v(" "+t._s(t.pettyCash.pettyCashNumber)+" ")]),a("div",{staticClass:"col-sm-2"}),a("span",{staticClass:"col-sm-4"},[a("b",[t._v("Date:")]),t._v(" "+t._s(t._f("moment")(t.pettyCash.pettyCashDate,"MMMM DD, YYYY"))+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("To:")]),t._v(" "+t._s(t.pettyCash.name)+" ")]),a("div",{staticClass:"col-sm-2"}),a("span",{staticClass:"col-sm-4"},[a("b",[t._v("From:")]),t._v(" "+t._s(t.pettyCash.from)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Type:")]),t._v(" "+t._s(t.pettyCash.pettyType)+" ")]),a("div",{staticClass:"col-sm-2"}),""!=t.pettyCash.checkReference?a("span",{staticClass:"col-sm-4"},[a("b",[t._v("Check No.:")]),t._v(" "+t._s(t.pettyCash.checkNumber)+" ")]):t._e()]),a("div",{staticClass:"row"},[""!=t.pettyCash.receivedBy?a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Received By:")]),t._v(" "+t._s(t.pettyCash.receivedBy)+" ")]):t._e()]),a("hr",{staticClass:"mt-2"}),0!=t.liquidations.length?a("div",{staticClass:"row pb-0 text-center pl-4 pr-4",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-2",attrs:{id:"borderStyle"}},[a("span",[a("b",[t._v("Date")])])]),a("span",{staticClass:"col-sm-2",attrs:{id:"borderStyle"}},[a("span",[a("b",[t._v("Name")])])]),a("span",{staticClass:"col-sm-5",attrs:{id:"borderStyle"}},[a("span",[a("b",[t._v("Particular")])])]),a("span",{staticClass:"col-sm-3",attrs:{id:"borderStyle"}},[a("span",[a("b",[t._v("Total Amount")])])])]):t._e(),t._l(t.liquidations,(function(e){return a("div",{key:e.pettyLiquidationId,staticClass:"row pl-4 pr-4 text-center",attrs:{id:"particularStyle"}},[a("span",{staticClass:"col-sm-2",attrs:{id:"borderStyle"}},[a("span",[t._v(t._s(t._f("moment")(e.date,"MMM DD, YYYY")))])]),a("span",{staticClass:"col-sm-2",attrs:{id:"borderStyle"}},t._l(t.employees,(function(s){return a("span",{key:s.userId},[s.userId==e.nameReference?a("span",[t._v(t._s(s.name))]):t._e()])})),0),a("span",{staticClass:"col-sm-5",attrs:{id:"borderStyle"}},[a("span",[t._v(t._s(e.particular))])]),a("span",{staticClass:"col-sm-3",attrs:{id:"borderStyle"}},[a("span",[t._v("₱ "+t._s(e.totalAmount))])])])})),a("hr",{staticClass:"mt-4"}),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Total Petty Cash:")]),t._v(" ₱ "+t._s(t.pettyCash.totalPetty)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Total Liquidation:")]),t._v(" ₱ "+t._s(t.liquidateAmount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Balance:")]),t._v(" ₱ "+t._s(t.pettyCash.cashOnHand)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Total Requested Amount:")]),t._v(" ₱ "+t._s(t.totalRequestedAmount)+" ")])]),a("br"),a("br"),a("br"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[t._v(t._s(t.pettySignatory.prepared||t.preparedBy))])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Prepared by")])])]),a("br"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[t._v(t._s(t.pettySignatory.checked))])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Checked by")])])]),a("br"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[t._v(t._s(t.pettySignatory.approved))])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Approved by")])])]),a("br"),t.allAttachments.length>0?a("div",{staticClass:"pl-4 pt-4",attrs:{align:"center",id:"attachmentStyle"}},t._l(t.allAttachments,(function(e){return a("span",{key:e.name},[a("span",[t.allAttachments.length>1?a("img",{staticStyle:{width:"370px",height:"250px"},attrs:{src:e.url}}):t._e(),1==t.allAttachments.length?a("img",{staticStyle:{width:"740px",height:"250px"},attrs:{src:e.url}}):t._e()])])})),0):t._e()],2)],1):t._e()],1),a("b-modal",{attrs:{size:"xl",id:"update-petty-cash-modal",title:"Update Petty Cash",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.editPettyCash()}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-petty-cash-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Departments:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.pettyEdit.date,callback:function(e){t.$set(t.pettyEdit,"date",e)},expression:"pettyEdit.date"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.departments,reduce:function(t){return t.departmentUid},label:"departmentName",clearable:!1},on:{input:function(e){return t.getNames(t.pettyEdit.department,"edit")}},model:{value:t.pettyEdit.department,callback:function(e){t.$set(t.pettyEdit,"department",e)},expression:"pettyEdit.department"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.department.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("To:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("From:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[0!=t.names.length?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.names,reduce:function(t){return t.userId},label:"name",clearable:!1},model:{value:t.pettyEdit.to,callback:function(e){t.$set(t.pettyEdit,"to",e)},expression:"pettyEdit.to"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.to.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1):t._e(),0==t.names.length?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[t._v("No Employee")])]):t._e(),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"From",id:"inputStyle"},model:{value:t.pettyEdit.from,callback:function(e){t.$set(t.pettyEdit,"from",e)},expression:"pettyEdit.from"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.from.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.from.alphaCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount Received:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Total Petty Cash:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount Received",id:"inputStyle"},model:{value:t.pettyEdit.amount,callback:function(e){t.$set(t.pettyEdit,"amount",e)},expression:"pettyEdit.amount"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Petty Cash",id:"inputStyle"},model:{value:t.pettyEdit.totalPetty,callback:function(e){t.$set(t.pettyEdit,"totalPetty",e)},expression:"pettyEdit.totalPetty"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.totalPetty.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Received by:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.types,reduce:function(t){return t.typeId},label:"typeName",clearable:!1},model:{value:t.pettyEdit.type,callback:function(e){t.$set(t.pettyEdit,"type",e)},expression:"pettyEdit.type"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.type.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Received by",id:"inputStyle"},model:{value:t.pettyEdit.receivedBy,callback:function(e){t.$set(t.pettyEdit,"receivedBy",e)},expression:"pettyEdit.receivedBy"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.receivedBy.alphaCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},["check"==t.pettyEdit.type?a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Check No:")]),a("b",{staticClass:"text-red"},[t._v("*")])]):t._e()]),a("div",{staticClass:"form-group row mb-0"},["check"==t.pettyEdit.type?a("div",{staticClass:"col-sm-4 pl-5"},[a("base-input",{staticClass:"mb-0",attrs:{id:"inputStyle",type:"text",placeholder:"Check Number"},on:{input:t.clearCheck},model:{value:t.pettyEdit.checkNumber,callback:function(e){t.$set(t.pettyEdit,"checkNumber",e)},expression:"pettyEdit.checkNumber"}}),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.checkNumber.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.pettyEdit.$anyDirty&&!t.$v.pettyEdit.checkNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1):t._e(),"check"==t.pettyEdit.type?a("div",{staticClass:" col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.choose-check-number-modal",modifiers:{"choose-check-number-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:t.requestProcessing}},[t._v("Choose")])],1):t._e()])]),a("b-modal",{attrs:{size:"lg",id:"choose-check-number-modal",title:"Choose Check Number",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.chooseCheckNumber(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" OK ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("choose-check-number-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Bank Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Bank Account:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.banks,reduce:function(t){return t.bankUid},label:"bank",clearable:!1},on:{input:function(e){return t.getBankAccounts(t.bank)}},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}}),t.$v.bank.$anyDirty&&!t.$v.bank.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),""==t.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[t._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.bankAccounts,reduce:function(t){return t.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(e){return t.getCheckSeries(t.bank,t.bankAccount)}},model:{value:t.bankAccount,callback:function(e){t.bankAccount=e},expression:"bankAccount"}}),t.$v.bankAccount.$anyDirty&&!t.$v.bankAccount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Check Series:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Check Number:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[""==t.checkSeries||""==t.bankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[t._v("No Check Series")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{input:"inputStyle",options:t.checkSeries,reduce:function(t){return t.bankCheckSeriesUid},label:"bankCheckSeries",clearable:!1},on:{input:function(e){return t.getCheckNumber(t.bank,t.bankAccount,t.series,"used")}},model:{value:t.series,callback:function(e){t.series=e},expression:"series"}}),t.$v.series.$anyDirty&&!t.$v.series.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),""==t.checkSeries||""==t.bankAccounts||""==t.checkNumbers?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[t._v("No Check Number")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.checkNumbers,reduce:function(t){return t.checkNumber},label:"checkNumber",clearable:!1},model:{value:t.checkNumber,callback:function(e){t.checkNumber=e},expression:"checkNumber"}}),t.$v.checkNumber.$anyDirty&&!t.$v.checkNumber.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"xl",id:"add-liquidation-modal",title:"Add Liquidation",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[0!=t.itemList.length|0!=t.transList.length?a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addLiquidation(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]):t._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("add-liquidation-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[0!=t.employees.length?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.employees,reduce:function(t){return t.userId},label:"name",clearable:!1},model:{value:t.liquidate.name,callback:function(e){t.$set(t.liquidate,"name",e)},expression:"liquidate.name"}}),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.name.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1):t._e(),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.liquidate.date,callback:function(e){t.$set(t.liquidate,"date",e)},expression:"liquidate.date"}}),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount Received:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Total Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount Received",id:"inputStyle"},model:{value:t.liquidate.amountReceived,callback:function(e){t.$set(t.liquidate,"amountReceived",e)},expression:"liquidate.amountReceived"}}),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.amountReceived.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.amountReceived.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Amount",id:"inputStyle",disabled:""},model:{value:t.liquidate.totalAmount,callback:function(e){t.$set(t.liquidate,"totalAmount",e)},expression:"liquidate.totalAmount"}}),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.totalAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.totalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Return Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Return Amount",id:"inputStyle"},model:{value:t.liquidate.returnAmount,callback:function(e){t.$set(t.liquidate,"returnAmount",e)},expression:"liquidate.returnAmount"}}),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.returnAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.liquidate.$anyDirty&&!t.$v.liquidate.returnAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-2 pl-5"},[a("base-button",{attrs:{id:"darkBtn",block:"",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.openItemModal(t.liquidateDesc)}}},[t._v("Add Item")])],1),0!=t.descs.length?a("div",{staticClass:"col-sm-4 pl-2 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.descs,reduce:function(t){return t.liquidationDescId},label:"description",clearable:!1},model:{value:t.liquidateDesc,callback:function(e){t.liquidateDesc=e},expression:"liquidateDesc"}}),t.$v.liquidateDesc.$anyDirty&&!t.$v.liquidateDesc.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1):t._e()]),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[t._v("Particulars")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:t.loadError,title:t.itemsTable.title,"sub-title":t.itemsTable.subTitle,data:t.tbItems,columns:t.itemsTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.id))]),a("td",[t._v(t._s(t._f("moment")(s.date,"MMM DD, YYYY")))]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.particular))])]),a("td",[t._v("₱ "+t._s(s.amount))]),a("td",t._l(t.descs,(function(e){return a("span",{key:e.liquidationDescId},[e.liquidationDescId==s.desc?a("span",[t._v(t._s(e.description))]):t._e()])})),0),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.refNo))])]),a("td",{attrs:{align:"right"}},[""!=s.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(e){return t.removeItem(s)}}}):t._e()])]}}])})],1),t.itemList.length?a("hr"):t._e(),t.itemList.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.itemList[t.itemList.length-1].id)+" of "+t._s(t.itemsCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:t.itemList,totalPages:t.itemsCount,currentPage:t.currentItemPage},on:{pagechanged:t.onItemPageChange}})],1):t._e(),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[t._v("Transportations")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:t.loadError,title:t.transTable.title,"sub-title":t.transTable.subTitle,data:t.tbTrans,columns:t.transTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.id))]),a("td",[t._v(t._s(t._f("moment")(s.date,"MMM DD, YYYY")))]),a("td",[t._v("₱ "+t._s(s.amount))]),a("td",t._l(t.descs,(function(e){return a("span",{key:e.liquidationDescId},[e.liquidationDescId==s.desc?a("span",[t._v(t._s(e.description))]):t._e()])})),0),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.from))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.to))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.mode))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.purpose))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.refNo))])]),a("td",{attrs:{align:"right"}},[""!=s.rowNum?a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(e){return t.removeTrans(s)}}}):t._e()])]}}])})],1),t.transList.length?a("hr"):t._e(),t.transList.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.transList[t.transList.length-1].id)+" of "+t._s(t.transCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:t.transList,totalPages:t.transCount,currentPage:t.currentTransPage},on:{pagechanged:t.onTransPageChange}})],1):t._e()]),a("b-modal",{attrs:{size:"xl",id:"update-liquidation-modal",title:"Update Liquidation",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[0!=t.itemEditList.length|0!=t.transEditList.length?a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateLiquidation(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]):t._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-liquidation-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[0!=t.employees.length?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.employees,reduce:function(t){return t.userId},label:"name",clearable:!1},model:{value:t.editLiquidate.name,callback:function(e){t.$set(t.editLiquidate,"name",e)},expression:"editLiquidate.name"}}),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.name.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1):t._e(),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.editLiquidate.date,callback:function(e){t.$set(t.editLiquidate,"date",e)},expression:"editLiquidate.date"}}),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount Received:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Total Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount Received",id:"inputStyle"},model:{value:t.editLiquidate.amountReceived,callback:function(e){t.$set(t.editLiquidate,"amountReceived",e)},expression:"editLiquidate.amountReceived"}}),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.amountReceived.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.amountReceived.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Amount",id:"inputStyle",disabled:""},model:{value:t.editLiquidate.totalAmount,callback:function(e){t.$set(t.editLiquidate,"totalAmount",e)},expression:"editLiquidate.totalAmount"}}),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.totalAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.totalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Return Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Return Amount",id:"inputStyle"},model:{value:t.editLiquidate.returnAmount,callback:function(e){t.$set(t.editLiquidate,"returnAmount",e)},expression:"editLiquidate.returnAmount"}}),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.returnAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editLiquidate.$anyDirty&&!t.$v.editLiquidate.returnAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-2 pl-5"},[a("base-button",{attrs:{id:"darkBtn",block:"",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.editLiquiItemModal(t.liquidateDesc)}}},[t._v("Add Item")])],1),0!=t.descs.length?a("div",{staticClass:"col-sm-4 pl-2 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.descs,reduce:function(t){return t.liquidationDescId},label:"description",clearable:!1},model:{value:t.liquidateDesc,callback:function(e){t.liquidateDesc=e},expression:"liquidateDesc"}}),t.$v.liquidateDesc.$anyDirty&&!t.$v.liquidateDesc.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1):t._e()]),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[t._v("Particulars")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:t.loadError,title:t.itemsTable.title,"sub-title":t.itemsTable.subTitle,data:t.tbEditItems,columns:t.itemsTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.rowNum))]),a("td",[t._v(t._s(t._f("moment")(s.date,"MMM DD, YYYY")))]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.particular))])]),a("td",[t._v("₱ "+t._s(s.amount))]),a("td",t._l(t.descs,(function(e){return a("span",{key:e.liquidationDescId},[e.liquidationDescId==s.descriptionReference?a("span",[t._v(t._s(e.description))]):t._e()])})),0),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.referenceNumber))])]),a("td",{attrs:{align:"right"}},[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(e){return t.openUpdateItemModal(s)}}}),a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(e){return t.removeLiquidateItem(s)}}})])]}}])})],1),t.itemEditList.length?a("hr"):t._e(),t.itemEditList.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.itemEditList[t.itemEditList.length-1].rowNum)+" of "+t._s(t.itemsEditCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:t.itemEditList,totalPages:t.itemsEditCount,currentPage:t.currentItemEditPage},on:{pagechanged:t.onUpdateItemPageChange}})],1):t._e(),a("hr",{staticClass:"mb-1"}),a("div",{staticClass:"card-header bg-transparent pb-1"},[a("div",{staticClass:"text-left"},[a("h2",{staticClass:"display-5",attrs:{id:"sideBarTxt"}},[t._v("Transportations")])])]),a("div",{staticClass:"table-full-width pt-2"},[a("paper-table",{attrs:{type:"hover",loading:!1,loadError:t.loadError,title:t.transTable.title,"sub-title":t.transTable.subTitle,data:t.tbEditTrans,columns:t.transTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.rowNum))]),a("td",[t._v(t._s(t._f("moment")(s.date,"MMM DD, YYYY")))]),a("td",[t._v("₱ "+t._s(s.amount))]),a("td",t._l(t.descs,(function(e){return a("span",{key:e.liquidationDescId},[e.liquidationDescId==s.descriptionReference?a("span",[t._v(t._s(e.description))]):t._e()])})),0),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.from))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.to))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.transportationMode))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.purpose))])]),a("td",[a("span",{attrs:{id:"particular"}},[t._v(t._s(s.referenceNumber))])]),a("td",{attrs:{align:"right"}},[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(e){return t.openUpdateTransModal(s)}}}),a("span",{staticClass:"pointer ml-2 far fa-times-circle text-red",attrs:{title:"Remove"},on:{click:function(e){return t.removeLiquidateTrans(s)}}})])]}}])})],1),t.transEditList.length?a("hr"):t._e(),t.transEditList.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.transEditList[t.transEditList.length-1].rowNum)+" of "+t._s(t.transEditCount))])]),a("pagination",{attrs:{searching:!1,searchTotalPage:t.transEditList,totalPages:t.transEditCount,currentPage:t.currentTransEditPage},on:{pagechanged:t.onUpdateTransPageChange}})],1):t._e()]),a("b-modal",{attrs:{size:"lg",id:"add-item-modal",title:"Add Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addItem(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("add-item-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Particular:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.items.date,callback:function(e){t.$set(t.items,"date",e)},expression:"items.date"}}),t.$v.items.$anyDirty&&!t.$v.items.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Particular",id:"inputStyle"},model:{value:t.items.particular,callback:function(e){t.$set(t.items,"particular",e)},expression:"items.particular"}}),t.$v.items.$anyDirty&&!t.$v.items.particular.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.items.$anyDirty&&!t.$v.items.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference No.:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount",id:"inputStyle"},model:{value:t.items.amount,callback:function(e){t.$set(t.items,"amount",e)},expression:"items.amount"}}),t.$v.items.$anyDirty&&!t.$v.items.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.items.$anyDirty&&!t.$v.items.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Reference No.",id:"inputStyle"},model:{value:t.items.refNo,callback:function(e){t.$set(t.items,"refNo",e)},expression:"items.refNo"}}),t.$v.items.$anyDirty&&!t.$v.items.refNo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"liquidation-add-item-modal",title:"Add Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addLiquidateItem(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("liquidation-add-item-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Particular:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.addItems.date,callback:function(e){t.$set(t.addItems,"date",e)},expression:"addItems.date"}}),t.$v.addItems.$anyDirty&&!t.$v.addItems.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Particular",id:"inputStyle"},model:{value:t.addItems.particular,callback:function(e){t.$set(t.addItems,"particular",e)},expression:"addItems.particular"}}),t.$v.addItems.$anyDirty&&!t.$v.addItems.particular.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addItems.$anyDirty&&!t.$v.addItems.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference No.:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount",id:"inputStyle"},model:{value:t.addItems.amount,callback:function(e){t.$set(t.addItems,"amount",e)},expression:"addItems.amount"}}),t.$v.addItems.$anyDirty&&!t.$v.addItems.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addItems.$anyDirty&&!t.$v.addItems.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Reference No.",id:"inputStyle"},model:{value:t.addItems.refNo,callback:function(e){t.$set(t.addItems,"refNo",e)},expression:"addItems.refNo"}}),t.$v.addItems.$anyDirty&&!t.$v.addItems.refNo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"liquidation-edit-item-modal",title:"Edit Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.editLiquidateItem(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("liquidation-edit-item-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Particular:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.editItems.date,callback:function(e){t.$set(t.editItems,"date",e)},expression:"editItems.date"}}),t.$v.editItems.$anyDirty&&!t.$v.editItems.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Particular",id:"inputStyle"},model:{value:t.editItems.particular,callback:function(e){t.$set(t.editItems,"particular",e)},expression:"editItems.particular"}}),t.$v.editItems.$anyDirty&&!t.$v.editItems.particular.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editItems.$anyDirty&&!t.$v.editItems.particular.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference No.:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount",id:"inputStyle"},model:{value:t.editItems.amount,callback:function(e){t.$set(t.editItems,"amount",e)},expression:"editItems.amount"}}),t.$v.editItems.$anyDirty&&!t.$v.editItems.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editItems.$anyDirty&&!t.$v.editItems.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Reference No.",id:"inputStyle"},model:{value:t.editItems.refNo,callback:function(e){t.$set(t.editItems,"refNo",e)},expression:"editItems.refNo"}}),t.$v.editItems.$anyDirty&&!t.$v.editItems.refNo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"add-trans-modal",title:"Add Transportation",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addTrans(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("add-trans-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.trans.date,callback:function(e){t.$set(t.trans,"date",e)},expression:"trans.date"}}),t.$v.trans.$anyDirty&&!t.$v.trans.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount",id:"inputStyle"},model:{value:t.trans.amount,callback:function(e){t.$set(t.trans,"amount",e)},expression:"trans.amount"}}),t.$v.trans.$anyDirty&&!t.$v.trans.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.trans.$anyDirty&&!t.$v.trans.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transportation Mode:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Purpose:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Transportation Mode",id:"inputStyle"},model:{value:t.trans.mode,callback:function(e){t.$set(t.trans,"mode",e)},expression:"trans.mode"}}),t.$v.trans.$anyDirty&&!t.$v.trans.mode.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.trans.$anyDirty&&!t.$v.trans.mode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Purpose",id:"inputStyle"},model:{value:t.trans.purpose,callback:function(e){t.$set(t.trans,"purpose",e)},expression:"trans.purpose"}}),t.$v.trans.$anyDirty&&!t.$v.trans.purpose.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.trans.$anyDirty&&!t.$v.trans.purpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("From:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("To:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.trans.from,expression:"trans.from"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:t.trans.from},on:{input:function(e){e.target.composing||t.$set(t.trans,"from",e.target.value)}}}),t.$v.trans.$anyDirty&&!t.$v.trans.from.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.trans.$anyDirty&&!t.$v.trans.from.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.trans.to,expression:"trans.to"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:t.trans.to},on:{input:function(e){e.target.composing||t.$set(t.trans,"to",e.target.value)}}}),t.$v.trans.$anyDirty&&!t.$v.trans.to.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.trans.$anyDirty&&!t.$v.trans.to.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference No.:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Reference No.",id:"inputStyle"},model:{value:t.trans.refNo,callback:function(e){t.$set(t.trans,"refNo",e)},expression:"trans.refNo"}}),t.$v.trans.$anyDirty&&!t.$v.trans.refNo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"liquidation-add-trans-modal",title:"Add Transportation",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addLiquidateTrans(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("liquidation-add-trans-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.addTran.date,callback:function(e){t.$set(t.addTran,"date",e)},expression:"addTran.date"}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount",id:"inputStyle"},model:{value:t.addTran.amount,callback:function(e){t.$set(t.addTran,"amount",e)},expression:"addTran.amount"}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addTran.$anyDirty&&!t.$v.addTran.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transportation Mode:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Purpose:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Tranportation Mode",id:"inputStyle"},model:{value:t.addTran.mode,callback:function(e){t.$set(t.addTran,"mode",e)},expression:"addTran.mode"}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.mode.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addTran.$anyDirty&&!t.$v.addTran.mode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Purpose",id:"inputStyle"},model:{value:t.addTran.purpose,callback:function(e){t.$set(t.addTran,"purpose",e)},expression:"addTran.purpose"}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.purpose.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addTran.$anyDirty&&!t.$v.addTran.purpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("From:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("To:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addTran.from,expression:"addTran.from"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:t.addTran.from},on:{input:function(e){e.target.composing||t.$set(t.addTran,"from",e.target.value)}}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.from.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addTran.$anyDirty&&!t.$v.addTran.from.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addTran.to,expression:"addTran.to"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:t.addTran.to},on:{input:function(e){e.target.composing||t.$set(t.addTran,"to",e.target.value)}}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.to.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.addTran.$anyDirty&&!t.$v.addTran.to.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference No.:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Reference No.",id:"inputStyle"},model:{value:t.addTran.refNo,callback:function(e){t.$set(t.addTran,"refNo",e)},expression:"addTran.refNo"}}),t.$v.addTran.$anyDirty&&!t.$v.addTran.refNo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"liquidation-edit-trans-modal",title:"Edit Transportation",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.editLiquidateTrans(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("liquidation-edit-trans-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle",max:t.maxDate},model:{value:t.editTran.date,callback:function(e){t.$set(t.editTran,"date",e)},expression:"editTran.date"}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.date.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount",id:"inputStyle"},model:{value:t.editTran.amount,callback:function(e){t.$set(t.editTran,"amount",e)},expression:"editTran.amount"}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editTran.$anyDirty&&!t.$v.editTran.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transportation Mode:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Purpose:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Tranportation Mode",id:"inputStyle"},model:{value:t.editTran.mode,callback:function(e){t.$set(t.editTran,"mode",e)},expression:"editTran.mode"}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.mode.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editTran.$anyDirty&&!t.$v.editTran.mode.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Purpose",id:"inputStyle"},model:{value:t.editTran.purpose,callback:function(e){t.$set(t.editTran,"purpose",e)},expression:"editTran.purpose"}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.purpose.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editTran.$anyDirty&&!t.$v.editTran.purpose.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("From:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("To:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editTran.from,expression:"editTran.from"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"From"},domProps:{value:t.editTran.from},on:{input:function(e){e.target.composing||t.$set(t.editTran,"from",e.target.value)}}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.from.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editTran.$anyDirty&&!t.$v.editTran.from.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()]),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editTran.to,expression:"editTran.to"}],attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"To"},domProps:{value:t.editTran.to},on:{input:function(e){e.target.composing||t.$set(t.editTran,"to",e.target.value)}}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.to.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editTran.$anyDirty&&!t.$v.editTran.to.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Reference No.:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Reference No.",id:"inputStyle"},model:{value:t.editTran.refNo,callback:function(e){t.$set(t.editTran,"refNo",e)},expression:"editTran.refNo"}}),t.$v.editTran.$anyDirty&&!t.$v.editTran.refNo.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[1==t.pettyCash.status?a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addAttachments()}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add Attachment ")]):t._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("attachment-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.previewImage}}),t.loadAttachment?a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12 text-center"},[a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}})],1)])]):t._e(),t.attachments.length>0&&!t.loadAttachment?a("card",{attrs:{shadow:""}},[t.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},t._l(t.attachments,(function(e){return a("span",{key:e.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[1==t.pettyCash.status?a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return t.removeAttachment(e.name)}}}):t._e()]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:e.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:e.url}})])])])])})),0):t._e()]):t._e(),0!=t.attachments.length||t.loadAttachment?t._e():a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("h2",{staticClass:"text-center"},[t._v("NO ATTACHMENT")])])])])],1)],1)},n=[],i=(a("a4d3"),a("e01a"),a("99af"),a("4160"),a("a434"),a("b0c0"),a("b680"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("7ff6"),l=a("c6f8"),c=a("b5ae"),d=a("4627"),u=a("add5"),m=a.n(u),p=c["helpers"].regex("alphaNumAndDot",/^[ 0-9 ,. ]*$/),h=c["helpers"].regex("alphaNumAndDot",/^[ -.A-Za-z ]*$/),f=c["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),b=c["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),v=["#","Date","Particular","Amount","Description","Reference No.","Actions"],C=["#","Date","Amount","Description","From","To","Mode","Purpose","Reference No.","Actions"],y=["#","Date","Name","Amount Received","Total Amount","Return Amount","Actions"],g=a("c1df"),w=new Date,_=a("e966"),x=_.bindWith(",","."),k=a("9f25"),D={components:{},data:function(){return{columns:[{label:"Date",field:"date"},{label:"Name",field:"name",width:"150px"},{label:"Particular",field:"particular",width:"150px"},{label:"Amount Received",field:"amountReceived"},{label:"Total Amount",field:"totalAmount"},{label:"Return Amount",field:"returnAmount"},{label:"",field:"action",sortable:!1,width:"100px"}],pettyCash:[],maxDate:g().format("YYYY-MM-DD"),departments:[],names:[],types:[{typeId:"cash",typeName:"Cash"},{typeId:"check",typeName:"Check"}],pettyEdit:{id:"",pettyId:"",date:"",department:"",to:"",from:"",amount:"",totalPetty:"",type:"",receivedBy:"",checkNumber:"",checkReference:""},requestProcessing:!1,banks:[],bank:"",bankAccounts:[],bankAccount:"",checkSeries:[],series:"",checkNumbers:[],checkNumber:"",employees:[],liquidate:{name:"",date:g().format("YYYY-MM-DD"),amountReceived:"",totalAmount:"",returnAmount:""},descs:[],liquidateDesc:"",items:{date:g().format("YYYY-MM-DD"),particular:"",amount:"",refNo:"",desc:""},itemList:[],itemEditList:[],trans:{date:g().format("YYYY-MM-DD"),amount:"",mode:"",purpose:"",from:"",to:"",refNo:""},transList:[],transEditList:[],tbItems:[],tbEditItems:[],loading:!0,loadError:!1,itemsTable:{title:"Items Table",subTitle:"",columns:[].concat(v)},itemsCount:0,itemsEditCount:0,currentItemPage:1,currentItemEditPage:1,tbTrans:[],tbEditTrans:[],transTable:{title:"Transportation Table",subTitle:"",columns:[].concat(C)},transCount:0,transEditCount:0,currentTransPage:1,currentTransEditPage:1,totalItemAmount:0,totalTransAmount:0,liquidations:[],liquidationList:[],liquidateTable:{title:"Liquidations Table",subTitle:"",columns:[].concat(y)},liquidateCount:0,currentLiquidatePage:1,liquidateAmount:"",editLiquidate:{name:"",date:"",amountReceived:"",totalAmount:"",returnAmount:""},addItems:{date:g().format("YYYY-MM-DD"),particular:"",amount:"",refNo:"",desc:""},addTran:{date:g().format("YYYY-MM-DD"),amount:"",mode:"",purpose:"",from:"",to:"",refNo:"",desc:""},editItems:{id:"",itemID:"",date:g().format("YYYY-MM-DD"),particular:"",amount:"",refNo:"",desc:""},oldAmount:"",editTran:{id:"",tranId:"",date:g().format("YYYY-MM-DD"),amount:"",mode:"",purpose:"",from:"",to:"",refNo:"",desc:""},attachment:"",attachmentData:null,attachments:[],attachId:"",uploadValue:0,allAttachments:[],loadAttachment:!0,company:{name:"",address:""},user:{firstname:"",lastname:""},userRole:"",totalRequestedAmount:0,preparedBy:"",pettySignatory:{prepared:"",checked:"",approved:""}}},validations:{pettyEdit:{date:{required:c["required"]},department:{required:c["required"]},to:{required:c["required"]},from:{required:c["required"],alphaCustomValidator:h},amount:{required:c["required"],amountCustomValidator:p},totalPetty:{amountCustomValidator:p},type:{required:c["required"]},receivedBy:{alphaCustomValidator:h},checkNumber:{required:c["required"],numCustomValidator:b}},bank:{required:c["required"]},bankAccount:{required:c["required"]},series:{required:c["required"]},checkNumber:{required:c["required"]},liquidate:{name:{required:c["required"]},date:{required:c["required"]},amountReceived:{required:c["required"],amountCustomValidator:p},totalAmount:{required:c["required"],amountCustomValidator:p},returnAmount:{required:c["required"],amountCustomValidator:p}},liquidateDesc:{required:c["required"]},items:{date:{required:c["required"]},particular:{required:c["required"],alphaNumCustomValidator:f},amount:{required:c["required"],amountCustomValidator:p},refNo:{alphaNumCustomValidator:f}},trans:{date:{required:c["required"]},amount:{required:c["required"],amountCustomValidator:p},mode:{required:c["required"],alphaNumCustomValidator:f},purpose:{required:c["required"],alphaNumCustomValidator:f},from:{required:c["required"],alphaNumCustomValidator:f},to:{required:c["required"],alphaNumCustomValidator:f},refNo:{alphaNumCustomValidator:f}},editLiquidate:{name:{required:c["required"]},date:{required:c["required"]},amountReceived:{required:c["required"],amountCustomValidator:p},totalAmount:{required:c["required"],amountCustomValidator:p},returnAmount:{required:c["required"],amountCustomValidator:p}},addItems:{date:{required:c["required"]},particular:{required:c["required"],alphaNumCustomValidator:f},amount:{required:c["required"],amountCustomValidator:p},refNo:{alphaNumCustomValidator:f}},addTran:{date:{required:c["required"]},amount:{required:c["required"],amountCustomValidator:p},mode:{required:c["required"],alphaNumCustomValidator:f},purpose:{required:c["required"],alphaNumCustomValidator:f},from:{required:c["required"],alphaNumCustomValidator:f},to:{required:c["required"],alphaNumCustomValidator:f},refNo:{alphaNumCustomValidator:f}},editItems:{date:{required:c["required"]},particular:{required:c["required"],alphaNumCustomValidator:f},amount:{required:c["required"],amountCustomValidator:p},refNo:{alphaNumCustomValidator:f}},editTran:{date:{required:c["required"]},amount:{required:c["required"],amountCustomValidator:p},mode:{required:c["required"],alphaNumCustomValidator:f},purpose:{required:c["required"],alphaNumCustomValidator:f},from:{required:c["required"],alphaNumCustomValidator:f},to:{required:c["required"],alphaNumCustomValidator:f},refNo:{alphaNumCustomValidator:f}}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole();case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getPettyCash(),t.getLiquidations(1,"list"),t.getEmployees(),t.getCompany(),t.getUser(localStorage.getItem("aisname"));case 5:case"end":return e.stop()}}),e)})))()},methods:{getSignatory:function(){var t=this,e=r["dbMains"].collection("printSignatoryTypes").where("type","==",Object(o["a"])("Petty Cash")),a="";e.get().then((function(e){if(!e.empty){e.forEach((function(t){a=t.data().printSignatoryId}));var s=r["dbMains"].collection("printSignatories").where("signatoryTypeReference","==",a).orderBy("orderNumber","asc"),n=[],i=[],o=[];s.get().then((function(e){if(!e.empty){e.forEach((function(t){n.push(t.data()),i.push(t.id)}));for(var a=0;a<n.length;a++)n[a]["rowNum"]=a+1,n[a]["id"]=i[a],o.push(n[a]);t.pettySignatory={prepared:o[0].name,checked:o[1].name,approved:o[2].name}}}))}}))},closePetty:function(){this.$router.push("/petty/cash")},getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname"),t.accountName=t.username.toUpperCase();var e=r["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())}));var s=r["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},getPettyCash:function(){var t=this,e="",a="",s="",n="",i=r["dbExpense"].collection("pettyCash").where("pettyCashId","==",this.$router.currentRoute.params.id);t.pettyCash=[],t.allAttachments=[],t.getSignatory(),i.get().then((function(i){i.forEach((function(a){t.pettyCash.push(a.data()),e=a.id}));var o=r["dbUsers"].collection("departments").where("departmentUid","==",t.pettyCash[0].departmentReference),c=r["dbUsers"].collection("users").where("userId","==",t.pettyCash[0].nameToReference),d=r["db"].collection("bankChecks").where("bankCheckUid","==",t.pettyCash[0].checkReference);o.get().then((function(i){i.forEach((function(t){a=t.data().departmentName})),c.get().then((function(i){i.forEach((function(t){s=t.data().firstname+" "+t.data().lastname})),d.get().then((function(i){i.forEach((function(t){n=t.data().bankCheckNumber})),t.pettyCash[0]["id"]=e,t.pettyCash[0]["department"]=a,t.pettyCash[0]["name"]=s,t.pettyCash[0]["pettyType"]=Object(l["a"])(t.pettyCash[0].type),t.pettyCash[0]["checkNumber"]=n,t.totalRequestedAmount=parseFloat(2e3)-parseFloat(t.pettyCash[0].cashOnHand),t.pettyCash[0].amountReceive=x(parseFloat(t.pettyCash[0].amountReceive)),t.totalRequestedAmount=x(t.totalRequestedAmount),""!=t.pettyCash[0].totalPetty&&(t.pettyCash[0].totalPetty=x(parseFloat(t.pettyCash[0].totalPetty).toFixed(2))),t.pettyCash[0].cashOnHand=x(parseFloat(t.pettyCash[0].cashOnHand).toFixed(2)),t.pettyCash=t.pettyCash[0]}))}))}))}))},getDepartments:function(){var t=this,e=r["dbUsers"].collection("departments").orderBy("departmentName","asc");t.departments=[],e.get().then((function(e){e.forEach((function(e){t.departments.push(e.data())}))}))},getNames:function(t,e){var a=this,s=r["dbUsers"].collection("users").where("status","==",1).where("departmentReference","==",t).orderBy("lastname","asc");a.names=[],s.get().then((function(t){t.forEach((function(t){a.names.push(t.data())}));for(var s=0;s<a.names.length;s++)a.names[s]["name"]=a.names[s].lastname+", "+a.names[s].firstname;"edit"==e&&(a.pettyEdit.to=a.names[0].userId)}))},clearCheck:function(){this.pettyEdit.checkReference=""},openUpdatePettyModal:function(t){this.getDepartments(),this.getNames(t.departmentReference,"load"),this.getBanks(),this.pettyEdit={id:t.id,pettyId:t.pettyCashId,date:t.pettyCashDate,department:t.departmentReference,from:t.from,to:t.nameToReference,amount:t.amountReceive,totalPetty:t.totalPetty,type:t.type,receivedBy:t.receivedBy,checkNumber:t.checkNumber,checkReference:t.checkReference},this.$bvModal.show("update-petty-cash-modal")},getBanks:function(){var t=this,e=r["dbMains"].collection("banks").orderBy("bank","asc");t.banks=[],e.get().then((function(e){e.forEach((function(e){t.banks.push(e.data())})),t.bank=t.banks[0].bankUid,t.getBankAccounts(t.banks[0].bankUid)}))},getBankAccounts:function(t){var e=this,a=r["dbMains"].collection("bankAccounts").where("bankReference","==",t).orderBy("bankAccountNumber","asc");e.bankAccounts=[],a.get().then((function(t){t.forEach((function(t){e.bankAccounts.push(t.data())})),e.bankAccount=e.bankAccounts[0].bankAccountUid,e.getCheckSeries(e.bank,e.bankAccount)}))},getCheckSeries:function(t,e){var a=this,s=r["dbMains"].collection("bankCheckSeries").where("bankReference","==",t).where("bankAccountReference","==",e).orderBy("bankCheckSeries","asc");a.checkSeries=[],s.get().then((function(t){t.forEach((function(t){a.checkSeries.push(t.data())})),a.series=a.checkSeries[0].bankCheckSeriesUid,a.getCheckNumber(a.bank,a.bankAccount,a.series,"used")}))},getCheckNumber:function(t,e,a,s){var n=this,i=r["db"].collection("bankCheckSeriesReports").where("bankReference","==",t).where("bankAccountReference","==",e).where("checkSeriesReference","==",a).where("status","==",s).orderBy("checkNumber","asc");n.checkNumbers=[],n.checkNumber="",i.get().then((function(t){t.forEach((function(t){t.exists&&n.checkNumbers.push(t.data())})),0!=n.checkNumbers.length&&(n.checkNumber=n.checkNumbers[0].checkNumber)}))},chooseCheckNumber:function(){var t=this;t.pettyEdit.checkNumber=t.checkNumber;for(var e=0;e<t.checkNumbers.length;e++)t.checkNumber==t.checkNumbers[e].checkNumber&&(t.pettyEdit.checkReference=t.checkNumbers[e].checkReference);t.$bvModal.hide("choose-check-number-modal")},editPettyCash:function(){var t=this,e=!0;if(t.$v.pettyEdit.$touch(),"check"==t.pettyEdit.type?t.$v.pettyEdit.$error||(e=!1):"cash"==t.pettyEdit.type&&(t.$v.pettyEdit.date.$error||t.$v.pettyEdit.department.$error||t.$v.pettyEdit.to.$error||t.$v.pettyEdit.from.$error||t.$v.pettyEdit.amount.$error||!t.$v.pettyEdit.totalPetty||(e=!1,t.pettyEdit.checkReference="")),!e){t.requestProcessing=!0;try{r["dbExpense"].collection("pettyCash").doc(t.pettyEdit.id).update({pettyCashDate:t.pettyEdit.date,amountReceive:t.pettyEdit.amount.replaceAll(",",""),totalPetty:t.pettyEdit.totalPetty.replaceAll(",",""),cashOnHand:t.pettyEdit.amount.replaceAll(",",""),type:t.pettyEdit.type,departmentReference:t.pettyEdit.department,nameToReference:t.pettyEdit.to,from:t.pettyEdit.from,receivedBy:t.pettyEdit.receivedBy,checkReference:t.pettyEdit.checkReference,dateModified:w}).then((function(){t.$swal({title:"Success",text:"Petty cash updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$v.pettyEdit.$reset(),t.$bvModal.hide("update-petty-cash-modal"),t.getLiquidations(1,"change"),t.requestProcessing=!1}))}))}catch(a){console.log(a),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},getEmployees:function(){var t=this,e=r["dbUsers"].collection("users").where("status","==",1).orderBy("lastname","asc");t.employees=[],e.get().then((function(e){e.forEach((function(e){t.employees.push(e.data())}));for(var a=0;a<t.employees.length;a++)t.employees[a]["name"]=t.employees[a].lastname+", "+t.employees[a].firstname;t.liquidate.name=t.employees[0].userId}))},openAddLiquidationModal:function(){this.getEmployees(),this.getDescriptions(),this.$bvModal.show("add-liquidation-modal"),this.getItems(1),this.getTrans(1),this.getTotalAmount()},getDescriptions:function(){var t=this,e=r["dbMains"].collection("liquidationDescriptions").where("status","==",1).orderBy("description","asc");t.descs=[],e.get().then((function(e){e.forEach((function(e){t.descs.push(e.data())})),t.liquidateDesc=t.descs[0].liquidationDescId}))},openItemModal:function(t){var e=this,a=r["dbMains"].collection("liquidationDescriptions").where("liquidationDescId","==",t),s=[];a.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"TRANSPORTATION"==s[0].description||"TRANSPORTATIONS"==s[0].description?e.$bvModal.show("add-trans-modal"):e.$bvModal.show("add-item-modal")}))},addItem:function(){var t=this;if(t.$v.items.$touch(),!t.$v.items.$error){t.requestProcessing=!0,0==t.itemList.length&&(t.itemList=[]);var e={id:t.itemList.length+1,date:t.items.date,particular:t.items.particular,amount:x(parseFloat(t.items.amount.replaceAll(",","")).toFixed(2)),refNo:t.items.refNo,desc:t.liquidateDesc};t.itemList.push(e),t.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.items.date=g().format("YYYY-MM-DD"),t.items.particular="",t.items.amount="",t.items.refNo="",t.$v.items.$reset(),t.$bvModal.hide("add-item-modal"),t.getItems(1)})),t.requestProcessing=!1}},addTrans:function(){var t=this;if(t.$v.trans.$touch(),!t.$v.trans.$error){t.requestProcessing=!0,0==t.transList.length&&(t.transList=[]);var e={id:t.transList.length+1,date:t.trans.date,amount:x(parseFloat(t.trans.amount.replaceAll(",","")).toFixed(2)),mode:t.trans.mode,purpose:t.trans.purpose,from:t.trans.from,to:t.trans.to,refNo:t.trans.refNo,desc:t.liquidateDesc};t.transList.push(e),t.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.trans.date=g().format("YYYY-MM-DD"),t.trans.amount="",t.trans.mode="",t.trans.purpose="",t.trans.from="",t.trans.to="",t.trans.refNo="",t.$v.trans.$reset(),t.$bvModal.hide("add-trans-modal"),t.getTrans(1)})),t.requestProcessing=!1}},getItems:function(t){var e=this,a=10*(t-1),s=10*t,n=0;e.tbItems=[],e.totalItemAmount=0;for(var i=a;i<s;i++)e.itemList[i]&&e.tbItems.push(e.itemList[i]);for(var r=0;r<e.itemList.length;r++)n+=parseFloat(e.itemList[r].amount.replaceAll(",",""));e.itemList.length>0&&(e.totalItemAmount=n),e.itemsCount=e.itemList.length,e.currentItemPage=t,e.getTotalAmount()},onItemPageChange:function(t){this.getItems(t)},getTrans:function(t){var e=this,a=10*(t-1),s=10*t,n=0;e.tbTrans=[],e.totalTransAmount=0;for(var i=a;i<s;i++)e.transList[i]&&e.tbTrans.push(e.transList[i]);for(var r=0;r<e.transList.length;r++)n+=parseFloat(e.transList[r].amount.replaceAll(",",""));e.transList.length>0&&(e.totalTransAmount=n),e.transCount=e.transList.length,e.currentTransPage=t,e.getTotalAmount()},onTransPageChange:function(t){this.getTrans(t)},removeItem:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var s=parseInt(t.rowNum)-1;e.itemList.splice(s,1),e.$swal({title:"Success",text:"Particular removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var t=0;t<e.itemList.length;t++)e.itemList[t].id=t+1;e.getItems(1)}))}}))},removeTrans:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this transportation",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var s=parseInt(t.rowNum)-1;e.transList.splice(s,1),e.$swal({title:"Success",text:"Transportation removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){for(var t=0;t<e.transList.length;t++)e.transList[t].id=t+1;e.getTrans(1)}))}}))},getTotalAmount:function(){var t=this,e=0,a=t.totalItemAmount,s=t.totalTransAmount;t.liquidate.totalAmount=0,e=parseFloat(a)+parseFloat(s),t.liquidate.totalAmount=x(parseFloat(e).toFixed(2))},addLiquidation:function(){var t=this;if(t.$v.liquidate.$touch(),!t.$v.liquidate.$error){t.requestProcessing=!0;try{var e=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[];e.get().then((function(e){e.forEach((function(t){a.push(t.data())}));var s="PLI-"+w.getFullYear()+k(w.getMonth()+1,2)+w.getDate()+"-"+Math.floor(1e6*Math.random());r["dbExpense"].collection("pettyLiquidation").doc().set({pettyLiquidationId:s,date:t.liquidate.date,amountReceived:t.liquidate.amountReceived,totalAmount:t.liquidate.totalAmount,returnAmount:t.liquidate.returnAmount,nameReference:t.liquidate.name,pettyCashReference:t.$router.currentRoute.params.id,status:1,userReference:a[0].userId,dateCreated:w,dateModified:w}).then((function(){if(0!=t.itemList.length)for(var e=0;e<t.itemList.length;e++){var n="PLI-"+w.getFullYear()+k(w.getMonth()+1,2)+w.getDate()+"-"+Math.floor(1e6*Math.random());r["dbExpense"].collection("pettyLiquidationItems").doc().set({liquidationItemId:n,date:t.itemList[e].date,amount:t.itemList[e].amount,particular:t.itemList[e].particular,referenceNumber:t.itemList[e].refNo,pettyLiquidationReference:s,descriptionReference:t.itemList[e].desc,status:1,userReference:a[0].userId,dateCreated:w,dateModified:w})}if(0!=t.transList.length)for(var i=0;i<t.transList.length;i++){var o="PLI-"+w.getFullYear()+k(w.getMonth()+1,2)+w.getDate()+"-"+Math.floor(1e6*Math.random());r["dbExpense"].collection("pettyLiquidationItems").doc().set({liquidationItemId:o,date:t.transList[i].date,amount:t.transList[i].amount,from:t.transList[i].from,to:t.transList[i].to,transportationMode:t.transList[i].mode,purpose:t.transList[i].purpose,referenceNumber:t.transList[i].refNo,pettyLiquidationReference:s,descriptionReference:t.transList[i].desc,status:1,userReference:a[0].userId,dateCreated:w,dateModified:w})}t.liquidate.name="",t.liquidate.date="",t.liquidate.amountReceived="",t.liquidate.totalAmount="",t.liquidate.returnAmount="",t.itemList=[],t.transList=[],t.$v.liquidate.$reset(),t.requestProcessing=!1,t.$swal({title:"Success",text:"New Liquidation added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$bvModal.hide("add-liquidation-modal"),t.getLiquidations(1,"change")}))}))}))}catch(s){console.log(s),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},getAllAttachments:function(t){var e=this,a=0,s=r["expenseStorage"].ref("pettyCashFiles/"+t);e.requestProcessing=!0,s.listAll().then((function(s){s.items.forEach((function(s){r["expenseStorage"].ref("pettyCashFiles/"+t+"/"+s.name).getDownloadURL().then((function(t){a+=1,e.allAttachments.push({rowNum:a,name:s.name,url:t,path:s.fullPath,status:1})}))}))})).catch((function(t){console.log(t)})),setTimeout((function(){e.requestProcessing=!1}),2e3)},getLiquidations:function(t,e){var a=this,s=r["dbExpense"].collection("pettyLiquidation").where("pettyCashReference","==",a.$router.currentRoute.params.id).orderBy("date","asc"),n=null,i=0,o=[],l=0,c=[],d="";a.liquidations=[],a.liquidationList=[],a.loading=!0,s.get().then((function(s){s.forEach((function(t){a.liquidations.push(t.data()),c.push(t.id)}));for(var u=function(t){a.liquidations[t]["rowNum"]=t+1,a.liquidations[t]["id"]=c[t],a.liquidations[t]["particular"]="",a.liquidations[t].amountReceived=x(parseFloat(a.liquidations[t].amountReceived).toFixed(2)),a.liquidations[t].totalAmount=x(parseFloat(a.liquidations[t].totalAmount).toFixed(2)),a.liquidations[t].returnAmount=x(parseFloat(a.liquidations[t].returnAmount).toFixed(2)),i=parseFloat(i)+parseFloat(a.liquidations[t].totalAmount.replaceAll(",",""));var e=r["dbExpense"].collection("pettyLiquidationItems").where("pettyLiquidationReference","==",a.liquidations[t].pettyLiquidationId),s=0;e.get().then((function(e){e.forEach((function(e){s++,s<=1?void 0!=e.data().particular?a.liquidations[t].particular=e.data().particular:void 0==e.data().particular&&(a.liquidations[t].particular="Transpo: "+e.data().purpose):s>1&&(void 0!=e.data().particular?a.liquidations[t].particular+=", "+e.data().particular:void 0==e.data().particular&&(a.liquidations[t].particular+=", Transpo: "+e.data().purpose))})),a.liquidationList.push(a.liquidations[t]),a.getAllAttachments(a.liquidations[t].pettyLiquidationId)}))},m=0;m<a.liquidations.length;m++)u(m);"change"==e&&(n=r["dbExpense"].collection("pettyCash").where("pettyCashId","==",a.$router.currentRoute.params.id),n.get().then((function(t){t.forEach((function(t){o.push(t.data()),d=t.id})),""==o[0].totalPetty?a.liquidateAmount.replaceAll(",","")<=parseFloat(o[0].amountReceive.replaceAll(",",""))?l=parseFloat(o[0].amountReceive.replaceAll(",",""))-a.liquidateAmount.replaceAll(",",""):a.liquidateAmount.replaceAll(",","")>parseFloat(o[0].amountReceive.replaceAll(",",""))&&(l=0):""!=o[0].totalPetty&&(a.liquidateAmount.replaceAll(",","")<=parseFloat(o[0].totalPetty.replaceAll(",",""))?l=parseFloat(o[0].totalPetty.replaceAll(",",""))-a.liquidateAmount.replaceAll(",",""):a.liquidateAmount.replaceAll(",","")>parseFloat(o[0].totalPetty.replaceAll(",",""))&&(l=0)),r["dbExpense"].collection("pettyCash").doc(d).update({cashOnHand:parseFloat(l).toFixed(2),dateModified:w}).then((function(){a.getPettyCash()}))}))),a.liquidateAmount=x(parseFloat(i).toFixed(2)),a.liquidateCount=a.liquidations.length,a.currentLiquidatePage=t,setTimeout((function(){a.loading=!1}),1e3)}))},onLiquidatePageChange:function(t){this.getLiquidations(t,"list")},openUpdateLiquidateModal:function(t){this.getEmployees(),this.getDescriptions(),this.editLiquidate={id:t.id,liquidationId:t.pettyLiquidationId,date:t.date,amountReceived:t.amountReceived,totalAmount:t.totalAmount,returnAmount:t.returnAmount,name:t.nameReference},this.$bvModal.show("update-liquidation-modal"),this.getUpdateItems(1),this.getUpdateTrans(1)},getUpdateItems:function(t){var e=this,a=10*(t-1),s=10*t,n=0,i=[],o=[],l=[],c=r["dbExpense"].collection("pettyLiquidationItems").where("pettyLiquidationReference","==",e.editLiquidate.liquidationId),d=r["dbMains"].collection("liquidationDescriptions").orderBy("description","asc");e.tbEditItems=[],e.totalItemAmount=0,e.itemEditList=[],c.get().then((function(r){r.forEach((function(t){l.push(t.data()),i.push(t.id)})),d.get().then((function(r){r.forEach((function(t){o.push(t.data())}));for(var c=0;c<l.length;c++){l[c]["id"]=i[c];for(var d=0;d<o.length;d++)l[c].descriptionReference==o[d].liquidationDescId&&"TRANSPORTATION"!=o[d].description&&e.itemEditList.push(l[c])}for(var u=0;u<e.itemEditList.length;u++)e.itemEditList[u]["rowNum"]=u+1,n+=parseFloat(e.itemEditList[u].amount.replaceAll(",","")),e.itemEditList[u].amount=x(parseFloat(e.itemEditList[u].amount).toFixed(2));for(var m=a;m<s;m++)e.itemEditList[m]&&e.tbEditItems.push(e.itemEditList[m]);e.itemEditList.length>0&&(e.totalItemAmount=n),e.itemsEditCount=e.itemEditList.length,e.currentItemEditPage=t}))}))},onUpdateItemPageChange:function(t){this.getUpdateItems(t)},getUpdateTrans:function(t){var e=this,a=10*(t-1),s=10*t,n=0,i=[],o=[],l=[],c=r["dbExpense"].collection("pettyLiquidationItems").where("pettyLiquidationReference","==",e.editLiquidate.liquidationId),d=r["dbMains"].collection("liquidationDescriptions").orderBy("description","asc");e.tbEditTrans=[],e.totalTransAmount=0,e.transEditList=[],c.get().then((function(r){r.forEach((function(t){l.push(t.data()),i.push(t.id)})),d.get().then((function(r){r.forEach((function(t){o.push(t.data())}));for(var c=0;c<l.length;c++){l[c]["id"]=i[c];for(var d=0;d<o.length;d++)l[c].descriptionReference==o[d].liquidationDescId&&"TRANSPORTATION"==o[d].description&&e.transEditList.push(l[c])}for(var u=0;u<e.transEditList.length;u++)e.transEditList[u]["rowNum"]=u+1,n+=parseFloat(e.transEditList[u].amount.replaceAll(",","")),e.transEditList[u].amount=x(parseFloat(e.transEditList[u].amount).toFixed(2));for(var m=a;m<s;m++)e.transEditList[m]&&e.tbEditTrans.push(e.transEditList[m]);e.transEditList.length>0&&(e.totalTransAmount=n),e.transEditCount=e.transEditList.length,e.currentTransEditPage=t}))}))},onUpdateTransPageChange:function(t){this.getUpdateTrans(t)},editLiquiItemModal:function(t){var e=this,a=r["dbMains"].collection("liquidationDescriptions").where("liquidationDescId","==",t),s=[];a.get().then((function(a){a.forEach((function(t){s.push(t.data())})),"TRANSPORTATION"==s[0].description||"TRANSPORTATIONS"==s[0].description?(e.addTran.desc=t,e.$bvModal.show("liquidation-add-trans-modal")):(e.addItems.desc=t,e.$bvModal.show("liquidation-add-item-modal"))}))},addLiquidateItem:function(){var t=this;if(t.$v.addItems.$touch(),!t.$v.addItems.$error){t.requestProcessing=!0;try{var e=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a="PLI-"+w.getFullYear()+k(w.getMonth()+1,2)+w.getDate()+"-"+Math.floor(1e6*Math.random()),s=[];e.get().then((function(e){e.forEach((function(t){s.push(t.data())})),r["dbExpense"].collection("pettyLiquidationItems").doc().set({liquidationItemId:a,date:t.addItems.date,amount:t.addItems.amount,particular:t.addItems.particular,referenceNumber:t.addItems.refNo,pettyLiquidationReference:t.editLiquidate.liquidationId,descriptionReference:t.addItems.desc,status:1,userReference:s[0].userId,dateCreated:w,dateModified:w}).then((function(){var e=parseFloat(t.editLiquidate.totalAmount.replaceAll(",",""))+parseFloat(t.addItems.amount.replaceAll(",","")),a=parseFloat(t.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(e);e>=t.editLiquidate.amountReceived&&(a=0),r["dbExpense"].collection("pettyLiquidation").doc(t.editLiquidate.id).update({totalAmount:parseFloat(e).toFixed(2),returnAmount:parseFloat(a),dateModified:w}).then((function(){t.editLiquidate.totalAmount=x(parseFloat(e).toFixed(2)),t.editLiquidate.returnAmount=x(parseFloat(a).toFixed(2))})),t.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.addItems.date=g().format("YYYY-MM-DD"),t.addItems.particular="",t.addItems.amount="",t.addItems.refNo="",t.$v.addItems.$reset(),t.$bvModal.hide("liquidation-add-item-modal"),t.getUpdateItems(1),t.getLiquidations(1,"change")})),t.requestProcessing=!1}))}))}catch(n){console.log(n),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},addLiquidateTrans:function(){var t=this;if(t.$v.addTran.$touch(),!t.$v.addTran.$error){t.requestProcessing=!0;try{var e=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a="TLI-"+w.getFullYear()+k(w.getMonth()+1,2)+w.getDate()+"-"+Math.floor(1e6*Math.random()),s=[];e.get().then((function(e){e.forEach((function(t){s.push(t.data())})),r["dbExpense"].collection("pettyLiquidationItems").doc().set({liquidationItemId:a,date:t.addTran.date,amount:t.addTran.amount,from:t.addTran.from,to:t.addTran.to,transportationMode:t.addTran.mode,purpose:t.addTran.purpose,referenceNumber:t.addTran.refNo,pettyLiquidationReference:t.editLiquidate.liquidationId,descriptionReference:t.addTran.desc,status:1,userReference:s[0].userId,dateCreated:w,dateModified:w}).then((function(){var e=parseFloat(t.editLiquidate.totalAmount.replaceAll(",",""))+parseFloat(t.addTran.amount.replaceAll(",","")),a=parseFloat(t.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(e);e>=t.editLiquidate.amountReceived&&(a=0),r["dbExpense"].collection("pettyLiquidation").doc(t.editLiquidate.id).update({totalAmount:parseFloat(e).toFixed(2),returnAmount:parseFloat(a),dateModified:w}).then((function(){t.editLiquidate.totalAmount=x(parseFloat(e).toFixed(2)),t.editLiquidate.returnAmount=x(parseFloat(a).toFixed(2))})),t.$swal({title:"Success",text:"New transportation added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.addTran.date=g().format("YYYY-MM-DD"),t.addTran.amount="",t.addTran.mode="",t.addTran.purpose="",t.addTran.from="",t.addTran.to="",t.addTran.refNo="",t.addTran.desc="",t.$v.addTran.$reset(),t.$bvModal.hide("liquidation-add-trans-modal"),t.getUpdateTrans(1),t.getLiquidations(1,"change")})),t.requestProcessing=!1}))}))}catch(n){console.log(n),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},openUpdateItemModal:function(t){this.editItems={id:t.id,itemId:t.liquidationItemId,date:t.date,amount:t.amount,particular:t.particular,refNo:t.referenceNumber},this.oldAmount=t.amount,this.$bvModal.show("liquidation-edit-item-modal")},editLiquidateItem:function(){var t=this;if(t.$v.editItems.$touch(),!t.$v.editItems.$error){t.requestProcessing=!0;try{r["dbExpense"].collection("pettyLiquidationItems").doc(t.editItems.id).update({date:t.editItems.date,amount:t.editItems.amount,particular:t.editItems.particular,referenceNumber:t.editItems.refNo,dateModified:w}).then((function(){var e=parseFloat(t.editLiquidate.totalAmount.replaceAll(",",""))-parseFloat(t.oldAmount.replaceAll(",",""));e+=parseFloat(t.editItems.amount.replaceAll(",",""));var a=parseFloat(t.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(e);e>=t.editLiquidate.amountReceived&&(a=0),r["dbExpense"].collection("pettyLiquidation").doc(t.editLiquidate.id).update({totalAmount:parseFloat(e).toFixed(2),returnAmount:parseFloat(a),dateModified:w}).then((function(){t.editLiquidate.totalAmount=x(parseFloat(e).toFixed(2)),t.editLiquidate.returnAmount=x(parseFloat(a).toFixed(2))})),t.$swal({title:"Success",text:"Item updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.editItems.date="",t.editItems.particular="",t.editItems.amount="",t.editItems.refNo="",t.$v.editItems.$reset(),t.$bvModal.hide("liquidation-edit-item-modal"),t.getUpdateItems(1),t.getLiquidations(1,"change")})),t.requestProcessing=!1}))}catch(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},openUpdateTransModal:function(t){this.editTran={id:t.id,tranId:t.liquidationItemId,date:t.date,amount:t.amount,from:t.from,to:t.to,mode:t.transportationMode,purpose:t.purpose,refNo:t.referenceNumber},this.oldAmount=t.amount,this.$bvModal.show("liquidation-edit-trans-modal")},editLiquidateTrans:function(){var t=this;if(t.$v.editTran.$touch(),!t.$v.editTran.$error){t.requestProcessing=!0;try{r["dbExpense"].collection("pettyLiquidationItems").doc(t.editTran.id).update({date:t.editTran.date,amount:t.editTran.amount,from:t.editTran.from,to:t.editTran.to,transportationMode:t.editTran.mode,purpose:t.editTran.purpose,referenceNumber:t.editTran.refNo,dateModified:w}).then((function(){var e=parseFloat(t.editLiquidate.totalAmount.replaceAll(",",""))-parseFloat(t.oldAmount.replaceAll(",",""));e+=parseFloat(t.editTran.amount.replaceAll(",",""));var a=parseFloat(t.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(e);e>=t.editLiquidate.amountReceived&&(a=0),r["dbExpense"].collection("pettyLiquidation").doc(t.editLiquidate.id).update({totalAmount:parseFloat(e).toFixed(2),returnAmount:parseFloat(a),dateModified:w}).then((function(){t.editLiquidate.totalAmount=x(parseFloat(e).toFixed(2)),t.editLiquidate.returnAmount=x(parseFloat(a).toFixed(2))})),t.$swal({title:"Success",text:"Transportation updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.editTran.date="",t.editTran.amount="",t.editTran.from="",t.editTran.to="",t.editTran.mode="",t.editTran.purpose="",t.editTran.refNo="",t.$v.editTran.$reset(),t.$bvModal.hide("liquidation-edit-trans-modal"),t.getUpdateTrans(1),t.getLiquidations(1,"change")})),t.requestProcessing=!1}))}catch(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},removeLiquidateItem:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this particular",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){e.requestProcessing=!0;var s=parseFloat(e.editLiquidate.totalAmount.replaceAll(",",""))-parseFloat(t.amount.replaceAll(",","")),n=parseFloat(e.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(s);try{r["dbExpense"].collection("pettyLiquidationItems").doc(t.id).delete().then((function(){r["dbExpense"].collection("pettyLiquidation").doc(e.editLiquidate.id).update({totalAmount:parseFloat(s).toFixed(2),returnAmount:parseFloat(n),dateModified:w}).then((function(){e.editLiquidate.totalAmount=x(parseFloat(s).toFixed(2)),e.editLiquidate.returnAmount=x(parseFloat(n).toFixed(2))})),e.$swal({title:"Success",text:"Particular removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getUpdateItems(1),e.getLiquidations(1,"change")})),e.requestProcessing=!1}))}catch(i){console.log(i),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))},removeLiquidateTrans:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this transportation",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){e.requestProcessing=!0;var s=parseFloat(e.editLiquidate.totalAmount.replaceAll(",",""))-parseFloat(t.amount.replaceAll(",","")),n=parseFloat(e.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(s);try{r["dbExpense"].collection("pettyLiquidationItems").doc(t.id).delete().then((function(){r["dbExpense"].collection("pettyLiquidation").doc(e.editLiquidate.id).update({totalAmount:parseFloat(s).toFixed(2),returnAmount:parseFloat(n),dateModified:w}).then((function(){e.editLiquidate.totalAmount=x(parseFloat(s).toFixed(2)),e.editLiquidate.returnAmount=x(parseFloat(n).toFixed(2))})),e.$swal({title:"Success",text:"Transportation removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getUpdateTrans(1),e.getLiquidations(1,"change")})),e.requestProcessing=!1}))}catch(i){console.log(i),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))},updateLiquidation:function(){var t=this;if(t.$v.editLiquidate.$touch(),!t.$v.editLiquidate.$error){t.requestProcessing=!0;try{var e=parseFloat(t.editLiquidate.amountReceived.replaceAll(",",""))-parseFloat(t.editLiquidate.totalAmount.replaceAll(",",""));parseFloat(t.editLiquidate.totalAmount.replaceAll(",",""))>=parseFloat(t.editLiquidate.amountReceived.replaceAll(",",""))&&(e=0),r["dbExpense"].collection("pettyLiquidation").doc(t.editLiquidate.id).update({date:t.editLiquidate.date,amountReceived:parseFloat(t.editLiquidate.amountReceived.replaceAll(",","")),totalAmount:t.editLiquidate.totalAmount,returnAmount:parseFloat(e).toFixed(2),nameReference:t.editLiquidate.name,dateModified:w}).then((function(){t.$swal({title:"Success",text:"Liquidation updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$bvModal.hide("update-liquidation-modal"),t.getLiquidations(1,"change")})),t.requestProcessing=!1}))}catch(a){console.log(a),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},removeLiquidation:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this liquidation",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){e.requestProcessing=!0;try{r["dbExpense"].collection("pettyLiquidation").doc(t.id).delete().then((function(){e.$swal({title:"Success",text:"Liquidation removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getLiquidations(1,"change")})),e.requestProcessing=!1}))}catch(s){console.log(s),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))},openAttachments:function(t){this.attachId=t.pettyLiquidationId,this.$bvModal.show("attachment-modal"),this.getAttachments(this.attachId)},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(t){var e=this,a={maxSizeMB:1,useWebWorker:!0};e.uploadValue=0,e.attachment=null,e.attachments=[],e.attachmentData=t.target.files[0],Object(d["a"])(e.attachmentData,a).then((function(t){e.attachmentData=t,e.onUpload(e.attachmentData)}))},onUpload:function(t){var e=this,a=r["expenseStorage"].ref("pettyCashFiles/"+e.attachId+"/"+t.name).put(t);e.requestProcessing=!1;try{e.attachment=null,e.requestProcessing=!0,a.on("state_changed",(function(t){e.uploadValue=t.bytesTransferred/t.totalBytes*100}),(function(t){console.log(t.message)}),(function(){e.uploadValue=100,e.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1,e.getAttachments(e.attachId),e.getLiquidations(1,"list")}))}catch(s){console.log("error"),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}},getAttachments:function(t){var e=this,a=0,s=r["expenseStorage"].ref("pettyCashFiles/"+t);e.loadAttachment=!0,e.attachments=[],s.listAll().then((function(s){s.items.forEach((function(s){r["expenseStorage"].ref("pettyCashFiles/"+t+"/"+s.name).getDownloadURL().then((function(t){a+=1,e.attachments.push({rowNum:a,name:s.name,url:t,path:s.fullPath,status:1})}))}))})).catch((function(t){console.log(t)})),setTimeout((function(){e.loadAttachment=!1}),5e3)},removeAttachment:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var s=r["expenseStorage"].ref("pettyCashFiles/"+e.attachId+"/"+t);try{s.delete().then((function(){e.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getAttachments(e.attachId),e.getReimbursement(),e.getReimItems(1),e.getReimTrans(1)}))}))}catch(n){console.log(n),e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}}))},changeStatus:function(t,e){var a=this,s="";1==e?s="current":2==e?s="checked":3==e&&(s="processed"),a.$swal({title:"Are you sure?",text:"You want to change the status to "+s,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(s){if(s.value){a.requestProcessing=!0;try{r["dbExpense"].collection("pettyCash").doc(t.id).update({status:e,dateModified:w}).then((function(){a.$swal({title:"Success",text:"Petty cash status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){a.getPettyCash(),a.getLiquidations(1,"change")})),a.requestProcessing=!1}))}catch(n){console.log(n),a.requestProcessing=!1,a.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}}))},getCompany:function(){var t=this,e=[],a=r["dbMains"].collection("companyProfile");t.company=[],a.get().then((function(a){a.forEach((function(t){e.push(t.data())})),t.company={name:e[0].name,address:e[0].address}}))},getUser:function(t){if(""==t)self.$swal({title:"Warning",text:"The user ID is missing.",icon:"warning",confirmButtonColor:"#ef8157",confirmButtonText:"OK"}),this.$router.push("/");else if(""!=t){var e=this,a=r["dbUsers"].collection("users").where("username","==",t),s=[];a.get().then((function(t){t.forEach((function(t){s.push(t.data())})),e.preparedBy=s[0].firstname+" "+s[0].lastname}))}},printLiqui:function(){m()({printable:"viewSummary",type:"html",style:'#viewSummary {font-family: "Calibri"; padding-left: 2px;} #particularStyle {text-align: center;} #particular {text-align: center;} #centerStyle {text-align: center;} #headerStyle {text-align: center; padding-top: 20px;} #borderStyle {border-width: 1px; border-style: solid;}',documentTitle:"Liquidation"})}}},$=D,T=(a("9875"),a("2877")),A=Object(T["a"])($,s,n,!1,null,null,null);e["default"]=A.exports},"861c":function(t,e,a){"use strict";a("50cb")},"894b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5",attrs:{type:"gradient-success"}}),a("div",{staticClass:"col-10 container-fluid mt--7"},[a("card",{staticClass:"pl-2"},[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"card card-profile bg-gradient-default shadow"},[a("div",{staticClass:"card-body pt-0 pt-md-4"},[a("div",{staticClass:"text-center"},[a("b-avatar",{attrs:{variant:"info",text:t.avatarLetter,size:"4rem"}}),a("h2",[a("span",{staticClass:"font-weight text-success"},[t._v(t._s(t.user.username))])]),a("h4",[a("span",{staticClass:"font-weight text-success"},[t._v("("+t._s(t.userRole)+")")])])],1)])])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Firstname: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t.user.firstname))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Middlename: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t.user.middlename))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Lastname: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t.user.lastname))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Email Address: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t.user.emailAddress))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Contact Number: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t.user.contactNumber))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Department: ")])]),t._l(t.departments,(function(e){return a("span",{key:e.departmentUid},[e.departmentUid==t.user.departmentReference?a("span",{staticClass:"col-sm-8"},[t._v(" "+t._s(e.departmentName)+" ")]):t._e()])}))],2),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Status: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(1==t.user.status?"Active":"Disabled"))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Created By: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t.user.createdBy))])]),a("div",{staticClass:"row pl-2"},[a("label",{staticClass:"col-sm-4"},[a("b",[t._v("Date Created: ")])]),a("span",{staticClass:"col-sm-8"},[t._v(t._s(t._f("moment")(t.user.dateCreated,"MMMM DD, YYYY")))])]),a("hr"),a("div",{staticClass:"text-right"},[a("base-button",{staticClass:"col-md-2 ml-2",attrs:{type:"danger",outline:""},nativeOn:{click:function(e){return t.cancelViewUser(e)}}},[t._v("Cancel")]),1==t.user.status?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{type:"success"},nativeOn:{click:function(e){return t.updateUser(e)}}},[t._v("Update")]):t._e(),1==t.user.status?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{type:"default"},nativeOn:{click:function(e){return t.changeStatusUser(t.user.id,0)}}},[t._v("Disable")]):t._e(),0==t.user.status?a("base-button",{staticClass:"col-md-2 ml-2",attrs:{type:"primary"},nativeOn:{click:function(e){return t.changeStatusUser(t.user.id,1)}}},[t._v("Activate")]):t._e()],1)])],1)],1)},n=[],i=(a("4160"),a("fb6a"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("c1df"),l=new Date,c={components:{},data:function(){return{user:[],departments:[],userRole:""}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"Administrator"!=s[0].userRole?a("/main/home"):a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUser(t.$router.currentRoute.params.id),t.getDepartments();case 2:case"end":return e.stop()}}),e)})))()},methods:{getUserRole:function(t){var e=this,a=r["dbUsers"].collection("userRoles").where("userRoleId","==",t),s=[];a.get().then((function(t){t.forEach((function(t){s.push(t.data())})),e.userRole=s[0].userRole}))},getDepartments:function(){var t=this,e=r["dbUsers"].collection("departments").orderBy("departmentName","asc");t.departments=[],e.get().then((function(e){e.forEach((function(e){t.departments.push(e.data())}))}))},getUser:function(t){if(""==t)self.$swal({title:"Warning",text:"The user ID is missing.",icon:"warning",confirmButtonColor:"#ef8157",confirmButtonText:"OK"}).then((function(){self.cancelViewUser()}));else if(""!=t){var e=this,a=r["dbUsers"].collection("users").where("userId","==",t),s="";e.user=[],a.get().then((function(t){t.forEach((function(t){e.user.push(t.data()),s=t.id}));for(var a=0;a<e.user.length;a++)e.user[a].dateCreated=o.unix(e.user[a].dateCreated.seconds),e.user[a]["id"]=s;e.user=e.user[0],e.getUserRole(e.user.userRoleReference),e.avatarLetter=e.user.username.slice(0,1)}))}},cancelViewUser:function(){this.$router.push("/users/")},updateUser:function(){this.$router.push("/user/update/"+this.$router.currentRoute.params.id)},changeStatusUser:function(t,e){var a=this,s="disable",n="disabled";1==e&&(s="activate",n="activated"),this.$swal({title:"Are you sure?",text:"You want to "+s+" this User",icon:"warning",showCancelButton:!0,confirmButtonColor:"#054c37",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(s){s.value&&r["dbUsers"].collection("users").doc(t).update({status:e,dateModified:l}).then((function(){a.getUser(a.$router.currentRoute.params.id),a.$swal({title:"Success",text:"User "+n+"!",icon:"success",confirmButtonColor:"#51cbce",confirmButtonText:"OK"})})).catch((function(t){console.log(t),a.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#ef8157",confirmButtonText:"OK"})}))}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,s,n,!1,null,null,null);e["default"]=m.exports},"8f7a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[t._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.getPurchases()}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==t.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:t.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(e){return t.getPurchases()}},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}}):t._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"purchase-table",attrs:{columns:t.columns,rows:t.purchases,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["purchaseDate"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.purchaseDate,"MMM DD, YYYY")))])]):t._e(),"tinNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.tinNumber))])]):t._e(),"company"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.company))])]):t._e(),"address"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.address))])]):t._e(),"salesAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.salesAmount))])]):t._e(),"vatableAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.vatableAmount))])]):t._e(),"inputTax"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.inputTax))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openEditPurchaseModal(e.row)}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.purchases.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getPurchases()}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-purchase-modal",modifiers:{"new-purchase-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Purchase")])],1)]),a("b-modal",{attrs:{size:"xl",id:"new-purchase-modal",title:"New Purchase",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[t.purchaseItems.length>0?a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addPurchase(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]):t._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-purchase-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Enterprise:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Purchase Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.enterprises,reduce:function(t){return t.enterpriseId},label:"enterprise",clearable:!1},on:{input:function(e){return t.getAccounts(t.newEnterprise,"add")}},model:{value:t.newEnterprise,callback:function(e){t.newEnterprise=e},expression:"newEnterprise"}}),t.$v.newEnterprise.$anyDirty&&!t.$v.newEnterprise.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-enterprise-modal",modifiers:{"new-enterprise-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:t.requestProcessing}},[t._v("Add")])],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:t.newPurchaseDate,callback:function(e){t.newPurchaseDate=e},expression:"newPurchaseDate"}}),t.$v.newPurchaseDate.$anyDirty&&!t.$v.newPurchaseDate.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.accounts,reduce:function(t){return t.accountId},label:"account",clearable:!1},model:{value:t.newAccount,callback:function(e){t.newAccount=e},expression:"newAccount"}}),t.$v.newAccount.$anyDirty&&!t.$v.newAccount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Tin Number"},model:{value:t.newTinNumber,callback:function(e){t.newTinNumber=e},expression:"newTinNumber"}}),t.$v.newTinNumber.$anyDirty&&!t.$v.newTinNumber.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newTinNumber.$anyDirty&&!t.$v.newTinNumber.numRefCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Company:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Company"},model:{value:t.newCompany,callback:function(e){t.newCompany=e},expression:"newCompany"}}),t.$v.newCompany.$anyDirty&&!t.$v.newCompany.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newCompany.$anyDirty&&!t.$v.newCompany.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"69",id:"inputStyle",placeholder:"Address"},domProps:{value:t.newAddress},on:{input:function(e){e.target.composing||(t.newAddress=e.target.value)}}}),t.$v.newAddress.$anyDirty&&!t.$v.newAddress.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Total Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Amount",readonly:""},model:{value:t.newTotalAmount,callback:function(e){t.newTotalAmount=e},expression:"newTotalAmount"}}),t.$v.newTotalAmount.$anyDirty&&!t.$v.newTotalAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newTotalAmount.$anyDirty&&!t.$v.newTotalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"}),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-purchase-item-modal",modifiers:{"new-purchase-item-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:t.requestProcessing}},[t._v("Add Item")])],1)]),a("hr"),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.itemColumns,rows:t.purchaseItems,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:!1},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["item"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.item))])]):t._e(),"quantity"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.quantity))])]):t._e(),"price"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.price))])]):t._e(),"amount"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.amount))])]):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 fa fa-trash",attrs:{id:"sideBarTxt",title:"Remove"},on:{click:function(a){return t.removeItem(e.row.id)}}})]):t._e()])]}}])})],1)]),a("b-modal",{attrs:{size:"md",id:"new-enterprise-modal",title:"New Enterprise",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addEnterprise(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-enterprise-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Enterprise:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Enterprise"},model:{value:t.newPEnterprise,callback:function(e){t.newPEnterprise=e},expression:"newPEnterprise"}}),t.$v.newPEnterprise.$anyDirty&&!t.$v.newPEnterprise.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPEnterprise.$anyDirty&&!t.$v.newPEnterprise.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"new-purchase-item-modal",title:"New Purchase Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addPurchaseItem(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-purchase-item-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Item:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Quantity:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:t.newItem,callback:function(e){t.newItem=e},expression:"newItem"}}),t.$v.newItem.$anyDirty&&!t.$v.newItem.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newItem.$anyDirty&&!t.$v.newItem.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Quantity"},on:{input:function(e){return t.computeAmount(t.newQuantity,t.newPrice)}},model:{value:t.newQuantity,callback:function(e){t.newQuantity=e},expression:"newQuantity"}}),t.$v.newQuantity.$anyDirty&&!t.$v.newQuantity.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newQuantity.$anyDirty&&!t.$v.newQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Price:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Price"},on:{input:function(e){return t.computeAmount(t.newQuantity,t.newPrice)}},model:{value:t.newPrice,callback:function(e){t.newPrice=e},expression:"newPrice"}}),t.$v.newPrice.$anyDirty&&!t.$v.newPrice.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPrice.$anyDirty&&!t.$v.newPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",readonly:""},model:{value:t.newAmount,callback:function(e){t.newAmount=e},expression:"newAmount"}}),t.$v.newAmount.$anyDirty&&!t.$v.newAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newAmount.$anyDirty&&!t.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"xl",id:"edit-purchase-modal",title:"Edit Purchase",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updatePurchase(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-purchase-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Enterprise:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Purchase Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.enterprises,reduce:function(t){return t.enterpriseId},label:"enterprise",clearable:!1},on:{input:function(e){return t.getAccounts(t.edit.enterprise,"edit")}},model:{value:t.edit.enterprise,callback:function(e){t.$set(t.edit,"enterprise",e)},expression:"edit.enterprise"}}),t.$v.edit.$anyDirty&&!t.$v.edit.enterprise.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:t.edit.purchaseDate,callback:function(e){t.$set(t.edit,"purchaseDate",e)},expression:"edit.purchaseDate"}}),t.$v.edit.$anyDirty&&!t.$v.edit.purchaseDate.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.accounts,reduce:function(t){return t.accountId},label:"account",clearable:!1},model:{value:t.edit.account,callback:function(e){t.$set(t.edit,"account",e)},expression:"edit.account"}}),t.$v.edit.$anyDirty&&!t.$v.edit.account.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Tin Number"},model:{value:t.edit.tinNumber,callback:function(e){t.$set(t.edit,"tinNumber",e)},expression:"edit.tinNumber"}}),t.$v.edit.$anyDirty&&!t.$v.edit.tinNumber.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.tinNumber.numRefCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Company:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Company"},model:{value:t.edit.company,callback:function(e){t.$set(t.edit,"company",e)},expression:"edit.company"}}),t.$v.edit.$anyDirty&&!t.$v.edit.company.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.company.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit.address,expression:"edit.address"}],staticClass:"pl-2",attrs:{rows:"4",cols:"69",id:"inputStyle",placeholder:"Address"},domProps:{value:t.edit.address},on:{input:function(e){e.target.composing||t.$set(t.edit,"address",e.target.value)}}}),t.$v.edit.$anyDirty&&!t.$v.edit.address.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Total Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Total Amount",readonly:""},model:{value:t.edit.totalAmount,callback:function(e){t.$set(t.edit,"totalAmount",e)},expression:"edit.totalAmount"}}),t.$v.edit.$anyDirty&&!t.$v.edit.totalAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.totalAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"}),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-item-modal",modifiers:{"new-item-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:t.requestProcessing}},[t._v("Add Item")])],1)]),a("hr"),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.updateItemColumns,rows:t.items,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:!1},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["item"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.item))])]):t._e(),"quantity"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.quantity))])]):t._e(),"price"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.price))])]):t._e(),"amount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.amount))])]):t._e(),"vatAmount"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.vatAmount))])]):t._e(),"inputTax"==e.column.field?a("span",[a("span",[t._v("₱ "+t._s(e.row.inputTax))])]):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openEditPurchaseItemModal(e.row)}}}),"User"!=t.userRole?a("span",{staticClass:"pointer ml-2 fa fa-trash",attrs:{id:"sideBarTxt",title:"Delete"},on:{click:function(a){return t.deleteItem(e.row)}}}):t._e()]):t._e()])]}}])})],1)]),a("b-modal",{attrs:{size:"lg",id:"new-item-modal",title:"New Purchase Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addItem(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-item-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Item:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Quantity:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:t.newPItem,callback:function(e){t.newPItem=e},expression:"newPItem"}}),t.$v.newPItem.$anyDirty&&!t.$v.newPItem.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPItem.$anyDirty&&!t.$v.newPItem.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Quantity"},on:{input:function(e){return t.compute(t.newPQuantity,t.newPPrice,"add")}},model:{value:t.newPQuantity,callback:function(e){t.newPQuantity=e},expression:"newPQuantity"}}),t.$v.newPQuantity.$anyDirty&&!t.$v.newPQuantity.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPQuantity.$anyDirty&&!t.$v.newPQuantity.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Price:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Price"},on:{input:function(e){return t.compute(t.newPQuantity,t.newPPrice,"add")}},model:{value:t.newPPrice,callback:function(e){t.newPPrice=e},expression:"newPPrice"}}),t.$v.newPPrice.$anyDirty&&!t.$v.newPPrice.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPPrice.$anyDirty&&!t.$v.newPPrice.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",readonly:""},model:{value:t.newPAmount,callback:function(e){t.newPAmount=e},expression:"newPAmount"}}),t.$v.newPAmount.$anyDirty&&!t.$v.newPAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPAmount.$anyDirty&&!t.$v.newPAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-item-modal",title:"Edit Purchase Item",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateItem(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-item-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Item:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Quantity:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Item"},model:{value:t.editItem.item,callback:function(e){t.$set(t.editItem,"item",e)},expression:"editItem.item"}}),t.$v.editItem.$anyDirty&&!t.$v.editItem.item.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editItem.$anyDirty&&!t.$v.editItem.item.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Quantity"},on:{input:function(e){return t.compute(t.editItem.quantity,t.editItem.price,"edit")}},model:{value:t.editItem.quantity,callback:function(e){t.$set(t.editItem,"quantity",e)},expression:"editItem.quantity"}}),t.$v.editItem.$anyDirty&&!t.$v.editItem.quantity.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editItem.$anyDirty&&!t.$v.editItem.quantity.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Price:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Price"},on:{input:function(e){return t.compute(t.editItem.quantity,t.editItem.price,"edit")}},model:{value:t.editItem.price,callback:function(e){t.$set(t.editItem,"price",e)},expression:"editItem.price"}}),t.$v.editItem.$anyDirty&&!t.$v.editItem.price.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editItem.$anyDirty&&!t.$v.editItem.price.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Amount",readonly:""},model:{value:t.editItem.amount,callback:function(e){t.$set(t.editItem,"amount",e)},expression:"editItem.amount"}}),t.$v.editItem.$anyDirty&&!t.$v.editItem.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.editItem.$anyDirty&&!t.$v.editItem.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("a434"),a("b680"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&,]*$/),m=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 -]*$/),p=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),h=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ,.]*$/),f=new Date,b=a("9f25"),v=a("c1df"),C=a("e966"),y=C.bindWith(",","."),g={components:{},data:function(){return{columns:[{label:"Purchase Date",field:"purchaseDate"},{label:"Tin Number",field:"tinNumber"},{label:"Company",field:"company"},{label:"Address",field:"address",width:"150px"},{label:"Total Amount",field:"salesAmount"},{label:"Vatable Amount",field:"vatableAmount"},{label:"Input Tax",field:"inputTax"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],purchases:[],itemColumns:[{label:"Item",field:"item"},{label:"Quantity",field:"quantity"},{label:"Price",field:"price"},{label:"Amount",field:"amount"},{label:"",field:"action",sortable:!1,width:"80px"}],purchaseItems:[],updateItemColumns:[{label:"Item",field:"item"},{label:"Quantity",field:"quantity"},{label:"Price",field:"price"},{label:"Amount",field:"amount"},{label:"Vatable Amount",field:"vatAmount"},{label:"Input Tax",field:"inputTax"},{label:"",field:"action",sortable:!1,width:"80px"}],items:[],loading:!0,requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",enterprises:[],equations:[],accounts:[],newEnterprise:"",newPurchaseDate:v().format("YYYY-MM-DD"),newAccount:"",newTinNumber:"",newCompany:"",newAddress:"",newTotalAmount:"",newPEnterprise:"",newItem:"",newQuantity:"",newPrice:"",newAmount:"",filters:[{filterId:"month",filter:"Month"}],filter:"month",dateFilter:v().format("YYYY-MM"),maxDate:v().format("YYYY-MM"),edit:{id:"",purchaseId:"",purchaseDate:"",account:"",tinNumber:"",company:"",address:"",salesAmount:"",enterprise:""},newPItem:"",newPQuantity:"",newPPrice:"",newPAmount:"",editItem:{id:"",itemId:"",item:"",quantity:"",price:"",amount:"",purchaseId:""},userRole:""}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.getEnterprises(),t.getPurchases(),t.getAccountEquations();case 4:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(d["b"])({users:"Users/users"})),validations:{newEnterprise:{required:l["required"]},newPurchaseDate:{required:l["required"]},newAccount:{required:l["required"]},newTinNumber:{required:l["required"],numRefCustomValidator:m},newCompany:{required:l["required"],alphaNumCustomValidator:u},newAddress:{required:l["required"]},newTotalAmount:{required:l["required"],amountCustomValidator:h},newPEnterprise:{required:l["required"],alphaNumCustomValidator:u},newItem:{required:l["required"],alphaNumCustomValidator:u},newQuantity:{required:l["required"],numCustomValidator:p},newPrice:{required:l["required"],amountCustomValidator:h},newAmount:{required:l["required"],amountCustomValidator:h},edit:{enterprise:{required:l["required"]},purchaseDate:{required:l["required"]},account:{required:l["required"]},tinNumber:{required:l["required"],numRefCustomValidator:m},company:{required:l["required"],alphaNumCustomValidator:u},address:{required:l["required"]},totalAmount:{required:l["required"],amountCustomValidator:h}},newPItem:{required:l["required"],alphaNumCustomValidator:u},newPQuantity:{required:l["required"],numCustomValidator:p},newPPrice:{required:l["required"],amountCustomValidator:h},newPAmount:{required:l["required"],amountCustomValidator:h},editItem:{item:{required:l["required"],alphaNumCustomValidator:u},quantity:{required:l["required"],numCustomValidator:p},price:{required:l["required"],amountCustomValidator:h},amount:{required:l["required"],amountCustomValidator:h}}},methods:{getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname");var e=o["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())}));var s=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},getEnterprises:function(){var t=this,e=o["dbExpense"].collection("enterprises").orderBy("enterprise","asc");t.enterprises=[],e.get().then((function(e){e.forEach((function(e){t.enterprises.push(e.data())})),t.newEnterprise=t.enterprises[0].enterpriseId,t.getAccounts(t.newEnterprise,"add")}))},addEnterprise:function(){var t=this;if(t.$v.newPEnterprise.$touch(),!t.$v.newPEnterprise.$error){t.requestProcessing=!0;var e=o["dbExpense"].collection("enterprises").where("enterprise","==",Object(c["a"])(t.newPEnterprise));e.get().then((function(e){if(e.empty){if(e){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="PEI-"+f.getFullYear()+b(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{o["dbExpense"].collection("enterprises").doc().set({enterpriseId:n,enterprise:Object(c["a"])(t.newPEnterprise),userReference:s[0].userId,status:1,dateCreated:f,dateModified:f}).then((function(){t.newPEnterprise="",t.requestProcessing=!1,t.$v.newPEnterprise.$reset(),t.getEnterprises(),t.$bvModal.hide("new-enterprise-modal"),t.$swal({title:"Success",text:"New enterprise added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Enterprise already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},computeAmount:function(t,e){var a=this;a.newAmount=t*e.replaceAll(",","")},addPurchaseItem:function(){var t=this;if(0==t.purchaseItems.length&&(t.purchaseItems=[]),t.$v.newItem.$touch(),t.$v.newQuantity.$touch(),t.$v.newPrice.$touch(),t.$v.newAmount.$touch(),!t.$v.newItem.$error&&!t.$v.newQuantity.$error&&!t.$v.newPrice.$error&&!t.newAmount.$error){var e={id:0,item:t.newItem,quantity:t.newQuantity,price:t.newPrice,amount:t.newAmount};t.purchaseItems.push(e),t.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$bvModal.hide("new-purchase-item-modal"),t.getPurchaseItems(),t.newItem="",t.newQuantity="",t.newPrice="",t.newAmount="",t.$v.newItem.$reset(),t.$v.newQuantity.$reset(),t.$v.newPrice.$reset(),t.$v.newAmount.$reset()}))}},getPurchaseItems:function(){var t=this;t.newTotalAmount=0;for(var e=0;e<t.purchaseItems.length;e++)t.purchaseItems[e].id=e+1,t.newTotalAmount=t.newTotalAmount+parseFloat(t.purchaseItems[e].amount)},removeItem:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this item",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(a){if(a.value){var s=parseInt(t)-1;e.purchaseItems.splice(s,1),e.$swal({title:"Success",text:"Item removed successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.$refs["purchase-table"].reset(),e.getPurchaseItems()}))}}))},getAccounts:function(t,e){var a=this;a.accounts=[];var s=o["dbMains"].collection("chartOfAccounts").where("enterpriseReference","==",t).where("status","==",1).orderBy("code","asc");s.get().then((function(t){t.empty||t.forEach((function(t){a.accounts.push(t.data())})),"add"==e?a.accounts.length>0?a.newAccount=a.accounts[0].accountId:a.newAccount="":"edit"==e&&(a.accounts.length>0?a.edit.account=a.accounts[0].accountId:a.edit.account="")}))},addPurchase:function(){var t=this;if(t.$v.newEnterprise.$touch(),t.$v.newPurchaseDate.$touch(),t.$v.newAccount.$touch(),t.$v.newTinNumber.$touch(),t.$v.newCompany.$touch(),t.$v.newAddress.$touch(),t.$v.newTotalAmount.$touch(),!t.$v.newEnterprise.$error&&!t.$v.newPurchaseDate.$error&&!t.$v.newAccount.$error&&!t.$v.newTinNumber.$error&&!t.$v.newCompany.$error&&!t.$v.newAddress.$error&&!t.$v.newTotalAmount.$error){t.requestProcessing=!0;var e=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],s="PI-"+f.getFullYear()+b(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());e.get().then((function(e){e.forEach((function(t){t.exists&&a.push(t.data())}));try{o["dbExpense"].collection("purchases").doc().set({purchaseId:s,purchaseDate:t.newPurchaseDate,tinNumber:t.newTinNumber,company:t.newCompany,address:t.newAddress,salesAmount:t.newTotalAmount,enterpriseReference:t.newEnterprise,accountReference:t.newAccount,userReference:a[0].userId,status:1,dateCreated:f,dateModified:f}).then((function(){for(var e=!1,n=0;n<t.purchaseItems.length;n++){var i="PII-"+f.getFullYear()+b(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random()),r=n+1;o["dbExpense"].collection("purchaseItems").doc().set({purchaseItemId:i,item:t.purchaseItems[n].item,quantity:t.purchaseItems[n].quantity,price:t.purchaseItems[n].price,amount:t.purchaseItems[n].amount,purchaseReference:s,status:1,userReference:a[0].userId,dateCreated:f,dateModified:f}),r==t.purchaseItems.length&&(e=!0)}e&&(t.newEnterprise="",t.newPurchaseDate="",t.newAccount="",t.newTinNumber="",t.newCompany="",t.newAddress="",t.newTotalAmount="",t.purchaseItems=[],t.requestProcessing=!1,t.$v.newEnterprise.$reset(),t.$v.newPurchaseDate.$reset(),t.$v.newAccount.$reset(),t.$v.newTinNumber.$reset(),t.$v.newCompany.$reset(),t.$v.newAddress.$reset(),t.$v.newTotalAmount.$reset(),t.$refs["purchase-table"].reset(),t.getPurchases(),t.$bvModal.hide("new-purchase-modal"),t.$swal({title:"Success",text:"New purchase added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}))}))}catch(n){console.log(n),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}},getPurchases:function(){var t=this,e=null,a=[],s=[],n=v(t.dateFilter).startOf("month").format("YYYY-MM-DD"),i=v(t.dateFilter).endOf("month").format("YYYY-MM-DD");t.username=localStorage.getItem("aisname");var r=o["dbUsers"].collection("users").where("username","==",t.username),l=[],c="",d="";r.get().then((function(r){r.forEach((function(t){l.push(t.data())})),d=l[0].userId;var u=o["dbUsers"].collection("userRoles").where("userRoleId","==",l[0].userRoleReference),m=[];u.get().then((function(r){r.forEach((function(t){m.push(t.data())})),c=m[0].userRole,t.loading=!0,t.purchases=[],"Administrator"==c||"Manager"==c?"all"!=t.limit?e=o["dbExpense"].collection("purchases").where("purchaseDate",">=",n).where("purchaseDate","<=",i).orderBy("purchaseDate","desc").limit(t.limit):"all"==t.limit&&(e=o["dbExpense"].collection("purchases").where("purchaseDate",">=",n).where("purchaseDate","<=",i).orderBy("purchaseDate","asc")):"User"==c&&("all"!=t.limit?e=o["dbExpense"].collection("purchases").where("purchaseDate",">=",n).where("purchaseDate","<=",i).where("userReference","==",d).orderBy("purchaseDate","desc").limit(t.limit):"all"==t.limit&&(e=o["dbExpense"].collection("purchases").where("purchaseDate",">=",n).where("purchaseDate","<=",i).where("userReference","==",d).orderBy("purchaseDate","asc"))),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)}));for(var n=0;n<a.length;n++)a[n]["id"]=s[n],a[n]["vatableAmount"]="",a[n]["inputTax"]="",a[n].vatableAmount=parseFloat(a[n].salesAmount)/1.12,a[n].inputTax=.12*parseFloat(a[n].vatableAmount),a[n].vatableAmount=y(parseFloat(a[n].vatableAmount).toFixed(2)),a[n].inputTax=y(parseFloat(a[n].inputTax).toFixed(2)),a[n].salesAmount=y(parseFloat(a[n].salesAmount).toFixed(2)),t.purchases.push(a[n])}setTimeout((function(){t.loading=!1}),1e3)}))}))}))},openEditPurchaseModal:function(t){this.edit={id:t.id,purchaseId:t.purchaseId,purchaseDate:t.purchaseDate,account:t.accountReference,tinNumber:t.tinNumber,company:t.company,address:t.address,totalAmount:t.salesAmount,enterprise:t.enterpriseReference},this.$bvModal.show("edit-purchase-modal"),this.getAccounts(t.enterpriseReference,"openEdit"),this.getItems(t.purchaseId,"list")},getItems:function(t,e){var a=this,s=[],n=0,i=o["dbExpense"].collection("purchaseItems").where("purchaseReference","==",t).orderBy("dateCreated","asc");a.items=[],i.get().then((function(t){t.forEach((function(t){a.items.push(t.data()),s.push(t.id)}));for(var i=0;i<a.items.length;i++)a.items[i]["id"]=s[i],a.items[i]["vatAmount"]="",a.items[i]["inputTax"]="","change"==e&&(n=parseFloat(n)+parseFloat(a.items[i].amount)),a.items[i].vatAmount=parseFloat(a.items[i].amount)/1.12,a.items[i].inputTax=.12*parseFloat(a.items[i].vatAmount),a.items[i].vatAmount=y(parseFloat(a.items[i].vatAmount).toFixed(2)),a.items[i].inputTax=y(parseFloat(a.items[i].inputTax).toFixed(2)),a.items[i].amount=y(a.items[i].amount);"change"==e&&o["dbExpense"].collection("purchases").doc(a.edit.id).update({salesAmount:n,dateModified:f}).then((function(){a.edit.totalAmount=n,a.getPurchases()}))}))},addItem:function(){var t=this;if(t.$v.newPItem.$touch(),t.$v.newPQuantity.$touch(),t.$v.newPPrice.$touch(),t.$v.newPAmount.$touch(),!t.$v.newPItem.$error&&!t.$v.newPQuantity.$error&&!t.$v.newPPrice.$error&&!t.$v.newPAmount.$error){t.requestProcessing=!0;var e=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],s="PII-"+f.getFullYear()+b(f.getMonth()+1,2)+f.getDate()+"-"+Math.floor(1e6*Math.random());e.get().then((function(e){e.forEach((function(t){t.exists&&a.push(t.data())}));try{o["dbExpense"].collection("purchaseItems").doc().set({purchaseItemId:s,item:t.newPItem,quantity:t.newPQuantity,price:t.newPPrice,amount:t.newPAmount,purchaseReference:t.edit.purchaseId,userReference:a[0].userId,status:1,dateCreated:f,dateModified:f}).then((function(){t.newPItem="",t.newPQuantity="",t.newPPrice="",t.newPAmount="",t.$v.newPItem.$reset(),t.$v.newPQuantity.$reset(),t.$v.newPPrice.$reset(),t.$v.newPAmount.$reset(),t.$bvModal.hide("new-item-modal"),t.getItems(t.edit.purchaseId,"change"),t.requestProcessing=!1,t.$swal({title:"Success",text:"New item added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(n){console.log(n),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}},compute:function(t,e,a){var s=this;"add"==a?s.newPAmount=t*e.replaceAll(",",""):"edit"==a&&(s.editItem.amount=t*e.replaceAll(",",""))},openEditPurchaseItemModal:function(t){var e=this;e.editItem={id:t.id,itemId:t.purchaseItemId,item:t.item,quantity:t.quantity,price:t.price,amount:t.amount,purchaseId:t.purchaseReference},e.$bvModal.show("edit-item-modal")},updateItem:function(){var t=this;if(t.$v.editItem.$touch(),!t.$v.editItem.$error)try{t.requestProcessing=!0,o["dbExpense"].collection("purchaseItems").doc(t.editItem.id).update({item:t.editItem.item,quantity:t.editItem.quantity,price:t.editItem.price,amount:t.editItem.amount,dateModified:f}).then((function(){t.$v.editItem.$reset(),t.$bvModal.hide("edit-item-modal"),t.requestProcessing=!1,t.getItems(t.editItem.purchaseId,"change"),t.$swal({title:"Success",text:"Purchase item updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}},deleteItem:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to delete this item?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value)try{e.requestProcessing=!0,o["dbExpense"].collection("purchaseItems").doc(t.id).delete().then((function(){e.requestProcessing=!1,e.getItems(t.purchaseReference,"change"),e.$swal({title:"Success",text:"Purchase item deleted successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(s){console.log(s),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))},updatePurchase:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;try{o["dbExpense"].collection("purchases").doc(t.edit.id).update({purchaseDate:t.edit.purchaseDate,tinNumber:t.edit.tinNumber,company:t.edit.company,address:t.edit.address,accountReference:t.edit.account,enterpriseReference:t.edit.enterprise,dateModified:f}).then((function(){t.$v.edit.$reset(),t.$bvModal.hide("edit-purchase-modal"),t.requestProcessing=!1,t.$refs["purchase-table"].reset(),t.getPurchases(),t.$swal({title:"Success",text:"Purchase updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},deletePurchase:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to delete this purchase?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value)try{e.requestProcessing=!0,o["dbExpense"].collection("purchases").doc(t.id).delete().then((function(){var a=o["dbExpense"].collection("purchaseItems").where("purchaseReference","==",t.purchaseId),s=[];a.get().then((function(t){t.forEach((function(t){s.push(t.id)}));for(var e=0;e<s.length;e++)o["dbExpense"].collection("purchaseItems").doc(s[e]).delete()})),e.requestProcessing=!1,e.$refs["purchase-table"].reset(),e.getPurchases(),e.$swal({title:"Success",text:"Purchase deleted successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(s){console.log(s),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},w=g,_=(a("0f55"),a("2877")),x=Object(_["a"])(w,s,n,!1,null,null,null);e["default"]=x.exports},9026:function(t,e,a){"use strict";a("5e8b")},9238:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},["forApproval"==this.$router.currentRoute.params.name?a("card",[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h2",[t._v("For Approval Reimbursements")])])]),a("div",{staticClass:"row pl-4 pt-2 pb-2"},[a("span",{staticClass:"col-2 pt-2"},[a("b",[t._v("Filter by month:")])]),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"month",min:"1997-01",max:t.maxDate},on:{input:function(e){return t.getForApprovalReim(1)}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)]),a("div",{staticClass:"table-full-width"},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:t.loadError,title:t.forApprovalTable.title,"sub-title":t.forApprovalTable.subTitle,data:t.forApprovals,columns:t.forApprovalTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.rowNum))]),a("td",t._l(t.names,(function(e){return a("span",{key:e.userId},[e.userId==s.nameReference?a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/reimbursement/"+s.reimbursementId,id:"sideBarTxt",title:"View Reimbursement"}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))])],1):t._e()])})),0),a("td",[t._v(t._s(s.monthOf))]),a("td",{staticClass:"text-right"},[t._v("₱ "+t._s(s.totalAmount))])]}}],null,!1,3328640549)})],1),a("hr",{staticClass:"mt-2 mb-2"}),!t.loading&&t.forApprovals.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-4"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.forApprovals[t.forApprovals.length-1].rowNum)+" of "+t._s(t.forApprovalCount))])]),a("span",{staticClass:"col-2 pt-2 text-right"},[a("b",[t._v("Limit to:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(e){return t.getForApprovalReim(1)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),a("pagination",{attrs:{searchTotalPage:t.forApprovals,totalPages:t.forApprovalCount,currentPage:t.currentForApprovalPage},on:{pagechanged:t.onForApprovalPageChange}})],1):t._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkInlineBtn",block:""},nativeOn:{click:function(e){return t.closeReimDashboard(e)}}},[t._v("Close")])],1)])]):t._e(),"approved"==this.$router.currentRoute.params.name?a("card",[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h2",[t._v("Approved Reimbursements")])])]),a("div",{staticClass:"row pl-4 pt-2"},[a("span",{staticClass:"col-2 pt-2"},[a("b",[t._v("Filter by month:")])]),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"month",min:"1997-01",max:t.maxDate},on:{input:function(e){return t.getApprovedReim(1)}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)]),a("div",{staticClass:"table-full-width"},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:t.loadError,title:t.approvedTable.title,"sub-title":t.approvedTable.subTitle,data:t.approves,columns:t.approvedTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.rowNum))]),a("td",t._l(t.names,(function(e){return a("span",{key:e.userId},[e.userId==s.nameReference?a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/reimbursement/"+s.reimbursementId,id:"sideBarTxt",title:"View Reimbursement"}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))])],1):t._e()])})),0),a("td",[t._v(t._s(s.monthOf))]),a("td",{staticClass:"text-right"},[t._v("₱ "+t._s(s.totalAmount))])]}}],null,!1,3328640549)})],1),a("hr",{staticClass:"mt-2 mb-2"}),!t.loading&&t.approves.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-4"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.approves[t.approves.length-1].rowNum)+" of "+t._s(t.approvedCount))])]),a("span",{staticClass:"col-2 pt-2 text-right"},[a("b",[t._v("Limit to:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(e){return t.getForApprovalReim(1)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),a("pagination",{attrs:{searchTotalPage:t.approves,totalPages:t.approvedCount,currentPage:t.currentApprovedPage},on:{pagechanged:t.onApprovedPageChange}})],1):t._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkInlineBtn",block:""},nativeOn:{click:function(e){return t.closeReimDashboard(e)}}},[t._v("Close")])],1)])]):t._e(),"processed"==this.$router.currentRoute.params.name?a("card",[a("div",{staticClass:"card-header bg-transparent pb-5"},[a("div",{staticClass:"text-left"},[a("h2",[t._v("Processed Reimbursements")])])]),a("div",{staticClass:"row pl-4 pt-2"},[a("span",{staticClass:"col-2 pt-2"},[a("b",[t._v("Filter by month:")])]),a("span",{staticClass:"col-sm-4"},[a("base-input",{attrs:{type:"month",min:"1997-01",max:t.maxDate},on:{input:function(e){return t.getProcessedReim(1)}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)]),a("div",{staticClass:"table-full-width"},[a("paper-table",{attrs:{type:"hover",loading:t.loading,loadError:t.loadError,title:t.processedTable.title,"sub-title":t.processedTable.subTitle,data:t.processed,columns:t.processedTable.columns},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[t._v(t._s(s.rowNum))]),a("td",t._l(t.names,(function(e){return a("span",{key:e.userId},[e.userId==s.nameReference?a("span",[a("router-link",{staticClass:"pointer",attrs:{to:"/view/reimbursement/"+s.reimbursementId,id:"sideBarTxt",title:"View Reimbursement"}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))])],1):t._e()])})),0),a("td",[t._v(t._s(s.monthOf))]),a("td",{staticClass:"text-right"},[t._v("₱ "+t._s(s.totalAmount))])]}}],null,!1,3328640549)})],1),a("hr",{staticClass:"mt-2 mb-2"}),!t.loading&&t.processed.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-4"},[a("span",{staticClass:"pagination-results"},[t._v(t._s(t.processed[t.processed.length-1].rowNum)+" of "+t._s(t.processedCount))])]),a("span",{staticClass:"col-2 pt-2 text-right"},[a("b",[t._v("Limit to:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1,readonly:""},on:{input:function(e){return t.getForApprovalReim(1)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),a("pagination",{attrs:{searchTotalPage:t.processed,totalPages:t.processedCount,currentPage:t.currentProcessedPage},on:{pagechanged:t.onProcessedPageChange}})],1):t._e(),a("hr",{staticClass:"mt-2 mb-2"}),a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-8"}),a("div",{staticClass:"col-4"},[a("base-button",{attrs:{id:"darkInlineBtn",block:""},nativeOn:{click:function(e){return t.closeReimDashboard(e)}}},[t._v("Close")])],1)])]):t._e()],1)],1)},n=[],i=(a("99af"),a("4160"),a("b680"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=["#","Name","Month Of","Total Amount"],l=a("c1df"),c=a("e966"),d=c.bindWith(",","."),u={components:{},data:function(){return{loading:!0,loadError:!1,forApprovals:[],forApprovalCount:1,forApprovalTable:{title:"For Approval Reimbursment Table",subTitle:"",columns:[].concat(o)},currentForApprovalPage:1,approves:[],approvedCount:1,approvedTable:{title:"For Approval Reimbursment Table",subTitle:"",columns:[].concat(o)},currentApprovedPage:1,processed:[],processedCount:1,processedTable:{title:"For Approval Reimbursment Table",subTitle:"",columns:[].concat(o)},currentProcessedPage:1,startDate:l().format("YYYY-MM"),maxDate:l().format("YYYY-MM"),views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All"}],limit:"30",names:[]}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getNames(),t.getForApprovalReim(1),t.getApprovedReim(1);case 3:case"end":return e.stop()}}),e)})))()},methods:{closeReimDashboard:function(){this.$router.push("/reimbursement")},getNames:function(){var t=this,e=r["dbUsers"].collection("users"),a=[];e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data())}));for(var s=0;s<a.length;s++)a[s]["fullName"]=a[s].firstname+" "+a[s].lastname,t.names.push(a[s]);t.filterName=t.names[0].userId}}))},getForApprovalReim:function(t){var e=this,a=null,s=[],n=[],i=l(e.startDate).startOf("month").format("YYYY-MM-DD"),o=l(e.startDate).endOf("month").format("YYYY-MM-DD"),c=[];e.forApprovals=[],e.forApprovalCount=0,"all"!=e.limit?a=r["dbExpense"].collection("reimbursements").where("processDate",">=",i).where("processDate","<=",o).where("status","==",1).orderBy("processDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbExpense"].collection("reimbursements").where("processDate",">=",i).where("processDate","<=",o).where("status","==",1).orderBy("processDate","desc")),a.get().then((function(a){a.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var i=0;i<s.length;i++)s[i]["rowNum"]=1+i,s[i].totalAmount=d(parseFloat(s[i].totalAmount.replaceAll(",","")).toFixed(2));for(var r=10*(t-1),o=10*t,l=r;l<o;l++)s[l]&&e.forApprovals.push(s[l]);e.currentForApprovalPage=t,e.forApprovalCount=c.length})),setTimeout((function(){e.loading=!1}),1e3)},onForApprovalPageChange:function(t){this.getForApprovalReim(t)},getApprovedReim:function(t){var e=this,a=null,s=[],n=[],i=l(e.startDate).startOf("month").format("YYYY-MM-DD"),o=l(e.startDate).endOf("month").format("YYYY-MM-DD"),c=[];e.approves=[],e.approvedCount=0,"all"!=e.limit?a=r["dbExpense"].collection("reimbursements").where("processDate",">=",i).where("processDate","<=",o).where("status","==",2).orderBy("processDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbExpense"].collection("reimbursements").where("processDate",">=",i).where("processDate","<=",o).where("status","==",2).orderBy("processDate","desc")),a.get().then((function(a){a.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var i=0;i<s.length;i++)s[i]["rowNum"]=1+i,s[i].totalAmount=d(parseFloat(s[i].totalAmount.replaceAll(",","")).toFixed(2));for(var r=10*(t-1),o=10*t,l=r;l<o;l++)s[l]&&e.approves.push(s[l]);e.currentApprovedPage=t,e.approvedCount=c.length})),setTimeout((function(){e.loading=!1}),1e3)},onApprovedPageChange:function(t){this.getApprovedReim(t)},getProcessedReim:function(t){var e=this,a=null,s=[],n=[],i=l(e.startDate).startOf("month").format("YYYY-MM-DD"),o=l(e.startDate).endOf("month").format("YYYY-MM-DD"),c=[];e.processed=[],e.processedCount=0,"all"!=e.limit?a=r["dbExpense"].collection("reimbursements").where("processDate",">=",i).where("processDate","<=",o).where("status","==",3).orderBy("processDate","desc").limit(e.limit):"all"==e.limit&&(a=r["dbExpense"].collection("reimbursements").where("processDate",">=",i).where("processDate","<=",o).where("status","==",3).orderBy("processDate","desc")),a.get().then((function(a){a.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var i=0;i<s.length;i++)s[i]["rowNum"]=1+i,s[i].totalAmount=d(parseFloat(s[i].totalAmount.replaceAll(",","")).toFixed(2));for(var r=10*(t-1),o=10*t,l=r;l<o;l++)s[l]&&e.processed.push(s[l]);e.currentProccessedPage=t,e.processedCount=c.length})),setTimeout((function(){e.loading=!1}),1e3)},onProcessedPageChange:function(t){this.getProcessedReim(t)}}},m=u,p=a("2877"),h=Object(p["a"])(m,s,n,!1,null,null,null);e["default"]=h.exports},9875:function(t,e,a){"use strict";a("61d3")},9968:function(t,e,a){},"9b36":function(t,e,a){},"9e28":function(t,e,a){},a016:function(t,e,a){"use strict";a("3897")},a27f:function(t,e,a){},a371:function(t,e,a){},a68e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==t.clientStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getClients(1)}}},[t._v("Enabled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==t.clientStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getClients(0)}}},[t._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"client-table",attrs:{columns:t.columns,rows:t.clients,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["clientName"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.clientName))])]):t._e(),"address"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.address))])]):t._e(),"tin"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.tin))])]):t._e(),"contactNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.contactNumber))])]):t._e(),"email"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.email))])]):t._e(),"businessStyle"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.businessStyle))])]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return t.openEditClientModal(e.row)}}}):t._e(),1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return t.changeStatus(e.row.id,0,"Disable")}}}):t._e(),0==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable"},on:{click:function(a){return t.changeStatus(e.row.id,1,"Enable")}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.clients.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getClients(t.clientStat)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-client-modal",modifiers:{"new-client-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Client")])],1)]),a("b-modal",{attrs:{size:"lg",id:"new-client-modal",title:"New Client",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addClient(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-client-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Client:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Client"},model:{value:t.newClient,callback:function(e){t.newClient=e},expression:"newClient"}}),t.$v.newClient.$anyDirty&&!t.$v.newClient.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newClient.$anyDirty&&!t.$v.newClient.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:t.newAddress},on:{input:function(e){e.target.composing||(t.newAddress=e.target.value)}}}),t.$v.newAddress.$anyDirty&&!t.$v.newAddress.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:t.newTinNumber,callback:function(e){t.newTinNumber=e},expression:"newTinNumber"}}),t.$v.newTinNumber.$anyDirty&&!t.$v.newTinNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:t.newContactNumber,callback:function(e){t.newContactNumber=e},expression:"newContactNumber"}}),t.$v.newContactNumber.$anyDirty&&!t.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Email Address:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Business Style:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:t.newEmailAddress,callback:function(e){t.newEmailAddress=e},expression:"newEmailAddress"}}),t.$v.newEmailAddress.$anyDirty&&!t.$v.newEmailAddress.email?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Business Style"},model:{value:t.newBusinessStyle,callback:function(e){t.newBusinessStyle=e},expression:"newBusinessStyle"}})],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-client-modal",title:"Edit Client",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateClient(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-client-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Client:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Client"},model:{value:t.edit.clientName,callback:function(e){t.$set(t.edit,"clientName",e)},expression:"edit.clientName"}}),t.$v.edit.clientName.$anyDirty&&!t.$v.edit.clientName.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.clientName.$anyDirty&&!t.$v.edit.clientName.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit.address,expression:"edit.address"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:t.edit.address},on:{input:function(e){e.target.composing||t.$set(t.edit,"address",e.target.value)}}}),t.$v.edit.address.$anyDirty&&!t.$v.edit.address.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:t.edit.tin,callback:function(e){t.$set(t.edit,"tin",e)},expression:"edit.tin"}}),t.$v.edit.tin.$anyDirty&&!t.$v.edit.tin.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:t.edit.contactNumber,callback:function(e){t.$set(t.edit,"contactNumber",e)},expression:"edit.contactNumber"}}),t.$v.edit.contactNumber.$anyDirty&&!t.$v.edit.contactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Email Address:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Business Style:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:t.edit.email,callback:function(e){t.$set(t.edit,"email",e)},expression:"edit.email"}}),t.$v.edit.email.$anyDirty&&!t.$v.edit.email.email?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Business Style"},model:{value:t.edit.businessStyle,callback:function(e){t.$set(t.edit,"businessStyle",e)},expression:"edit.businessStyle"}})],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("2f62"),d=a("c6f8"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&, ]*$/),m=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),p=new Date,h={components:{},data:function(){return{columns:[{label:"Client",field:"clientName"},{label:"Address",field:"address"},{label:"Tin",field:"tin"},{label:"Contact No.",field:"contactNumber"},{label:"Email",field:"email"},{label:"Business Style",field:"businessStyle"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",requestProcessing:!1,newClient:"",newAddress:"",newTinNumber:"",newContactNumber:"",newEmailAddress:"",newBusinessStyle:"",edit:{id:"",clientId:"",clientName:"",address:"",tin:"",contactNumber:"",email:"",businessStyle:""},clientStat:1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getClients(t.clientStat);case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(c["b"])({valid:"Sales/valid",error:"Sales/error",clients:"Sales/clients"})),validations:{newClient:{required:l["required"],alphaNumCustomValidator:u},newAddress:{required:l["required"]},newTinNumber:{numCustomValidator:m},newContactNumber:{numCustomValidator:m},newEmailAddress:{email:l["email"]},edit:{clientName:{required:l["required"],alphaNumCustomValidator:u},address:{required:l["required"]},tin:{numCustomValidator:m},contactNumber:{numCustomValidator:m},email:{email:l["email"]}}},methods:{addClient:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.$v.newClient.$touch(),a.$v.newAddress.$touch(),a.$v.newTinNumber.$touch(),a.$v.newContactNumber.$touch(),a.$v.newEmailAddress.$touch(),a.$v.newClient.$error||a.$v.newAddress.$error||a.$v.newTinNumber.$error||a.$v.newContactNumber.$error||a.$v.newEmailAddress.$error||(a.requestProcessing=!0,s={clientId:"",clientName:Object(d["a"])(a.newClient),address:a.newAddress,tin:a.newTinNumber,contactNumber:a.newContactNumber,email:a.newEmailAddress,businessStyle:a.newBusinessStyle,userReference:"",status:1,dateCreated:p,dateModified:p},a.$store.dispatch("Sales/checkClient",{validate:1,newClient:a.newClient}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Client name"):0==a.valid&&a.$store.dispatch("Sales/checkClient",{validate:2,newTinNumber:a.newTinNumber}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Tin"):0==a.valid&&a.$store.dispatch("Sales/checkClient",{validate:3,newContactNumber:a.newContactNumber}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Contact number"):0==a.valid&&a.$store.dispatch("Sales/checkClient",{validate:4,newEmailAddress:a.newEmailAddress}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Email address"):0==a.valid&&a.$store.dispatch("Sales/newClient",s).then((function(){setTimeout((function(){0==a.error?(a.newClient="",a.newAddress="",a.newTinNumber="",a.newContactNumber="",a.newEmailAddress="",a.newBusinessStyle="",a.requestProcessing=!1,a.$v.newClient.$reset(),a.$v.newAddress.$reset(),a.$v.newTinNumber.$reset(),a.$v.newContactNumber.$reset(),a.$v.newEmailAddress.$reset(),a.$refs["client-table"].reset(),a.getClients(a.clientStat),a.$bvModal.hide("new-client-modal"),a.$swal({title:"Success",text:"New client added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()}),500)}))}),500)}))}),500)}))}),500)}))}),500)})));case 7:case"end":return e.stop()}}),e)})))()},validationMessage:function(t){var e=this;e.$swal({title:"Invalid",text:t+" already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1},errorMessage:function(){var t=this;t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})},getClients:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e,s.loading=!0,s.clientStat=t,s.$store.dispatch("Sales/getClients",{limit:s.limit,stat:t}),setTimeout((function(){s.loading=!1}),1e3);case 5:case"end":return a.stop()}}),a)})))()},openEditClientModal:function(t){this.edit={id:t.id,clientId:t.clientId,clientName:t.clientName,address:t.address,tin:t.tin,contactNumber:t.contactNumber,email:t.email,businessStyle:t.businessStyle},this.$bvModal.show("edit-client-modal")},updateClient:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.$v.edit.$touch(),a.$v.edit.$error||(a.requestProcessing=!0,a.$store.dispatch("Sales/checkEditClient",{validate:1,clientName:a.edit.clientName,clientId:a.edit.clientId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Client name"):0==a.valid&&a.$store.dispatch("Sales/checkEditClient",{validate:2,tin:a.edit.tin,clientId:a.edit.clientId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Tin"):0==a.valid&&a.$store.dispatch("Sales/checkEditClient",{validate:3,contactNumber:a.edit.contactNumber,clientId:a.edit.clientId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Contact number"):0==a.valid&&a.$store.dispatch("Sales/checkEditClient",{validate:4,email:a.edit.email,clientId:a.edit.clientId}).then((function(){setTimeout((function(){1==a.valid?a.validationMessage("Email address"):0==a.valid&&(a.requestProcessing=!1,a.$store.dispatch("Sales/editClient",a.edit).then((function(){0==a.error?(a.$v.edit.$reset(),a.$refs["client-table"].reset(),a.getClients(a.clientStat),a.$bvModal.hide("edit-client-modal"),a.$swal({title:"Success",text:"Client updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})):1==a.error&&a.errorMessage()})))}),500)}))}),500)}))}),500)}))}),500)})));case 3:case"end":return e.stop()}}),e)})))()},changeStatus:function(t,e,a){var s=this;s.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){n.value&&s.$store.dispatch("Sales/clientStatus",{id:t,stat:e}).then((function(){setTimeout((function(){0==s.error?s.$swal({title:"Success",text:"Client status change to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){s.$refs["client-table"].reset(),s.getClients(e)})):1==s.error&&s.errorMessage()}),1e3)}))}))}}},f=h,b=(a("d2fb"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,null,null);e["default"]=v.exports},a9c8:function(t,e,a){},aa00:function(t,e,a){},aa1c:function(t,e,a){"use strict";a("d31a")},b04c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==t.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getChartOfAccounts(t.filterEquation,1)}}},[t._v("Active")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==t.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getChartOfAccounts(t.filterEquation,0)}}},[t._v("Disabled")])])],1)]),a("div",{staticClass:"row text-left pb-2"},[a("span",{staticClass:"col-4"}),a("span",{staticClass:"col-4 pt-3 pl-5 text-right"},[a("b",[t._v("Account Equations:")])]),a("span",{staticClass:"col-sm-3 pt-2 text-right"},[a("v-select",{staticStyle:{width:"240px"},attrs:{id:"inputStyle",options:t.accountEquations,reduce:function(t){return t.accountEquationId},label:"accountEquation",clearable:!1,readonly:""},on:{input:function(e){return t.getChartOfAccounts(t.filterEquation,1)}},model:{value:t.filterEquation,callback:function(e){t.filterEquation=e},expression:"filterEquation"}})],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"coa-table",attrs:{columns:t.columns,rows:t.accounts,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["account"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.account))])]):t._e(),"code"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.code))])]):t._e(),"accountType"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.accountType))])]):t._e(),"methodType"==e.column.field?a("span",[a("span",[t._v(t._s(""==e.row.methodType?"----------":e.row.methodType))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"status"==e.column.field?a("span",[a("span",[t._v(t._s(1==e.row.status?"Active":"Disable"))])]):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateAccountModal(e.row)}}}),1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return t.changeStatus(e.row,0,"Disable")}}}):t._e(),0==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Active"},on:{click:function(a){return t.changeStatus(e.row,1,"Active")}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.accounts.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getChartOfAccounts(t.filterEquation,1)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-chart-of-account-modal",modifiers:{"new-chart-of-account-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Chart Of Account")])],1)]),a("b-modal",{attrs:{size:"lg",id:"new-chart-of-account-modal",title:"New Chart of Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addChartOfAccount(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-chart-of-account-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account Equation:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Account"},model:{value:t.newAccount,callback:function(e){t.newAccount=e},expression:"newAccount"}}),t.$v.newAccount.$anyDirty&&!t.$v.newAccount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newAccount.$anyDirty&&!t.$v.newAccount.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.accountEquations,reduce:function(t){return t.accountEquationId},label:"accountEquation",clearable:!1},model:{value:t.newAccountEquation,callback:function(e){t.newAccountEquation=e},expression:"newAccountEquation"}}),t.$v.newAccountEquation.$anyDirty&&!t.$v.newAccountEquation.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account Code:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Account Code"},model:{value:t.newAccountCode,callback:function(e){t.newAccountCode=e},expression:"newAccountCode"}}),t.$v.newAccountCode.$anyDirty&&!t.$v.newAccountCode.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newAccountCode.$anyDirty&&!t.$v.newAccountCode.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.accountTypes,reduce:function(t){return t.accountType},label:"accountType",clearable:!1},model:{value:t.newAccountType,callback:function(e){t.newAccountType=e},expression:"newAccountType"}}),t.$v.newAccountType.$anyDirty&&!t.$v.newAccountType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Method Type:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Enterprise:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.methodTypes,reduce:function(t){return t.methodType},label:"methodType",clearable:!1},model:{value:t.newMethodType,callback:function(e){t.newMethodType=e},expression:"newMethodType"}})],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.enterprises,reduce:function(t){return t.enterpriseId},label:"enterprise",clearable:!1},model:{value:t.newEnterprise,callback:function(e){t.newEnterprise=e},expression:"newEnterprise"}}),t.$v.newEnterprise.$anyDirty&&!t.$v.newEnterprise.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-chart-of-account-modal",title:"Edit Chart of Account",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateAccount(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-chart-of-account-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account Code:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Account"},model:{value:t.edit.account,callback:function(e){t.$set(t.edit,"account",e)},expression:"edit.account"}}),t.$v.edit.$anyDirty&&!t.$v.edit.account.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.account.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Account Code"},model:{value:t.edit.accountCode,callback:function(e){t.$set(t.edit,"accountCode",e)},expression:"edit.accountCode"}}),t.$v.edit.$anyDirty&&!t.$v.edit.accountCode.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.accountCode.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Account Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Method Type:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.accountTypes,reduce:function(t){return t.accountType},label:"accountType",clearable:!1},model:{value:t.edit.accountType,callback:function(e){t.$set(t.edit,"accountType",e)},expression:"edit.accountType"}}),t.$v.edit.$anyDirty&&!t.$v.edit.accountType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.methodTypes,reduce:function(t){return t.methodType},label:"methodType",clearable:!1},model:{value:t.edit.methodType,callback:function(e){t.$set(t.edit,"methodType",e)},expression:"edit.methodType"}})],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Enterprise:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.enterprises,reduce:function(t){return t.enterpriseId},label:"enterprise",clearable:!1},model:{value:t.edit.enterprise,callback:function(e){t.$set(t.edit,"enterprise",e)},expression:"edit.enterprise"}}),t.$v.edit.$anyDirty&&!t.$v.edit.enterprise.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("2f62"),d=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),u=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),m=new Date,p=a("9f25"),h={components:{},data:function(){return{columns:[{label:"Account",field:"account"},{label:"Code",field:"code"},{label:"Account Type",field:"accountType"},{label:"Method",field:"methodType"},{label:"Created by",field:"userReference"},{label:"Status",field:"status"},{label:"",field:"action",sortable:!1,width:"80px"}],loading:!1,filterEquation:"",accounts:[],requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",stat:1,accountEquations:[],accountTypes:[{accountType:"Journal Accounts"},{accountType:"Financial Statement Accounts"}],methodTypes:[{methodType:"Periodic"},{methodType:"Perpetual"}],newAccount:"",newAccountEquation:"",newAccountCode:"",newAccountType:"Journal Accounts",newMethodType:"",newEnterprise:"",enterprises:[],edit:{id:"",accountId:"",account:"",accountCode:"",accountType:"",methodType:"",enterprise:""}}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getAccountEquations(),t.getEnterprises();case 2:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(c["b"])({users:"Users/users"})),validations:{newAccount:{required:l["required"],alphaNumCustomValidator:d},newAccountEquation:{required:l["required"]},newAccountCode:{required:l["required"],numCustomValidator:u},newAccountType:{required:l["required"]},newEnterprise:{required:l["required"]},edit:{account:{required:l["required"],alphaNumCustomValidator:d},accountCode:{required:l["required"],numCustomValidator:u},accountType:{required:l["required"]},enterprise:{required:l["required"]}}},methods:{getAccountEquations:function(){var t=this,e=o["dbMains"].collection("accountEquations").orderBy("code","asc");t.accountEquations=[],e.get().then((function(e){e.forEach((function(e){t.accountEquations.push(e.data())})),t.newAccountEquation=t.accountEquations[0].accountEquationId,t.getChartOfAccounts(t.accountEquations[0].accountEquationId,1)}))},getEnterprises:function(){var t=this,e=o["dbExpense"].collection("enterprises").orderBy("enterprise","asc");t.enterprises=[],e.get().then((function(e){e.forEach((function(e){t.enterprises.push(e.data())})),t.newEnterprise=t.enterprises[0].enterpriseId}))},addChartOfAccount:function(){var t=this;if(t.$v.newAccount.$touch(),t.$v.newAccountType.$touch(),t.$v.newAccountEquation.$touch(),t.$v.newAccountCode.$touch(),t.$v.newEnterprise.$touch(),!t.$v.newAccount.$error&&!t.$v.newAccountEquation.$error&&!t.$v.newAccountType.$error&&!t.$v.newAccountCode.$error&&!t.$v.newEnterprise.$error){t.requestProcessing=!0;var e=o["dbMains"].collection("chartOfAccounts").where("account","==",t.newAccount).where("accountEquationReference","==",t.newAccountEquation).where("accountType","==",t.newAccountType);e.get().then((function(e){if(e.empty){if(e){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="COAI-"+m.getFullYear()+p(m.getMonth()+1,2)+m.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{o["dbMains"].collection("chartOfAccounts").doc().set({accountId:n,account:t.newAccount,code:t.newAccountCode,accountEquationReference:t.newAccountEquation,accountType:t.newAccountType,methodType:t.newMethodType,enterpriseReference:t.newEnterprise,status:1,userReference:s[0].userId,dateCreated:m,dateModified:m}).then((function(){t.getChartOfAccounts(t.newAccountEquation,1),t.newAccount="",t.newAccountEquation="",t.newAccountCode="",t.newAccountType="Journal Accounts",t.newMethodType="",t.newEnterprise="",t.requestProcessing=!1,t.$v.newAccount.$reset(),t.$v.newAccountEquation.$reset(),t.$v.newAccountType.$reset(),t.$v.newAccountCode.$reset(),t.$v.newEnterprise.$reset(),t.getEnterprises(),t.$bvModal.hide("new-chart-of-account-modal"),t.$refs["coa-table"].reset(),t.$swal({title:"Success",text:"New account added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Account already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},getChartOfAccounts:function(t,e){var a=this,s=null,n=[],i=[];a.loading=!0,a.accounts=[],a.filterEquation=t,a.stat=e,"all"!=a.limit?s=o["dbMains"].collection("chartOfAccounts").where("accountEquationReference","==",t).where("status","==",e).orderBy("code","asc").limit(a.limit):"all"==a.limit&&(s=o["dbMains"].collection("chartOfAccounts").where("accountEquationReference","==",t).where("status","==",e).orderBy("code","asc")),s.get().then((function(t){if(!t.empty){t.forEach((function(t){n.push(t.data()),i.push(t.id)}));for(var e=0;e<n.length;e++)n[e]["id"]=i[e],a.accounts.push(n[e])}setTimeout((function(){a.loading=!1}),1e3)}))},openUpdateAccountModal:function(t){this.edit={id:t.id,accountId:t.accountId,account:t.account,accountCode:t.code,accountType:t.accountType,methodType:t.methodType,enterprise:t.enterpriseReference},this.$bvModal.show("edit-chart-of-account-modal")},updateAccount:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;var e=o["dbMains"].collection("chartOfAccounts").where("account","==",t.edit.account).where("accountId","!=",t.edit.accountId);e.get().then((function(e){if(e.empty){if(e)try{o["dbMains"].collection("chartOfAccounts").doc(t.edit.id).update({account:t.edit.account,code:t.edit.accountCode,accountType:t.edit.accountType,methodType:t.edit.methodType,enterpriseReference:t.edit.enterprise,dateModified:m}).then((function(){t.edit={},t.$v.edit.$reset(),t.$bvModal.hide("edit-chart-of-account-modal"),t.requestProcessing=!1,t.getChartOfAccounts(t.filterEquation,1),t.$refs["coa-table"].reset(),t.$swal({title:"Success",text:"Account updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Account already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},changeStatus:function(t,e,a){var s=this;s.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value)try{o["dbMains"].collection("chartOfAccounts").doc(t.id).update({status:e,dateModified:m}).then((function(){s.$swal({title:"Success",text:"Account change status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){s.$refs["coa-table"].reset(),s.getChartOfAccounts(s.filterEquation,e)}))}))}catch(i){console.log(i),s.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},f=h,b=(a("b2bb"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,null,null);e["default"]=v.exports},b2bb:function(t,e,a){"use strict";a("9e28")},bc02:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},[1==t.companyStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getCompanies(1)}}},[t._v("Enabled")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},[0==t.companyStat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getCompanies(0)}}},[t._v("Disabled")])])],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"company-table",attrs:{columns:t.columns,rows:t.companies,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["company"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.company))])]):t._e(),"address"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.address))])]):t._e(),"tinNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.tinNumber))])]):t._e(),"contactNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.contactNumber))])]):t._e(),"emailAddress"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.emailAddress))])]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return t.openEditCompanyModal(e.row)}}}):t._e(),1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-times-circle",attrs:{id:"sideBarTxt",title:"Disable"},on:{click:function(a){return t.changeStatus(e.row.id,0,"Disable")}}}):t._e(),0==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Enable"},on:{click:function(a){return t.changeStatus(e.row.id,1,"Enable")}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.companies.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getCompanies(t.companyStat)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-company-modal",modifiers:{"new-company-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Company")])],1)]),a("b-modal",{attrs:{size:"lg",id:"new-company-modal",title:"New Company",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addCompany(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-company-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Company:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Company"},model:{value:t.newCompany,callback:function(e){t.newCompany=e},expression:"newCompany"}}),t.$v.newCompany.$anyDirty&&!t.$v.newCompany.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newCompany.$anyDirty&&!t.$v.newCompany.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newAddress,expression:"newAddress"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:t.newAddress},on:{input:function(e){e.target.composing||(t.newAddress=e.target.value)}}}),t.$v.newAddress.$anyDirty&&!t.$v.newAddress.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:t.newTinNumber,callback:function(e){t.newTinNumber=e},expression:"newTinNumber"}}),t.$v.newTinNumber.$anyDirty&&!t.$v.newTinNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:t.newContactNumber,callback:function(e){t.newContactNumber=e},expression:"newContactNumber"}}),t.$v.newContactNumber.$anyDirty&&!t.$v.newContactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Email Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:t.newEmailAddress,callback:function(e){t.newEmailAddress=e},expression:"newEmailAddress"}}),t.$v.newEmailAddress.$anyDirty&&!t.$v.newEmailAddress.email?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"lg",id:"edit-company-modal",title:"Edit Company",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateCompany(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-company-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Company:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Address:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Company"},model:{value:t.edit.company,callback:function(e){t.$set(t.edit,"company",e)},expression:"edit.company"}}),t.$v.edit.company.$anyDirty&&!t.$v.edit.company.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.company.$anyDirty&&!t.$v.edit.company.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit.address,expression:"edit.address"}],staticClass:"pl-2",attrs:{rows:"4",cols:"39",id:"inputStyle",placeholder:"Address"},domProps:{value:t.edit.address},on:{input:function(e){e.target.composing||t.$set(t.edit,"address",e.target.value)}}}),t.$v.edit.address.$anyDirty&&!t.$v.edit.address.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()])]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Tin Number:")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Contact Number:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Tin Number"},model:{value:t.edit.tinNumber,callback:function(e){t.$set(t.edit,"tinNumber",e)},expression:"edit.tinNumber"}}),t.$v.edit.tinNumber.$anyDirty&&!t.$v.edit.tinNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Contact Number"},model:{value:t.edit.contactNumber,callback:function(e){t.$set(t.edit,"contactNumber",e)},expression:"edit.contactNumber"}}),t.$v.edit.contactNumber.$anyDirty&&!t.$v.edit.contactNumber.numCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Email Address:")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Email Address"},model:{value:t.edit.emailAddress,callback:function(e){t.$set(t.edit,"emailAddress",e)},expression:"edit.emailAddress"}}),t.$v.edit.emailAddress.$anyDirty&&!t.$v.edit.emailAddress.email?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("b5ae"),l=o["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&, ]*$/),c=o["helpers"].regex("alphaNumAndDot",/^[ 0-9 ]*$/),d=new Date,u=a("9f25"),m={components:{},data:function(){return{columns:[{label:"Company",field:"company"},{label:"Address",field:"address"},{label:"Tin No.",field:"tinNumber"},{label:"Contact No.",field:"contactNumber"},{label:"Email",field:"emailAddress"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!0,companies:[],views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",requestProcessing:!1,newCompany:"",newAddress:"",newTinNumber:"",newContactNumber:"",newEmailAddress:"",edit:{id:"",companyId:"",company:"",address:"",tinNumber:"",contactNumber:"",emailAddress:""},companyStat:1}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getCompanies(t.companyStat);case 1:case"end":return e.stop()}}),e)})))()},validations:{newCompany:{required:o["required"],alphaNumCustomValidator:l},newAddress:{required:o["required"]},newTinNumber:{numCustomValidator:c},newContactNumber:{numCustomValidator:c},newEmailAddress:{email:o["email"]},edit:{company:{required:o["required"],alphaNumCustomValidator:l},address:{required:o["required"]},tinNumber:{numCustomValidator:c},contactNumber:{numCustomValidator:c},emailAddress:{email:o["email"]}}},methods:{addCompany:function(){var t=this;if(t.$v.newCompany.$touch(),t.$v.newAddress.$touch(),t.$v.newTinNumber.$touch(),t.$v.newContactNumber.$touch(),t.$v.newEmailAddress.$touch(),!t.$v.newCompany.$error&&!t.$v.newAddress.$error&&!t.$v.newTinNumber.$error&&!t.$v.newContactNumber.$error&&!t.$v.newEmailAddress.$error){t.requestProcessing=!0;var e=r["dbSales"].collection("company").where("tinNumber","==",t.newTinNumber);e.get().then((function(e){if(e.empty){if(e){var a=r["dbSales"].collection("company").where("contactNumber","==",t.newContactNumber);a.get().then((function(e){if(e.empty){if(e){var a=r["dbSales"].collection("company").where("emailAddress","==",t.newEmailAddress);a.get().then((function(e){if(e.empty){if(e){var a=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="CI-"+d.getFullYear()+u(d.getMonth()+1,2)+d.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{r["dbSales"].collection("company").doc().set({companyId:n,company:t.newCompany,address:t.newAddress,tinNumber:t.newTinNumber,contactNumber:t.newContactNumber,emailAddress:t.newEmailAddress,type:2,userReference:s[0].userId,status:1,dateCreated:d,dateModified:d}).then((function(){t.newCompany="",t.newAddress="",t.newTinNumber="",t.newContactNumber="",t.newEmailAddress="",t.requestProcessing=!1,t.$v.newCompany.$reset(),t.$v.newAddress.$reset(),t.$v.newTinNumber.$reset(),t.$v.newContactNumber.$reset(),t.$v.newEmailAddress.$reset(),t.$refs["company-table"].reset(),t.getCompanies(t.companyStat),t.$bvModal.hide("new-company-modal"),t.$swal({title:"Success",text:"New company added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Email address already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Contact number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Tin number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},getCompanies:function(t){var e=this,a=null,s=[],n=[];e.loading=!0,e.companies=[],e.companyStat=t,"all"!=e.limit?a=r["dbSales"].collection("company").where("status","==",t).orderBy("company","asc").limit(e.limit):"all"==e.limit&&(a=r["dbSales"].collection("company").where("status","==",t).orderBy("company","asc")),a.get().then((function(t){if(!t.empty){t.forEach((function(t){s.push(t.data()),n.push(t.id)}));for(var a=0;a<s.length;a++)s[a]["id"]=n[a],e.companies.push(s[a])}setTimeout((function(){e.loading=!1}),1e3)}))},openEditCompanyModal:function(t){this.edit={id:t.id,companyId:t.companyId,company:t.company,address:t.address,tinNumber:t.tinNumber,contactNumber:t.contactNumber,emailAddress:t.emailAddress},this.$bvModal.show("edit-company-modal")},updateCompany:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;var e=r["dbSales"].collection("company").where("companyId","!=",t.edit.companyId).where("tinNumber","==",t.edit.tinNumber);e.get().then((function(e){if(e.empty){if(e){var a=r["dbSales"].collection("company").where("companyId","!=",t.edit.companyId).where("contactNumber","==",t.edit.contactNumber);a.get().then((function(e){if(e.empty){if(e){var a=r["dbSales"].collection("company").where("companyId","!=",t.edit.companyId).where("emailAddress","==",t.edit.emailAddress);a.get().then((function(e){if(e.empty){if(e)try{r["dbSales"].collection("company").doc(t.edit.id).update({company:t.edit.company,address:t.edit.address,tinNumber:t.edit.tinNumber,contactNumber:t.edit.contactNumber,emailAddress:t.edit.emailAddress,dateModified:d}).then((function(){t.requestProcessing=!1,t.$v.edit.$reset(),t.$refs["company-table"].reset(),t.getCompanies(t.companyStat),t.$bvModal.hide("edit-company-modal"),t.$swal({title:"Success",text:"Company updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Email address already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Contact number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Tin number already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},changeStatus:function(t,e,a){var s=this;s.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value)try{r["dbSales"].collection("company").doc(t).update({status:e,dateModified:d}).then((function(){s.$swal({title:"Success",text:"Company status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){s.$refs["company-table"].reset(),s.getCompanies(e)}))}))}catch(i){console.log(i),s.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},p=m,h=(a("9026"),a("2877")),f=Object(h["a"])(p,s,n,!1,null,null,null);e["default"]=f.exports},c858:function(t,e,a){"use strict";a("7c07")},cc32:function(t,e,a){},cdad:function(t,e,a){"use strict";a("799d")},d282:function(t,e,a){"use strict";a("f4aa")},d2fb:function(t,e,a){"use strict";a("a27f")},d31a:function(t,e,a){},d3b4:function(t,e,a){},d47b:function(t,e,a){},ddca:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"service-type-table",attrs:{columns:t.columns,rows:t.serviceTypes,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["type"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.type))])]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Edit"},on:{click:function(a){return t.openEditServiceTypeModal(e.row)}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.serviceTypes.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getServiceTypes()}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-service-type-modal",modifiers:{"new-service-type-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Service Type")])],1)]),a("b-modal",{attrs:{size:"md",id:"new-service-type-modal",title:"New Service Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addServiceType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-service-type-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}}),t.$v.newType.$anyDirty&&!t.$v.newType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newType.$anyDirty&&!t.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"edit-service-type-modal",title:"Edit Service Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateServiceType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-service-type-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}}),t.$v.edit.type.$anyDirty&&!t.$v.edit.type.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.type.$anyDirty&&!t.$v.edit.type.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("b5ae"),l=a("7ff6"),c=o["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./&, ]*$/),d=new Date,u=a("9f25"),m={components:{},data:function(){return{columns:[{label:"Service Type",field:"type"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,serviceTypes:[],views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",requestProcessing:!1,newType:"",edit:{id:"",typeId:"",type:""}}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getServiceTypes();case 1:case"end":return e.stop()}}),e)})))()},validations:{newType:{required:o["required"],alphaNumCustomValidator:c},edit:{type:{required:o["required"],alphaNumCustomValidator:c}}},methods:{addServiceType:function(){var t=this;if(t.$v.newType.$touch(),!t.$v.newType.$error){t.requestProcessing=!0;var e=r["dbSales"].collection("serviceTypes").where("type","==",Object(l["a"])(t.newType));e.get().then((function(e){if(e.empty){if(e){var a=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="STI-"+d.getFullYear()+u(d.getMonth()+1,2)+d.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{r["dbSales"].collection("serviceTypes").doc().set({serviceTypeId:n,type:t.newType,userReference:s[0].userId,status:1,dateCreated:d,dateModified:d}).then((function(){t.newType="",t.requestProcessing=!1,t.$v.newType.$reset(),t.$refs["service-type-table"].reset(),t.getServiceTypes(),t.$bvModal.hide("new-service-type-modal"),t.$swal({title:"Success",text:"New service type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},getServiceTypes:function(){var t=this,e=null,a=[],s=[];t.loading=!0,t.serviceTypes=[],"all"!=t.limit?e=r["dbSales"].collection("serviceTypes").orderBy("type","asc").limit(t.limit):"all"==t.limit&&(e=r["dbSales"].collection("serviceTypes").orderBy("type","asc")),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)}));for(var n=0;n<a.length;n++)a[n]["id"]=s[n],t.serviceTypes.push(a[n])}setTimeout((function(){t.loading=!1}),1e3)}))},openEditServiceTypeModal:function(t){this.edit={id:t.id,typeId:t.serviceTypeId,type:t.type},this.$bvModal.show("edit-service-type-modal")},updateServiceType:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;var e=r["dbSales"].collection("serviceTypes").where("serviceTypeId","!=",t.edit.typeId).where("type","==",Object(l["a"])(t.edit.type));e.get().then((function(e){if(e.empty){if(e)try{r["dbSales"].collection("serviceTypes").doc(t.edit.id).update({type:t.edit.type,dateModified:d}).then((function(){t.requestProcessing=!1,t.$v.edit.$reset(),t.$refs["service-type-table"].reset(),t.getServiceTypes(),t.$bvModal.hide("edit-service-type-modal"),t.$swal({title:"Success",text:"Service type updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Service type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},changeStatus:function(t,e,a){var s=this;s.$swal({title:"Are you sure?",text:"You want to change the status to "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){if(n.value)try{r["dbSales"].collection("company").doc(t).update({status:e,dateModified:d}).then((function(){s.$swal({title:"Success",text:"Company status to "+a+".",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){s.$refs["service-type-table"].reset(),s.getServiceTypes()}))}))}catch(i){console.log(i),s.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}))}}},p=m,h=(a("fe0c"),a("2877")),f=Object(h["a"])(p,s,n,!1,null,null,null);e["default"]=f.exports},e6e6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-5"}),a("div",{attrs:{id:"textStyle"}},[a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},["Release"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getCashDisbursements("Release")}}},[t._v("Release")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Cleared"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getCashDisbursements("Cleared")}}},[t._v("Cleared")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==t.listType?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getCashDisbursements("All")}}},[t._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"}),a("span",{staticClass:"col-2 pb-3 pl-4 text-right"},[a("b",[t._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.getCashDisbursements(t.listType)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("span",{staticClass:"col-sm-2 pl-0"},["month"==t.filter?a("base-input",{staticClass:"pb-2",staticStyle:{width:"230px"},attrs:{type:"month",max:t.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(e){return t.getCashDisbursements(t.listType)}},model:{value:t.dateCreated,callback:function(e){t.dateCreated=e},expression:"dateCreated"}}):t._e()],1)]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{ref:"cash-disbursement-table",attrs:{columns:t.columns,rows:t.cashDisbursements,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["voucherNumber"==e.column.field?a("span",[a("span",{staticClass:"pointer",attrs:{id:"sideBarTxt"},on:{click:function(a){return t.openViewCashDisbursementModal(e.row)}}},[t._v(t._s(e.row.voucherNumber))])]):t._e(),"amount"==e.column.field?a("span",[a("span",{staticClass:"tableSpan"},[t._v("₱ "+t._s(e.row.amount))])]):t._e(),"transactionDate"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.transactionDate,"MMM DD, YYYY")))])]):t._e(),"payeeName"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.payeeName))])]):t._e(),"cdType"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.cdType))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"status"==e.column.field?a("span",[1==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("RELEASE")]):t._e(),2==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("CLEARED")]):t._e()]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateCDModal(e.row)}}}):t._e(),1==e.row.status&&"User"!=t.userRole?a("span",{staticClass:"pointer ml-2 far fa-check-square",attrs:{id:"sideBarTxt",title:"Cleared"},on:{click:function(a){return t.changeStatus(e.row,2)}}}):t._e(),2==e.row.status&&"User"!=t.userRole?a("span",{staticClass:"pointer ml-2 far fa-square",attrs:{id:"sideBarTxt",title:"Release"},on:{click:function(a){return t.changeStatus(e.row,1)}}}):t._e(),1==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-file",attrs:{id:"sideBarTxt",title:"Attachment"},on:{click:function(a){return t.openAttachments(e.row)}}}):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),t.cashDisbursements.length?a("div",{staticClass:"row pl-4"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2 text-right"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getCashDisbursements(t.listType)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-cash-disbursement-modal",modifiers:{"new-cash-disbursement-modal":!0}}],staticClass:"col-md-4 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New Cash Disbursement")])],1)]),a("div",{staticClass:"pl-4 shadow",attrs:{id:"duplicateView"}},[a("div",{staticClass:"row"},[t._m(0),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Number: "+t._s(t.view.voucherNumber))])])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date: ")]),t._v(t._s(t._f("moment")(t.view.transactionDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount: ")]),t._v("₱ "+t._s(t.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee Name: ")]),t._v(t._s(t.view.payeeName)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Disbursement Type: ")]),t._v(t._s(t.view.cdType)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Chart of Account: ")]),t._v(t._s(t.view.coa)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Business Type: ")]),t._v(t._s(t.view.businessType)+" ")])]),a("hr"),a("div",{staticClass:"row"},[t._m(1),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Prepared by :")]),t._v(" "+t._s(t.user.firstname)+" "+t._s(t.user.lastname)+" ")])]),t._m(2),a("br"),t._l(t.breakCounts,(function(t){return a("span",{key:t},[a("br")])})),a("br"),a("div",{staticClass:"row"},[t._m(3),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Number: "+t._s(t.view.voucherNumber))])])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date: ")]),t._v(t._s(t._f("moment")(t.view.transactionDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount: ")]),t._v("₱ "+t._s(t.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee Name: ")]),t._v(t._s(t.view.payeeName)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Disbursement Type: ")]),t._v(t._s(t.view.cdType)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Chart of Account: ")]),t._v(t._s(t.view.coa)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Business Type: ")]),t._v(t._s(t.view.businessType)+" ")])]),a("hr"),a("div",{staticClass:"row"},[t._m(4),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Prepared by :")]),t._v(" "+t._s(t.user.firstname)+" "+t._s(t.user.lastname)+" ")])]),t._m(5)],2),a("b-modal",{attrs:{size:"xl",id:"new-cash-disbursement-modal",title:"New Cash Disbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.newCashDisbursement(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-cash-disbursement-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Payee Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:t.newTransDate,callback:function(e){t.newTransDate=e},expression:"newTransDate"}}),t.$v.newTransDate.$anyDirty&&!t.$v.newTransDate.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Payee Name"},model:{value:t.newPayeeName,callback:function(e){t.newPayeeName=e},expression:"newPayeeName"}}),t.$v.newPayeeName.$anyDirty&&!t.$v.newPayeeName.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newPayeeName.$anyDirty&&!t.$v.newPayeeName.alphaCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount"},model:{value:t.newAmount,callback:function(e){t.newAmount=e},expression:"newAmount"}}),t.$v.newAmount.$anyDirty&&!t.$v.newAmount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newAmount.$anyDirty&&!t.$v.newAmount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.cdTypes,reduce:function(t){return t.cashDisbursementTypeId},label:"type",clearable:!1},model:{value:t.newCDType,callback:function(e){t.newCDType=e},expression:"newCDType"}}),t.$v.newCDType.$anyDirty&&!t.$v.newCDType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-cash-disbursement-type-modal",modifiers:{"new-cash-disbursement-type-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:t.requestProcessing}},[t._v("Add")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Chart of Accounts:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Business Types:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.coas,reduce:function(t){return t.accountId},label:"account",clearable:!1},model:{value:t.newCOA,callback:function(e){t.newCOA=e},expression:"newCOA"}}),t.$v.newCOA.$anyDirty&&!t.$v.newCOA.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.businessTypes,reduce:function(t){return t.businessTypeId},label:"type",clearable:!1},model:{value:t.newBusinessType,callback:function(e){t.newBusinessType=e},expression:"newBusinessType"}}),t.$v.newBusinessType.$anyDirty&&!t.$v.newBusinessType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"new-cash-disbursement-type-modal",title:"New Cash Disbursement Type",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addCDType(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-cash-disbursement-type-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"Type"},model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}}),t.$v.newType.$anyDirty&&!t.$v.newType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newType.$anyDirty&&!t.$v.newType.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"xl",id:"view-cash-disbursement-modal",title:"View Cash Disbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.printCashDisbursment(e)}}},[t._v(" Print ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("view-cash-disbursement-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("card",{staticClass:"pl-4 pt-5 pb-5 shadow",attrs:{id:"singleView"}},[a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("CASH DISBURSEMENT")])]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Voucher Number: "+t._s(t.view.voucherNumber))])])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Transaction Date: ")]),t._v(t._s(t._f("moment")(t.view.transactionDate,"MMMM DD, YYYY"))+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Amount: ")]),t._v("₱ "+t._s(t.view.amount)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-12"},[a("b",[t._v("Payee Name: ")]),t._v(t._s(t.view.payeeName)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Disbursement Type: ")]),t._v(t._s(t.view.cdType)+" ")]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Chart of Account: ")]),t._v(t._s(t.view.coa)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Business Type: ")]),t._v(t._s(t.view.businessType)+" ")])]),a("hr"),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Received Payment by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Prepared by :")]),t._v(" "+t._s(t.user.firstname)+" "+t._s(t.user.lastname)+" ")])]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Certified by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Approved by : ")])])])])],1),a("b-modal",{attrs:{size:"lg",id:"attachment-modal",title:"Attachments",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[1==t.attachmentStatus?a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addAttachments()}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add Attachment ")]):t._e(),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("attachment-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("input",{ref:"attachmentFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.previewImage}}),t.loadAttachment?a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12 text-center"},[a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}}),a("b-spinner",{staticClass:"ml-3 mr-3",attrs:{type:"grow",label:"Spinning"}})],1)])]):t._e(),t.attachments.length>0&&!t.loadAttachment?a("card",{attrs:{shadow:""}},[t.attachments.length>0?a("div",{staticClass:"row pl-4",attrs:{align:"center"}},t._l(t.attachments,(function(e){return a("span",{key:e.rowNum},[a("span",{staticClass:"col-4"},[a("div",{staticClass:"mt-1 mb--2 pr-2 text-right"},[1==t.attachmentStatus?a("span",{staticClass:"pointer far fa-times-circle text-danger",staticStyle:{"z-index":"1",position:"relative",left:"0px",top:"0px"},attrs:{title:"Remove"},on:{click:function(a){return t.removeAttachment(e.name)}}}):t._e()]),a("span",{staticClass:"mt-0"},[a("a",{attrs:{target:"_blank",href:e.url}},[a("img",{staticStyle:{width:"220px",height:"220px","border-style":"solid","border-color":"black","border-width":"2px"},attrs:{src:e.url}})])])])])})),0):t._e()]):t._e(),0!=t.attachments.length||t.loadAttachment?t._e():a("card",{attrs:{shadow:""}},[a("div",{staticClass:"row pl-4"},[a("span",{staticClass:"col-sm-12"},[a("h2",{staticClass:"text-center"},[t._v("NO ATTACHMENT")])])])])],1),a("b-modal",{attrs:{size:"xl",id:"edit-cash-disbursement-modal",title:"Edit Cash Disbursement",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateCashDisbursement(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("edit-cash-disbursement-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Transaction Date:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Payee Name:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"date"},model:{value:t.edit.transDate,callback:function(e){t.$set(t.edit,"transDate",e)},expression:"edit.transDate"}}),t.$v.edit.$anyDirty&&!t.$v.edit.transDate.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Payee Name"},model:{value:t.edit.payeeName,callback:function(e){t.$set(t.edit,"payeeName",e)},expression:"edit.payeeName"}}),t.$v.edit.$anyDirty&&!t.$v.edit.payeeName.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.payeeName.alphaCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Amount:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Type:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",placeholder:"Amount"},model:{value:t.edit.amount,callback:function(e){t.$set(t.edit,"amount",e)},expression:"edit.amount"}}),t.$v.edit.$anyDirty&&!t.$v.edit.amount.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.amount.amountCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1),a("div",{staticClass:"col-sm-4 pl-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.cdTypes,reduce:function(t){return t.cashDisbursementTypeId},label:"type",clearable:!1},model:{value:t.edit.cdType,callback:function(e){t.$set(t.edit,"cdType",e)},expression:"edit.cdType"}}),t.$v.edit.$anyDirty&&!t.$v.edit.cdType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-2 pr-5"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-cash-disbursement-type-modal",modifiers:{"new-cash-disbursement-type-modal":!0}}],attrs:{block:"",id:"darkBtn",disabled:t.requestProcessing}},[t._v("Add")])],1)]),a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Chart of Accounts:")]),a("b",{staticClass:"text-red"},[t._v("*")])]),a("label",{staticClass:"col-sm-6 col-form-label"},[a("b",[t._v("Business Types:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.coas,reduce:function(t){return t.accountId},label:"account",clearable:!1},model:{value:t.edit.coa,callback:function(e){t.$set(t.edit,"coa",e)},expression:"edit.coa"}}),t.$v.edit.$anyDirty&&!t.$v.edit.coa.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.businessTypes,reduce:function(t){return t.businessTypeId},label:"type",clearable:!1},model:{value:t.edit.businessType,callback:function(e){t.$set(t.edit,"businessType",e)},expression:"edit.businessType"}}),t.$v.edit.$anyDirty&&!t.$v.edit.businessType.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])])],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"col-sm-6"},[a("b",[t._v("CASH DISBURSEMENT")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Received Payment by : ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Certified by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Approved by : ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"col-sm-6"},[a("b",[t._v("CASH DISBURSEMENT")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Received Payment by : ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Certified by : ")])]),a("span",{staticClass:"col-sm-1"}),a("span",{staticClass:"col-sm-5"},[a("b",[t._v("Approved by : ")])])])}],i=(a("4160"),a("fb6a"),a("b0c0"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("4627"),d=a("c6f8"),u=a("add5"),m=a.n(u),p=a("2f62"),h=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z ., ]*$/),f=l["helpers"].regex("alphaNumAndDot",/^[ 0-9 ., ]*$/),b=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),v=a("c1df"),C=a("e966"),y=C.bindWith(",","."),g=new Date,w=a("9f25"),_={components:{},data:function(){return{columns:[{label:"Voucher No.",field:"voucherNumber"},{label:"Amount",field:"amount"},{label:"Transaction Date",field:"transactionDate"},{label:"Payee Name",field:"payeeName"},{label:"Disbursement Type",field:"cdType"},{label:"Created by",field:"userReference"},{label:"Status",field:"status"},{label:"",field:"action",width:"100px",sortable:!1}],userRole:"",loading:!0,cashDisbursements:[],requestProcessing:!1,views:[{limitId:"30",limit:"30 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"30",filters:[{filterId:"month",filter:"Month"}],filter:"month",dateCreated:v().format("YYYY-MM"),maxDate:v().format("YYYY-MM"),listType:"",newType:"",cdTypes:[],coas:[],businessTypes:[],newTransDate:v().format("YYYY-MM-DD"),newPayeeName:"",newAmount:"",newCDType:"",newCOA:"",newBusinessType:"",view:{voucherNumber:"",amount:"",transactionDate:"",payeeName:"",cdType:"",coa:"",businessType:""},attachment:"",attachmentData:null,attachments:[],cdId:"",uploadValue:0,loadAttachment:!0,edit:{id:"",cdId:"",transDate:"",payeeName:"",amount:"",cdType:"",coa:"",businessType:""},user:{firstname:"",lastname:""},breakCounts:18}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserRole(),t.getCashDisbursements("Release"),t.getCashDisbursementTypes(),t.getChartOfAccounts(),t.getBusinessTypes(),t.getUser();case 6:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(p["b"])({users:"Users/users"})),validations:{newTransDate:{required:l["required"]},newPayeeName:{required:l["required"],alphaCustomValidator:h},newAmount:{required:l["required"],amountCustomValidator:f},newCDType:{required:l["required"]},newCOA:{required:l["required"]},newBusinessType:{required:l["required"]},newType:{required:l["required"],alphaNumCustomValidator:b},edit:{transDate:{required:l["required"]},payeeName:{required:l["required"],alphaCustomValidator:h},amount:{required:l["required"],amountCustomValidator:f},cdType:{required:l["required"]},coa:{required:l["required"]},businessType:{required:l["required"]}}},methods:{getUserRole:function(){var t=this;t.username=localStorage.getItem("aisname"),t.accountName=t.username.toUpperCase();var e=o["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||e.forEach((function(t){a.push(t.data())}));var s=o["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference),n=[];s.get().then((function(e){e.empty||(e.forEach((function(t){n.push(t.data())})),t.userRole=n[0].userRole)}))}))},getUser:function(){var t=this;t.username=localStorage.getItem("aisname");var e=o["dbUsers"].collection("users").where("username","==",t.username),a=[];e.get().then((function(e){e.empty||(e.forEach((function(t){a.push(t.data())})),t.user.firstname=a[0].firstname,t.user.lastname=a[0].lastname)}))},getCashDisbursementTypes:function(){var t=this,e=o["dbMains"].collection("cashDisbursementTypes").orderBy("type","asc");t.cdTypes=[],e.get().then((function(e){e.forEach((function(e){t.cdTypes.push(e.data())})),t.newCDType=t.cdTypes[0].cashDisbursementTypeId}))},getChartOfAccounts:function(){var t=this,e=o["dbMains"].collection("chartOfAccounts").orderBy("account","asc");t.coas=[],e.get().then((function(e){e.forEach((function(e){t.coas.push(e.data())})),t.newCOA=t.coas[0].accountId}))},getBusinessTypes:function(){var t=this,e=o["dbMains"].collection("businessTypes").orderBy("type","asc");t.businessTypes=[],e.get().then((function(e){e.forEach((function(e){t.businessTypes.push(e.data())})),t.newBusinessType=t.businessTypes[0].businessTypeId}))},addCDType:function(){var t=this;if(t.requestProcessing=!1,t.$v.newType.$touch(),!t.$v.newType.$error){var e=null;t.requestProcessing=!0,e=o["dbMains"].collection("cashDisbursementTypes").where("type","==",Object(d["a"])(t.newType)),e.get().then((function(e){if(e.empty){if(e){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="CDTI-"+g.getFullYear()+w(g.getMonth()+1,2)+g.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{o["dbMains"].collection("cashDisbursementTypes").doc().set({cashDisbursementTypeId:n,type:Object(d["a"])(t.newType),userReference:s[0].userId,status:1,dateCreated:g,dateModified:g}).then((function(){t.newType="",t.requestProcessing=!1,t.$v.newType.$reset(),t.$bvModal.hide("new-cash-disbursement-type-modal"),t.getCashDisbursementTypes(),t.$swal({title:"Success",text:"New cash disbursement type added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"Cash disbursement type already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},newCashDisbursement:function(){var t=this;if(t.$v.newTransDate.$touch(),t.$v.newPayeeName.$touch(),t.$v.newAmount.$touch(),t.$v.newCDType.$touch(),t.$v.newCOA.$touch(),t.$v.newBusinessType.$touch(),!t.$v.newTransDate.$error&&!t.$v.newPayeeName.$error&&!t.$v.newAmount.$error&&!t.$v.newCDType.$error&&!t.$v.newCOA.$error&&!t.$v.newBusinessType.$error){t.requestProcessing=!0;try{var e=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],s="CDI-"+g.getFullYear()+w(g.getMonth()+1,2)+g.getDate()+"-"+Math.floor(1e6*Math.random()),n=o["dbUsers"].collection("cashDisbursements").orderBy("dateCreated","desc").limit(1),i="";n.get().then((function(n){n.forEach((function(t){t.exists&&(i=t.data().voucherNumber)}));var r="",l=new Date;""!=i?(r=w(parseInt(i.slice(7))+1,4),"1000"==r.toString()&&(r="0001")):r="0001",e.get().then((function(e){e.forEach((function(t){a.push(t.data())})),o["dbUsers"].collection("cashDisbursements").doc().set({cashDisbursementId:s,transactionDate:t.newTransDate,payeeName:t.newPayeeName,amount:t.newAmount,voucherNumber:w(l.getMonth()+1)+""+l.getFullYear().toString().slice(2,4)+"-1"+r,disbursementTypeReference:t.newCDType,accountReference:t.newCOA,businessTypeReference:t.newBusinessType,status:1,userReference:a[0].userId,dateCreated:g,dateModified:g}).then((function(){t.newTransDate=v().format("YYYY-MM-DD"),t.newPayeeName="",t.newAmount="",t.newCDType="",t.newCOA="",t.newBusinessType="",t.requestProcessing=!1,t.$v.newTransDate.$reset(),t.$v.newPayeeName.$reset(),t.$v.newAmount.$reset(),t.$v.newCDType.$reset(),t.$v.newCOA.$reset(),t.$v.newBusinessType.$reset(),t.$bvModal.hide("new-cash-disbursement-modal"),t.$refs["cash-disbursement-table"].reset(),t.getChartOfAccounts(),t.getBusinessTypes(),t.getCashDisbursements(t.listType),t.$swal({title:"Success",text:"New cash disbursement added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))}))}catch(r){console.log(r),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},getCashDisbursements:function(t){var e=this,a=null,s=[],n=[],i=v(e.dateCreated).startOf("month").format("YYYY-MM-DD"),r=v(e.dateCreated).endOf("month").format("YYYY-MM-DD");e.username=localStorage.getItem("aisname"),e.accountName=e.username.toUpperCase();var l=o["dbUsers"].collection("users").where("username","==",e.username),c=[],d="",u="";l.get().then((function(l){l.forEach((function(t){c.push(t.data())})),u=c[0].userId;var m=o["dbUsers"].collection("userRoles").where("userRoleId","==",c[0].userRoleReference),p=[];m.get().then((function(l){l.forEach((function(t){p.push(t.data())})),d=p[0].userRole,e.loading=!0,e.cashDisbursements=[],e.listType=t,"Administrator"==d||"Manager"==d?"Release"==t?"all"!=e.limit?a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("status","==",1).limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("status","==",1)):"Cleared"==t?"all"!=e.limit?a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("status","==",2).limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("status","==",2)):"All"==t&&("all"!=e.limit?a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r))):"User"==d&&("Release"==t?"all"!=e.limit?a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",u).where("status","==",1).limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",u).where("status","==",1)):"Cleared"==t?"all"!=e.limit?a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",u).where("status","==",2).limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",u).where("status","==",2)):"All"==t&&("all"!=e.limit?a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",u).limit(e.limit):"all"==e.limit&&(a=o["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",i).where("transactionDate","<=",r).where("userReference","==",u)))),a.get().then((function(t){if(!t.empty){t.forEach((function(t){n.push(t.data()),s.push(t.id)}));var a=o["dbMains"].collection("cashDisbursementTypes"),i=o["dbMains"].collection("chartOfAccounts"),r=o["dbMains"].collection("businessTypes"),l=[],c=[],d=[];a.get().then((function(t){t.forEach((function(t){l.push(t.data())})),i.get().then((function(t){t.forEach((function(t){c.push(t.data())})),r.get().then((function(t){t.forEach((function(t){d.push(t.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=s[a],n[a]["cdType"]="",n[a]["coa"]="",n[a]["businessType"]="",n[a].amount=y(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2)),e.cashDisbursements.push(n[a]);for(var i=0;i<l.length;i++)l[i].cashDisbursementTypeId==n[a].disbursementTypeReference&&(n[a].cdType=l[i].type);for(var r=0;r<c.length;r++)c[r].accountId==n[a].accountReference&&(n[a].coa=c[r].account);for(var o=0;o<d.length;o++)d[o].businessTypeId==n[a].businessTypeReference&&(n[a].businessType=d[o].type)}}))}))}))}setTimeout((function(){e.loading=!1}),1e3)}))}))}))},openViewCashDisbursementModal:function(t){var e=this;e.view={voucherNumber:t.voucherNumber,amount:t.amount,transactionDate:t.transactionDate,payeeName:t.payeeName,cdType:t.cdType,coa:t.coa,businessType:t.businessType},e.$bvModal.show("view-cash-disbursement-modal")},openAttachments:function(t){this.cdId=t.cashDisbursementId,this.attachmentStatus=t.status,this.$bvModal.show("attachment-modal"),this.getAttachments(this.cdId)},addAttachments:function(){this.$refs.attachmentFile.click()},previewImage:function(t){var e=this,a={maxSizeMB:1,useWebWorker:!0};e.uploadValue=0,e.attachment=null,e.attachments=[],e.attachmentData=t.target.files[0],Object(c["a"])(e.attachmentData,a).then((function(t){e.attachmentData=t,e.onUpload(e.attachmentData)}))},onUpload:function(t){var e=this,a=o["storageMains"].ref("cashDisbursements/"+e.cdId+"/"+t.name).put(t);e.requestProcessing=!1;try{e.attachment=null,e.requestProcessing=!0,a.on("state_changed",(function(t){e.uploadValue=t.bytesTransferred/t.totalBytes*100}),(function(t){console.log(t.message)}),(function(){e.uploadValue=100,e.$swal({title:"Success",text:"Attachment uploaded successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),e.requestProcessing=!1,e.getAttachments(e.cdId)}))}catch(s){console.log("error"),e.requestProcessing=!1,e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}},getAttachments:function(t){var e=this,a=0,s=o["storageMains"].ref("cashDisbursements/"+t);e.loadAttachment=!0,e.attachments=[],s.listAll().then((function(s){s.items.forEach((function(s){o["storageMains"].ref("cashDisbursements/"+t+"/"+s.name).getDownloadURL().then((function(t){a+=1,e.attachments.push({rowNum:a,name:s.name,url:t,path:s.fullPath,status:1})}))}))})).catch((function(t){console.log(t)})),setTimeout((function(){e.loadAttachment=!1}),5e3)},removeAttachment:function(t){var e=this;e.$swal({title:"Are you sure?",text:"You want to remove this attachment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var s=o["storageMains"].ref("cashDisbursements/"+e.cdId+"/"+t);try{s.delete().then((function(){e.$swal({title:"Success",text:"Attachment remove successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){e.getAttachments(e.cdId)}))}))}catch(n){console.log(n),e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"})}}}))},openUpdateCDModal:function(t){var e=this;e.edit={id:t.id,cdId:t.cashDisbursementId,transDate:t.transactionDate,payeeName:t.payeeName,amount:t.amount,cdType:t.disbursementTypeReference,coa:t.accountReference,businessType:t.businessTypeReference},e.$bvModal.show("edit-cash-disbursement-modal")},updateCashDisbursement:function(){var t=this;if(t.$v.edit.$touch(),!t.$v.edit.$error){t.requestProcessing=!0;try{o["dbUsers"].collection("cashDisbursements").doc(t.edit.id).update({transactionDate:t.edit.transDate,payeeName:t.edit.payeeName,amount:t.edit.amount,disbursementType:t.edit.cdType,accountReference:t.edit.coa,businessTypeReference:t.edit.businessType,dateModified:g}).then((function(){t.edit={id:"",cdId:"",transDate:"",payeeName:"",amount:"",cdType:"",coa:"",businessType:""},t.requestProcessing=!1,t.$v.edit.$reset(),t.$bvModal.hide("edit-cash-disbursement-modal"),t.$refs["cash-disbursement-table"].reset(),t.getCashDisbursements(t.listType),t.$swal({title:"Success",text:"Cash disbursment updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}}},changeStatus:function(t,e){var a=this,s="";1==e?s="Release":2==e&&(s="Cleared"),a.$swal({title:"Are you sure?",text:"You want to change the status to "+s,icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#C72111",confirmButtonText:"CONFIRM"}).then((function(n){n.value&&o["dbUsers"].collection("cashDisbursements").doc(t.id).update({status:e,dateModified:g}).then((function(){a.$refs["cash-disbursement-table"].reset(),a.getCashDisbursements(s),a.$swal({title:"Success",text:"Cash disbursement status change successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))},printCashDisbursment:function(){this.$swal({title:"Print with duplicate?",text:"",icon:"question",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"YES",cancelButtonText:"NO"}).then((function(t){t.value?m()({printable:"duplicateView",type:"html",style:'#duplicateView {font-family: "Calibri";} #borderStyle {border-width: 1px; border-style: solid;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;}',documentTitle:"Cash Disbursement Voucher"}):m()({printable:"singleView",type:"html",style:'#singleView {font-family: "Calibri";} #borderStyle {border-width: 1px; border-style: solid;} #docStyle {display: block; overflow: inherit; white-space: normal; font-size: 12px;}',documentTitle:"Cash Disbursement Voucher"})}))}}},x=_,k=(a("624a"),a("2877")),D=Object(k["a"])(x,s,n,!1,null,null,null);e["default"]=D.exports},eb57:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"E Wallets"}},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("vue-good-table",{ref:"e-wallet-table",attrs:{columns:t.columns,rows:t.eWallets,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"eWalletName",type:"asc"}},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["eWalletName"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.eWalletName))])]):t._e(),"userReference"==e.column.field?a("span",[t._l(t.users,(function(s){return a("span",{key:s.userId},[s.userId==e.row.userReference?a("span",[t._v(t._s(s.firstname)+" "+t._s(s.lastname))]):t._e()])})),""==e.row.userReference?a("span",[a("span",[t._v("----------")])]):t._e()],2):t._e(),"action"==e.column.field?a("span",[a("span",{staticClass:"pointer ml-2 far fa-edit",attrs:{id:"sideBarTxt",title:"Update"},on:{click:function(a){return t.openUpdateEWalletModal(e.row)}}})]):t._e()])]}}])}),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.eWallets.length?a("div",{staticClass:"row pl-4 pt-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getPaginatedEWallets(1,"")}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[a("base-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-e-wallet-modal",modifiers:{"new-e-wallet-modal":!0}}],staticClass:"col-md-2 ml-2 mr-2",attrs:{id:"darkBtn"}},[t._v("New E Wallet")])],1)],1)],1),a("tab-pane",{attrs:{title:"E Wallet Accounts"}},[a("e-wallet-account")],1)],1),a("b-modal",{attrs:{size:"md",id:"new-e-wallet-modal",title:"New E Wallet",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.addEWallet(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Add ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("new-e-wallet-modal")}}},[t._v(" Close ")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("E Wallet:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{id:"inputStyle",type:"text",placeholder:"E Wallet"},model:{value:t.newEWallet,callback:function(e){t.newEWallet=e},expression:"newEWallet"}}),t.$v.newEWallet.$anyDirty&&!t.$v.newEWallet.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.newEWallet.$anyDirty&&!t.$v.newEWallet.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"update-e-wallet-modal",title:"Edit E Wallet",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.updateEWallet(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Update ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("update-e-wallet-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("E Wallet:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"text",id:"inputStyle",placeholder:"E Wallet"},model:{value:t.edit.eWallet,callback:function(e){t.$set(t.edit,"eWallet",e)},expression:"edit.eWallet"}}),t.$v.edit.$anyDirty&&!t.$v.edit.eWallet.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e(),t.$v.edit.$anyDirty&&!t.$v.edit.eWallet.alphaNumCustomValidator?a("i",{staticClass:"text-red"},[t._v("Invalid Characters")]):t._e()],1)])])],1)],1)},n=[],i=(a("4160"),a("159b"),a("5530")),r=(a("96cf"),a("1da1")),o=a("56d7"),l=a("b5ae"),c=a("c6f8"),d=a("2f62"),u=l["helpers"].regex("alphaNumAndDot",/^[ A-Za-z0-9 -./, ]*$/),m=new Date,p=a("9f25"),h={components:{},data:function(){return{columns:[{label:"E Wallet",field:"eWalletName"},{label:"Created by",field:"userReference"},{label:"",field:"action",sortable:!1,width:"50px"}],loading:!0,eWallets:[],newEWallet:"",edit:{id:"",eWalletId:null,eWallet:""},banksUid:"",requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20"}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=o["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=o["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getPaginatedEWallets();case 1:case"end":return e.stop()}}),e)})))()},computed:Object(i["a"])({},Object(d["b"])({users:"Users/users"})),validations:{newEWallet:{required:l["required"],alphaNumCustomValidator:u},edit:{eWallet:{required:l["required"],alphaNumCustomValidator:u}}},methods:{getPaginatedEWallets:function(){var t=this,e=null,a=[],s=[];t.loading=!0,t.eWallets=[],"all"!=t.limit?e=o["dbMains"].collection("eWallets").orderBy("eWalletName","asc").limit(t.limit):"all"==t.limit&&(e=o["dbMains"].collection("eWallets").orderBy("eWalletName","asc")),e.get().then((function(e){if(!e.empty){e.forEach((function(t){a.push(t.data()),s.push(t.id)}));for(var n=0;n<a.length;n++)a[n]["rowNum"]=1+n,a[n]["id"]=s[n],t.eWallets.push(a[n])}setTimeout((function(){t.loading=!1}),1e3)}))},addEWallet:function(){var t=this;if(t.requestProcessing=!1,t.$v.newEWallet.$touch(),!t.$v.newEWallet.$error){var e=null;t.requestProcessing=!0,e=o["dbMains"].collection("eWallets").where("eWalletName","==",Object(c["a"])(t.newEWallet)),e.get().then((function(e){if(e.empty){if(e){var a=o["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),s=[],n="EWI-"+m.getFullYear()+p(m.getMonth()+1,2)+m.getDate()+"-"+Math.floor(1e6*Math.random());a.get().then((function(e){e.forEach((function(t){t.exists&&s.push(t.data())}));try{o["dbMains"].collection("eWallets").doc().set({eWalletId:n,eWalletName:Object(c["a"])(t.newEWallet),userReference:s[0].userId,status:1,dateCreated:m,dateModified:m}).then((function(){t.newEWallet="",t.requestProcessing=!1,t.$v.newEWallet.$reset(),t.$bvModal.hide("new-e-wallet-modal"),t.$refs["e-wallet-table"].reset(),t.getPaginatedEWallets(),t.$swal({title:"Success",text:"New E Wallet added successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}))}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"E Wallet already exists.",icon:"error",confirmButtonColor:"#f5365c",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}},openUpdateEWalletModal:function(t){this.edit={id:t.id,eWalletId:t.eWalletId,eWallet:t.eWalletName},this.$bvModal.show("update-e-wallet-modal")},updateEWallet:function(){var t=this;if(t.requestProcessing=!0,t.$v.edit.$touch(),!t.$v.edit.$error){var e=null;e=o["dbMains"].collection("eWallets").where("eWalletName","==",Object(c["a"])(t.edit.eWallet)).where("eWalletId","!=",t.edit.eWalletId),e.get().then((function(e){if(e.empty){if(e)try{o["dbMains"].collection("eWallets").doc(t.edit.id).update({eWalletName:Object(c["a"])(t.edit.eWallet),dateModified:m}).then((function(){t.$v.edit.$reset(),t.$bvModal.hide("update-e-wallet-modal"),t.requestProcessing=!1,t.$refs["e-wallet-table"].reset(),t.getPaginatedEWallets(),t.$swal({title:"Success",text:"E Wallet updated successfully!",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(e){console.log(e),t.requestProcessing=!1,t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}catch(a){console.log(a)}}else e.forEach((function(e){e.exists&&(t.$swal({title:"Invalid",text:"E Wallet already exists.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.requestProcessing=!1)}))}))}}}},f=h,b=(a("861c"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,null,null);e["default"]=v.exports},ec45:function(t,e,a){"use strict";function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function n(t){return s(t)?new Date(t.getTime()):null==t?new Date(NaN):new Date(t)}function i(t){return s(t)&&!isNaN(t.getTime())}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e>=0&&e<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var a=n(t),s=a.getDay(),i=(s+7-e)%7;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.firstDayOfWeek,s=void 0===a?0:a,i=e.firstWeekContainsDate,o=void 0===i?1:i;if(!(o>=1&&o<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var l=n(t),c=l.getFullYear(),d=new Date(0),u=c+1;u>=c-1;u--)if(d.setFullYear(u,0,o),d.setHours(0,0,0,0),d=r(d,s),l.getTime()>=d.getTime())break;return d}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.firstDayOfWeek,s=void 0===a?0:a,i=e.firstWeekContainsDate,l=void 0===i?1:i,c=n(t),d=r(c,s),u=o(c,{firstDayOfWeek:s,firstWeekContainsDate:l}),m=d.getTime()-u.getTime();return Math.round(m/6048e5)+1}var c={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},d=c,u=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a="".concat(Math.abs(t)),s=t<0?"-":"";while(a.length<e)a="0".concat(a);return s+a}function p(t){return 15*Math.round(t.getTimezoneOffset()/15)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t>0?"-":"+",s=Math.abs(t),n=Math.floor(s/60),i=s%60;return a+m(n,2)+e+m(i,2)}var f=function(t,e,a){var s=t<12?"AM":"PM";return a?s.toLocaleLowerCase():s},b={Y:function(t){var e=t.getFullYear();return e<=9999?"".concat(e):"+".concat(e)},YY:function(t){return m(t.getFullYear(),4).substr(2)},YYYY:function(t){return m(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return m(t.getMonth()+1,2)},MMM:function(t,e){return e.monthsShort[t.getMonth()]},MMMM:function(t,e){return e.months[t.getMonth()]},D:function(t){return t.getDate()},DD:function(t){return m(t.getDate(),2)},H:function(t){return t.getHours()},HH:function(t){return m(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(){var t=b.h.apply(b,arguments);return m(t,2)},m:function(t){return t.getMinutes()},mm:function(t){return m(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return m(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return m(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return m(t.getMilliseconds(),3)},d:function(t){return t.getDay()},dd:function(t,e){return e.weekdaysMin[t.getDay()]},ddd:function(t,e){return e.weekdaysShort[t.getDay()]},dddd:function(t,e){return e.weekdays[t.getDay()]},A:function(t,e){var a=e.meridiem||f;return a(t.getHours(),t.getMinutes(),!1)},a:function(t,e){var a=e.meridiem||f;return a(t.getHours(),t.getMinutes(),!0)},Z:function(t){return h(p(t),":")},ZZ:function(t){return h(p(t))},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()},w:function(t,e){return l(t,{firstDayOfWeek:e.firstDayOfWeek,firstWeekContainsDate:e.firstWeekContainsDate})},ww:function(t,e){return m(b.w(t,e),2)}};function v(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=n(t);if(!i(r))return"Invalid Date";var o=a.locale||d;return s.replace(u,(function(t,e){return e||("function"===typeof b[t]?"".concat(b[t](r,o)):t)}))}function C(t){return w(t)||g(t)||y()}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function w(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function x(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(a,!0).forEach((function(e){A(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function k(t,e){return T(t)||$(t,e)||D()}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function $(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done);s=!0)if(a.push(r.value),e&&a.length===e)break}catch(l){n=!0,i=l}finally{try{s||null==o["return"]||o["return"]()}finally{if(n)throw i}}return a}}function T(t){if(Array.isArray(t))return t}function A(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var q=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,P=/\d/,R=/\d\d/,M=/\d{3}/,S=/\d{4}/,I=/\d\d?/,B=/[+-]\d\d:?\d\d/,N=/[+-]?\d+/,E=/[+-]?\d+(\.\d{1,3})?/,Y="year",O="month",F="day",V="hour",U="minute",L="second",W="millisecond",j={},K=function(t,e,a){var s,n=Array.isArray(t)?t:[t];s="string"===typeof a?function(t){var e=parseInt(t,10);return A({},a,e)}:a,n.forEach((function(t){j[t]=[e,s]}))},z=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},H=function(t){return function(e){var a=e[t];if(!Array.isArray(a))throw new Error("Locale[".concat(t,"] need an array"));return new RegExp(a.map(z).join("|"))}},Q=function(t,e){return function(a,s){var n=s[t];if(!Array.isArray(n))throw new Error("Locale[".concat(t,"] need an array"));var i=n.indexOf(a);if(i<0)throw new Error("Invalid Word");return A({},e,i)}};function Z(t){return t.meridiemParse||/[ap]\.?m?\.?/i}function J(t){return"p"==="".concat(t).toLowerCase().charAt(0)}function G(t){var e=t.match(/([+-]|\d\d)/g)||["-","0","0"],a=k(e,3),s=a[0],n=a[1],i=a[2],r=60*parseInt(n,10)+parseInt(i,10);return 0===r?0:"+"===s?-r:+r}function X(t,e){if(void 0!==t&&void 0!==e)if(e){if(t<12)return t+12}else if(12===t)return 0;return t}function tt(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=[0,0,1,0,0,0,0],s=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=!0,i=0;i<7;i++)void 0===t[i]?a[i]=n?s[i]:a[i]:(a[i]=t[i],n=!1);return a}function et(t,e,a,s,n,i,r){var o;return t<100&&t>=0?(o=new Date(t+400,e,a,s,n,i,r),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,a,s,n,i,r),o}function at(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];var n=a[0];return n<100&&n>=0?(a[0]+=400,t=new Date(Date.UTC.apply(Date,a)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(n)):t=new Date(Date.UTC.apply(Date,a)),t}function st(t,e,a){var s=e.match(q);if(!s)throw new Error;for(var n=s.length,i={},r=0;r<n;r+=1){var o=s[r],l=j[o];if(l){var c="function"===typeof l[0]?l[0](a):l[0],d=l[1],u=(c.exec(t)||[])[0],m=d(u,a);i=x({},i,{},m),t=t.replace(u,"")}else{var p=o.replace(/^\[|\]$/g,"");if(0!==t.indexOf(p))throw new Error("not match");t=t.substr(p.length)}}return i}function nt(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var s=a.locale,n=void 0===s?d:s,i=a.backupDate,r=void 0===i?new Date:i,l=st(t,e,n),c=l.year,u=l.month,m=l.day,p=l.hour,h=l.minute,f=l.second,b=l.millisecond,v=l.isPM,y=l.date,g=l.offset,w=l.weekday,_=l.week;if(y)return y;var x,k=[c,u,m,p,h,f,b];if(k[3]=X(k[3],v),void 0!==_&&void 0===u&&void 0===m){var D=o(void 0===c?r:new Date(c,3),{firstDayOfWeek:n.firstDayOfWeek,firstWeekContainsDate:n.firstWeekContainsDate});return new Date(D.getTime()+7*(_-1)*24*3600*1e3)}var $=tt(k,r);return void 0!==g?($[6]+=60*g*1e3,x=at.apply(void 0,C($))):x=et.apply(void 0,C($)),void 0!==w&&x.getDay()!==w?new Date(NaN):x}catch(T){return new Date(NaN)}}function it(t){return it="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function rt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ot(){return ot=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ot.apply(this,arguments)}function lt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function ct(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(a),!0).forEach((function(e){rt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function dt(t,e){if(null==t)return{};var a,s,n={},i=Object.keys(t);for(s=0;s<i.length;s++)a=i[s],e.indexOf(a)>=0||(n[a]=t[a]);return n}function ut(t,e){if(null==t)return{};var a,s,n=dt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mt(t,e){return pt(t)||ht(t,e)||ft(t,e)||vt()}function pt(t){if(Array.isArray(t))return t}function ht(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done);s=!0)if(a.push(r.value),e&&a.length===e)break}catch(l){n=!0,i=l}finally{try{s||null==o["return"]||o["return"]()}finally{if(n)throw i}}return a}}function ft(t,e){if(t){if("string"===typeof t)return bt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?bt(t,e):void 0}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function vt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ct(){return Ct=Object.assign||function(t){for(var e,a=1;a<arguments.length;a++)for(var s in e=arguments[a],e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Ct.apply(this,arguments)}K("Y",N,Y),K("YY",R,(function(t){var e=(new Date).getFullYear(),a=Math.floor(e/100),s=parseInt(t,10);return s=100*(s>68?a-1:a)+s,A({},Y,s)})),K("YYYY",S,Y),K("M",I,(function(t){return A({},O,parseInt(t,10)-1)})),K("MM",R,(function(t){return A({},O,parseInt(t,10)-1)})),K("MMM",H("monthsShort"),Q("monthsShort",O)),K("MMMM",H("months"),Q("months",O)),K("D",I,F),K("DD",R,F),K(["H","h"],I,V),K(["HH","hh"],R,V),K("m",I,U),K("mm",R,U),K("s",I,L),K("ss",R,L),K("S",P,(function(t){return A({},W,100*parseInt(t,10))})),K("SS",R,(function(t){return A({},W,10*parseInt(t,10))})),K("SSS",M,W),K(["A","a"],Z,(function(t,e){var a="function"===typeof e.isPM?e.isPM(t):J(t);return{isPM:a}})),K(["Z","ZZ"],B,(function(t){return{offset:G(t)}})),K("x",N,(function(t){return{date:new Date(parseInt(t,10))}})),K("X",E,(function(t){return{date:new Date(1e3*parseFloat(t))}})),K("d",P,"weekday"),K("dd",H("weekdaysMin"),Q("weekdaysMin","weekday")),K("ddd",H("weekdaysShort"),Q("weekdaysShort","weekday")),K("dddd",H("weekdays"),Q("weekdays","weekday")),K("w",I,"week"),K("ww",R,"week");var yt=["attrs","props","domProps"],gt=["class","style","directives"],wt=["on","nativeOn"],_t=function(t){return t.reduce((function(t,e){for(var a in e)if(t[a])if(-1!==yt.indexOf(a))t[a]=Ct({},t[a],e[a]);else if(-1!==gt.indexOf(a)){var s=t[a]instanceof Array?t[a]:[t[a]],n=e[a]instanceof Array?e[a]:[e[a]];t[a]=s.concat(n)}else if(-1!==wt.indexOf(a))for(var i in e[a])if(t[a][i]){var r=t[a][i]instanceof Array?t[a][i]:[t[a][i]],o=e[a][i]instanceof Array?e[a][i]:[e[a][i]];t[a][i]=r.concat(o)}else t[a][i]=e[a][i];else if("hook"==a)for(var l in e[a])t[a][l]=t[a][l]?xt(t[a][l],e[a][l]):e[a][l];else t[a]=e[a];else t[a]=e[a];return t}),{})},xt=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}},kt=_t;function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=new Date(t,e,a,s,n,i,r);return t<100&&t>=0&&o.setFullYear(t),o}function $t(t){return t instanceof Date&&!isNaN(t)}function Tt(t){return Array.isArray(t)&&2===t.length&&t.every($t)&&t[0]<=t[1]}function At(t){return Array.isArray(t)&&t.every($t)}function qt(t){var e=new Date(t);if($t(e))return e;for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return s.length?qt.apply(void 0,s):new Date}function Pt(t){var e=new Date(t);return e.setMonth(0,1),e.setHours(0,0,0,0),e}function Rt(t){var e=new Date(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Mt(t){var e=new Date(t);return e.setHours(0,0,0,0),e}function St(t){for(var e=t.firstDayOfWeek,a=t.year,s=t.month,n=[],i=Dt(a,s,0),r=i.getDate(),o=r-(i.getDay()+7-e)%7,l=o;l<=r;l++)n.push(Dt(a,s,l-r));i.setMonth(s+1,0);for(var c=i.getDate(),d=1;d<=c;d++)n.push(Dt(a,s,d));for(var u=r-o+1,m=42-u-c,p=1;p<=m;p++)n.push(Dt(a,s,c+p));return n}function It(t,e){var a=new Date(t),s="function"===typeof e?e(a.getMonth()):Number(e),n=a.getFullYear(),i=Dt(n,s+1,0).getDate(),r=a.getDate();return a.setMonth(s,Math.min(r,i)),a}function Bt(t,e){var a=new Date(t),s="function"===typeof e?e(a.getFullYear()):e;return a.setFullYear(s),a}function Nt(t,e){var a=new Date(t),s=new Date(e);return a.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),a}function Et(t,e){if(!Array.isArray(t))return[];var a=[],s=t.length,n=0;e=e||s;while(n<s)a.push(t.slice(n,n+=e));return a}function Yt(t){return"[object Object]"===Object.prototype.toString.call(t)}function Ot(t,e){if(!Yt(t))return{};Array.isArray(e)||(e=[e]);var a={};return e.forEach((function(e){e in t&&(a[e]=t[e])})),a}function Ft(t,e){if(!Yt(t))return{};var a=t;return Yt(e)&&Object.keys(e).forEach((function(s){var n=e[s];Yt(n)&&Yt(t[s])&&(n=Ft(t[s],n)),a=ct({},a,rt({},s,n))})),a}function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function Ut(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Lt=Ut((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},s=a;e["default"]=s,t.exports=e.default})),Wt=Vt(Lt),jt={formatLocale:Wt,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0},Kt="en",zt={};function Ht(t,e,a){if("string"!==typeof t)return zt[Kt];var s=Kt;return zt[t]&&(s=t),e&&(zt[t]=e,s=t),a||(Kt=s),zt[t]||zt[Kt]}function Qt(t){return Ht(t,null,!0)}function Zt(t){var e=!1;return function(){for(var a=this,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];e||(e=!0,requestAnimationFrame((function(){e=!1,t.apply(a,n)})))}}function Jt(t){var e=t.style.display,a=t.style.visibility;t.style.display="block",t.style.visibility="hidden";var s=window.getComputedStyle(t),n=t.offsetWidth+parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),i=t.offsetHeight+parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);return t.style.display=e,t.style.visibility=a,{width:n,height:i}}function Gt(t,e,a,s){var n=0,i=0,r=0,o=0,l=t.getBoundingClientRect(),c=document.documentElement.clientWidth,d=document.documentElement.clientHeight;return s&&(r=window.pageXOffset+l.left,o=window.pageYOffset+l.top),n=c-l.left<e&&l.right<e?r-l.left+1:l.left+l.width/2<=c/2?r:r+l.width-e,i=l.top<=a&&d-l.bottom<=a?o+d-l.top-a:l.top+l.height/2<=d/2?o+l.height:o-a,{left:"".concat(n,"px"),top:"".concat(i,"px")}}function Xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;if(!t||t===e)return null;var a=function(t,e){return getComputedStyle(t,null).getPropertyValue(e)},s=/(auto|scroll)/,n=s.test(a(t,"overflow")+a(t,"overflow-y")+a(t,"overflow-x"));return n?t:Xt(t.parentNode,e)}zt[Kt]=jt;var te={name:"Popup",inject:{prefixClass:{default:"mx"}},props:{visible:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!0}},data:function(){return{top:"",left:""}},watch:{visible:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(){t&&e.displayPopup()}))}}},mounted:function(){var t=this;this.appendToBody&&document.body.appendChild(this.$el),this._clickoutEvent="ontouchend"in document?"touchstart":"mousedown",document.addEventListener(this._clickoutEvent,this.handleClickOutside);var e=this.$parent.$el;this._displayPopup=Zt((function(){return t.displayPopup()})),this._scrollParent=Xt(e)||window,this._scrollParent.addEventListener("scroll",this._displayPopup),window.addEventListener("resize",this._displayPopup)},beforeDestroy:function(){this.appendToBody&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),document.removeEventListener(this._clickoutEvent,this.handleClickOutside),this._scrollParent.removeEventListener("scroll",this._displayPopup),window.removeEventListener("resize",this._displayPopup)},methods:{handleClickOutside:function(t){if(this.visible){var e=t.target,a=this.$el;a&&!a.contains(e)&&this.$emit("clickoutside",t)}},displayPopup:function(){if(this.visible){var t=this.$el,e=this.$parent.$el,a=this.appendToBody;this._popupRect||(this._popupRect=Jt(t));var s=this._popupRect,n=s.width,i=s.height,r=Gt(e,n,i,a),o=r.left,l=r.top;this.left=o,this.top=l}}}};function ee(t,e,a,s,n,i,r,o,l,c){"boolean"!==typeof r&&(l=o,o=r,r=!1);var d,u="function"===typeof a?a.options:a;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),s&&(u._scopeId=s),i?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=d):e&&(d=r?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,o(t))}),d)if(u.functional){var m=u.render;u.render=function(t,e){return d.call(e),m(t,e)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,d):[d]}return a}var ae,se=te,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.prefixClass+"-zoom-in-down"}},[t.visible?a("div",{class:t.prefixClass+"-datepicker-main "+t.prefixClass+"-datepicker-popup",style:{top:t.top,left:t.left,position:"absolute"}},[t._t("default")],2):t._e()])},ie=[],re=void 0,oe=void 0,le=void 0,ce=!1,de=ee({render:ne,staticRenderFns:ie},re,se,oe,ce,le,!1,void 0,void 0,void 0),ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"}},[a("path",{attrs:{d:"M940.218182 107.054545h-209.454546V46.545455h-65.163636v60.50909H363.054545V46.545455H297.890909v60.50909H83.781818c-18.618182 0-32.581818 13.963636-32.581818 32.581819v805.236363c0 18.618182 13.963636 32.581818 32.581818 32.581818h861.090909c18.618182 0 32.581818-13.963636 32.581818-32.581818V139.636364c-4.654545-18.618182-18.618182-32.581818-37.236363-32.581819zM297.890909 172.218182V232.727273h65.163636V172.218182h307.2V232.727273h65.163637V172.218182h176.872727v204.8H116.363636V172.218182h181.527273zM116.363636 912.290909V442.181818h795.927273v470.109091H116.363636z"}})])},me=[],pe=void 0,he=void 0,fe=void 0,be=!1,ve=ee({render:ue,staticRenderFns:me},pe,{},he,be,fe,!1,void 0,void 0,void 0),Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"}},[a("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t._v(" "),a("path",{attrs:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}}),t._v(" "),a("path",{attrs:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"}})])},ye=[],ge=void 0,we=void 0,_e=void 0,xe=!1,ke=ee({render:Ce,staticRenderFns:ye},ge,{},we,xe,_e,!1,void 0,void 0,void 0),De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"}},[a("path",{attrs:{d:"M810.005333 274.005333l-237.994667 237.994667 237.994667 237.994667-60.010667 60.010667-237.994667-237.994667-237.994667 237.994667-60.010667-60.010667 237.994667-237.994667-237.994667-237.994667 60.010667-60.010667 237.994667 237.994667 237.994667-237.994667z"}})])},$e=[],Te=void 0,Ae=void 0,qe=void 0,Pe=!1,Re=ee({render:De,staticRenderFns:$e},Te,{},Ae,Pe,qe,!1,void 0,void 0,void 0),Me={props:{type:String},inject:{prefixClass:{default:"mx"}}},Se=Me,Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",t._g({class:t.prefixClass+"-btn "+t.prefixClass+"-btn-text "+t.prefixClass+"-btn-icon-"+t.type,attrs:{type:"button"}},t.$listeners),[a("i",{class:t.prefixClass+"-icon-"+t.type})])},Be=[],Ne=void 0,Ee=void 0,Ye=void 0,Oe=!1,Fe=ee({render:Ie,staticRenderFns:Be},Ne,Se,Ee,Oe,Ye,!1,void 0,void 0,void 0),Ve={name:"TableDate",components:{IconButton:Fe},inject:{getLocale:{default:function(){return Qt}},getWeek:{default:function(){return l}},prefixClass:{default:"mx"},onDateMouseEnter:{default:void 0},onDateMouseLeave:{default:void 0}},props:{calendar:{type:Date,default:function(){return new Date}},showWeekNumber:{type:Boolean,default:!1},titleFormat:{type:String,default:"YYYY-MM-DD"},getRowClasses:{type:Function,default:function(){return[]}},getCellClasses:{type:Function,default:function(){return[]}}},computed:{firstDayOfWeek:function(){return this.getLocale().formatLocale.firstDayOfWeek||0},yearMonth:function(){var t=this.getLocale(),e=t.yearFormat,a=t.monthBeforeYear,s=t.monthFormat,n=void 0===s?"MMM":s,i={panel:"year",label:this.formatDate(this.calendar,e)},r={panel:"month",label:this.formatDate(this.calendar,n)};return a?[r,i]:[i,r]},days:function(){var t=this.getLocale(),e=t.days||t.formatLocale.weekdaysMin;return e.concat(e).slice(this.firstDayOfWeek,this.firstDayOfWeek+7)},dates:function(){var t=this.calendar.getFullYear(),e=this.calendar.getMonth(),a=St({firstDayOfWeek:this.firstDayOfWeek,year:t,month:e});return Et(a,7)}},methods:{handleIconLeftClick:function(){this.$emit("changecalendar",It(this.calendar,(function(t){return t-1})),"last-month")},handleIconRightClick:function(){this.$emit("changecalendar",It(this.calendar,(function(t){return t+1})),"next-month")},handleIconDoubleLeftClick:function(){this.$emit("changecalendar",Bt(this.calendar,(function(t){return t-1})),"last-year")},handleIconDoubleRightClick:function(){this.$emit("changecalendar",Bt(this.calendar,(function(t){return t+1})),"next-year")},handlePanelChange:function(t){this.$emit("changepanel",t)},handleMouseEnter:function(t){"function"===typeof this.onDateMouseEnter&&this.onDateMouseEnter(t)},handleMouseLeave:function(t){"function"===typeof this.onDateMouseLeave&&this.onDateMouseLeave(t)},handleCellClick:function(t){var e=t.target;"DIV"===e.tagName.toUpperCase()&&(e=e.parentNode);var a=e.getAttribute("data-row-col");if(a){var s=a.split(",").map((function(t){return parseInt(t,10)})),n=mt(s,2),i=n[0],r=n[1],o=this.dates[i][r];this.$emit("select",new Date(o))}},formatDate:function(t,e){return v(t,e,{locale:this.getLocale().formatLocale})},getCellTitle:function(t){var e=this.titleFormat;return this.formatDate(t,e)},getWeekNumber:function(t){return this.getWeek(t,this.getLocale().formatLocale)}}},Ue=Ve,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.prefixClass+"-calendar "+t.prefixClass+"-calendar-panel-date"},[a("div",{class:t.prefixClass+"-calendar-header"},[a("icon-button",{attrs:{type:"double-left"},on:{click:t.handleIconDoubleLeftClick}}),t._v(" "),a("icon-button",{attrs:{type:"left"},on:{click:t.handleIconLeftClick}}),t._v(" "),a("icon-button",{attrs:{type:"double-right"},on:{click:t.handleIconDoubleRightClick}}),t._v(" "),a("icon-button",{attrs:{type:"right"},on:{click:t.handleIconRightClick}}),t._v(" "),a("span",{class:t.prefixClass+"-calendar-header-label"},t._l(t.yearMonth,(function(e){return a("button",{key:e.panel,class:t.prefixClass+"-btn "+t.prefixClass+"-btn-text "+t.prefixClass+"-btn-current-"+e.panel,attrs:{type:"button"},on:{click:function(a){return t.handlePanelChange(e.panel)}}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),0)],1),t._v(" "),a("div",{class:t.prefixClass+"-calendar-content"},[a("table",{class:t.prefixClass+"-table "+t.prefixClass+"-table-date"},[a("thead",[a("tr",[t.showWeekNumber?a("th",{class:t.prefixClass+"-week-number-header"}):t._e(),t._v(" "),t._l(t.days,(function(e){return a("th",{key:e},[t._v(t._s(e))])}))],2)]),t._v(" "),a("tbody",{on:{click:t.handleCellClick}},t._l(t.dates,(function(e,s){return a("tr",{key:s,class:[t.prefixClass+"-date-row",t.getRowClasses(e)]},[t.showWeekNumber?a("td",{class:t.prefixClass+"-week-number",attrs:{"data-row-col":s+",0"}},[t._v("\n            "+t._s(t.getWeekNumber(e[0]))+"\n          ")]):t._e(),t._v(" "),t._l(e,(function(e,n){return a("td",{key:n,staticClass:"cell",class:t.getCellClasses(e),attrs:{"data-row-col":s+","+n,title:t.getCellTitle(e)},on:{mouseenter:function(a){return t.handleMouseEnter(e)},mouseleave:function(a){return t.handleMouseLeave(e)}}},[a("div",[t._v(t._s(e.getDate()))])])}))],2)})),0)])])])},We=[],je=void 0,Ke=void 0,ze=void 0,He=!1,Qe=ee({render:Le,staticRenderFns:We},je,Ue,Ke,He,ze,!1,void 0,void 0,void 0),Ze={name:"TableMonth",components:{IconButton:Fe},inject:{getLocale:{default:function(){return Qt}},prefixClass:{default:"mx"}},props:{calendar:{type:Date,default:function(){return new Date}},getCellClasses:{type:Function,default:function(){return[]}}},computed:{calendarYear:function(){return this.calendar.getFullYear()},months:function(){var t=this.getLocale(),e=t.months||t.formatLocale.monthsShort,a=e.map((function(t,e){return{text:t,month:e}}));return Et(a,3)}},methods:{handleIconDoubleLeftClick:function(){this.$emit("changecalendar",Bt(this.calendar,(function(t){return t-1})),"last-year")},handleIconDoubleRightClick:function(){this.$emit("changecalendar",Bt(this.calendar,(function(t){return t+1})),"next-year")},handlePanelChange:function(){this.$emit("changepanel","year")},handleClick:function(t){var e=t.target;"DIV"===e.tagName.toUpperCase()&&(e=e.parentNode);var a=e.getAttribute("data-month");a&&this.$emit("select",parseInt(a,10))}}},Je=Ze,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.prefixClass+"-calendar "+t.prefixClass+"-calendar-panel-month"},[a("div",{class:t.prefixClass+"-calendar-header"},[a("icon-button",{attrs:{type:"double-left"},on:{click:t.handleIconDoubleLeftClick}}),t._v(" "),a("icon-button",{attrs:{type:"double-right"},on:{click:t.handleIconDoubleRightClick}}),t._v(" "),a("span",{class:t.prefixClass+"-calendar-header-label"},[a("button",{class:t.prefixClass+"-btn "+t.prefixClass+"-btn-text",attrs:{type:"button"},on:{click:t.handlePanelChange}},[t._v("\n        "+t._s(t.calendarYear)+"\n      ")])])],1),t._v(" "),a("div",{class:t.prefixClass+"-calendar-content"},[a("table",{class:t.prefixClass+"-table "+t.prefixClass+"-table-month",on:{click:t.handleClick}},t._l(t.months,(function(e,s){return a("tr",{key:s},t._l(e,(function(e,s){return a("td",{key:s,staticClass:"cell",class:t.getCellClasses(e.month),attrs:{"data-month":e.month}},[a("div",[t._v(t._s(e.text))])])})),0)})),0)])])},Xe=[],ta=void 0,ea=void 0,aa=void 0,sa=!1,na=ee({render:Ge,staticRenderFns:Xe},ta,Je,ea,sa,aa,!1,void 0,void 0,void 0),ia={name:"TableYear",components:{IconButton:Fe},inject:{prefixClass:{default:"mx"}},props:{calendar:{type:Date,default:function(){return new Date}},getCellClasses:{type:Function,default:function(){return[]}},getYearPanel:{type:Function}},computed:{years:function(){var t=new Date(this.calendar);return"function"===typeof this.getYearPanel?this.getYearPanel(t):this.getYears(t)},firstYear:function(){return this.years[0][0]},lastYear:function(){var t=function(t){return t[t.length-1]};return t(t(this.years))}},methods:{getYears:function(t){for(var e=10*Math.floor(t.getFullYear()/10),a=[],s=0;s<10;s++)a.push(e+s);return Et(a,2)},handleIconDoubleLeftClick:function(){this.$emit("changecalendar",Bt(this.calendar,(function(t){return t-10})),"last-decade")},handleIconDoubleRightClick:function(){this.$emit("changecalendar",Bt(this.calendar,(function(t){return t+10})),"next-decade")},handleClick:function(t){var e=t.target;"DIV"===e.tagName.toUpperCase()&&(e=e.parentNode);var a=e.getAttribute("data-year");a&&this.$emit("select",parseInt(a,10))}}},ra=ia,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.prefixClass+"-calendar "+t.prefixClass+"-calendar-panel-year"},[a("div",{class:t.prefixClass+"-calendar-header"},[a("icon-button",{attrs:{type:"double-left"},on:{click:t.handleIconDoubleLeftClick}}),t._v(" "),a("icon-button",{attrs:{type:"double-right"},on:{click:t.handleIconDoubleRightClick}}),t._v(" "),a("span",{class:t.prefixClass+"-calendar-header-label"},[a("span",[t._v(t._s(t.firstYear))]),t._v(" "),a("span",{class:t.prefixClass+"-calendar-decade-separator"}),t._v(" "),a("span",[t._v(t._s(t.lastYear))])])],1),t._v(" "),a("div",{class:t.prefixClass+"-calendar-content"},[a("table",{class:t.prefixClass+"-table "+t.prefixClass+"-table-year",on:{click:t.handleClick}},t._l(t.years,(function(e,s){return a("tr",{key:s},t._l(e,(function(e,s){return a("td",{key:s,staticClass:"cell",class:t.getCellClasses(e),attrs:{"data-year":e}},[a("div",[t._v(t._s(e))])])})),0)})),0)])])},la=[],ca=void 0,da=void 0,ua=void 0,ma=!1,pa=ee({render:oa,staticRenderFns:la},ca,ra,da,ma,ua,!1,void 0,void 0,void 0),ha={name:"CalendarPanel",inject:{prefixClass:{default:"mx"},dispatchDatePicker:{default:function(){return function(){}}}},props:{value:{},defaultValue:{default:function(){var t=new Date;return t.setHours(0,0,0,0),t}},defaultPanel:{type:String},disabledDate:{type:Function,default:function(){return!1}},type:{type:String,default:"date"},getClasses:{type:Function,default:function(){return[]}},showWeekNumber:{type:Boolean,default:void 0},getYearPanel:{type:Function},titleFormat:{type:String,default:"YYYY-MM-DD"},calendar:Date,partialUpdate:{type:Boolean,default:!1}},data:function(){var t=["date","month","year"],e=Math.max(t.indexOf(this.type),t.indexOf(this.defaultPanel)),a=-1!==e?t[e]:"date";return{panel:a,innerCalendar:new Date}},computed:{innerValue:function(){var t=Array.isArray(this.value)?this.value:[this.value],e={year:Pt,month:Rt,date:Mt},a=e[this.type]||e.date;return t.filter($t).map((function(t){return a(t)}))},calendarYear:function(){return this.innerCalendar.getFullYear()},calendarMonth:function(){return this.innerCalendar.getMonth()}},watch:{value:{immediate:!0,handler:"initCalendar"},calendar:{handler:"initCalendar"},defaultValue:{handler:"initCalendar"}},methods:{initCalendar:function(){var t=this.calendar;if(!$t(t)){var e=this.innerValue.length;t=qt(e>0?this.innerValue[e-1]:this.defaultValue)}this.innerCalendar=Rt(t)},isDisabled:function(t){return this.disabledDate(new Date(t),this.innerValue)},emitDate:function(t,e){this.isDisabled(t)||(this.$emit("select",t,e,this.innerValue),this.dispatchDatePicker("pick",t,e))},handleCalendarChange:function(t,e){var a=new Date(this.innerCalendar);this.innerCalendar=t,this.$emit("update:calendar",t),this.dispatchDatePicker("calendar-change",t,a,e)},handelPanelChange:function(t){var e=this.panel;this.panel=t,this.dispatchDatePicker("panel-change",t,e)},handleSelectYear:function(t){if("year"===this.type){var e=this.getYearCellDate(t);this.emitDate(e,"year")}else if(this.handleCalendarChange(Dt(t,this.calendarMonth),"year"),this.handelPanelChange("month"),this.partialUpdate&&1===this.innerValue.length){var a=new Date(this.innerValue[0]);a.setFullYear(t),this.emitDate(a,"year")}},handleSelectMonth:function(t){if("month"===this.type){var e=this.getMonthCellDate(t);this.emitDate(e,"month")}else if(this.handleCalendarChange(Dt(this.calendarYear,t),"month"),this.handelPanelChange("date"),this.partialUpdate&&1===this.innerValue.length){var a=new Date(this.innerValue[0]);a.setFullYear(this.calendarYear),this.emitDate(It(a,t),"month")}},handleSelectDate:function(t){this.emitDate(t,"week"===this.type?"week":"date")},getMonthCellDate:function(t){return Dt(this.calendarYear,t)},getYearCellDate:function(t){return Dt(t,0)},getDateClasses:function(t){var e=t.getMonth()!==this.calendarMonth,a=[];t.getTime()===(new Date).setHours(0,0,0,0)&&a.push("today"),e&&a.push("not-current-month");var s=this.getStateClass(t);return"active"===s&&e||a.push(s),a.concat(this.getClasses(t,this.innerValue,a.join(" ")))},getMonthClasses:function(t){if("month"!==this.type)return this.calendarMonth===t?"active":"";var e=[],a=this.getMonthCellDate(t);return e.push(this.getStateClass(a)),e.concat(this.getClasses(a,this.innerValue,e.join(" ")))},getYearClasses:function(t){if("year"!==this.type)return this.calendarYear===t?"active":"";var e=[],a=this.getYearCellDate(t);return e.push(this.getStateClass(a)),e.concat(this.getClasses(a,this.innerValue,e.join(" ")))},getStateClass:function(t){return this.isDisabled(t)?"disabled":this.innerValue.some((function(e){return e.getTime()===t.getTime()}))?"active":""},getWeekState:function(t){if("week"!==this.type)return"";var e=t[0].getTime(),a=t[6].getTime(),s=this.innerValue.some((function(t){var s=t.getTime();return s>=e&&s<=a}));return s?"".concat(this.prefixClass,"-active-week"):""}},render:function(){var t=arguments[0],e=this.panel,a=this.innerCalendar;return"year"===e?t(pa,{attrs:{calendar:a,getCellClasses:this.getYearClasses,getYearPanel:this.getYearPanel},on:{select:this.handleSelectYear,changecalendar:this.handleCalendarChange}}):"month"===e?t(na,{attrs:{calendar:a,getCellClasses:this.getMonthClasses},on:{select:this.handleSelectMonth,changepanel:this.handelPanelChange,changecalendar:this.handleCalendarChange}}):t(Qe,{class:rt({},"".concat(this.prefixClass,"-calendar-week-mode"),"week"===this.type),attrs:{calendar:a,getCellClasses:this.getDateClasses,getRowClasses:this.getWeekState,titleFormat:this.titleFormat,showWeekNumber:"boolean"===typeof this.showWeekNumber?this.showWeekNumber:"week"===this.type},on:{select:this.handleSelectDate,changepanel:this.handelPanelChange,changecalendar:this.handleCalendarChange}})}},fa={name:"CalendarRange",components:{CalendarPanel:ha},provide:function(){return{onDateMouseEnter:this.onDateMouseEnter,onDateMouseLeave:this.onDateMouseLeave}},inject:{prefixClass:{default:"mx"}},props:ct({},ha.props),data:function(){return{innerValue:[],calendars:[],hoveredValue:null}},computed:{calendarMinDiff:function(){var t={date:1,month:12,year:120};return t[this.type]||t.date},calendarMaxDiff:function(){return 1/0},defaultValues:function(){return Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue,this.defaultValue]}},watch:{value:{immediate:!0,handler:function(){var t=this;this.innerValue=Tt(this.value)?this.value:[new Date(NaN),new Date(NaN)];var e=this.innerValue.map((function(e,a){return Rt(qt(e,t.defaultValues[a]))}));this.updateCalendars(e)}}},methods:{handleSelect:function(t,e){var a=mt(this.innerValue,2),s=a[0],n=a[1];$t(s)&&!$t(n)?(s.getTime()>t.getTime()?this.innerValue=[t,s]:this.innerValue=[s,t],this.emitDate(this.innerValue,e)):this.innerValue=[t,new Date(NaN)]},onDateMouseEnter:function(t){this.hoveredValue=t},onDateMouseLeave:function(){this.hoveredValue=null},emitDate:function(t,e){this.$emit("select",t,e)},updateStartCalendar:function(t){this.updateCalendars([t,this.calendars[1]],1)},updateEndCalendar:function(t){this.updateCalendars([this.calendars[0],t],0)},updateCalendars:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.getCalendarGap(t);if(a){var s=new Date(t[e]);s.setMonth(s.getMonth()+(0===e?-a:a)),t[e]=s}this.calendars=t},getCalendarGap:function(t){var e=mt(t,2),a=e[0],s=e[1],n=s.getFullYear()-a.getFullYear(),i=s.getMonth()-a.getMonth(),r=12*n+i,o=this.calendarMinDiff,l=this.calendarMaxDiff;return r<o?o-r:r>l?l-r:0},getRangeClasses:function(t,e,a){var s=[].concat(this.getClasses(t,e,a));if(/disabled|active/.test(a))return s;var n=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t.getTime()},s=a(t),n=e.map(a),i=mt(n,2),r=i[0],o=i[1];if(r>o){var l=[o,r];r=l[0],o=l[1]}return s>r&&s<o};return 2===e.length&&n(t,e)?s.concat("in-range"):1===e.length&&this.hoveredValue&&n(t,[e[0],this.hoveredValue])?s.concat("hover-in-range"):s}},render:function(){var t=this,e=arguments[0],a=this.calendars.map((function(a,s){var n=ct({},t.$props,{calendar:a,value:t.innerValue,defaultValue:t.defaultValues[s],getClasses:t.getRangeClasses,partialUpdate:!1}),i={select:t.handleSelect,"update:calendar":0===s?t.updateStartCalendar:t.updateEndCalendar};return e("calendar-panel",{props:ct({},n),on:ct({},i)})})),s=this.prefixClass;return e("div",{class:"".concat(s,"-range-wrapper")},[a])}};function ba(){if("undefined"===typeof window)return 0;if(void 0!==ae)return ae;var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=document.createElement("div");return e.style.width="100%",t.appendChild(e),ae=t.offsetWidth-e.offsetWidth,t.parentNode.removeChild(t),ae}var va={inject:{prefixClass:{default:"mx"}},data:function(){return{scrollbarWidth:0,thumbTop:"",thumbHeight:""}},created:function(){this.scrollbarWidth=ba(),document.addEventListener("mouseup",this.handleDragend)},beforeDestroy:function(){document.addEventListener("mouseup",this.handleDragend)},mounted:function(){this.$nextTick(this.getThumbSize)},methods:{getThumbSize:function(){var t=this.$refs.wrap;if(t){var e=100*t.clientHeight/t.scrollHeight;this.thumbHeight=e<100?"".concat(e,"%"):""}},handleScroll:function(t){var e=t.currentTarget,a=e.scrollHeight,s=e.scrollTop;this.thumbTop="".concat(100*s/a,"%")},handleDragstart:function(t){t.stopImmediatePropagation(),this._draggable=!0;var e=this.$refs.thumb.offsetTop;this._prevY=t.clientY-e,document.addEventListener("mousemove",this.handleDraging)},handleDraging:function(t){if(this._draggable){var e=t.clientY,a=this.$refs.wrap,s=a.scrollHeight,n=a.clientHeight,i=e-this._prevY,r=i*s/n;a.scrollTop=r}},handleDragend:function(){this._draggable&&(this._draggable=!1,document.removeEventListener("mousemove",this.handleDraging))}}},Ca=va,ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.prefixClass+"-scrollbar",style:{position:"relative",overflow:"hidden"}},[a("div",{ref:"wrap",class:t.prefixClass+"-scrollbar-wrap",style:{marginRight:"-"+t.scrollbarWidth+"px"},on:{scroll:t.handleScroll}},[t._t("default")],2),t._v(" "),a("div",{class:t.prefixClass+"-scrollbar-track"},[a("div",{ref:"thumb",class:t.prefixClass+"-scrollbar-thumb",style:{height:t.thumbHeight,top:t.thumbTop},on:{mousedown:t.handleDragstart}})])])},ga=[],wa=void 0,_a=void 0,xa=void 0,ka=!1,Da=ee({render:ya,staticRenderFns:ga},wa,Ca,_a,ka,xa,!1,void 0,void 0,void 0),$a=function(t){return t=parseInt(t,10),t<10?"0".concat(t):"".concat(t)},Ta=function(t,e,a){if(Array.isArray(a))return a.filter((function(e){return e>=0&&e<t}));e<=0&&(e=1);for(var s=[],n=0;n<t;n+=e)s.push(n);return s},Aa=function t(e,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(s<=0)requestAnimationFrame((function(){e.scrollTop=a}));else{var n=a-e.scrollTop,i=n/s*10;requestAnimationFrame((function(){var n=e.scrollTop+i;n>=a?e.scrollTop=a:(e.scrollTop=n,t(e,a,s-10))}))}},qa={name:"ListColumns",components:{ScrollbarVertical:Da},inject:{prefixClass:{default:"mx"}},props:{date:Date,scrollDuration:{type:Number,default:100},getClasses:{type:Function,default:function(){return[]}},hourOptions:Array,minuteOptions:Array,secondOptions:Array,showHour:{type:Boolean,default:!0},showMinute:{type:Boolean,default:!0},showSecond:{type:Boolean,default:!0},hourStep:{type:Number,default:1},minuteStep:{type:Number,default:1},secondStep:{type:Number,default:1},use12h:{type:Boolean,default:!1}},computed:{columns:function(){var t=[];return this.showHour&&t.push({type:"hour",list:this.getHoursList()}),this.showMinute&&t.push({type:"minute",list:this.getMinutesList()}),this.showSecond&&t.push({type:"second",list:this.getSecondsList()}),this.use12h&&t.push({type:"ampm",list:this.getAMPMList()}),t.filter((function(t){return t.list.length>0}))}},watch:{date:{handler:function(){var t=this;this.$nextTick((function(){t.scrollToSelected(t.scrollDuration)}))}}},mounted:function(){this.scrollToSelected(0)},methods:{getHoursList:function(){var t=this;return Ta(this.use12h?12:24,this.hourStep,this.hourOptions).map((function(e){var a=new Date(t.date),s=$a(e);t.use12h&&(0===e&&(s="12"),a.getHours()>=12&&(e+=12));var n=a.setHours(e);return{value:n,text:s}}))},getMinutesList:function(){var t=this;return Ta(60,this.minuteStep,this.minuteOptions).map((function(e){var a=new Date(t.date).setMinutes(e);return{value:a,text:$a(e)}}))},getSecondsList:function(){var t=this;return Ta(60,this.secondStep,this.secondOptions).map((function(e){var a=new Date(t.date).setSeconds(e);return{value:a,text:$a(e)}}))},getAMPMList:function(){var t=this;return["AM","PM"].map((function(e,a){var s=new Date(t.date),n=s.setHours(s.getHours()%12+12*a);return{text:e,value:n}}))},scrollToSelected:function(t){for(var e=this.$el.querySelectorAll(".active"),a=0;a<e.length;a++){var s=e[a],n=Xt(s,this.$el);if(n){var i=s.offsetTop;Aa(n,i,t)}}},handleSelect:function(t){var e=t.target,a=t.currentTarget;if("LI"===e.tagName.toUpperCase()){var s=a.getAttribute("data-type"),n=parseInt(a.getAttribute("data-index"),10),i=parseInt(e.getAttribute("data-index"),10),r=this.columns[n].list[i].value;this.$emit("select",r,s)}}}},Pa=qa,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.prefixClass+"-time-columns"},t._l(t.columns,(function(e,s){return a("scrollbar-vertical",{key:s,class:t.prefixClass+"-time-column"},[a("ul",{class:t.prefixClass+"-time-list",attrs:{"data-type":e.type,"data-index":s},on:{click:t.handleSelect}},t._l(e.list,(function(s,n){return a("li",{key:s.value,class:[t.prefixClass+"-time-item",t.getClasses(s.value,e.type)],attrs:{"data-index":n}},[t._v("\n        "+t._s(s.text)+"\n      ")])})),0)])})),1)},Ma=[],Sa=void 0,Ia=void 0,Ba=void 0,Na=!1,Ea=ee({render:Ra,staticRenderFns:Ma},Sa,Pa,Ia,Na,Ba,!1,void 0,void 0,void 0);function Ya(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split(":");if(e.length>=2){var a=parseInt(e[0],10),s=parseInt(e[1],10);return{hours:a,minutes:s}}return null}var Oa=function(t,e){t&&(t.scrollTop=e)},Fa={name:"ListOptions",components:{ScrollbarVertical:Da},inject:{getLocale:{default:function(){return Qt}},prefixClass:{default:"mx"}},props:{date:Date,options:{type:[Object,Function],default:function(){return[]}},format:{type:String,default:"HH:mm:ss"},getClasses:{type:Function,default:function(){return[]}}},computed:{list:function(){var t=[],e=this.options;if("function"===typeof e)return e()||[];var a=Ya(e.start),s=Ya(e.end),n=Ya(e.step),i=e.format||this.format;if(a&&s&&n)for(var r=a.minutes+60*a.hours,o=s.minutes+60*s.hours,l=n.minutes+60*n.hours,c=Math.floor((o-r)/l),d=0;d<=c;d++){var u=r+d*l,m=Math.floor(u/60),p=u%60,h=new Date(this.date).setHours(m,p,0);t.push({value:h,text:this.formatDate(h,i)})}return t}},mounted:function(){this.scrollToSelected()},methods:{formatDate:function(t,e){return v(t,e,{locale:this.getLocale().formatLocale})},scrollToSelected:function(){var t=this.$el.querySelector(".active");if(t){var e=Xt(t,this.$el);if(e){var a=t.offsetTop;Oa(e,a)}}},handleSelect:function(t){this.$emit("select",t,"time")}}},Va=Fa,Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scrollbar-vertical",t._l(t.list,(function(e){return a("div",{key:e.value,class:[t.prefixClass+"-time-option",t.getClasses(e.value)],on:{click:function(a){return t.handleSelect(e.value)}}},[t._v("\n    "+t._s(e.text)+"\n  ")])})),0)},La=[],Wa=void 0,ja=void 0,Ka=void 0,za=!1,Ha=ee({render:Ua,staticRenderFns:La},Wa,Va,ja,za,Ka,!1,void 0,void 0,void 0),Qa={name:"TimePanel",components:{ListColumns:Ea,ListOptions:Ha},inject:{getLocale:{default:function(){return Qt}},prefixClass:{default:"mx"}},props:{value:{},defaultValue:{default:function(){var t=new Date;return t.setHours(0,0,0,0),t}},format:{default:"HH:mm:ss"},timeTitleFormat:{type:String,default:"YYYY-MM-DD"},showTimeHeader:{type:Boolean,default:!1},disabledTime:{type:Function,default:function(){return!1}},timePickerOptions:{type:[Object,Function],default:function(){return null}},hourOptions:Array,minuteOptions:Array,secondOptions:Array,hourStep:{type:Number,default:1},minuteStep:{type:Number,default:1},secondStep:{type:Number,default:1},showHour:{type:Boolean,default:void 0},showMinute:{type:Boolean,default:void 0},showSecond:{type:Boolean,default:void 0},use12h:{type:Boolean,default:void 0},scrollDuration:{type:Number,default:100}},data:function(){return{innerValue:qt(this.value,this.defaultValue)}},computed:{title:function(){var t=this.timeTitleFormat,e=new Date(this.innerValue);return this.formatDate(e,t)},innerForamt:function(){return"string"===typeof this.format?this.format:"HH:mm:ss"},ShowHourMinuteSecondAMPM:function(){var t=this,e=this.innerForamt,a={showHour:/[HhKk]/.test(e),showMinute:/m/.test(e),showSecond:/s/.test(e),use12h:/a/i.test(e)},s={};return Object.keys(a).forEach((function(e){s[e]="boolean"===typeof t[e]?t[e]:a[e]})),s}},watch:{value:{immediate:!0,handler:function(){this.innerValue=qt(this.value,this.defaultValue)}}},methods:{formatDate:function(t,e){return v(t,e,{locale:this.getLocale().formatLocale})},isDisabledTime:function(t){return this.disabledTime(new Date(t))},isDisabledHour:function(t){var e=new Date(t);return this.isDisabledTime(e)&&this.isDisabledTime(e.setMinutes(0,0,0))&&this.isDisabledTime(e.setMinutes(59,59,999))},isDisabledMinute:function(t){var e=new Date(t);return this.isDisabledTime(e)&&this.isDisabledTime(e.setSeconds(0,0))&&this.isDisabledTime(e.setSeconds(59,999))},isDisabledAMPM:function(t){var e=new Date(t),a=e.getHours()<12?0:12,s=a+11;return this.isDisabledTime(e)&&this.isDisabledTime(e.setHours(a,0,0,0))&&this.isDisabledTime(e.setHours(s,59,59,999))},isDisabled:function(t,e){return"hour"===e?this.isDisabledHour(t):"minute"===e?this.isDisabledMinute(t):"ampm"===e?this.isDisabledAMPM(t):this.isDisabledTime(t)},handleSelect:function(t,e){var a=new Date(t);this.isDisabled(t,e)||(this.innerValue=a,this.isDisabledTime(a)||this.$emit("select",a,e))},handleClickTitle:function(){this.$emit("clicktitle")},getClasses:function(t,e){var a=new Date(t);return this.isDisabled(t,e)?"disabled":a.getTime()===this.innerValue.getTime()?"active":""}}},Za=Qa,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.prefixClass+"-time"},[t.showTimeHeader?a("div",{class:t.prefixClass+"-time-header"},[a("button",{class:t.prefixClass+"-btn "+t.prefixClass+"-btn-text "+t.prefixClass+"-time-header-title",attrs:{type:"button"},on:{click:t.handleClickTitle}},[t._v("\n      "+t._s(t.title)+"\n    ")])]):t._e(),t._v(" "),a("div",{class:t.prefixClass+"-time-content"},[t.timePickerOptions?a("list-options",{attrs:{date:t.innerValue,"get-classes":t.getClasses,options:t.timePickerOptions,format:t.innerForamt},on:{select:t.handleSelect}}):a("list-columns",t._b({attrs:{date:t.innerValue,"get-classes":t.getClasses,"hour-options":t.hourOptions,"minute-options":t.minuteOptions,"second-options":t.secondOptions,"hour-step":t.hourStep,"minute-step":t.minuteStep,"second-step":t.secondStep,"scroll-duration":t.scrollDuration},on:{select:t.handleSelect}},"list-columns",t.ShowHourMinuteSecondAMPM,!1))],1)])},Ga=[],Xa=void 0,ts=void 0,es=void 0,as=!1,ss=ee({render:Ja,staticRenderFns:Ga},Xa,Za,ts,as,es,!1,void 0,void 0,void 0),ns={name:"TimeRange",inject:{prefixClass:{default:"mx"}},props:ct({},ss.props),data:function(){return{startValue:new Date(NaN),endValue:new Date(NaN)}},watch:{value:{immediate:!0,handler:function(){if(Tt(this.value)){var t=mt(this.value,2),e=t[0],a=t[1];this.startValue=e,this.endValue=a}else this.startValue=new Date(NaN),this.endValue=new Date(NaN)}}},methods:{emitChange:function(t,e){var a=[this.startValue,this.endValue];this.$emit("select",a,"time"===t?"time-range":t,e)},handleSelectStart:function(t,e){this.startValue=t,this.endValue.getTime()>=t.getTime()||(this.endValue=t),this.emitChange(e,0)},handleSelectEnd:function(t,e){this.endValue=t,this.startValue.getTime()<=t.getTime()||(this.startValue=t),this.emitChange(e,1)},disabledStartTime:function(t){return this.disabledTime(t,0)},disabledEndTime:function(t){return t.getTime()<this.startValue.getTime()||this.disabledTime(t,1)}},render:function(){var t=arguments[0],e=Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue,this.defaultValue],a=this.prefixClass;return t("div",{class:"".concat(a,"-range-wrapper")},[t(ss,{props:ct({},ct({},this.$props,{value:this.startValue,defaultValue:e[0],disabledTime:this.disabledStartTime})),on:ct({},ct({},this.$listeners,{select:this.handleSelectStart}))}),t(ss,{props:ct({},ct({},this.$props,{value:this.endValue,defaultValue:e[1],disabledTime:this.disabledEndTime})),on:ct({},ct({},this.$listeners,{select:this.handleSelectEnd}))})])}},is={name:"DatetimePanel",inject:{prefixClass:{default:"mx"}},emits:["select","update:show-time-panel"],props:ct({},ha.props,{},ss.props,{showTimePanel:{type:Boolean,default:void 0}}),data:function(){return{defaultTimeVisible:!1,currentValue:this.value}},computed:{timeVisible:function(){return"boolean"===typeof this.showTimePanel?this.showTimePanel:this.defaultTimeVisible}},watch:{value:function(t){this.currentValue=t}},methods:{closeTimePanel:function(){this.defaultTimeVisible=!1,this.$emit("update:show-time-panel",!1)},openTimePanel:function(){this.defaultTimeVisible=!0,this.$emit("update:show-time-panel",!0)},emitDate:function(t,e){this.$emit("select",t,e)},handleSelect:function(t,e){"date"===e&&this.openTimePanel();var a=Nt(t,qt(this.value,this.defaultValue));this.disabledTime(new Date(a))&&(a=Nt(t,this.defaultValue),this.disabledTime(new Date(a)))?this.currentValue=a:this.emitDate(a,e)}},render:function(){var t=arguments[0],e={props:ct({},Ot(this.$props,Object.keys(ha.props)),{type:"date",value:this.currentValue}),on:{select:this.handleSelect}},a={props:ct({},Ot(this.$props,Object.keys(ss.props)),{showTimeHeader:!0,value:this.currentValue}),on:{select:this.emitDate,clicktitle:this.closeTimePanel}},s=this.prefixClass;return t("div",[t(ha,kt([{},e])),this.timeVisible&&t(ss,kt([{class:"".concat(s,"-calendar-time")},a]))])}},rs={name:"DatetimeRange",inject:{prefixClass:{default:"mx"}},emits:["select","update:show-time-panel"],props:ct({},fa.props,{},ns.props,{showTimePanel:{type:Boolean,default:void 0}}),data:function(){return{defaultTimeVisible:!1,currentValue:this.value}},computed:{timeVisible:function(){return"boolean"===typeof this.showTimePanel?this.showTimePanel:this.defaultTimeVisible}},watch:{value:function(t){this.currentValue=t}},methods:{closeTimePanel:function(){this.defaultTimeVisible=!1,this.$emit("update:show-time-panel",!1)},openTimePanel:function(){this.defaultTimeVisible=!0,this.$emit("update:show-time-panel",!0)},emitDate:function(t,e){this.$emit("select",t,e)},handleSelect:function(t,e){var a=this;"date"===e&&this.openTimePanel();var s=Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue,this.defaultValue],n=t.map((function(t,e){var n=Tt(a.value)?a.value[e]:s[e];return Nt(t,n)}));n[1].getTime()<n[0].getTime()&&(n=[n[0],n[0]]),n.some(this.disabledTime)&&(n=t.map((function(t,e){return Nt(t,s[e])})),n.some(this.disabledTime))?this.currentValue=n:this.emitDate(n,e)}},render:function(){var t=arguments[0],e={props:ct({},Ot(this.$props,Object.keys(fa.props)),{type:"date",value:this.currentValue}),on:{select:this.handleSelect}},a={props:ct({},Ot(this.$props,Object.keys(ns.props)),{value:this.currentValue,showTimeHeader:!0}),on:{select:this.emitDate,clicktitle:this.closeTimePanel}},s=this.prefixClass;return t("div",[t(fa,kt([{},e])),this.timeVisible&&t(ns,kt([{class:"".concat(s,"-calendar-time")},a]))])}},os={default:ha,time:ss,datetime:is},ls={default:fa,time:ns,datetime:rs},cs={name:"DatePicker",provide:function(){var t=this;return{getLocale:function(){return t.locale},getWeek:this.getWeek,prefixClass:this.prefixClass,dispatchDatePicker:this.$emit.bind(this)}},props:ct({},is.props,{value:{},valueType:{type:String,default:"date"},type:{type:String,default:"date"},format:{type:String},formatter:{type:Object},range:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},rangeSeparator:{type:String},lang:{type:[String,Object]},placeholder:{type:String,default:""},editable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},prefixClass:{type:String,default:"mx"},inputClass:{},inputAttr:{type:Object,default:function(){return{}}},appendToBody:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},popupClass:{},popupStyle:{type:Object,default:function(){return{}}},inline:{type:Boolean,default:!1},confirm:{type:Boolean,default:!1},confirmText:{type:String,default:"OK"},renderInputText:{type:Function},shortcuts:{type:Array,validator:function(t){return Array.isArray(t)&&t.every((function(t){return Yt(t)&&"string"===typeof t.text&&"function"===typeof t.onClick}))},default:function(){return[]}}}),data:function(){return{currentValue:null,userInput:null,defaultOpen:!1}},computed:{popupVisible:function(){return!this.disabled&&("boolean"===typeof this.open?this.open:this.defaultOpen)},innerRangeSeparator:function(){return this.rangeSeparator||(this.multiple?",":" ~ ")},innerFormat:function(){var t={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};return this.format||t[this.type]||t.date},innerValue:function(){var t=this.value;return this.validMultipleType?(t=Array.isArray(t)?t:[],t.map(this.value2date)):this.range?(t=Array.isArray(t)?t.slice(0,2):[null,null],t.map(this.value2date)):this.value2date(t)},text:function(){var t=this;return null!==this.userInput?this.userInput:"function"===typeof this.renderInputText?this.renderInputText(this.innerValue):this.isValidValue(this.innerValue)?Array.isArray(this.innerValue)?this.innerValue.map((function(e){return t.formatDate(e)})).join(this.innerRangeSeparator):this.formatDate(this.innerValue):""},showClearIcon:function(){return!this.disabled&&this.clearable&&this.text},locale:function(){return Yt(this.lang)?Ft(Qt(),this.lang):Qt(this.lang)},validMultipleType:function(){var t=["date","month","year"];return this.multiple&&!this.range&&-1!==t.indexOf(this.type)}},watch:{innerValue:{immediate:!0,handler:function(t){this.currentValue=t}},popupVisible:{handler:function(t){t&&(this.currentValue=this.innerValue)}}},created:function(){"object"===it(this.format)&&console.warn("[vue2-datepicker]: The prop `format` don't support Object any more. You can use the new prop `formatter` to replace it")},methods:{handleClickOutSide:function(t){var e=t.target;this.$el.contains(e)||this.closePopup()},getFormatter:function(t){return Yt(this.formatter)&&this.formatter[t]||Yt(this.format)&&this.format[t]},getWeek:function(t,e){return"function"===typeof this.getFormatter("getWeek")?this.getFormatter("getWeek")(t,e):l(t,e)},parseDate:function(t,e){if(e=e||this.innerFormat,"function"===typeof this.getFormatter("parse"))return this.getFormatter("parse")(t,e);var a=new Date;return nt(t,e,{locale:this.locale.formatLocale,backupDate:a})},formatDate:function(t,e){return e=e||this.innerFormat,"function"===typeof this.getFormatter("stringify")?this.getFormatter("stringify")(t,e):v(t,e,{locale:this.locale.formatLocale})},value2date:function(t){switch(this.valueType){case"date":return t instanceof Date?new Date(t.getTime()):new Date(NaN);case"timestamp":return"number"===typeof t?new Date(t):new Date(NaN);case"format":return"string"===typeof t?this.parseDate(t):new Date(NaN);default:return"string"===typeof t?this.parseDate(t,this.valueType):new Date(NaN)}},date2value:function(t){if(!$t(t))return null;switch(this.valueType){case"date":return t;case"timestamp":return t.getTime();case"format":return this.formatDate(t);default:return this.formatDate(t,this.valueType)}},emitValue:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.userInput=null;var s=Array.isArray(t)?t.map(this.date2value):this.date2value(t);return this.$emit("input",s),this.$emit("change",s,e),a&&this.closePopup(),s},isValidValue:function(t){return this.validMultipleType?At(t):this.range?Tt(t):$t(t)},isValidValueAndNotDisabled:function(t){if(!this.isValidValue(t))return!1;var e="function"===typeof this.disabledDate?this.disabledDate:function(){return!1},a="function"===typeof this.disabledTime?this.disabledTime:function(){return!1};return Array.isArray(t)||(t=[t]),t.every((function(t){return!e(t)&&!a(t)}))},handleMultipleDates:function(t,e){if(this.validMultipleType&&e){var a=e.filter((function(e){return e.getTime()!==t.getTime()}));return a.length===e.length&&a.push(t),a}return t},handleSelectDate:function(t,e,a){t=this.handleMultipleDates(t,a),this.confirm?this.currentValue=t:this.emitValue(t,e,!this.validMultipleType&&(e===this.type||"time"===e))},clear:function(){this.emitValue(this.range?[null,null]:null),this.$emit("clear")},handleClear:function(t){t.stopPropagation(),this.clear()},handleConfirmDate:function(){var t=this.emitValue(this.currentValue);this.$emit("confirm",t)},handleSelectShortcut:function(t){var e=t.currentTarget.getAttribute("data-index"),a=this.shortcuts[parseInt(e,10)];if(Yt(a)&&"function"===typeof a.onClick){var s=a.onClick(this);s&&this.emitValue(s)}},openPopup:function(t){this.popupVisible||this.disabled||(this.defaultOpen=!0,this.$emit("open",t),this.$emit("update:open",!0))},closePopup:function(){this.popupVisible&&(this.defaultOpen=!1,this.$emit("close"),this.$emit("update:open",!1))},blur:function(){this.$refs.input&&this.$refs.input.blur()},focus:function(){this.$refs.input&&this.$refs.input.focus()},handleInputChange:function(){var t=this;if(this.editable&&null!==this.userInput){var e=this.userInput.trim();if(this.userInput=null,""!==e){var a;if(this.validMultipleType)a=e.split(this.innerRangeSeparator).map((function(e){return t.parseDate(e.trim())}));else if(this.range){var s=e.split(this.innerRangeSeparator);2!==s.length&&(s=e.split(this.innerRangeSeparator.trim())),a=s.map((function(e){return t.parseDate(e.trim())}))}else a=this.parseDate(e);this.isValidValueAndNotDisabled(a)?(this.emitValue(a),this.blur()):this.$emit("input-error",e)}else this.clear()}},handleInputInput:function(t){this.userInput="string"===typeof t?t:t.target.value},handleInputKeydown:function(t){var e=t.keyCode;9===e?this.closePopup():13===e&&this.handleInputChange()},handleInputBlur:function(t){this.$emit("blur",t)},handleInputFocus:function(t){this.openPopup(t),this.$emit("focus",t)},hasSlot:function(t){return!(!this.$slots[t]&&!this.$scopedSlots[t])},renderSlot:function(t,e,a){var s=this.$scopedSlots[t];return s?s(a)||e:this.$slots[t]||e},renderInput:function(){var t=this.$createElement,e=this.prefixClass,a=ct({name:"date",type:"text",autocomplete:"off",value:this.text,class:this.inputClass||"".concat(this.prefixClass,"-input"),readonly:!this.editable,disabled:this.disabled,placeholder:this.placeholder},this.inputAttr),s=a.value,n=a.class,i=ut(a,["value","class"]),r={keydown:this.handleInputKeydown,focus:this.handleInputFocus,blur:this.handleInputBlur,input:this.handleInputInput,change:this.handleInputChange},o=this.renderSlot("input",t("input",{domProps:{value:s},class:n,attrs:ct({},i),on:ct({},r),ref:"input"}),{props:a,events:r}),l="time"===this.type?t(ke):t(ve);return t("div",{class:"".concat(e,"-input-wrapper"),on:{mousedown:this.openPopup,touchstart:this.openPopup}},[o,this.showClearIcon?t("i",{class:"".concat(e,"-icon-clear"),on:{mousedown:this.handleClear,touchstart:this.handleClear}},[this.renderSlot("icon-clear",t(Re))]):null,t("i",{class:"".concat(e,"-icon-calendar")},[this.renderSlot("icon-calendar",l)])])},renderContent:function(){var t=this.$createElement,e=this.range?ls:os,a=e[this.type]||e.default,s=ct({},Ot(this.$props,Object.keys(a.props)),{value:this.currentValue}),n=ct({},Ot(this.$listeners,a.emits||[]),{select:this.handleSelectDate}),i=t(a,kt([{},{props:s,on:n,ref:"picker"}]));return t("div",{class:"".concat(this.prefixClass,"-datepicker-body")},[this.renderSlot("content",i,{value:this.currentValue,emit:this.handleSelectDate})])},renderSidebar:function(){var t=this,e=this.$createElement,a=this.prefixClass;return e("div",{class:"".concat(a,"-datepicker-sidebar")},[this.renderSlot("sidebar",null,{value:this.currentValue,emit:this.handleSelectDate}),this.shortcuts.map((function(s,n){return e("button",{key:n,attrs:{"data-index":n,type:"button"},class:"".concat(a,"-btn ").concat(a,"-btn-text ").concat(a,"-btn-shortcut"),on:{click:t.handleSelectShortcut}},[s.text])}))])},renderHeader:function(){var t=this.$createElement;return t("div",{class:"".concat(this.prefixClass,"-datepicker-header")},[this.renderSlot("header",null,{value:this.currentValue,emit:this.handleSelectDate})])},renderFooter:function(){var t=this.$createElement,e=this.prefixClass;return t("div",{class:"".concat(e,"-datepicker-footer")},[this.renderSlot("footer",null,{value:this.currentValue,emit:this.handleSelectDate}),this.confirm?t("button",{attrs:{type:"button"},class:"".concat(e,"-btn ").concat(e,"-datepicker-btn-confirm"),on:{click:this.handleConfirmDate}},[this.confirmText]):null])}},render:function(){var t,e=arguments[0],a=this.prefixClass,s=this.inline,n=this.disabled,i=this.hasSlot("sidebar")||this.shortcuts.length?this.renderSidebar():null,r=e("div",{class:"".concat(a,"-datepicker-content")},[this.hasSlot("header")?this.renderHeader():null,this.renderContent(),this.hasSlot("footer")||this.confirm?this.renderFooter():null]);return e("div",{class:(t={},rt(t,"".concat(a,"-datepicker"),!0),rt(t,"".concat(a,"-datepicker-range"),this.range),rt(t,"".concat(a,"-datepicker-inline"),s),rt(t,"disabled",n),t)},[s?null:this.renderInput(),s?e("div",{class:"".concat(a,"-datepicker-main")},[i,r]):e(de,{ref:"popup",class:this.popupClass,style:this.popupStyle,attrs:{visible:this.popupVisible,appendToBody:this.appendToBody},on:{clickoutside:this.handleClickOutSide}},[i,r])])}};cs.locale=Ht,cs.install=function(t){t.component(cs.name,cs)},"undefined"!==typeof window&&window.Vue&&cs.install(window.Vue),ot(cs,{CalendarPanel:ha,CalendarRange:fa,TimePanel:ss,TimeRange:ns,DatetimePanel:is,DatetimeRange:rs});e["a"]=cs},ed2e:function(t,e,a){"use strict";a("17a3")},edbe:function(t,e,a){"use strict";a("d47b")},f45e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("card",{staticClass:"pt-4",attrs:{id:"textStyle"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-left ml-1 mt-2 mb-2 pt-2"},[a("badge",{staticClass:"badge-dot ml-2 pointer"},["Release"==t.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getItems(t.listType,"Release")}}},[t._v("Release")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["Cleared"==t.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getItems(t.listType,"Cleared")}}},[t._v("Cleared")])]),a("badge",{staticClass:"badge-dot ml-3 pointer"},["All"==t.stat?a("i",{attrs:{id:"activeBadge"}}):a("i",{attrs:{id:"redBg"}}),a("span",{staticClass:"pointer status",attrs:{id:"linkTxt"},on:{click:function(e){return t.getItems(t.listType,"All")}}},[t._v("All")])])],1)]),a("div",{staticClass:"row"},[a("span",{staticClass:"col-sm-2 pb-3 pl-4 text-right"},[a("b",[t._v("Disbursements:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"170px"},attrs:{id:"inputStyle",options:t.listTypes,reduce:function(t){return t.listType},label:"listType",clearable:!1,readonly:""},on:{input:function(e){return t.getItems(t.listType,t.stat)}},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}})],1),a("span",{staticClass:"col-sm-2 pb-3 pl-4 text-right"},[a("b",[t._v("Filter by:")])]),a("span",{staticClass:"col-sm-2 pb-2 text-right"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1,readonly:""},on:{input:function(e){return t.getItems(t.listType,t.stat)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),"month"==t.filter?a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"200px"},attrs:{type:"month",max:t.maxDate,min:"1997-01",id:"inputStyle"},on:{input:function(e){return t.getItems(t.listType,t.stat)}},model:{value:t.dateCreated,callback:function(e){t.dateCreated=e},expression:"dateCreated"}})],1):t._e(),"dateRange"==t.filter?a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"150px"},attrs:{type:"date",max:t.maxDateRange,min:"1997-01-01",id:"inputStyle"},on:{input:function(e){return t.getItems(t.listType,t.stat)}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1):t._e(),"dateRange"==t.filter?a("span",{staticClass:"col-sm-2 pl-0"},[a("base-input",{staticClass:"pb-2",staticStyle:{width:"150px"},attrs:{type:"date",max:t.maxDateRange,min:"1997-01-01",id:"inputStyle"},on:{input:function(e){return t.getItems(t.listType,t.stat)}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1):t._e()]),a("div",{staticClass:"table-full-width"},[a("vue-good-table",{attrs:{columns:t.columns,rows:t.items,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["voucherNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.voucherNumber))])]):t._e(),"amount"==e.column.field?a("span",[a("span",{staticClass:"tableSpan"},[t._v("₱ "+t._s(e.row.amount))])]):t._e(),"transactionDate"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.transactionDate,"MMM DD, YYYY")))])]):t._e(),"status"==e.column.field?a("span",[1==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("RELEASE")]):t._e(),2==e.row.status?a("span",{attrs:{id:"sideBarTxt"}},[t._v("CLEARED")]):t._e()]):t._e()])]}}])})],1),a("hr",{staticClass:"mb-2 mt-2"}),!t.loading&&t.items.length?a("div",{staticClass:"row pl-4 mt-2 mb-2"},[a("div",{staticClass:"col-9"}),a("span",{staticClass:"col-1 pt-2"},[a("b",[t._v("View:")])]),a("span",{staticClass:"col-sm-2"},[a("v-select",{attrs:{id:"inputStyle",options:t.views,reduce:function(t){return t.limitId},label:"limit",clearable:!1},on:{input:function(e){return t.getItems(t.listType,t.stat)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]):t._e(),a("hr",{staticClass:"mb-2 mt-2"}),a("div",{staticClass:"text-right pt-2"},[0!=t.items.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:t.exportItem}},[t._v("Export")]):t._e(),0!=t.items.length?a("base-button",{staticClass:"col-md-3 ml-2 mr-2",attrs:{id:"darkBtn"},on:{click:t.printItem}},[t._v("Print")]):t._e()],1)])],1)],1)},n=[],i=(a("4de4"),a("4160"),a("b680"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("add5"),l=a.n(o),c=a("68a2"),d=a("c1df"),u=a("e966"),m=u.bindWith(",","."),p={components:{},data:function(){return{columns:[{label:"Voucher No.",field:"voucherNumber"},{label:"Amount",field:"amount"},{label:"Transaction Date",field:"transactionDate"},{label:"Status",field:"status"}],loading:!1,items:[],requestProcessing:!1,views:[{limitId:"20",limit:"20 Records"},{limitId:"50",limit:"50 Records"},{limitId:"all",limit:"All Records"}],limit:"20",listTypes:[{listType:"Cash"},{listType:"Loan"},{listType:"Refund"},{listType:"Remittance"}],filters:[{filterId:"month",filter:"Month"},{filterId:"dateRange",filter:"Date Range"}],filter:"month",dateCreated:d().format("YYYY-MM"),startDate:d().subtract(6,"days").format("YYYY-MM-DD"),endDate:d().format("YYYY-MM-DD"),maxDate:d().format("YYYY-MM"),maxDateRange:d().format("YYYY-MM-DD"),listType:"Cash",stat:"Release"}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getItems(t.listType,t.stat);case 1:case"end":return e.stop()}}),e)})))()},methods:{getItems:function(t,e){var a=this,s=null,n=[],i=[],o=[],l=[],c="",u="";a.loading=!0,a.items=[],a.listType=t,a.stat=e,"Release"==e?l.push(1):"Cleared"==e?l.push(2):"All"==e&&(l.push(1),l.push(2)),"month"==a.filter?(c=d(a.dateCreated).startOf("month").format("YYYY-MM-DD"),u=d(a.dateCreated).endOf("month").format("YYYY-MM-DD")):"dateRange"==a.filter&&(c=d(a.startDate).format("YYYY-MM-DD"),u=d(a.endDate).format("YYYY-MM-DD")),"Cash"==t?(o=r["dbMains"].collection("cashDisbursementTypes"),"all"!=a.limit?s=r["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l).limit(a.limit):"all"==a.limit&&(s=r["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l))):"Loan"==t?"all"!=a.limit?s=r["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l).limit(a.limit):"all"==a.limit&&(s=r["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l)):"Refund"==t?"all"!=a.limit?s=r["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l).limit(a.limit):"all"==a.limit&&(s=r["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l)):"Remittance"==t&&(o=r["dbMains"].collection("remittanceDisbursementTypes"),"all"!=a.limit?s=r["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l).limit(a.limit):"all"==a.limit&&(s=r["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",c).where("transactionDate","<=",u).where("status","in",l))),s.get().then((function(e){if(!e.empty){e.forEach((function(t){i.push(t.data()),n.push(t.id)}));var s=r["dbMains"].collection("chartOfAccounts"),l=r["dbMains"].collection("businessTypes"),c=[],d=[],u=[];"Cash"==t?o.get().then((function(e){e.forEach((function(t){c.push(t.data())})),s.get().then((function(e){e.forEach((function(t){d.push(t.data())})),l.get().then((function(e){e.forEach((function(t){u.push(t.data())}));for(var s=0;s<i.length;s++){if(i[s]["id"]=n[s],i[s]["type"]="",i[s]["coa"]="",i[s]["businessType"]="",i[s].amount=m(parseFloat(i[s].amount.replaceAll(",","")).toFixed(2)),a.items.push(i[s]),"Cash"==t)for(var r=0;r<c.length;r++)c[r].cashDisbursementTypeId==i[s].disbursementTypeReference&&(i[s].type=c[r].type);for(var o=0;o<d.length;o++)d[o].accountId==i[s].accountReference&&(i[s].coa=d[o].account);for(var l=0;l<u.length;l++)u[l].businessTypeId==i[s].businessTypeReference&&(i[s].businessType=u[l].type)}}))}))})):"Loan"==t||"Refund"==t?s.get().then((function(t){t.forEach((function(t){d.push(t.data())})),l.get().then((function(t){t.forEach((function(t){u.push(t.data())}));for(var e=0;e<i.length;e++){i[e]["id"]=n[e],i[e]["type"]="",i[e]["coa"]="",i[e]["businessType"]="",i[e].amount=m(parseFloat(i[e].amount.replaceAll(",","")).toFixed(2)),a.items.push(i[e]);for(var s=0;s<d.length;s++)d[s].accountId==i[e].accountReference&&(i[e].coa=d[s].account);for(var r=0;r<u.length;r++)u[r].businessTypeId==i[e].businessTypeReference&&(i[e].businessType=u[r].type)}}))})):"Remittance"==t&&o.get().then((function(e){e.forEach((function(t){c.push(t.data())})),s.get().then((function(e){e.forEach((function(t){d.push(t.data())})),l.get().then((function(e){e.forEach((function(t){u.push(t.data())}));for(var s=0;s<i.length;s++){if(i[s]["id"]=n[s],i[s]["type"]="",i[s]["coa"]="",i[s]["businessType"]="",i[s].amount=m(parseFloat(i[s].amount.replaceAll(",","")).toFixed(2)),a.items.push(i[s]),"Cash"==t)for(var r=0;r<c.length;r++)c[r].remittanceDisbursementTypeId==i[s].remittanceTypeReference&&(i[s].type=c[r].type);for(var o=0;o<d.length;o++)d[o].accountId==i[s].accountReference&&(i[s].coa=d[o].account);for(var l=0;l<u.length;l++)u[l].businessTypeId==i[s].businessTypeReference&&(i[s].businessType=u[l].type)}}))}))}))}setTimeout((function(){a.loading=!1}),1e3)}))},printItem:function(){var t=this,e=null,a=[],s=[],n=[],i=[],o="",c="",u=[],p=[],h="",f="";"Release"==t.stat?i.push(1):"Cleared"==t.stat?i.push(2):"All"==t.stat&&(i.push(1),i.push(2)),"month"==t.filter?(o=d(t.dateCreated).startOf("month").format("YYYY-MM-DD"),c=d(t.dateCreated).endOf("month").format("YYYY-MM-DD"),f=d(o).format("MMMM YYYY")):"dateRange"==t.filter&&(o=d(t.startDate).format("YYYY-MM-DD"),c=d(t.endDate).format("YYYY-MM-DD"),f=d(o).format("MMMM DD, YYYY")+" to "+d(c).format("MMMM DD, YYYY")),"Cash"==t.listType?(n=r["dbMains"].collection("cashDisbursementTypes"),"all"!=t.limit?e=r["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i).limit(t.limit):"all"==t.limit&&(e=r["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i))):"Loan"==t.listType?"all"!=t.limit?e=r["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i).limit(t.limit):"all"==t.limit&&(e=r["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i)):"Refund"==t.listType?"all"!=t.limit?e=r["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i).limit(t.limit):"all"==t.limit&&(e=r["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i)):"Remittance"==t.listType&&(n=r["dbMains"].collection("remittanceDisbursementTypes"),"all"!=t.limit?e=r["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i).limit(t.limit):"all"==t.limit&&(e=r["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",o).where("transactionDate","<=",c).where("status","in",i))),e.get().then((function(e){if(!e.empty){e.forEach((function(t){s.push(t.data()),a.push(t.id)}));var i=r["dbMains"].collection("chartOfAccounts"),o=r["dbMains"].collection("businessTypes"),c=[],b=[],v=[];if("Cash"==t.listType)n.get().then((function(t){t.forEach((function(t){c.push(t.data())})),i.get().then((function(t){t.forEach((function(t){b.push(t.data())})),o.get().then((function(t){t.forEach((function(t){v.push(t.data())}));for(var e=0;e<s.length;e++){s[e]["id"]=a[e],s[e]["type"]="",s[e]["coa"]="",s[e]["businessType"]="",s[e].amount=m(parseFloat(s[e].amount.replaceAll(",","")).toFixed(2)),1==s[e].status?s[e]["stat"]="Release":2==s[e].status&&(s[e]["stat"]="Cleared");for(var n=0;n<c.length;n++)c[n].cashDisbursementTypeId==s[e].disbursementTypeReference&&(s[e].type=c[n].type);for(var i=0;i<b.length;i++)b[i].accountId==s[e].accountReference&&(s[e].coa=b[i].account);for(var r=0;r<v.length;r++)v[r].businessTypeId==s[e].businessTypeReference&&(s[e].businessType=v[r].type);u.push(s[e])}p=[{field:"voucherNumber",displayName:"Voucher No."},{field:"transactionDate",displayName:"Trans. Date"},{field:"payeeName",displayName:"Payee"},{field:"amount",displayName:"Amount"},{field:"type",displayName:"Type"},{field:"coa",displayName:"Account"},{field:"businessType",displayName:"Business"},{field:"stat",displayName:"Status"}],h="Cash Disbursement",l()({printable:u,properties:p,type:"json",header:"<h2>"+h+"</h2><br><h4>DATE: "+f+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:h+" "+d().format("MMMM YYYY")})}))}))}));else if("Loan"==t.listType){var C=r["dbMains"].collection("banks"),y=r["dbMains"].collection("bankAccounts"),g=[],w=[];C.get().then((function(t){t.forEach((function(t){g.push(t.data())})),y.get().then((function(t){t.forEach((function(t){w.push(t.data())})),i.get().then((function(t){t.forEach((function(t){b.push(t.data())})),o.get().then((function(t){t.forEach((function(t){v.push(t.data())}));for(var e=0;e<s.length;e++){s[e]["id"]=a[e],s[e]["bank"]="",s[e]["account"]="",s[e]["coa"]="",s[e]["businessType"]="",s[e].amount=m(parseFloat(s[e].amount.replaceAll(",","")).toFixed(2)),1==s[e].status?s[e]["stat"]="Release":2==s[e].status&&(s[e]["stat"]="Cleared");for(var n=0;n<g.length;n++)g[n].bankUid==s[e].bankReference&&(s[e].bank=g[n].bank);for(var i=0;i<w.length;i++)w[i].bankAccountUid==s[e].bankAccountReference&&(s[e].account=w[i].bankAccountNumber);for(var r=0;r<b.length;r++)b[r].accountId==s[e].accountReference&&(s[e].coa=b[r].account);for(var o=0;o<v.length;o++)v[o].businessTypeId==s[e].businessTypeReference&&(s[e].businessType=v[o].type);u.push(s[e])}p=[{field:"voucherNumber",displayName:"Voucher No."},{field:"transactionDate",displayName:"Trans. Date"},{field:"bank",displayName:"Bank"},{field:"account",displayName:"Account No."},{field:"amount",displayName:"Amount"},{field:"coa",displayName:"Account"},{field:"businessType",displayName:"Business"},{field:"stat",displayName:"Status"}],h="Loan Disbursement",l()({printable:u,properties:p,type:"json",header:"<h2>"+h+"</h2><br><h4>DATE: "+f+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:h+" "+d().format("MMMM YYYY")})}))}))}))}))}else"Refund"==t.listType?i.get().then((function(t){t.forEach((function(t){b.push(t.data())})),o.get().then((function(t){t.forEach((function(t){v.push(t.data())}));for(var e=0;e<s.length;e++){s[e]["id"]=a[e],s[e]["coa"]="",s[e]["businessType"]="",s[e].amount=m(parseFloat(s[e].amount.replaceAll(",","")).toFixed(2)),1==s[e].status?s[e]["stat"]="Release":2==s[e].status&&(s[e]["stat"]="Cleared");for(var n=0;n<b.length;n++)b[n].accountId==s[e].accountReference&&(s[e].coa=b[n].account);for(var i=0;i<v.length;i++)v[i].businessTypeId==s[e].businessTypeReference&&(s[e].businessType=v[i].type);u.push(s[e])}p=[{field:"voucherNumber",displayName:"Voucher No."},{field:"transactionDate",displayName:"Trans. Date"},{field:"refundDate",displayName:"Refund Date"},{field:"amount",displayName:"Amount"},{field:"issue",displayName:"Issue"},{field:"coa",displayName:"Account"},{field:"businessType",displayName:"Business"},{field:"stat",displayName:"Status"}],h="Refund Disbursement",l()({printable:u,properties:p,type:"json",header:"<h2>"+h+"</h2><br><h4>DATE: "+f+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:h+" "+d().format("MMMM YYYY")})}))})):"Remittance"==t.listType&&n.get().then((function(t){t.forEach((function(t){c.push(t.data())})),i.get().then((function(t){t.forEach((function(t){b.push(t.data())})),o.get().then((function(t){t.forEach((function(t){v.push(t.data())}));for(var e=0;e<s.length;e++){s[e]["id"]=a[e],s[e]["type"]="",s[e]["coa"]="",s[e]["businessType"]="",s[e].amount=m(parseFloat(s[e].amount.replaceAll(",","")).toFixed(2)),1==s[e].status?s[e]["stat"]="Release":2==s[e].status&&(s[e]["stat"]="Cleared");for(var n=0;n<c.length;n++)c[n].remittanceDisbursementTypeId==s[e].remittanceTypeReference&&(s[e].type=c[n].type);for(var i=0;i<b.length;i++)b[i].accountId==s[e].accountReference&&(s[e].coa=b[i].account);for(var r=0;r<v.length;r++)v[r].businessTypeId==s[e].businessTypeReference&&(s[e].businessType=v[r].type);u.push(s[e])}p=[{field:"voucherNumber",displayName:"Voucher No."},{field:"transactionDate",displayName:"Trans. Date"},{field:"name",displayName:"Name"},{field:"amount",displayName:"Amount"},{field:"type",displayName:"Type"},{field:"coa",displayName:"Account"},{field:"businessType",displayName:"Business"},{field:"stat",displayName:"Status"}],h="Remittance Disbursement",l()({printable:u,properties:p,type:"json",header:"<h2>"+h+"</h2><br><h4>DATE: "+f+"<h4>",style:'td { text-align: center; } body { font-family: "Calibri"; }',documentTitle:h+" "+d().format("MMMM YYYY")})}))}))}))}}))},exportItem:function(){var t=new c["b"],e=this,a=null,s=[],n=[],i=[],o=[],l="",u="",p=[],h=[],f="";"Release"==e.stat?o.push(1):"Cleared"==e.stat?o.push(2):"All"==e.stat&&(o.push(1),o.push(2)),"month"==e.filter?(l=d(e.dateCreated).startOf("month").format("YYYY-MM-DD"),u=d(e.dateCreated).endOf("month").format("YYYY-MM-DD"),f=d(l).format("MMMM YYYY")):"dateRange"==e.filter&&(l=d(e.startDate).format("YYYY-MM-DD"),u=d(e.endDate).format("YYYY-MM-DD"),f=d(l).format("MMMM DD, YYYY")+" to "+d(u).format("MMMM DD, YYYY")),"Cash"==e.listType?(i=r["dbMains"].collection("cashDisbursementTypes"),"all"!=e.limit?a=r["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o).limit(e.limit):"all"==e.limit&&(a=r["dbUsers"].collection("cashDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o))):"Loan"==e.listType?"all"!=e.limit?a=r["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o).limit(e.limit):"all"==e.limit&&(a=r["dbUsers"].collection("loanDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o)):"Refund"==e.listType?"all"!=e.limit?a=r["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o).limit(e.limit):"all"==e.limit&&(a=r["dbUsers"].collection("refundDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o)):"Remittance"==e.listType&&(i=r["dbMains"].collection("remittanceDisbursementTypes"),"all"!=e.limit?a=r["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o).limit(e.limit):"all"==e.limit&&(a=r["dbUsers"].collection("remittanceDisbursements").where("transactionDate",">=",l).where("transactionDate","<=",u).where("status","in",o))),a.get().then((function(a){if(!a.empty){a.forEach((function(t){n.push(t.data()),s.push(t.id)}));var o=r["dbMains"].collection("chartOfAccounts"),l=r["dbMains"].collection("businessTypes"),u=[],b=[],v=[];if("Cash"==e.listType)i.get().then((function(e){e.forEach((function(t){u.push(t.data())})),o.get().then((function(e){e.forEach((function(t){b.push(t.data())})),l.get().then((function(e){e.forEach((function(t){v.push(t.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=s[a],n[a]["type"]="",n[a]["coa"]="",n[a]["businessType"]="",n[a].amount=m(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2));for(var i=0;i<u.length;i++)u[i].cashDisbursementTypeId==n[a].disbursementTypeReference&&(n[a].type=u[i].type);for(var r=0;r<b.length;r++)b[r].accountId==n[a].accountReference&&(n[a].coa=b[r].account);for(var o=0;o<v.length;o++)v[o].businessTypeId==n[a].businessTypeReference&&(n[a].businessType=v[o].type);p.push(n[a])}h=[{name:"Number",key:"num",width:10},{key:"voucherNumber",name:"Voucher No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"transactionDate",name:"Trans. Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"payeeName",name:"Payee",width:28,style:{alignment:c["a"].middleCenter}},{key:"amount",name:"Amount",width:18,style:{alignment:c["a"].middleCenter}},{key:"type",name:"Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"coa",name:"Account",width:18,style:{alignment:c["a"].middleCenter}},{key:"businessType",name:"Business",width:18,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var l={fileName:"Cash Disbursement ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Cash Disbursement",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Cash Disbursement: ("+f+")",headerDefinition:h}}}]},C=[],y=0;y<p.length;y++)p[y]["num"]=y+1,1==p[y].status?p[y]["stat"]="Release":2==p[y].status&&p[y]["stat"];C.push({data:p}),t.downloadExcel(l,C)}))}))}));else if("Loan"==e.listType){var C=r["dbMains"].collection("banks"),y=r["dbMains"].collection("bankAccounts"),g=[],w=[];C.get().then((function(e){e.forEach((function(t){g.push(t.data())})),y.get().then((function(e){e.forEach((function(t){w.push(t.data())})),o.get().then((function(e){e.forEach((function(t){b.push(t.data())})),l.get().then((function(e){e.forEach((function(t){v.push(t.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=s[a],n[a]["bank"]="",n[a]["account"]="",n[a]["coa"]="",n[a]["businessType"]="",n[a].amount=m(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2)),1==n[a].status?n[a]["stat"]="Release":2==n[a].status&&(n[a]["stat"]="Cleared");for(var i=0;i<g.length;i++)g[i].bankUid==n[a].bankReference&&(n[a].bank=g[i].bank);for(var r=0;r<w.length;r++)w[r].bankAccountUid==n[a].bankAccountReference&&(n[a].account=w[r].bankAccountNumber);for(var o=0;o<b.length;o++)b[o].accountId==n[a].accountReference&&(n[a].coa=b[o].account);for(var l=0;l<v.length;l++)v[l].businessTypeId==n[a].businessTypeReference&&(n[a].businessType=v[l].type);p.push(n[a])}h=[{name:"Number",key:"num",width:10},{key:"voucherNumber",name:"Voucher No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"transactionDate",name:"Trans. Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"bank",name:"Bank",width:28,style:{alignment:c["a"].middleCenter}},{key:"account",name:"Account No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"paymentType",name:"Payment Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"checkReference",name:"Check No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"amount",name:"Amount",width:18,style:{alignment:c["a"].middleCenter}},{key:"coa",name:"Account",width:18,style:{alignment:c["a"].middleCenter}},{key:"businessType",name:"Business Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var u={fileName:"Loan Disbursement ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Loan Disbursement",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Loan Disbursement: ("+f+")",headerDefinition:h}}}]},C=[],y=0;y<p.length;y++)p[y]["num"]=y+1,1==p[y].status?p[y]["stat"]="Release":2==p[y].status&&p[y]["stat"];C.push({data:p}),t.downloadExcel(u,C)}))}))}))}))}else"Refund"==e.listType?o.get().then((function(e){e.forEach((function(t){b.push(t.data())})),l.get().then((function(e){e.forEach((function(t){v.push(t.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=s[a],n[a]["coa"]="",n[a]["businessType"]="",n[a].amount=m(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2));for(var i=0;i<b.length;i++)b[i].accountId==n[a].accountReference&&(n[a].coa=b[i].account);for(var r=0;r<v.length;r++)v[r].businessTypeId==n[a].businessTypeReference&&(n[a].businessType=v[r].type);p.push(n[a])}h=[{name:"Number",key:"num",width:10},{key:"voucherNumber",name:"Voucher No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"transactionDate",name:"Trans. Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"refundDate",name:"Refund Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"amount",name:"Amount",width:18,style:{alignment:c["a"].middleCenter}},{key:"particular",name:"Particular",width:28,style:{alignment:c["a"].middleCenter}},{key:"issue",name:"Issue",width:28,style:{alignment:c["a"].middleCenter}},{key:"coa",name:"Account",width:18,style:{alignment:c["a"].middleCenter}},{key:"businessType",name:"Business",width:18,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var o={fileName:"Refund Disbursement ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Refund Disbursement",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Refund Disbursement: ("+f+")",headerDefinition:h}}}]},l=[],u=0;u<p.length;u++)p[u]["num"]=u+1,1==p[u].status?p[u]["stat"]="Release":2==p[u].status&&p[u]["stat"];l.push({data:p}),t.downloadExcel(o,l)}))})):"Remittance"==e.listType&&i.get().then((function(e){e.forEach((function(t){u.push(t.data())})),o.get().then((function(e){e.forEach((function(t){b.push(t.data())})),l.get().then((function(e){e.forEach((function(t){v.push(t.data())}));for(var a=0;a<n.length;a++){n[a]["id"]=s[a],n[a]["type"]="",n[a]["coa"]="",n[a]["businessType"]="",n[a].amount=m(parseFloat(n[a].amount.replaceAll(",","")).toFixed(2));for(var i=0;i<u.length;i++)u[i].remittanceDisbursementTypeId==n[a].remittanceTypeReference&&(n[a].type=u[i].type);for(var r=0;r<b.length;r++)b[r].accountId==n[a].accountReference&&(n[a].coa=b[r].account);for(var o=0;o<v.length;o++)v[o].businessTypeId==n[a].businessTypeReference&&(n[a].businessType=v[o].type);p.push(n[a])}h=[{name:"Number",key:"num",width:10},{key:"voucherNumber",name:"Voucher No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"transactionDate",name:"Trans. Date",width:18,style:{alignment:c["a"].middleCenter}},{key:"idNumber",name:"ID Number",width:18,style:{alignment:c["a"].middleCenter}},{key:"amount",name:"Amount",width:18,style:{alignment:c["a"].middleCenter}},{key:"name",name:"Name",width:38,style:{alignment:c["a"].middleCenter}},{key:"description",name:"Description",width:18,style:{alignment:c["a"].middleCenter}},{key:"email",name:"Email",width:28,style:{alignment:c["a"].middleCenter}},{key:"contactNumber",name:"Contact Number",width:18,style:{alignment:c["a"].middleCenter}},{key:"penalty",name:"Penalty Amount",width:18,style:{alignment:c["a"].middleCenter}},{key:"paymentType",name:"Payment Type",width:18,style:{alignment:c["a"].middleCenter}},{key:"checkReference",name:"Check No.",width:18,style:{alignment:c["a"].middleCenter}},{key:"type",name:"Type",width:28,style:{alignment:c["a"].middleCenter}},{key:"coa",name:"Account",width:18,style:{alignment:c["a"].middleCenter}},{key:"businessType",name:"Business",width:18,style:{alignment:c["a"].middleCenter}},{key:"stat",name:"Status",width:18,style:{alignment:c["a"].middleCenter}}];for(var l={fileName:"Remittance Disbursement ("+d().format("MMM DD, YYYY")+")",workSheets:[{sheetName:"Remittance Disbursement",startingRowNumber:2,gapBetweenTwoTables:2,tableSettings:{data:{importable:!0,tableTitle:"Remittance Disbursement: ("+f+")",headerDefinition:h}}}]},C=[],y=0;y<p.length;y++)p[y]["num"]=y+1,1==p[y].status?p[y]["stat"]="Release":2==p[y].status&&p[y]["stat"];C.push({data:p}),t.downloadExcel(l,C)}))}))}))}}))}}},h=p,f=(a("aa1c"),a("2877")),b=Object(f["a"])(h,s,n,!1,null,null,null);e["default"]=b.exports},f4aa:function(t,e,a){},f4b4:function(t,e,a){"use strict";a("9b36")},f642:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textStyle"}},[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Reconcile Transaction"}},[a("card",[a("div",{staticClass:"card-header bg-transparent pb-2"},[a("div",{staticClass:"row pt-2 mb-1"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Choose Bank:")])]),a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Number:")])])]),a("div",{staticClass:"row mb-2"},[a("span",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.activateBanks,reduce:function(t){return t.bankUid},label:"bank",clearable:!1},on:{input:function(e){return t.getActivateBankAccounts(t.bank)}},model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}}),t.$v.bank.$anyDirty&&!t.$v.bank.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1),""==t.activateBankAccounts?a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("span",{staticClass:"text-red"},[t._v("No Bank Account")])]):a("div",{staticClass:"col-sm-6 pl-5 pr-5"},[a("v-select",{attrs:{id:"inputStyle",options:t.activateBankAccounts,reduce:function(t){return t.bankAccountUid},label:"bankAccountNumber",clearable:!1},on:{input:function(e){return t.getBankRecon(1,"")}},model:{value:t.bankAccount,callback:function(e){t.bankAccount=e},expression:"bankAccount"}}),t.$v.bankAccount.$anyDirty&&!t.$v.bankAccount.required?a("i",{staticClass:"text-danger"},[t._v("Field Required")]):t._e()],1)]),a("div",{staticClass:"row mb-1"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Account Balance: ")])])]),a("div",{staticClass:"row mb-1"},[a("span",{staticClass:"col-sm-6 pl-5 pr-5"},[t._v("₱ "+t._s(t.bankAccountBalance))])]),a("hr"),a("div",{staticClass:"row pt-2 mb-1"},[a("span",{staticClass:"col-sm-6"},[a("b",[t._v("Filter by:")])]),"checkDate"==t.filter?a("span",{staticClass:"col-sm-3"},[a("b",[t._v("Start Date:")])]):t._e(),"checkDate"==t.filter?a("span",{staticClass:"col-sm-3"},[a("b",[t._v("End Date:")])]):t._e()]),a("div",{staticClass:"row mb-0 pt-2"},[a("span",{staticClass:"col-sm-3 pl-5 pr-5"},[a("v-select",{staticStyle:{width:"220px"},attrs:{id:"inputStyle",options:t.status,reduce:function(t){return t.statusId},label:"status",clearable:!1},on:{input:function(e){return t.getBankRecon(1,"")}},model:{value:t.stat,callback:function(e){t.stat=e},expression:"stat"}})],1),a("span",{staticClass:"col-sm-3 pl-5 pr-5"},[a("v-select",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",options:t.filters,reduce:function(t){return t.filterId},label:"filter",clearable:!1},on:{input:function(e){return t.getBankRecon(1,"")}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),"checkDate"==t.filter?a("span",{staticClass:"col-sm-3 pl-5 pr-5"},["checkDate"==t.filter?a("base-input",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",type:"date",min:"1997-01-01"},on:{input:function(e){return t.getBankRecon(1,"")}},model:{value:t.dateStart,callback:function(e){t.dateStart=e},expression:"dateStart"}}):t._e()],1):t._e(),"checkDate"==t.filter?a("span",{staticClass:"col-sm-3 pl-5 pr-5"},["checkDate"==t.filter?a("base-input",{staticStyle:{width:"150px"},attrs:{id:"inputStyle",type:"date",min:"1997-01-01"},on:{input:function(e){return t.getBankRecon(1,"")}},model:{value:t.dateEnd,callback:function(e){t.dateEnd=e},expression:"dateEnd"}}):t._e()],1):t._e()])]),a("vue-good-table",{ref:"recon-trans-table",attrs:{columns:t.columns,rows:t.bankReconChecks,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,15,20]},"sort-options":{enabled:!0,initialSortBy:{field:"bankCheckDate",type:"asc"}},"line-numbers":!0,isLoading:t.loading},scopedSlots:t._u([{key:"table-row",fn:function(e){return[a("b",["bankCheckDate"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(e.row.bankCheckDate,"MMM DD, YYYY")))])]):t._e(),"bankCheckNumber"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bankCheckNumber))])]):t._e(),"supplier"==e.column.field?a("span",t._l(t.suppliers,(function(s){return a("span",{key:s.supplierId},[s.supplierId==e.row.payeeReference?a("span",[t._v(t._s(s.supplier))]):t._e()])})),0):t._e(),"bankCheckAmount"==e.column.field?a("span",[a("span",[t._v(t._s(e.row.bankCheckAmount))])]):t._e(),"dateNegotiated"==e.column.field?a("span",[a("span",[t._v(t._s(t._f("moment")(void 0==e.row.dateNegotiated||""==e.row.dateNegotiated?"---------":e.row.dateNegotiated,"MMM DD, YYYY")))])]):t._e(),"status"==e.column.field?a("span",[1==e.row.status?a("span",[t._v("For clearing")]):t._e(),4==e.row.status?a("span",[t._v("For approval")]):t._e(),2==e.row.status?a("span",{attrs:{id:"redTxt"}},[t._v("CLEARED")]):t._e()]):t._e(),"action"==e.column.field?a("span",[1==e.row.status?a("span",{staticClass:"pointer ml-2 far fa-check-circle",attrs:{id:"sideBarTxt",title:"Clear check?"},on:{click:function(a){return t.openApprovalCheck(e.row)}}}):t._e(),4==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-up",attrs:{id:"sideBarTxt",title:"Clear check?"},on:{click:function(a){return t.openClearCheck(e.row)}}}):t._e(),4==e.row.status?a("span",{staticClass:"pointer ml-2 fa fa-thumbs-down",attrs:{id:"sideBarTxt",title:"Reject?"},on:{click:function(a){return t.rejectRecon(e.row)}}}):t._e()]):t._e()])]}}])}),t.bankReconChecks.length>0?a("hr",{staticClass:"mb-2 mt-2"}):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"}),a("div",{staticClass:"col-sm-3"},[t.bankReconChecks.length>0?a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(e){return t.printBankRecons()}}},[t._v("Print")]):t._e()],1),a("div",{staticClass:"col-sm-3"},[a("base-button",{attrs:{block:"",id:"darkBtn"},nativeOn:{click:function(e){return t.accountTransView()}}},[t._v("Account Transaction")])],1)])],1)],1),a("tab-pane",{attrs:{title:"Account Deposits"}},[a("bank-account-fund")],1),a("tab-pane",{attrs:{title:"Account Withdrawals"}},[a("bank-account-withdrawal")],1)],1),a("b-modal",{attrs:{size:"md",id:"approval-check-modal",title:"",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.approvalRecon(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("approval-check-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Date Negotiated:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"date",id:"inputStyle"},model:{value:t.newDateNego,callback:function(e){t.newDateNego=e},expression:"newDateNego"}}),t.$v.newDateNego.$anyDirty&&!t.$v.newDateNego.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"auth-modal",title:"Authentication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.adminAuth(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.closeAuthModal(e)}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Password:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"password",id:"inputStyle"},model:{value:t.checkPassword,callback:function(e){t.checkPassword=e},expression:"checkPassword"}}),t.$v.checkPassword.$anyDirty&&!t.$v.checkPassword.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])]),a("b-modal",{attrs:{size:"md",id:"auth-clear-check-modal",title:"Authentication",centered:"","hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("div",{staticClass:"text-right"},[a("base-button",{attrs:{id:"darkBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.clearCheckAuth(e)}}},[t.requestProcessing?a("i",{staticClass:"fa fa-spinner fa-spin"}):t._e(),t._v(" Submit ")]),a("base-button",{attrs:{id:"darkInlineBtn",disabled:t.requestProcessing},nativeOn:{click:function(e){return t.$bvModal.hide("auth-clear-check-modal")}}},[t._v("Close")])],1)])]},proxy:!0}])},[a("div",{staticClass:"form-group row mb-0"},[a("label",{staticClass:"col-sm-12 col-form-label"},[a("b",[t._v("Password:")]),a("b",{staticClass:"text-red"},[t._v("*")])])]),a("div",{staticClass:"form-group row mb-0"},[a("div",{staticClass:"col-sm-12 pl-5 pr-5"},[a("base-input",{attrs:{type:"password",id:"inputStyle"},model:{value:t.clearCheckPassword,callback:function(e){t.clearCheckPassword=e},expression:"clearCheckPassword"}}),t.$v.clearCheckPassword.$anyDirty&&!t.$v.clearCheckPassword.required?a("i",{staticClass:"text-red"},[t._v("Field Required")]):t._e()],1)])])],1)],1)},n=[],i=(a("99af"),a("4de4"),a("4160"),a("b680"),a("d3b7"),a("25f0"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o=a("b5ae"),l=a("add5"),c=a.n(l),d=["#","Check Date","Check No.","Check Payee","Amount","Date Negotiated","Status","Actions"],u=new Date,m=a("323d"),p=a("c1df"),h=a("e966"),f=h.bindWith(",","."),b={components:{},data:function(){return{columns:[{label:"Check Date",field:"bankCheckDate"},{label:"Check No.",field:"bankCheckNumber"},{label:"Check Payee",field:"supplier"},{label:"Amount",field:"bankCheckAmount"},{label:"Date Negotiated",field:"dateNegotiated"},{label:"Status",field:"status"},{label:"",field:"action",sortable:!1,width:"100px"}],loading:!1,loadError:!1,bankReconCheckTable:{title:"Reconcile Checks",subTitle:"",columns:[].concat(d)},bankReconChecks:[],bankReconChecksCount:0,currentPage:1,bankRecons:[],bankReconId:"",searchTerm:"",searching:!1,requestProcessing:!1,activateBanks:[],activateBankAccounts:[],status:[{statusId:"clearing",status:"For clearing"},{statusId:"forApproval",status:"For approval"},{statusId:"cleared",status:"Cleared"},{statusId:"all",status:"All"}],stat:"clearing",filters:[{filterId:"checkDate",filter:"Check Date"},{filterId:"all",filter:"All"}],filter:"checkDate",dateStart:p().startOf("week").format("YYYY-MM-DD"),dateEnd:p().endOf("week").format("YYYY-MM-DD"),maxDate:p().format("YYYY-MM-DD"),bank:"",bankAccount:"",checkId:"",newDateNego:p().format("YYYY-MM-DD"),checkPassword:"",clearCheckPassword:"",printRecons:[],bankAccountBalance:""}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$bvModal.show("auth-modal"),t.getActivateBanks(),t.getSuppliers(),t.getBankRecon(1,"");case 4:case"end":return e.stop()}}),e)})))()},validations:{bank:{required:o["required"]},bankAccount:{required:o["required"]},newDateNego:{required:o["required"]},checkPassword:{required:o["required"]},clearCheckPassword:{required:o["required"]}},methods:{accountTransView:function(){this.$router.push("/account/transaction")},closePage:function(){this.$router.push("/check/dashboard")},closeAuthModal:function(){this.$router.push("/main/home"),this.$bvModal.hide("auth-modal")},adminAuth:function(){var t=this,e=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],s=[];e.get().then((function(e){if(e.empty)e.empty&&t.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.closeAuthModal()}));else{e.forEach((function(t){a.push(t.data())}));var n=r["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference);n.get().then((function(e){e.empty?e.empty&&t.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.closeAuthModal()})):(e.forEach((function(t){s.push(t.data())})),"Administrator"==s[0].userRole||"Manager"==s[0].userRole?m.verify(t.checkPassword,a[0].password)?(t.getBankRecon(1,""),t.$bvModal.hide("auth-modal")):t.$swal({title:"Error",text:"Invalid password.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}):t.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.closeAuthModal()})))}))}}))},getActivateBanks:function(){var t=this,e=r["dbMains"].collection("banks").orderBy("bank","asc");t.activateBanks=[],e.get().then((function(e){e.forEach((function(e){t.activateBanks.push(e.data())})),t.bank=t.activateBanks[0].bankUid,t.getActivateBankAccounts(t.activateBanks[0].bankUid)}))},getActivateBankAccounts:function(t){var e=this,a=r["dbMains"].collection("bankAccounts").where("bankReference","==",t);e.activateBankAccounts=[],e.bankAccount="",a.get().then((function(t){t.forEach((function(t){e.activateBankAccounts.push(t.data())})),0!=e.activateBankAccounts.length&&(e.bankAccount=e.activateBankAccounts[0].bankAccountUid),e.getBankRecon(1,"")}))},getSuppliers:function(){var t=this,e=r["db"].collection("suppliers").orderBy("supplier","asc");t.suppliers=[],e.get().then((function(e){e.forEach((function(e){t.suppliers.push(e.data())}))}))},onPageChange:function(t){var e=this.searchTerm;this.getBankRecon(t,e)},getBankRecon:function(t,e){var a=this,s=[];if(a.bankReconChecks=[],a.printRecons=[],a.$v.bank.$touch(),a.$v.bankAccount.$touch(),!a.$v.bank.$error&&!a.$v.bankAccount.$error){var n=[],i=[],o=null,l=r["dbMains"].collection("bankAccounts").where("bankAccountUid","==",a.bankAccount);if(l.get().then((function(t){t.forEach((function(t){i.push(t.data())})),""!=i[0].accountBalance&&i[0].accountBalance>0?a.bankAccountBalance=f(parseFloat(i[0].accountBalance).toFixed(2)):a.bankAccountBalance="----------"})),e&&(a.searching=!0),e)e=e.toString(),o=r["db"].collection("bankChecks").where("bankCheckNumber","==",e.toString()).where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount);else if("clearing"==a.stat){var c=p(a.dateStart).format("YYYY-MM-DD"),d=p(a.dateEnd).format("YYYY-MM-DD");"all"==a.filter?o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("status","in",[1]).orderBy("bankCheckDate","desc"):"checkDate"==a.filter&&(o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("bankCheckDate",">=",c).where("bankCheckDate","<=",d).where("status","in",[1]).orderBy("bankCheckDate","desc"))}else if("forApproval"==a.stat){var u=p(a.dateStart).format("YYYY-MM-DD"),m=p(a.dateEnd).format("YYYY-MM-DD");"all"==a.filter?o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("status","in",[4]).orderBy("bankCheckDate","desc"):"checkDate"==a.filter&&(o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("bankCheckDate",">=",u).where("bankCheckDate","<=",m).where("status","in",[4]).orderBy("bankCheckDate","desc"))}else if("cleared"==a.stat){var h=p(a.dateStart).format("YYYY-MM-DD"),b=p(a.dateEnd).format("YYYY-MM-DD");"all"==a.filter?o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("status","in",[2]).orderBy("bankCheckDate","desc"):"checkDate"==a.filter&&(o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("bankCheckDate",">=",h).where("bankCheckDate","<=",b).where("status","in",[2]).orderBy("bankCheckDate","desc"))}else if("all"==a.stat){var v=p(a.dateStart).format("YYYY-MM-DD"),C=p(a.dateEnd).format("YYYY-MM-DD");"all"==a.filter?o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("status","in",[1,2]).orderBy("bankCheckDate","desc"):"checkDate"==a.filter&&(o=r["db"].collection("bankChecks").where("bankReference","==",a.bank).where("bankAccountReference","==",a.bankAccount).where("bankCheckDate",">=",v).where("bankCheckDate","<=",C).where("status","in",[1,2]).orderBy("bankCheckDate","desc"))}o.get().then((function(e){if(!e.empty){e.forEach((function(t){n.push(t.data()),a.printRecons.push(t.data()),s.push(t.id)}));for(var i=0;i<n.length;i++)n[i]["id"]=s[i];for(var r=0;r<n.length;r++)n[r]["rowNum"]=r+1,n[r].bankCheckAmount="₱ "+f(parseFloat(n[r].bankCheckAmount).toFixed(2)),a.bankReconChecks.push(n[r]);a.bankReconChecksCount=n.length,a.currentPage=t,setTimeout((function(){a.loading=!1}),1e3)}}))}a.loading=!1},search:function(){var t=this.searchTerm;t&&this.getBankRecon(1,t)},reloadData:function(){this.searchTerm="",this.searching=!1,this.getBankRecon(1,"")},resetData:function(){this.searching=!1,""==this.searchTerm&&this.getBankRecon(1,"")},openApprovalCheck:function(t){this.checkId=t.bankCheckUid,this.$bvModal.show("approval-check-modal")},approvalRecon:function(){var t=this;t.requestProcessing=!1,t.$v.newDateNego.$touch(),t.$v.newDateNego.$error||t.$swal({title:"Are you sure?",text:"You want to change this check status to for approval?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(e){if(e.value){var a=r["db"].collection("bankChecks").where("bankCheckUid","==",t.checkId),s="";t.requestProcessing=!0,a.get().then((function(e){e.forEach((function(t){s=t.id})),r["db"].collection("bankChecks").doc(s).update({dateNegotiated:t.newDateNego,status:4,dateModified:u}).then((function(){t.$refs["recon-trans-table"].reset(),t.getBankRecon(1,""),t.$swal({title:"Success",text:"Check status changed to for approval",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"}),t.$bvModal.hide("approval-check-modal")})).catch((function(e){console.log(e),t.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))})),t.requestProcessing=!1}}))},rejectRecon:function(t){var e=this;e.requestProcessing=!1,e.$swal({title:"Are you sure?",text:"You want to change this check status to for clearing?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var s=r["db"].collection("bankChecks").where("bankCheckUid","==",t.bankCheckUid),n="";e.requestProcessing=!0,s.get().then((function(t){t.forEach((function(t){n=t.id})),r["db"].collection("bankChecks").doc(n).update({dateNegotiated:"",status:1,dateModified:u}).then((function(){e.$refs["recon-trans-table"].reset(),e.getBankRecon(1,""),e.$swal({title:"Success",text:"Check status changed to for clearing",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))})),e.requestProcessing=!1}}))},clearedRecon:function(t){var e=this;e.requestProcessing=!1,e.$swal({title:"Are you sure?",text:"You want to cleared this check?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#b80000",cancelButtonColor:"#f5c71a",confirmButtonText:"CONFIRM",cancelButtonText:"CANCEL"}).then((function(a){if(a.value){var s=r["db"].collection("bankChecks").where("bankCheckUid","==",t),n=r["dbMains"].collection("bankAccounts").where("bankAccountUid","==",e.bankAccount),i="",o="",l="",c="",d=0;e.requestProcessing=!0,s.get().then((function(t){t.forEach((function(t){i=t.id,o=parseFloat(t.data().bankCheckAmount.replaceAll(",",""))})),n.get().then((function(t){t.forEach((function(t){l=t.id,c=parseFloat(t.data().accountBalance.replaceAll(",",""))})),d=c>0&&c>=o?c-o:c,r["db"].collection("bankChecks").doc(i).update({status:2,dateModified:u}).then((function(){r["dbMains"].collection("bankAccounts").doc(l).update({accountBalance:parseFloat(d).toFixed(2),dateModified:u}).then((function(){e.bankAccountBalance=d>0?f(parseFloat(d).toFixed(2)):"----------"})),e.$refs["recon-trans-table"].reset(),e.getBankRecon(1,""),e.$swal({title:"Success",text:"Check cleared",icon:"success",confirmButtonColor:"#b80000",confirmButtonText:"OK"})})).catch((function(t){console.log(t),e.$swal({title:"Error",text:"Something went wrong. Please try again.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"})}))}))})),e.requestProcessing=!1}}))},printBankRecons:function(){var t=this,e="",a="",s="",n="";"all"!=t.filter&&(n="<h5>Check Date Range: "+p(t.dateStart).format("MMM DD, YYYY")+" to "+p(t.dateEnd).format("MMM DD, YYYY")+"</h5>");for(var i=0;i<t.printRecons.length;i++)t.printRecons[i].bankCheckAmount.replaceAll(",",""),t.printRecons[i].bankCheckAmount.replaceAll("₱",""),t.printRecons[i].bankCheckAmount.replaceAll(" ",""),t.printRecons[i].bankCheckAmount="₱ "+f(parseFloat(t.printRecons[i].bankCheckAmount).toFixed(2)),1==t.printRecons[i].status?t.printRecons[i]["checkStat"]="For Clearing":2==t.printRecons[i].status&&(t.printRecons[i]["checkStat"]="Cleared"),void 0==t.printRecons[i].dateNegotiated?t.printRecons[i]["date"]="----------":t.printRecons[i]["date"]=t.printRecons[i].dateNegotiated;for(var r=0;r<t.activateBanks.length;r++)t.activateBanks[r].bankUid==t.bank&&(e=t.activateBanks[r].bank);for(var o=0;o<t.activateBankAccounts.length;o++)t.activateBankAccounts[o].bankAccountUid==t.bankAccount&&(a=t.activateBankAccounts[o].bankAccountNumber,s=t.activateBankAccounts[o].bankAccountName);c()({printable:t.printRecons,properties:[{field:"bankCheckDate",displayName:"Check Date"},{field:"bankCheckNumber",displayName:"Check Number"},{field:"bankCheckAmount",displayName:"Amount"},{field:"date",displayName:"Date Negotiated"},{field:"checkStat",displayName:"Status"}],type:"json",header:"<h2>"+e+" RECONCILE TRANSACTION</h2><h4>Account: "+a+" ("+s+")</h4>"+n,style:'td {text-align: center;} body {font-family: "Calibri";}',documentTitle:e+" Reconcile Transaction"})},openClearCheck:function(t){this.checkId=t.bankCheckUid,this.$bvModal.show("auth-clear-check-modal")},clearCheckAuth:function(){var t=this,e=r["dbUsers"].collection("users").where("username","==",localStorage.getItem("aisname")),a=[],s=[];e.get().then((function(e){if(e.empty)e.empty&&t.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$bvModal.hide("auth-clear-check-modal"),t.clearCheckPassword=""}));else{e.forEach((function(t){a.push(t.data())}));var n=r["dbUsers"].collection("userRoles").where("userRoleId","==",a[0].userRoleReference);n.get().then((function(e){e.empty?e.empty&&t.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$bvModal.hide("auth-clear-check-modal"),t.clearCheckPassword=""})):(e.forEach((function(t){s.push(t.data())})),"Administrator"==s[0].userRole?m.verify(t.clearCheckPassword,a[0].password)?(t.clearedRecon(t.checkId),t.$bvModal.hide("auth-clear-check-modal"),t.clearCheckPassword=""):t.$swal({title:"Error",text:"Invalid password.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.clearCheckPassword=""})):t.$swal({title:"Error",text:"You are not authorize.",icon:"error",confirmButtonColor:"#b80000",confirmButtonText:"OK"}).then((function(){t.$bvModal.hide("auth-clear-check-modal"),t.clearCheckPassword=""})))}))}}))}}},v=b,C=(a("f4b4"),a("2877")),y=Object(C["a"])(v,s,n,!1,null,null,null);e["default"]=y.exports},f927:function(t,e,a){"use strict";a("785e")},fdfb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5"}),a("div",{staticClass:"col-12 container-fluid mt--7"},[a("tabs",{staticClass:"flex-column flex-md-row",attrs:{fill:""}},[a("tab-pane",{attrs:{title:"Reimbursements"}},[a("reim-desc")],1),a("tab-pane",{attrs:{title:"Liquidations"}},[a("liquidation-desc")],1),a("tab-pane",{attrs:{title:"Cash Advances"}},[a("cash-advance-type")],1)],1)],1)],1)},n=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),r=a("56d7"),o={components:{},data:function(){return{}},beforeRouteEnter:function(t,e,a){var s=localStorage.getItem("aisname"),n=r["dbUsers"].collection("users").where("username","==",s),i=[];n.get().then((function(t){if(!t.empty){t.forEach((function(t){i.push(t.data())}));var e=r["dbUsers"].collection("userRoles").where("userRoleId","==",i[0].userRoleReference),s=[];e.get().then((function(t){t.forEach((function(t){s.push(t.data())})),"User"==s[0].userRole?a("/main/home"):"Manager"!=s[0].userRole&&"Administrator"!=s[0].userRole||a()}))}}))},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},validations:{},methods:{}},l=o,c=(a("46e7"),a("2877")),d=Object(c["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},fe0c:function(t,e,a){"use strict";a("73b2")}}]);
//# sourceMappingURL=chunk-4c8140ba.c2dc5da4.js.map